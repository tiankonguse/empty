<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Coreseek 4.1 &#21442;&#32771;&#25163;&#20876; / Sphinx 2.0.1-beta</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<style type="text/css">pre.programlisting { background-color: #f0f0f0; padding: 0.5em; margin-left: 2em; margin-right: 2em; }</style>
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" title="Coreseek 4.1 &#21442;&#32771;&#25163;&#20876; / Sphinx 2.0.1-beta"><div class="titlepage"><div><div><h1 class="title">Coreseek 4.1 &#21442;&#32771;&#25163;&#20876; / Sphinx 2.0.1-beta</h1></div>
<div><h2 class="subtitle">Sphinx--&#24378;&#22823;&#30340;&#24320;&#28304;&#20840;&#25991;&#26816;&#32034;&#24341;&#25806;&#65292;Coreseek--&#20813;&#36153;&#24320;&#28304;&#30340;&#20013;&#25991;&#20840;&#25991;&#26816;&#32034;&#24341;&#25806;</h2></div>
<div><p class="copyright">&#29256;&#26435; &copy; 2001-2011 Andrew Aksyonoff</p></div>
<div><p class="copyright">&#29256;&#26435; &copy; 2008-2011 Sphinx Technologies Inc, <a class="ulink" href="http://sphinxsearch.com" target="_top">http://sphinxsearch.com</a></p></div>
<div><p class="copyright">&#29256;&#26435; &copy; 2006-2011 &#36873;&#25321;&#36719;&#20214;&#65288;<a class="ulink" href="http://www.coreseek.cn" target="_top">Coreseek</a>&#65289;, nzinfo, <code class="email">&lt;<a class="email" href="mailto:li.monan(at)gmail.com">li.monan(at)gmail.com</a>&gt;</code>, HonestQiao, <code class="email">&lt;<a class="email" href="mailto:honestqiao(at)gmail.com">honestqiao(at)gmail.com</a>&gt;</code></p></div>
<div><div class="legalnotice" title="&#26412;&#22320;&#21270;&#26381;&#21153;"><p class="legalnotice-title"><b>&#26412;&#22320;&#21270;&#26381;&#21153;</b></p><p>
	&#20013;&#25991;&#25216;&#26415;&#25903;&#25345;&#65306;<a class="ulink" href="http://www.coreseek.cn/contact/" target="_top">http://www.coreseek.cn/contact/</a>
	</p><p>
	&#20013;&#25991;&#25991;&#26723;&#32763;&#35793;&#65306;<a class="ulink" href="http://www.coreseek.cn/products-install/#doc_cn" target="_top">http://www.coreseek.cn/products-install/#doc_cn</a>
	</p></div></div></div>
<hr></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="chapter"><a href="#intro">1. &#31616;&#20171;</a></span></dt>
<dd><dl><dt><span class="sect1"><a href="#about">1.1. &#20160;&#20040;&#26159;CoreSeek/Sphinx</a></span></dt>
<dt><span class="sect1"><a href="#features">1.2. CoreSeek/Sphinx &#30340;&#29305;&#24615;</a></span></dt>
<dt><span class="sect1"><a href="#getting">1.3. &#22914;&#20309;&#24471;&#21040;CoreSeek/Sphinx</a></span></dt>
<dt><span class="sect1"><a href="#license">1.4. &#35768;&#21487;&#21327;&#35758;</a></span></dt>
<dt><span class="sect1"><a href="#credits">1.5. &#20316;&#32773;&#21644;&#36129;&#29486;&#32773;</a></span></dt>
<dt><span class="sect1"><a href="#history">1.6. &#21382;&#21490;</a></span></dt>
</dl></dd><dt><span class="chapter"><a href="#installation">2. &#23433;&#35013;</a></span></dt>
<dd><dl><dt><span class="sect1"><a href="#supported-system">2.1. &#25903;&#25345;&#30340;&#25805;&#20316;&#31995;&#32479;</a></span></dt>
<dt><span class="sect1"><a href="#required-tools">2.2. &#38656;&#35201;&#30340;&#24037;&#20855;</a></span></dt>
<dt><span class="sect1"><a href="#installing">2.3. &#22312;Linux&#12289;BSD&#19978;&#23433;&#35013;CoreSeek/Sphinx</a></span></dt>
<dt><span class="sect1"><a href="#installing-windows">2.4. &#22312;Windows&#19978;&#23433;&#35013;CoreSeek/Sphinx</a></span></dt>
<dt><span class="sect1"><a href="#install-problems">2.5. &#24050;&#30693;&#30340;&#23433;&#35013;&#38382;&#39064;&#21644;&#35299;&#20915;&#21150;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#quick-tour">2.6. CoreSeek/Sphinx&#24555;&#36895;&#20837;&#38376;&#25945;&#31243;</a></span></dt>
</dl></dd><dt><span class="chapter"><a href="#indexing">3. &#24314;&#31435;&#32034;&#24341;</a></span></dt>
<dd><dl><dt><span class="sect1"><a href="#sources">3.1. &#25968;&#25454;&#28304;</a></span></dt>
<dt><span class="sect1"><a href="#attributes">3.2. &#23646;&#24615;</a></span></dt>
<dt><span class="sect1"><a href="#mva">3.3. MVA (&#22810;&#20540;&#23646;&#24615;)</a></span></dt>
<dt><span class="sect1"><a href="#indexes">3.4. &#32034;&#24341;</a></span></dt>
<dt><span class="sect1"><a href="#data-restrictions">3.5. &#28304;&#25968;&#25454;&#30340;&#38480;&#21046;</a></span></dt>
<dt><span class="sect1"><a href="#charsets">3.6. &#23383;&#31526;&#38598;&#12289;&#22823;&#23567;&#20889;&#36716;&#25442;&#21644;&#36716;&#25442;&#34920;</a></span></dt>
<dt><span class="sect1"><a href="#sql">3.7. SQL &#25968;&#25454;&#28304; (MySQL, PostgreSQL)</a></span></dt>
<dt><span class="sect1"><a href="#xmlpipe">3.8. xmlpipe &#25968;&#25454;&#28304;</a></span></dt>
<dt><span class="sect1"><a href="#xmlpipe2">3.9. xmlpipe2 &#25968;&#25454;&#28304;</a></span></dt>
<dt><span class="sect1"><a href="#pysource">3.10. Python &#25968;&#25454;&#28304;</a></span></dt>
<dt><span class="sect1"><a href="#live-updates">3.11. &#23454;&#26102;&#32034;&#24341;&#26356;&#26032;</a></span></dt>
<dt><span class="sect1"><a href="#delta-updates">3.12. &#22686;&#37327;&#32034;&#24341;&#26356;&#26032;</a></span></dt>
<dt><span class="sect1"><a href="#index-merging">3.13. &#32034;&#24341;&#21512;&#24182;</a></span></dt>
</dl></dd><dt><span class="chapter"><a href="#rt-indexes">4. RT&#23454;&#26102;&#32034;&#24341;</a></span></dt>
<dd><dl><dt><span class="sect1"><a href="#rt-overview">4.1. RT&#23454;&#26102;&#32034;&#24341;&#27010;&#35272;</a></span></dt>
<dt><span class="sect1"><a href="#rt-caveats">4.2. RT&#23454;&#26102;&#32034;&#24341;&#20351;&#29992;&#27880;&#24847;&#20107;&#39033;</a></span></dt>
<dt><span class="sect1"><a href="#rt-internals">4.3. RT&#23454;&#26102;&#32034;&#24341;&#21407;&#29702;</a></span></dt>
<dt><span class="sect1"><a href="#rt-binlog">4.4. &#20108;&#36827;&#21046;&#26085;&#24535;</a></span></dt>
</dl></dd><dt><span class="chapter"><a href="#searching">5. &#25628;&#32034;</a></span></dt>
<dd><dl><dt><span class="sect1"><a href="#matching-modes">5.1. &#21305;&#37197;&#27169;&#24335;</a></span></dt>
<dt><span class="sect1"><a href="#boolean-syntax">5.2. &#24067;&#23572;&#26597;&#35810;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#extended-syntax">5.3. &#25193;&#23637;&#26597;&#35810;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#weighting">5.4. &#26435;&#20540;&#35745;&#31639;</a></span></dt>
<dt><span class="sect1"><a href="#expressions">5.5. &#34920;&#36798;&#24335;&#65292;&#20989;&#25968;&#65292;&#36816;&#31639;&#31526;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#operators">5.5.1. &#36816;&#31639;&#31526;</a></span></dt>
<dt><span class="sect2"><a href="#numeric-functions">5.5.2. &#25968;&#20540;&#20989;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#date-time-functions">5.5.3. &#26085;&#26399;&#21644;&#26102;&#38388;&#20989;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#type-conversion-functions">5.5.4. &#31867;&#22411;&#36716;&#25442;&#20989;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#comparison-functions">5.5.5. &#27604;&#36739;&#20989;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#misc-functions">5.5.6. &#20854;&#23427;&#20989;&#25968;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#sorting-modes">5.6. &#25490;&#24207;&#27169;&#24335;</a></span></dt>
<dt><span class="sect1"><a href="#clustering">5.7. &#32467;&#26524;&#20998;&#32452;&#65288;&#32858;&#31867;&#65289;</a></span></dt>
<dt><span class="sect1"><a href="#distributed">5.8. &#20998;&#24067;&#24335;&#25628;&#32034;</a></span></dt>
<dt><span class="sect1"><a href="#query-log-format">5.9. &#25628;&#32034;&#26381;&#21153;(<code class="filename">searchd</code>) &#26597;&#35810;&#26085;&#24535;&#26684;&#24335;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#plain-log-format">5.9.1. &#32431;&#25991;&#26412;&#26085;&#24535;&#26684;&#24335;</a></span></dt>
<dt><span class="sect2"><a href="#sphinxql-log-format">5.9.2. SphinxQL &#26085;&#24535;&#26684;&#24335;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#sphinxql">5.10. MySQL &#21327;&#35758;&#25903;&#25345;&#19982; SphinxQL</a></span></dt>
<dt><span class="sect1"><a href="#multi-queries">5.11. &#25209;&#37327;&#26597;&#35810;</a></span></dt>
<dt><span class="sect1"><a href="#collations">5.12. &#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;</a></span></dt>
<dt><span class="sect1"><a href="#udf">5.13. &#29992;&#25143;&#33258;&#23450;&#20041;&#20989;&#25968; (UDF)</a></span></dt>
</dl></dd><dt><span class="chapter"><a href="#command-line-tools">6. &#21629;&#20196;&#34892;&#24037;&#20855;&#21442;&#32771;</a></span></dt>
<dd><dl><dt><span class="sect1"><a href="#ref-indexer">6.1. <code class="filename">indexer</code>&#65306;&#32034;&#24341;&#21629;&#20196;&#21442;&#32771;</a></span></dt>
<dt><span class="sect1"><a href="#ref-searchd">6.2. <code class="filename">searchd</code>&#65306;&#25628;&#32034;&#26381;&#21153;&#31471;&#21629;&#20196;&#21442;&#32771;</a></span></dt>
<dt><span class="sect1"><a href="#ref-search">6.3. <code class="filename">search</code>&#65306;&#21629;&#20196;&#34892;&#25628;&#32034;&#21629;&#20196;&#21442;&#32771;</a></span></dt>
<dt><span class="sect1"><a href="#ref-spelldump">6.4. <code class="filename">spelldump</code>&#65306;&#25340;&#20889;&#20449;&#24687;&#23548;&#20986;&#21629;&#20196;&#21442;&#32771;</a></span></dt>
<dt><span class="sect1"><a href="#ref-indextool">6.5. <code class="filename">indextool</code>&#65306;&#32034;&#24341;&#20449;&#24687;&#23548;&#20986;&#21629;&#20196;&#21442;&#32771;</a></span></dt>
</dl></dd><dt><span class="chapter"><a href="#sphinxql-reference">7. SphinxQL &#25351;&#21335;</a></span></dt>
<dd><dl><dt><span class="sect1"><a href="#sphinxql-select">7.1. SELECT&#65288;&#25628;&#32034;&#26597;&#35810;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-show-meta">7.2. SHOW META&#65288;&#26174;&#31034;&#26597;&#35810;&#29366;&#24577;&#20449;&#24687;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-show-warnings">7.3. SHOW WARNINGS&#65288;&#26174;&#31034;&#26597;&#35810;&#35686;&#21578;&#20449;&#24687;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-show-status">7.4. SHOW STATUS&#65288;&#26174;&#31034;&#26381;&#21153;&#31471;&#29366;&#24577;&#20449;&#24687;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-insert">7.5. INSERT &#21644; REPLACE&#65288;&#25968;&#25454;&#25554;&#20837;&#21644;&#26367;&#25442;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-delete">7.6. DELETE&#65288;&#25968;&#25454;&#21024;&#38500;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-set">7.7. SET&#65288;&#35774;&#32622;&#26381;&#21153;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-commit">7.8. BEGIN, COMMIT, &#20197;&#21450; ROLLBACK&#65288;&#20107;&#21153;&#22788;&#29702;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-call-snippets">7.9. CALL SNIPPETS&#65288;&#25688;&#35201;&#29983;&#25104;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-call-keywords">7.10. CALL KEYWORDS&#65288;&#20851;&#38190;&#35789;&#29983;&#25104;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-show-tables">7.11. SHOW TABLES&#65288;&#26174;&#31034;&#24403;&#21069;&#25552;&#20379;&#25628;&#32034;&#26381;&#21153;&#30340;&#32034;&#24341;&#21015;&#34920;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-describe">7.12. DESCRIBE&#65288;&#26174;&#31034;&#25351;&#23450;&#25628;&#32034;&#26381;&#21153;&#32034;&#24341;&#30340;&#23383;&#27573;&#20449;&#24687;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-create-function">7.13. CREATE FUNCTION&#65288;&#28155;&#21152;&#33258;&#23450;&#20041;&#20989;&#25968;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-drop-function">7.14. DROP FUNCTION&#65288;&#21024;&#38500;&#33258;&#23450;&#20041;&#20989;&#25968;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-show-variables">7.15. SHOW VARIABLES&#65288;&#26174;&#31034;&#26381;&#21153;&#22120;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-show-variables">7.16. SHOW COLLATION&#65288;&#26174;&#31034;&#23383;&#31526;&#38598;&#26657;&#23545;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-update">7.17. UPDATE&#65288;&#25968;&#25454;&#26356;&#26032;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-multi-queries">7.18. &#22810;&#32467;&#26524;&#38598;&#26597;&#35810;&#65288;&#25209;&#37327;&#26597;&#35810;&#65289;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-comment-syntax">7.19. COMMIT&#65288;&#27880;&#37322;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-reserved-keywords">7.20. SphinxQL &#20445;&#30041;&#20851;&#38190;&#23383;&#21015;&#34920;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-upgrading-magics">7.21. SphinxQL &#21319;&#32423;&#22791;&#27880;, version 2.0.1-beta</a></span></dt>
</dl></dd><dt><span class="chapter"><a href="#api-reference">8. API&#21442;&#32771;</a></span></dt>
<dd><dl><dt><span class="sect1"><a href="#api-funcgroup-general">8.1. &#36890;&#29992;API&#26041;&#27861;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-getlasterror">8.1.1. GetLastError &#65288;&#38169;&#35823;&#20449;&#24687;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-getlastwarning">8.1.2. GetLastWarning &#65288;&#21578;&#35686;&#20449;&#24687;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setserver">8.1.3. SetServer (&#35774;&#32622;&#25628;&#32034;&#26381;&#21153;)</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setretries">8.1.4. SetRetries (&#35774;&#32622;&#22833;&#36133;&#37325;&#35797;)</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setconnecttimeout">8.1.5. SetConnectTimeout &#65288;&#35774;&#32622;&#36229;&#26102;&#26102;&#38388;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setarrayresult">8.1.6. SetArrayResult &#65288;&#35774;&#32622;&#32467;&#26524;&#36820;&#22238;&#26684;&#24335;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-isconnecterror">8.1.7. IsConnectError &#65288;&#26816;&#26597;&#38142;&#25509;&#38169;&#35823;&#65289;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-general-query-settings">8.2. &#36890;&#29992;&#25628;&#32034;&#35774;&#32622;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-setlimits">8.2.1. SetLimits &#65288;&#35774;&#32622;&#32467;&#26524;&#38598;&#20559;&#31227;&#37327;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setmaxquerytime">8.2.2. SetMaxQueryTime &#65288;&#35774;&#32622;&#26368;&#22823;&#25628;&#32034;&#26102;&#38388;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setoverride">8.2.3. SetOverride &#65288;&#35774;&#32622;&#20020;&#26102;&#23646;&#24615;&#20540;&#35206;&#30422;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setselect">8.2.4. SetSelect (&#35774;&#32622;&#36820;&#22238;&#20449;&#24687;&#30340;&#20869;&#23481;)</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-fulltext-query-settings">8.3. &#20840;&#25991;&#25628;&#32034;&#35774;&#32622;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-setmatchmode">8.3.1. SetMatchMode &#65288;&#35774;&#32622;&#21305;&#37197;&#27169;&#24335;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setrankingmode">8.3.2. SetRankingMode &#65288;&#35774;&#32622;&#35780;&#20998;&#27169;&#24335;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setsortmode">8.3.3. SetSortMode &#65288;&#35774;&#32622;&#25490;&#24207;&#27169;&#24335;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setweights">8.3.4. SetWeights &#65288;&#35774;&#32622;&#26435;&#37325;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setfieldweights">8.3.5. SetFieldWeights &#65288;&#35774;&#32622;&#23383;&#27573;&#26435;&#37325;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setindexweights">8.3.6. SetIndexWeights &#65288;&#35774;&#32622;&#32034;&#24341;&#26435;&#37325;&#65289;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-filtering">8.4. &#32467;&#26524;&#38598;&#36807;&#28388;&#35774;&#32622;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-setidrange">8.4.1. SetIDRange &#65288;&#35774;&#32622;&#26597;&#35810;ID&#33539;&#22260;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setfilter">8.4.2. SetFilter &#65288;&#35774;&#32622;&#23646;&#24615;&#36807;&#28388;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setfilterrange">8.4.3. SetFilterRange &#65288;&#35774;&#32622;&#23646;&#24615;&#33539;&#22260;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setfilterfloatrange">8.4.4. SetFilterFloatRange &#65288;&#35774;&#32622;&#28014;&#28857;&#25968;&#33539;&#22260;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setgeoanchor">8.4.5. SetGeoAnchor &#65288;&#35774;&#32622;&#22320;&#34920;&#36317;&#31163;&#38170;&#28857;&#65289;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-groupby">8.5. &#20998;&#32452;&#35774;&#32622;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-setgroupby">8.5.1. SetGroupBy &#65288;&#35774;&#32622;&#20998;&#32452;&#30340;&#23646;&#24615;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setgroupdistinct">8.5.2. SetGroupDistinct &#65288;&#35774;&#32622;&#20998;&#32452;&#35745;&#31639;&#19981;&#21516;&#20540;&#30340;&#23646;&#24615;&#65289;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-querying">8.6. &#25628;&#32034;&#25968;&#25454;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-query">8.6.1. Query &#65288;&#26597;&#35810;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-addquery">8.6.2. AddQuery &#65288;&#22686;&#21152;&#25209;&#37327;&#26597;&#35810;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-runqueries">8.6.3. RunQueries &#65288;&#25191;&#34892;&#25209;&#37327;&#26597;&#35810;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-resetfilters">8.6.4. ResetFilters &#65288;&#28165;&#38500;&#24403;&#21069;&#35774;&#32622;&#30340;&#36807;&#28388;&#22120;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-resetgroupby">8.6.5. ResetGroupBy &#65288;&#28165;&#38500;&#29616;&#26377;&#30340;&#20998;&#32452;&#35774;&#32622;&#65289;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-additional-functionality">8.7. &#38468;&#21152;&#26041;&#27861;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-buildexcerpts">8.7.1. BuildExcerpts &#65288;&#20135;&#29983;&#25991;&#26412;&#25688;&#35201;&#21644;&#39640;&#20142;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-updateatttributes">8.7.2. UpdateAttributes &#65288;&#26356;&#26032;&#23646;&#24615;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-buildkeywords">8.7.3. BuildKeywords &#65288;&#33719;&#21462;&#20998;&#35789;&#32467;&#26524;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-escapestring">8.7.4. EscapeString &#65288;&#36716;&#20041;&#29305;&#27530;&#23383;&#31526;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-status">8.7.5. Status &#65288;&#26597;&#35810;&#26381;&#21153;&#29366;&#24577;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-flushattributes">8.7.6. FlushAttributes &#65288;&#24378;&#21046;&#26356;&#26032;&#23646;&#24615;&#21040;&#30913;&#30424;&#65289;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-pconn">8.8. &#25345;&#20037;&#36830;&#25509;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-open">8.8.1. Open (&#25171;&#24320;&#36830;&#25509;)</a></span></dt>
<dt><span class="sect2"><a href="#api-func-close">8.8.2. Close &#65288;&#20851;&#38381;&#36830;&#25509;&#65289;</a></span></dt>
</dl></dd></dl></dd><dt><span class="chapter"><a href="#sphinxse">9. MySQL &#23384;&#20648;&#24341;&#25806; (SphinxSE)</a></span></dt>
<dd><dl><dt><span class="sect1"><a href="#sphinxse-overview">9.1. SphinxSE &#27010;&#35272;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxse-installing">9.2. &#23433;&#35013; SphinxSE</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#sphinxse-mysql50">9.2.1. &#32534;&#35793;&#25903;&#25345;SphinxSE&#30340;MySQL 5.0.x</a></span></dt>
<dt><span class="sect2"><a href="#sphinxse-mysql51">9.2.2. &#32534;&#35793;&#25903;&#25345;SphinxSE&#30340;MySQL 5.1.x</a></span></dt>
<dt><span class="sect2"><a href="#sphinxse-checking">9.2.3. &#26816;&#26597;SphinxSE&#23433;&#35013;&#19982;&#21542;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#sphinxse-using">9.3. &#20351;&#29992; SphinxSE</a></span></dt>
<dt><span class="sect1"><a href="#sphinxse-snippets">9.4. &#36890;&#36807; MySQL &#29983;&#25104;&#29255;&#27573; (&#25688;&#35201;)</a></span></dt>
</dl></dd><dt><span class="chapter"><a href="#reporting-bugs">10. &#25253;&#21578;BUG</a></span></dt>
<dt><span class="chapter"><a href="#conf-reference">11. <code class="filename">sphinx.conf/csft.conf</code> &#37197;&#32622;&#36873;&#39033;&#21442;&#32771;</a></span></dt>
<dd><dl><dt><span class="sect1"><a href="#confgroup-source">11.1. &#25968;&#25454;&#28304;&#37197;&#32622;&#36873;&#39033;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#conf-source-type">11.1.1. type&#65306;&#25968;&#25454;&#28304;&#31867;&#22411;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-host">11.1.2. sql_host&#65306;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-port">11.1.3. sql_port&#65306;&#25968;&#25454;&#24211;&#31471;&#21475;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-user">11.1.4. sql_user&#65306;&#25968;&#25454;&#24211;&#29992;&#25143;&#21517;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-pass">11.1.5. sql_pass&#65306;&#25968;&#25454;&#24211;&#23494;&#30721;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-db">11.1.6. sql_db&#65306;&#25968;&#25454;&#24211;&#21517;&#31216;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-sock">11.1.7. sql_sock&#65306;&#25968;&#25454;&#24211;Socket&#25991;&#20214;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mysql-connect-flags">11.1.8. mysql_connect_flags&#65306;MySQL&#36830;&#25509;&#21442;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mysql-ssl">11.1.9. mysql_ssl_cert, mysql_ssl_key, mysql_ssl_ca&#65306;MySQL&#30340;SSL&#36830;&#25509;</a></span></dt>
<dt><span class="sect2"><a href="#conf-odbc-dsn">11.1.10. odbc_dsn&#65306;ODBC&#36830;&#25509;&#23383;&#31526;&#20018;(DSN)</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-pre">11.1.11. sql_query_pre&#65306;&#24453;&#32034;&#24341;&#25968;&#25454;&#33719;&#21462;&#21069;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query">11.1.12. sql_query&#65306;&#33719;&#21462;&#24453;&#32034;&#24341;&#25968;&#25454;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-joined-field">11.1.13. sql_joined_field&#65306;SQL&#36830;&#25509;&#23383;&#27573;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-range">11.1.14. sql_query_range&#65306;&#20998;&#21306;&#26597;&#35810;&#33539;&#22260;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-range-step">11.1.15. sql_range_step&#65306;&#20998;&#21306;&#26597;&#35810;&#27493;&#36827;&#20540;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-killlist">11.1.16. sql_query_killlist&#65306;Kill-list&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-uint">11.1.17. sql_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-bool">11.1.18. sql_attr_bool&#65306;&#24067;&#23572;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-bigint">11.1.19. sql_attr_bigint&#65306;&#38271;&#25972;&#22411;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-timestamp">11.1.20. sql_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-str2ordinal">11.1.21. sql_attr_str2ordinal&#65306;&#23383;&#31526;&#20018;&#24207;&#25968;&#25490;&#24207;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-float">11.1.22. sql_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-multi">11.1.23. sql_attr_multi&#65306;&#22810;&#20540;&#23646;&#24615;(MVA)&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-string">11.1.24. sql_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;(&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-str2wordcount">11.1.25. sql_attr_str2wordcount&#65306;&#25991;&#26723;&#35789;&#27719;&#25968;&#35760;&#24405;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-column-buffers">11.1.26. sql_column_buffers&#65306;&#32467;&#26524;&#34892;&#32531;&#20914;&#22823;&#23567;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-field-string">11.1.27. sql_field_string&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-field-str2wordcount">11.1.28. sql_field_str2wordcount&#65306;&#25991;&#26723;&#35789;&#27719;&#25968;&#35760;&#24405;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#20449;&#24687;)</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-file-field">11.1.29. sql_file_field&#65306;&#22806;&#37096;&#25991;&#20214;&#23383;&#27573;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-post">11.1.30. sql_query_post&#65306;&#25968;&#25454;&#33719;&#21462;&#21518;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-post-index">11.1.31. sql_query_post_index&#65306;&#25968;&#25454;&#32034;&#24341;&#21518;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-ranged-throttle">11.1.32. sql_ranged_throttle&#65306;&#20998;&#21306;&#26597;&#35810;&#38388;&#38548;&#26102;&#38388;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-info-pre">11.1.33. sql_query_info_pre&#65306;&#21629;&#20196;&#34892;&#20449;&#24687;&#33719;&#21462;&#21069;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-info">11.1.34. sql_query_info&#65306;&#21629;&#20196;&#34892;&#20449;&#24687;&#33719;&#21462;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-command">11.1.35. xmlpipe_command&#65306;&#25968;&#25454;&#33719;&#21462;&#21629;&#20196;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-field">11.1.36. xmlpipe_field&#65306;&#23383;&#27573;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-field-string">11.1.37. xmlpipe_field_string&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-field-wordcount">11.1.38. xmlpipe_field_wordcount&#65306;&#35789;&#27719;&#25968;&#23384;&#20648;&#23383;&#27573;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-uint">11.1.39. xmlpipe_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-bool">11.1.40. xmlpipe_attr_bool&#65306;&#24067;&#23572;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-timestamp">11.1.41. xmlpipe_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-str2ordinal">11.1.42. xmlpipe_attr_str2ordinal&#65306;&#23383;&#31526;&#20018;&#24207;&#21015;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-float">11.1.43. xmlpipe_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-multi">11.1.44. xmlpipe_attr_multi&#65306;&#22810;&#20540;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-string">11.1.45. xmlpipe_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-fixup-utf8">11.1.46. xmlpipe_fixup_utf8&#65306;UTF-8&#20462;&#22797;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mssql-winauth">11.1.47. mssql_winauth&#65306;Windows&#38598;&#25104;&#35748;&#35777;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mssql-unicode">11.1.48. mssql_unicode&#65306;Unicode&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-unpack-zlib">11.1.49. unpack_zlib&#65306;SQL&#25968;&#25454;&#28304;&#35299;&#21387;&#23383;&#27573;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-unpack-mysqlcompress">11.1.50. unpack_mysqlcompress&#65306;MySQL&#25968;&#25454;&#28304;&#35299;&#21387;&#23383;&#27573;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-unpack-mysqlcompress-maxsize">11.1.51. unpack_mysqlcompress_maxsize&#65306;MySQL&#25968;&#25454;&#28304;&#35299;&#21387;&#32531;&#20914;&#21306;&#35774;&#32622;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#confgroup-index">11.2. &#32034;&#24341;&#37197;&#32622;&#36873;&#39033;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#conf-index-type">11.2.1. type&#65306;&#32034;&#24341;&#31867;&#22411;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-source">11.2.2. source&#65306;&#25991;&#26723;&#28304;</a></span></dt>
<dt><span class="sect2"><a href="#conf-path">11.2.3. path&#65306;&#32034;&#24341;&#25991;&#20214;&#36335;&#24452;</a></span></dt>
<dt><span class="sect2"><a href="#conf-docinfo">11.2.4. docinfo&#65306;&#25991;&#26723;&#20449;&#24687;&#23384;&#20648;&#27169;&#24335;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mlock">11.2.5. mlock&#65306;&#32531;&#20914;&#25968;&#25454;&#20869;&#23384;&#38145;&#23450;</a></span></dt>
<dt><span class="sect2"><a href="#conf-morphology">11.2.6. morphology&#65306;&#35789;&#24418;&#22788;&#29702;</a></span></dt>
<dt><span class="sect2"><a href="#conf-dict">11.2.7. dict&#65306;&#20851;&#38190;&#23383;&#35789;&#20856;&#31867;&#22411;</a></span></dt>
<dt><span class="sect2"><a href="#conf-index-sp">11.2.8. index_sp&#65306;&#32034;&#24341;&#21477;&#23376;&#21644;&#27573;&#33853;&#20449;&#24687;</a></span></dt>
<dt><span class="sect2"><a href="#conf-index-zones">11.2.9. index_zones&#65306;&#32034;&#24341;&#26631;&#31614;&#21306;&#22495;&#20449;&#24687;</a></span></dt>
<dt><span class="sect2"><a href="#conf-min-stemming-len">11.2.10. min_stemming_len&#65306;&#35789;&#24178;&#21270;&#26368;&#23567;&#35789;&#38271;</a></span></dt>
<dt><span class="sect2"><a href="#conf-stopwords">11.2.11. stopwords&#65306;&#20572;&#27490;&#35789;</a></span></dt>
<dt><span class="sect2"><a href="#conf-wordforms">11.2.12. wordforms&#65306;&#35789;&#24418;&#23383;&#20856;</a></span></dt>
<dt><span class="sect2"><a href="#conf-exceptions">11.2.13. exceptions&#65306;&#35789;&#27719;&#29305;&#20363;&#22788;&#29702;</a></span></dt>
<dt><span class="sect2"><a href="#conf-min-word-len">11.2.14. min_word_len&#65306;&#26368;&#23567;&#32034;&#24341;&#35789;&#27719;&#38271;&#24230;</a></span></dt>
<dt><span class="sect2"><a href="#conf-charset-type">11.2.15. charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;</a></span></dt>
<dt><span class="sect2"><a href="#conf-charset-table">11.2.16. charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;</a></span></dt>
<dt><span class="sect2"><a href="#conf-ignore-chars">11.2.17. ignore_chars&#65306;&#24573;&#30053;&#23383;&#31526;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-min-prefix-len">11.2.18. min_prefix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#21069;&#32512;&#38271;&#24230;</a></span></dt>
<dt><span class="sect2"><a href="#conf-min-infix-len">11.2.19. min_infix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#20013;&#32512;&#38271;&#24230;</a></span></dt>
<dt><span class="sect2"><a href="#conf-prefix-fields">11.2.20. prefix_fields&#65306;&#21069;&#32512;&#32034;&#24341;&#23383;&#27573;&#21015;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-infix-fields">11.2.21. infix_fields&#65306;&#20013;&#32512;&#32034;&#24341;&#23383;&#27573;&#21015;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-enable-star">11.2.22. enable_star&#65306;&#26143;&#21495;&#35821;&#27861;</a></span></dt>
<dt><span class="sect2"><a href="#conf-ngram-len">11.2.23. ngram_len&#65306;N-gram&#38271;&#24230;</a></span></dt>
<dt><span class="sect2"><a href="#conf-ngram-chars">11.2.24. ngram_chars&#65306;N-gram&#23383;&#31526;&#21015;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-phrase-boundary">11.2.25. phrase_boundary&#65306;&#35789;&#32452;&#36793;&#30028;&#31526;&#21015;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-phrase-boundary-step">11.2.26. phrase_boundary_step&#65306;&#35789;&#32452;&#36793;&#30028;&#20301;&#32622;&#22686;&#37327;</a></span></dt>
<dt><span class="sect2"><a href="#conf-html-strip">11.2.27. html_strip&#65306;HTMl&#26631;&#35760;&#28165;&#29702;</a></span></dt>
<dt><span class="sect2"><a href="#conf-html-index-attrs">11.2.28. html_index_attrs&#65306;HTML&#26631;&#31614;&#23646;&#24615;&#32034;&#24341;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-html-remove-elements">11.2.29. html_remove_elements&#65306;HTML&#20803;&#32032;&#28165;&#29702;</a></span></dt>
<dt><span class="sect2"><a href="#conf-local">11.2.30. local&#65306;&#26412;&#22320;&#32034;&#24341;&#22768;&#26126;</a></span></dt>
<dt><span class="sect2"><a href="#conf-agent">11.2.31. agent&#65306;&#36828;&#31243;&#32034;&#24341;&#22768;&#26126;</a></span></dt>
<dt><span class="sect2"><a href="#conf-agent-blackhole">11.2.32. agent_blackhole&#65306;&#36828;&#31243;&#40657;&#27934;&#20195;&#29702;</a></span></dt>
<dt><span class="sect2"><a href="#conf-agent-connect-timeout">11.2.33. agent_connect_timeout&#65306;&#36828;&#31243;&#26597;&#35810;&#26102;&#38388;</a></span></dt>
<dt><span class="sect2"><a href="#conf-agent-query-timeout">11.2.34. agent_query_timeout&#65306;&#36828;&#31243;&#26597;&#35810;&#36229;&#26102;&#26102;&#38388;</a></span></dt>
<dt><span class="sect2"><a href="#conf-preopen">11.2.35. preopen&#65306;&#32034;&#24341;&#25991;&#20214;&#39044;&#24320;&#21551;</a></span></dt>
<dt><span class="sect2"><a href="#conf-ondisk-dict">11.2.36. ondisk_dict&#65306;&#23383;&#20856;&#25991;&#20214;&#20445;&#25345;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-inplace-enable">11.2.37. inplace_enable&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-inplace-hit-gap">11.2.38. inplace_hit_gap&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#21305;&#37197;&#28857;&#31354;&#38553;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-inplace-docinfo-gap">11.2.39. inplace_docinfo_gap&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#25991;&#26723;&#20449;&#24687;&#31354;&#38553;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-inplace-reloc-factor">11.2.40. inplace_reloc_factor&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#37325;&#23450;&#20301;&#20869;&#23384;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-inplace-write-factor">11.2.41. inplace_write_factor&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#20889;&#32531;&#20914;&#20869;&#23384;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-index-exact-words">11.2.42. index_exact_words&#65306;&#35789;&#24178;&#21270;&#21518;&#21407;&#35789;&#32034;&#24341;</a></span></dt>
<dt><span class="sect2"><a href="#conf-overshort-step">11.2.43. overshort_step&#65306;&#30701;&#35789;&#20301;&#32622;&#22686;&#37327;</a></span></dt>
<dt><span class="sect2"><a href="#conf-stopword-step">11.2.44. stopword_step&#65306;&#36890;&#29992;&#35789;&#20301;&#32622;&#22686;&#37327;</a></span></dt>
<dt><span class="sect2"><a href="#conf-hitless-words">11.2.45. hitless_words&#65306;&#20301;&#32622;&#24573;&#30053;&#35789;&#27719;&#21015;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-expand-keywords">11.2.46. expand_keywords&#65306;&#35789;&#27719;&#23637;&#24320;</a></span></dt>
<dt><span class="sect2"><a href="#conf-blend-chars">11.2.47. blend_chars&#65306;&#28151;&#21512;&#23383;&#31526;&#21015;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-blend-mode">11.2.48. blend_mode&#65306;&#28151;&#21512;&#31867;&#22411;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-mem-limit">11.2.49. rt_mem_limit&#65306;RT&#32034;&#24341;&#20869;&#23384;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-field">11.2.50. rt_field&#65306;&#23383;&#27573;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-attr-uint">11.2.51. rt_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-attr-bigint">11.2.52. rt_attr_bigint&#65306;&#38271;&#25972;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-attr-float">11.2.53. rt_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-attr-timestamp">11.2.54. rt_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-attr-string">11.2.55. rt_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#confgroup-indexer">11.3. <code class="filename">indexer</code> &#31243;&#24207;&#37197;&#32622;&#36873;&#39033;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#conf-mem-limit">11.3.1. mem_limit&#65306;&#32034;&#24341;&#20869;&#23384;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-iops">11.3.2. max_iops&#65306;&#27599;&#31186;IO&#25805;&#20316;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-iosize">11.3.3. max_iosize&#65306;&#26368;&#22823;IO&#25805;&#20316;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-xmlpipe2-field">11.3.4. max_xmlpipe2_field&#65306;&#26368;&#22823;&#23383;&#27573;&#22823;&#23567;</a></span></dt>
<dt><span class="sect2"><a href="#conf-write-buffer">11.3.5. write_buffer&#65306;&#20889;&#32531;&#20914;&#22823;&#23567;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-file-field-buffer">11.3.6. max_file_field_buffer&#65306;&#22806;&#37096;&#25991;&#20214;&#32531;&#20914;&#22823;&#23567;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#confgroup-searchd">11.4. <code class="filename">searchd</code> &#31243;&#24207;&#37197;&#32622;&#36873;&#39033;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#conf-listen">11.4.1. listen&#65306;&#30417;&#21548;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-address">11.4.2. address&#65306;&#30417;&#21548;&#22320;&#22336;</a></span></dt>
<dt><span class="sect2"><a href="#conf-port">11.4.3. port&#65306;&#30417;&#21548;&#31471;&#21475;</a></span></dt>
<dt><span class="sect2"><a href="#conf-log">11.4.4. log&#65306;&#25628;&#32034;&#31995;&#32479;&#26085;&#24535;</a></span></dt>
<dt><span class="sect2"><a href="#conf-query-log">11.4.5. query_log&#65306;&#25628;&#32034;&#26597;&#35810;&#26085;&#24535;</a></span></dt>
<dt><span class="sect2"><a href="#conf-query-log-format">11.4.6. query_log_format&#65306;&#26597;&#35810;&#26085;&#24535;&#26684;&#24335;</a></span></dt>
<dt><span class="sect2"><a href="#conf-read-timeout">11.4.7. read_timeout&#65306;&#36828;&#31243;&#35835;&#21462;&#36229;&#26102;&#26102;&#38388;</a></span></dt>
<dt><span class="sect2"><a href="#conf-client-timeout">11.4.8. client_timeout&#65306;&#23458;&#25143;&#31471;&#36229;&#26102;&#26102;&#38388;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-children">11.4.9. max_children&#65306;&#23376;&#36827;&#31243;&#25968;&#30446;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-pid-file">11.4.10. pid_file&#65306;PID&#25991;&#20214;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-matches">11.4.11. max_matches&#65306;&#26368;&#22823;&#36820;&#22238;&#21305;&#37197;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#conf-seamless-rotate">11.4.12. seamless_rotate&#65306;&#26080;&#32541;&#36718;&#25442;</a></span></dt>
<dt><span class="sect2"><a href="#conf-preopen-indexes">11.4.13. preopen_indexes&#65306;&#32034;&#24341;&#39044;&#24320;&#21551;</a></span></dt>
<dt><span class="sect2"><a href="#conf-unlink-old">11.4.14. unlink_old&#65306;&#26087;&#32034;&#24341;&#28165;&#29702;</a></span></dt>
<dt><span class="sect2"><a href="#conf-attr-flush-period">11.4.15. attr_flush_period&#65306;&#23646;&#24615;&#21047;&#26032;&#21608;&#26399;</a></span></dt>
<dt><span class="sect2"><a href="#conf-ondisk-dict-default">11.4.16. ondisk_dict_default&#65306;&#32034;&#24341;&#23383;&#20856;&#23384;&#20648;&#26041;&#24335;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-packet-size">11.4.17. max_packet_size&#65306;&#26368;&#22823;&#21253;&#22823;&#23567;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mva-updates-pool">11.4.18. mva_updates_pool&#65306;MVA&#26356;&#26032;&#20849;&#20139;&#20869;&#23384;</a></span></dt>
<dt><span class="sect2"><a href="#conf-crash-log-path">11.4.19. crash_log_path&#65306;&#23849;&#28291;&#26085;&#24535;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-filters">11.4.20. max_filters&#65306;&#26368;&#22823;&#36807;&#28388;&#22120;&#25968;&#30446;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-filter-values">11.4.21. max_filter_values&#65306;&#21333;&#20010;&#36807;&#28388;&#22120;&#26368;&#22823;&#36807;&#28388;&#20540;&#25968;&#30446;</a></span></dt>
<dt><span class="sect2"><a href="#conf-listen-backlog">11.4.22. listen_backlog&#65306;&#24102;&#22788;&#29702;&#30417;&#21548;&#38431;&#21015;</a></span></dt>
<dt><span class="sect2"><a href="#conf-read-buffer">11.4.23. read_buffer&#65306;&#35835;&#32531;&#20914;&#21306;</a></span></dt>
<dt><span class="sect2"><a href="#conf-read-unhinted">11.4.24. read_unhinted&#65306;&#26080;&#21305;&#37197;&#26102;&#35835;&#21462;&#22823;&#23567;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-batch-queries">11.4.25. max_batch_queries&#65306;&#26368;&#22823;&#25209;&#37327;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-subtree-docs-cache">11.4.26. subtree_docs_cache&#65306;&#23376;&#26641;&#20248;&#21270;&#25991;&#26723;&#32531;&#23384;</a></span></dt>
<dt><span class="sect2"><a href="#conf-subtree-hits-cache">11.4.27. subtree_hits_cache&#65306;&#23376;&#26641;&#20248;&#21270;&#21629;&#20013;&#32531;&#23384;</a></span></dt>
<dt><span class="sect2"><a href="#conf-workers">11.4.28. workers&#65306;MPM&#27169;&#24335;</a></span></dt>
<dt><span class="sect2"><a href="#conf-dist-threads">11.4.29. dist_threads&#65306;&#24182;&#21457;&#26597;&#35810;&#32447;&#31243;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#conf-binlog-path">11.4.30. binlog_path&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#36335;&#24452;</a></span></dt>
<dt><span class="sect2"><a href="#conf-binlog-flush">11.4.31. binlog_flush&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#21047;&#26032;</a></span></dt>
<dt><span class="sect2"><a href="#conf-binlog-max-log-size">11.4.32. binlog_max_log_size&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#22823;&#23567;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-collation-server">11.4.33. collation_server&#65306;&#26381;&#21153;&#31471;&#40664;&#35748;&#23383;&#31526;&#38598;</a></span></dt>
<dt><span class="sect2"><a href="#conf-collation-libc-locale">11.4.34. collation_libc_locale&#65306;&#26381;&#21153;&#31471;libc&#23383;&#31526;&#38598;</a></span></dt>
<dt><span class="sect2"><a href="#conf-plugin-dir">11.4.35. plugin_dir&#65306;&#25554;&#20214;&#30446;&#24405;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mysql-version-string">11.4.36. mysql_version_string&#65306;MySQL&#29256;&#26412;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-flush-period">11.4.37. rt_flush_period&#65306;RT&#32034;&#24341;&#21047;&#26032;&#21608;&#26399;</a></span></dt>
<dt><span class="sect2"><a href="#conf-thread-stack">11.4.38. thread_stack&#65306;&#32447;&#31243;&#22534;&#26632;</a></span></dt>
<dt><span class="sect2"><a href="#conf-expansion-limit">11.4.39. expansion_limit&#65306;&#20851;&#38190;&#23383;&#23637;&#24320;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-compat-sphinxql-magics">11.4.40. compat_sphinxql_magics</a></span></dt>
<dt><span class="sect2"><a href="#conf-watchdog">11.4.41. watchdog</a></span></dt>
</dl></dd></dl></dd><dt><span class="chapter"><a href="#coreseek-conf-reference">12. 
      <code class="filename">Coreseek</code>&#37197;&#32622;&#36873;&#39033;&#21442;&#32771;</a></span></dt>
<dd><dl><dt><span class="sect1"><a href="#coreseek-confgroup-chinese">12.1. &#20013;&#25991;&#20998;&#35789;&#26680;&#24515;&#37197;&#32622;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#coreseek-conf-chinese-charset_dictpath">12.1.1. charset_dictpath</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-chinese-charset_type">12.1.2. charset_type</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#coreseek-confgroup-mmseg">12.2. MMSEG&#20998;&#35789;&#37197;&#32622;&#36873;&#39033;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#coreseek-conf-mmseg-merge_number_and_ascii">12.2.1. merge_number_and_ascii</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-mmseg-number_and_ascii_joint">12.2.2. number_and_ascii_joint</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-mmseg-compress_space">12.2.3. compress_space</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-mmseg-seperate_number_ascii">12.2.4. seperate_number_ascii</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#coreseek-confgroup-pysource">12.3. Python&#25968;&#25454;&#28304;&#31243;&#24207;&#25509;&#21475;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#coreseek-conf-pysource-GetScheme">12.3.1. GetScheme() &#65288;&#35774;&#32622;&#26816;&#32034;&#23383;&#27573;&#30340;&#23646;&#24615;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-GetKillList">12.3.2. GetKillList() &#65288;&#35774;&#32622;&#19981;&#21442;&#19982;&#26816;&#32034;&#30340;&#25991;&#26723;&#32534;&#21495;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-GetFieldOrder">12.3.3. GetFieldOrder() &#65288;&#35774;&#32622;&#23383;&#27573;&#30340;&#39034;&#24207;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-Connected">12.3.4. Connected() &#65288;&#33719;&#21462;&#25968;&#25454;&#21069;&#30340;&#36830;&#25509;&#22788;&#29702;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-OnBeforeIndex">12.3.5. OnBeforeIndex() &#65288;&#25968;&#25454;&#33719;&#21462;&#21069;&#22788;&#29702;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-NextDocument">12.3.6. NextDocument() &#65288;&#25991;&#26723;&#33719;&#21462;&#22788;&#29702;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-OnAfterIndex">12.3.7. OnAfterIndex() &#65288;&#25968;&#25454;&#33719;&#21462;&#21518;&#22788;&#29702;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-OnIndexFinished">12.3.8. OnIndexFinished() &#65288;&#32034;&#24341;&#23436;&#25104;&#26102;&#22788;&#29702;&#65289;</a></span></dt>
</dl></dd></dl></dd><dt><span class="appendix"><a href="#changelog">A. Sphinx revision history</a></span></dt>
<dd><dl><dt><span class="sect1"><a href="#rel111">A.1. Version 2.0.1-beta, 22 apr 2011</a></span></dt>
<dt><span class="sect1"><a href="#rel110">A.2. Version 1.10-beta, 19 jul 2010</a></span></dt>
<dt><span class="sect1"><a href="#rel099">A.3. Version 0.9.9-release, 02 dec 2009</a></span></dt>
<dt><span class="sect1"><a href="#rel099rc2">A.4. Version 0.9.9-rc2, 08 apr 2009</a></span></dt>
<dt><span class="sect1"><a href="#rel099rc1">A.5. Version 0.9.9-rc1, 17 nov 2008</a></span></dt>
<dt><span class="sect1"><a href="#rel0981">A.6. Version 0.9.8.1, 30 oct 2008</a></span></dt>
<dt><span class="sect1"><a href="#rel098">A.7. Version 0.9.8, 14 jul 2008</a></span></dt>
<dt><span class="sect1"><a href="#rel097">A.8. Version 0.9.7, 02 apr 2007</a></span></dt>
<dt><span class="sect1"><a href="#rel097rc2">A.9. Version 0.9.7-rc2, 15 dec 2006</a></span></dt>
<dt><span class="sect1"><a href="#rel097rc">A.10. Version 0.9.7-rc1, 26 oct 2006</a></span></dt>
<dt><span class="sect1"><a href="#rel096">A.11. Version 0.9.6, 24 jul 2006</a></span></dt>
<dt><span class="sect1"><a href="#rel096rc1">A.12. Version 0.9.6-rc1, 26 jun 2006</a></span></dt>
</dl></dd></dl></div>
<div class="list-of-examples"><p><b>&#33539;&#20363;&#28165;&#21333;</b></p><dl><dt>3.1. <a href="#ex-ranged-queries">&#33539;&#22260;&#26597;&#35810;&#29992;&#27861;&#20030;&#20363;</a></dt>
<dt>3.2. <a href="#ex-xmlpipe-document">XMLpipe &#25991;&#26723;&#25968;&#25454;&#27969;</a></dt>
<dt>3.3. <a href="#ex-xmlpipe2-document">xmlpipe2 &#25991;&#26723;&#25968;&#25454;&#27969;</a></dt>
<dt>3.4. <a href="#ex-live-updates">&#23436;&#20840;&#33258;&#21160;&#21270;&#30340;&#23454;&#26102;&#32034;&#24341;</a></dt>
<dt>4.1. <a href="#ex-rt-updates">RT&#23454;&#26102;&#32034;&#24341;&#23450;&#20041;</a></dt>
<dt>5.1. <a href="#ex-boolean-query">&#24067;&#23572;&#26597;&#35810;&#20363;&#23376;</a></dt>
<dt>5.2. <a href="#ex-extended-query">&#25193;&#23637;&#21305;&#37197;&#27169;&#24335;&#65306;&#26597;&#35810;&#20363;&#23376;</a></dt>
</dl></div>
<div class="chapter" title="&#31532;&nbsp;1&nbsp;&#31456;&nbsp;&#31616;&#20171;"><div class="titlepage"><div><div><h2 class="title"><a name="intro"></a>&#31532;&nbsp;1&nbsp;&#31456;&nbsp;&#31616;&#20171;</h2></div></div></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="sect1"><a href="#about">1.1. &#20160;&#20040;&#26159;CoreSeek/Sphinx</a></span></dt>
<dt><span class="sect1"><a href="#features">1.2. CoreSeek/Sphinx &#30340;&#29305;&#24615;</a></span></dt>
<dt><span class="sect1"><a href="#getting">1.3. &#22914;&#20309;&#24471;&#21040;CoreSeek/Sphinx</a></span></dt>
<dt><span class="sect1"><a href="#license">1.4. &#35768;&#21487;&#21327;&#35758;</a></span></dt>
<dt><span class="sect1"><a href="#credits">1.5. &#20316;&#32773;&#21644;&#36129;&#29486;&#32773;</a></span></dt>
<dt><span class="sect1"><a href="#history">1.6. &#21382;&#21490;</a></span></dt>
</dl></div>
<div class="sect1" title="1.1.&nbsp;&#20160;&#20040;&#26159;CoreSeek/Sphinx"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="about"></a>1.1.&nbsp;&#20160;&#20040;&#26159;CoreSeek/Sphinx</h2></div></div></div>
<p>
Sphinx&#26159;&#19968;&#20010;&#22312;GPLv2&#19979;&#20998;&#21457;&#30340;&#20840;&#25991;&#26816;&#32034;&#24341;&#25806;&#65307;Coreseek &#26159;&#19968;&#20010;&#21487;&#20379;&#20225;&#19994;&#20351;&#29992;&#30340;&#12289;&#22522;&#20110;Sphinx&#65288;&#21487;&#29420;&#31435;&#20110;Sphinx&#21407;&#22987;&#29256;&#26412;&#36816;&#34892;&#65289;&#30340;&#20013;&#25991;&#20840;&#25991;&#26816;&#32034;&#24341;&#25806;&#65292;&#25353;&#29031;GPLv2&#21327;&#35758;&#21457;&#34892;&#12290;&#21830;&#19994;&#20351;&#29992;&#65288;&#20363;&#22914;, &#23884;&#20837;&#21040;&#20854;&#20182;&#31243;&#24207;&#20013;&#65289;&#38656;&#35201;&#32852;&#31995;&#25105;&#20204;&#20197;&#33719;&#24471;&#21830;&#19994;&#25480;&#26435;&#12290;
</p><p>
&#19968;&#33324;&#32780;&#35328;&#65292;Sphinx&#26159;&#19968;&#20010;&#29420;&#31435;&#30340;&#20840;&#25991;&#25628;&#32034;&#24341;&#25806;&#65307;&#32780;Coreseek&#26159;&#19968;&#20010;&#25903;&#25345;&#20013;&#25991;&#30340;&#20840;&#25991;&#25628;&#32034;&#24341;&#25806;&#65292;&#24847;&#22270;&#20026;&#20854;&#20182;&#24212;&#29992;&#25552;&#20379;&#39640;&#36895;&#12289;&#20302;&#31354;&#38388;&#21344;&#29992;&#12289;&#39640;&#30456;&#20851;&#24230;&#32467;&#26524;&#30340;&#20013;&#25991;&#20840;&#25991;&#25628;&#32034;&#33021;&#21147;&#12290;CoreSeek/Sphinx&#21487;&#20197;&#38750;&#24120;&#23481;&#26131;&#30340;&#19982;SQL&#25968;&#25454;&#24211;&#21644;&#33050;&#26412;&#35821;&#35328;&#38598;&#25104;&#12290;
</p><p>
&#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#36890;&#36807;&#19977;&#31181;&#19981;&#21516;&#30340;&#25509;&#21475;&#26041;&#24335;&#26469;&#19982;Sphinx&#25628;&#32034;&#26381;&#21153;(searchd)&#36890;&#20449;&#65306;
a) &#36890;&#36807;&#21407;&#29983;&#30340;&#25628;&#32034; API (SphinxAPI),
b) &#36890;&#36807;Sphinx&#33258;&#36523;&#25903;&#25345;&#30340;MySQL&#32593;&#32476;&#21327;&#35758; (&#20351;&#29992;&#21629;&#21517;&#20026;SphinxQL&#30340;SQL&#31934;&#31616;&#23376;&#38598;), &#25110;&#32773; 
c) &#36890;&#36807;MySQL &#26381;&#21153;&#31471;&#30340;&#23384;&#20648;&#25554;&#20214;&#24341;&#25806;(SphinxSE)&#12290;&#24403;&#28982;&#65292; &#36824;&#21487;&#20197;&#36890;&#36807;&#21487;&#20197;&#20351;&#29992; a)&#12289;b)&#12289;c) &#30340;&#24212;&#29992;&#31243;&#24207;&#26469;&#26500;&#24314;webservice&#26469;&#20026;&#20854;&#20182;&#24212;&#29992;&#31243;&#24207;&#25552;&#20379;&#36890;&#20449;
</p><p>
&#22312;Sphinx&#21457;&#34892;&#29256;&#26412;&#20013;&#25552;&#20379;&#30340;&#21407;&#29983;&#25628;&#32034;API&#25903;&#25345;PHP&#12289;Python&#12289;Perl&#12289;Rudy&#21644;Java&#12290;&#25628;&#32034;API&#38750;&#24120;&#36731;&#37327;&#21270;&#65292;&#21487;&#20197;&#22312;&#20960;&#20010;&#23567;&#26102;&#20043;&#20869;&#31227;&#26893;&#21040;&#26032;&#30340;&#35821;&#35328;&#19978;&#12290;&#31532;&#19977;&#26041;API&#25509;&#21475;&#21644;&#25554;&#20214;&#25552;&#20379;&#20102;&#23545;Perl&#12289;C#&#12289;Haskell&#12289;Ruby-on-Rails&#25903;&#25345;&#65292;&#20197;&#21450;&#23545;&#20854;&#20182;&#21487;&#33021;&#30340;&#35821;&#35328;&#25110;&#32773;&#26694;&#26550;&#30340;&#25903;&#25345;&#12290;
</p><p>
&#20174;&#29256;&#26412;1.10-beta&#24320;&#22987;&#65292;Sphinx&#25903;&#25345;&#20004;&#31181;&#19981;&#21516;&#30340;&#32034;&#24341;&#21518;&#31471;&#65306;&#8220;&#30913;&#30424;&#65288;disk&#65289;&#8221;&#32034;&#24341;&#21518;&#31471;&#21644;&#8220;&#23454;&#26102;&#32034;&#24341;&#65288;realtime&#65289;&#8221;&#65288;RT&#65289;&#32034;&#24341;&#21518;&#31471;&#12290;&#30913;&#30424;&#32034;&#24341;&#25903;&#25345;&#22312;&#32447;&#20840;&#25991;&#32034;&#24341;&#37325;&#24314;&#65292;&#20294;&#26159;&#20165;&#25903;&#25345;&#38750;&#25991;&#26412;&#65288;&#23646;&#24615;&#65289;&#25968;&#25454;&#30340;&#22312;&#32447;&#26356;&#26032;&#12290;RT&#23454;&#26102;&#32034;&#24341;&#22312;&#27492;&#22522;&#30784;&#19978;&#65292;&#21448;&#22686;&#21152;&#20102;&#22312;&#32447;&#30340;&#20840;&#25991;&#32034;&#24341;&#26356;&#26032;&#12290;&#22312;&#27492;&#20043;&#21069;&#30340;&#29256;&#26412;&#20165;&#25903;&#25345;&#30913;&#30424;&#32034;&#24341;&#12290;
</p><p>
&#20351;&#29992;&#21629;&#21517;&#20026;&#25968;&#25454;&#28304;&#30340;&#25509;&#21475;&#65292;&#25968;&#25454;&#21487;&#20197;&#34987;&#21152;&#36733;&#21040;&#30913;&#30424;&#32034;&#24341;&#12290;&#24403;&#21069;&#31995;&#32479;&#20869;&#32622;MySQL&#21644;PostgreSQL&#20197;&#21450;ODBC&#20860;&#23481;&#65288;MS SQL&#12289;Oracle&#31561;&#65289; &#25968;&#25454;&#24211;&#25968;&#25454;&#28304;&#30340;&#25903;&#25345;&#65292;&#20063;&#25903;&#25345;&#20174;&#31649;&#36947;&#26631;&#20934;&#36755;&#20837;&#35835;&#21462;&#29305;&#23450;&#26684;&#24335;&#30340;XML&#25968;&#25454;&#12290;&#36890;&#36807;&#36866;&#24403;&#20462;&#25913;&#28304;&#20195;&#30721;&#65292;&#29992;&#25143;&#21487;&#20197;&#33258;&#34892;&#22686;&#21152;&#26032;&#30340;&#25968;&#25454;&#28304;&#39537;&#21160;&#65288;&#20363;&#22914;&#65306;&#23545;&#20854;&#20182;&#31867;&#22411;&#30340;DBMS&#30340;&#21407;&#29983;&#25903;&#25345;&#65289;&#12290;&#22312;Coreseek&#21457;&#34892;&#30340;&#29256;&#26412;&#20013;&#65292;&#29992;&#25143;&#36824;&#21487;&#20197;&#20351;&#29992;Python&#33050;&#26412;&#20316;&#20026;&#25968;&#25454;&#28304;&#26469;&#33719;&#21462;&#20219;&#20309;&#24050;&#30693;&#19990;&#30028;&#21644;&#26410;&#30693;&#19990;&#30028;&#30340;&#25968;&#25454;&#65292;&#36825;&#26497;&#22823;&#30340;&#25193;&#23637;&#20102;&#25968;&#25454;&#28304;&#30340;&#26469;&#28304;&#12290;&#20174;1.10-beta&#29256;&#26412;&#24320;&#22987;&#30340;RT&#23454;&#26102;&#32034;&#24341;&#65292;&#21482;&#33021;&#20351;&#29992;MySQL&#25509;&#21475;&#36890;&#36807;SphinxQL&#26469;&#25805;&#20316;&#12290;
</p><p>
Sphinx &#26159;SQL Phrase Index&#30340;&#32553;&#20889;&#65292;&#20294;&#19981;&#24184;&#30340;&#21644;CMU&#30340;Sphinx&#39033;&#30446;&#37325;&#21517;&#12290;
</p><p>
Coreseek (<a class="ulink" href="http://www.coreseek.cn/" target="_top">http://www.coreseek.cn/</a>) &#20026;Sphinx&#22312;&#20013;&#22269;&#22320;&#21306;&#30340;&#29992;&#25143;&#25552;&#20379;&#25903;&#25345;&#26381;&#21153;&#65292;&#22914;&#26524;&#24744;&#19981;&#24076;&#26395;&#32416;&#32544;&#19982;&#29712;&#30862;&#30340;&#25216;&#26415;&#32454;&#33410;&#65292;&#35831;&#30452;&#25509;&#32852;&#31995;&#25105;&#20204;&#12290;
</p><p>
&#26412;&#21442;&#32771;&#25163;&#20876;&#22522;&#20110;Sphinx 2.0.1-beta&#26368;&#26032;&#25991;&#26723;&#65292;&#21487;&#33021;&#23384;&#22312;&#28508;&#22312;&#30340;&#32763;&#35793;&#38169;&#35823;&#65292;&#22914;&#26524;&#24744;&#21457;&#29616;&#26412;&#25991;&#30340;&#32763;&#35793;&#38169;&#35823;&#65292;&#35831;&#32852;&#31995;&#25105;&#20204;&#12290;
</p><p>
&#25105;&#20204;&#30340;&#32852;&#31995;&#26041;&#24335;&#65306;
coreseek@gmail.com  &#26446;&#27819;&#21335;(nzinfo)
honestqiao@gmail.com  &#20052;&#26970;(HonestQiao 13581882013)
</p></div>
<div class="sect1" title="1.2.&nbsp;CoreSeek/Sphinx &#30340;&#29305;&#24615;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="features"></a>1.2.&nbsp;CoreSeek/Sphinx &#30340;&#29305;&#24615;</h2></div></div></div>
<p>
Sphinx &#30340;&#20027;&#35201;&#29305;&#24615;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#32034;&#24341;&#21644;&#25628;&#32034;&#24615;&#33021;&#20248;&#24322;&#65307;</li>
<li class="listitem">&#20808;&#36827;&#30340;&#32034;&#24341;&#21644;&#26597;&#35810;&#24037;&#20855; (&#28789;&#27963;&#19988;&#21151;&#33021;&#20016;&#23500;&#30340;&#25991;&#26412;&#20998;&#26512;&#22120;&#65292;&#26597;&#35810;&#35821;&#35328;&#65292;&#20197;&#21450;&#22810;&#31181;&#19981;&#21516;&#30340;&#25490;&#24207;&#26041;&#24335;&#31561;&#31561;);</li>
<li class="listitem">&#20808;&#36827;&#30340;&#32467;&#26524;&#38598;&#20998;&#26512;&#22788;&#29702; (SELECT &#21487;&#20197;&#20351;&#29992;&#34920;&#36798;&#24335;, WHERE, ORDER BY, GROUP BY &#31561;&#23545;&#20840;&#25991;&#25628;&#32034;&#32467;&#26524;&#38598;&#36827;&#34892;&#36807;&#28388;)&#65307;</li>
<li class="listitem">&#23454;&#36341;&#35777;&#23454;&#21487;&#25193;&#23637;&#24615;&#25903;&#25345;&#25968;&#21313;&#20159;&#25991;&#26723;&#35760;&#24405;&#65292;TB&#32423;&#21035;&#30340;&#25968;&#25454;&#65292;&#20197;&#21450;&#27599;&#31186;&#25968;&#21315;&#27425;&#26597;&#35810;;</li>
<li class="listitem">&#26131;&#20110;&#38598;&#25104;SQL&#21644;XML&#25968;&#25454;&#28304;&#65292;&#24182;&#21487;&#20351;&#29992;SphinxAPI&#12289;SphinxQL&#25110;&#32773;SphinxSE&#25628;&#32034;&#25509;&#21475;</li>
<li class="listitem">&#26131;&#20110;&#36890;&#36807;&#20998;&#24067;&#24335;&#25628;&#32034;&#36827;&#34892;&#25193;&#23637;</li>
</ul></div>
<p>
Sphinx &#30340;&#35814;&#32454;&#29305;&#24615;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#39640;&#36895;&#30340;&#32034;&#24341;&#24314;&#31435;(&#22312;&#24403;&#20195;CPU&#19978;&#65292;&#23792;&#20540;&#24615;&#33021;&#21487;&#36798;&#21040;10 ~ 15MB/&#31186;);</li>
<li class="listitem">&#39640;&#24615;&#33021;&#30340;&#25628;&#32034; (&#22312;1.2G&#25991;&#26412;&#65292;100&#19975;&#26465;&#25991;&#26723;&#19978;&#36827;&#34892;&#25628;&#32034;&#65292;&#25903;&#25345;&#39640;&#36798;&#27599;&#31186;150~250&#27425;&#26597;&#35810;);</li>
<li class="listitem">&#39640;&#25193;&#23637;&#24615; (&#26368;&#22823;&#30340;&#32034;&#24341;&#38598;&#32676;&#36229;&#36807;30&#20159;&#26465;&#25991;&#26723;&#65292;&#26368;&#32321;&#24537;&#26102;&#21051;&#30340;&#26597;&#35810;&#23792;&#20540;&#36798;&#21040;&#27599;&#22825;5&#21315;&#19975;&#27425;);</li>
<li class="listitem">&#25552;&#20379;&#20102;&#20248;&#31168;&#30340;&#30456;&#20851;&#24230;&#31639;&#27861;&#65292;&#22522;&#20110;&#30701;&#35821;&#30456;&#20284;&#24230;&#21644;&#32479;&#35745;&#65288;BM25&#65289;&#30340;&#22797;&#21512;Ranking&#26041;&#27861;;</li>
<li class="listitem">&#25903;&#25345;&#20998;&#24067;&#24335;&#25628;&#32034;&#21151;&#33021;;</li>
<li class="listitem">&#25552;&#20379;&#25991;&#26723;&#29255;&#27573;&#65288;&#25688;&#35201;&#20197;&#21450;&#39640;&#20142;&#65289;&#29983;&#25104;&#21151;&#33021;;</li>
<li class="listitem">&#20869;&#24314;&#25903;&#25345;SphinxAPI&#21644;SphinxQL&#25628;&#32034;&#31661;&#21475;&#65292;&#20063;&#21487;&#20316;&#20026;MySQL&#30340;&#23384;&#20648;&#24341;&#25806;&#25552;&#20379;&#25628;&#32034;&#26381;&#21153;;</li>
<li class="listitem">&#25903;&#25345;&#24067;&#23572;&#12289;&#30701;&#35821;&#12289;&#35789;&#35821;&#30456;&#20284;&#24230;&#31561;&#22810;&#31181;&#26816;&#32034;&#27169;&#24335;;</li>
<li class="listitem">&#25991;&#26723;&#25903;&#25345;&#22810;&#20010;&#20840;&#25991;&#26816;&#32034;&#23383;&#27573;(&#32570;&#30465;&#37197;&#32622;&#19979;&#65292;&#26368;&#22823;&#19981;&#36229;&#36807;32&#20010;);</li>
<li class="listitem">&#25991;&#26723;&#25903;&#25345;&#22810;&#20010;&#39069;&#22806;&#30340;&#23646;&#24615;&#20449;&#24687;(&#20363;&#22914;&#65306;&#20998;&#32452;&#20449;&#24687;&#65292;&#26102;&#38388;&#25139;&#31561;);</li>
<li class="listitem">&#25903;&#25345;&#26597;&#35810;&#20572;&#27490;&#35789;;</li>
<li class="listitem">&#25903;&#25345;&#35789;&#24418;&#23398;&#22788;&#29702;;</li>
<li class="listitem">&#25903;&#25345;&#29305;&#27530;&#35789;&#27719;&#22788;&#29702;;</li>
<li class="listitem">&#25903;&#25345;&#21333;&#19968;&#23383;&#33410;&#32534;&#30721;&#21644;UTF-8&#32534;&#30721;;</li>
<li class="listitem">&#20869;&#24314;&#25903;&#25345;&#33521;&#35821;&#12289;&#20420;&#35821;&#12289;&#25463;&#20811;&#35821;&#35789;&#24178;&#21270;&#22788;&#29702;; &#23545;
&#27861;&#35821;&#65292;&#35199;&#29677;&#29273;&#35821;&#65292;&#33889;&#33796;&#29273;&#35821;&#65292;&#24847;&#22823;&#21033;&#35821;&#65292;&#32599;&#39532;&#23612;&#20122;&#35821;&#65292;&#24503;&#22269;&#65292;&#33655;&#20848;&#65292;&#29790;&#20856;&#65292;&#25386;&#23041;&#65292;&#20025;&#40614;&#65292;&#33452;&#20848;&#65292;&#21256;&#29273;&#21033;&#31561;&#35821;&#35328;
&#30340;&#25903;&#25345;&#21487;&#36890;&#36807;&#31532;&#19977;&#26041;&#30340; <a class="ulink" href="http://snowball.tartarus.org/" target="_top">libstemmer &#24211;</a> &#24314;&#31435;);</li>
<li class="listitem">&#21407;&#29983;&#30340;MySQL&#25903;&#25345;(&#21516;&#26102;&#25903;&#25345;MyISAM &#12289;InnoDB&#12289;NDB&#12289;Archive&#31561;&#25152;&#26377;&#31867;&#22411;&#30340;&#25968;&#25454;&#34920; );</li>
<li class="listitem">&#21407;&#29983;&#30340;PostgreSQL &#25903;&#25345;;</li>
<li class="listitem">&#21407;&#29983;&#30340;ODBC&#20860;&#23481;&#25968;&#25454;&#24211;&#25903;&#25345; (MS SQL, Oracle, &#31561;) ;</li>
<li class="listitem">...&#22810;&#36798;50&#22810;&#39033;&#20854;&#20182;&#21151;&#33021;&#27809;&#26377;&#22312;&#27492;&#19968;&#19968;&#21015;&#20986;&#65292;&#35831;&#21442;&#38405;API&#21644;&#37197;&#32622;&#25163;&#20876;&#65281;</li>
</ul></div>
<p>
</p></div>
<div class="sect1" title="1.3.&nbsp;&#22914;&#20309;&#24471;&#21040;CoreSeek/Sphinx"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="getting"></a>1.3.&nbsp;&#22914;&#20309;&#24471;&#21040;CoreSeek/Sphinx</h2></div></div></div>
<p>Sphinx&#21407;&#22987;&#29256;&#26412;&#21487;&#20197;&#20174;Sphinx&#23448;&#26041;&#32593;&#31449; <a class="ulink" href="http://sphinxsearch.com/" target="_top">sphinxsearch.com/</a>&#65292;Coreseek&#21487;&#20197;&#20174;Coreseek&#23448;&#26041;&#32593;&#31449; <a class="ulink" href="http://www.coreseek.cn/" target="_top">www.coreseek.cn/</a>&#19979;&#36733;&#12290;
</p><p>&#30446;&#21069;&#65292;CoreSeek/Sphinx&#30340;&#21457;&#24067;&#21253;&#21253;&#25324;&#22914;&#19979;&#36719;&#20214;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="filename">indexer</code>: &#29992;&#20110;&#21019;&#24314;&#20840;&#25991;&#32034;&#24341;;</li>
<li class="listitem"><code class="filename">search</code>: &#19968;&#20010;&#31616;&#21333;&#30340;&#21629;&#20196;&#34892;(CLI) &#30340;&#27979;&#35797;&#31243;&#24207;&#65292;&#29992;&#20110;&#27979;&#35797;&#20840;&#25991;&#32034;&#24341;;</li>
<li class="listitem"><code class="filename">searchd</code>: &#19968;&#20010;&#23432;&#25252;&#36827;&#31243;&#65292;&#20854;&#20182;&#36719;&#20214;&#65288;&#20363;&#22914;WEB&#31243;&#24207;&#65289;&#21487;&#20197;&#36890;&#36807;&#36825;&#20010;&#23432;&#25252;&#36827;&#31243;&#36827;&#34892;&#20840;&#25991;&#26816;&#32034;;</li>
<li class="listitem"><code class="filename">sphinxapi</code>: &#19968;&#31995;&#21015;searchd &#30340;&#23458;&#25143;&#31471;API &#24211;&#65292;&#29992;&#20110;&#27969;&#34892;&#30340;Web&#33050;&#26412;&#24320;&#21457;&#35821;&#35328;(PHP, Python, Perl, Ruby, Java).</li>
<li class="listitem"><code class="filename">spelldump</code>: &#19968;&#20010;&#31616;&#21333;&#30340;&#21629;&#20196;&#34892;&#24037;&#20855;&#65292;&#29992;&#20110;&#20174; <code class="filename">ispell</code> &#25110;&#32773; <code class="filename">MySpell</code>
(OpenOffice&#20869;&#32622;&#32465;&#23450;) &#26684;&#24335;&#30340;&#23383;&#20856;&#20013;&#25552;&#21462;&#35789;&#26465;&#12290;&#24403;&#20351;&#29992; <a class="link" href="#conf-wordforms" title="11.2.12.&nbsp;wordforms&#65306;&#35789;&#24418;&#23383;&#20856;">wordforms</a>&#26102;&#21487;&#29992;&#36825;&#20123;&#35789;&#26465;&#23545;&#32034;&#24341;&#36827;&#34892;&#23450;&#21046;.</li>
<li class="listitem"><code class="filename">indextool</code>: &#24037;&#20855;&#31243;&#24207;&#65292;&#29992;&#26469;&#36716;&#20648;&#20851;&#20110;&#32034;&#24341;&#30340;&#22810;&#39033;&#35843;&#35797;&#20449;&#24687;&#12290;&#27492;&#24037;&#20855;&#26159;&#20174;&#29256;&#26412;Coreseek 3.1(Sphinx 0.9.9-rc2)&#24320;&#22987;&#21152;&#20837;&#30340;&#12290;</li>
<li class="listitem"><code class="filename">mmseg</code>: &#24037;&#20855;&#31243;&#24207;&#21644;&#24211;&#65292;Coreseek&#29992;&#20110;&#25552;&#20379;&#20013;&#25991;&#20998;&#35789;&#21644;&#35789;&#20856;&#22788;&#29702;&#12290;</li>
</ul></div>
<p>
</p></div>
<div class="sect1" title="1.4.&nbsp;&#35768;&#21487;&#21327;&#35758;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="license"></a>1.4.&nbsp;&#35768;&#21487;&#21327;&#35758;</h2></div></div></div>
<p>
&#36825;&#19968;&#31243;&#24207;&#26159;&#33258;&#30001;&#36719;&#20214;&#65292;&#20320;&#21487;&#20197;&#36981;&#29031;&#33258;&#30001;&#36719;&#20214;&#22522;&#37329;&#20250;&#20986;&#29256;&#30340;GNU&#36890;&#29992;&#20844;&#20849;&#35768;&#21487;&#35777;&#26465;&#27454;&#26469;&#20462;&#25913;&#21644;&#37325;&#26032;&#21457;&#24067;&#36825;&#19968;&#31243;&#24207;&#12290;&#25110;&#32773;&#29992;&#35768;&#21487;&#35777;&#30340;&#31532;&#20108;&#29256;&#65292;&#25110;&#32773;&#65288;&#26681;&#25454;&#20320;&#30340;&#36873;&#25321;&#65289;&#29992;&#20219;&#20309;&#26356;&#26032;&#30340;&#29256;&#26412;&#12290;&#35831;&#26597;&#30475;COPYING&#25991;&#20214;&#20102;&#35299;&#35814;&#24773;&#12290;
</p><p>
&#21457;&#24067;&#36825;&#19968;&#31243;&#24207;&#30340;&#30446;&#30340;&#26159;&#24076;&#26395;&#23427;&#26377;&#29992;&#65292;&#20294;&#27809;&#26377;&#20219;&#20309;&#25285;&#20445;&#12290;&#29978;&#33267;&#27809;&#26377;&#36866;&#21512;&#29305;&#23450;&#30446;&#30340;&#30340;&#38544;&#21547;&#30340;&#25285;&#20445;&#12290;&#26356;&#35814;&#32454;&#30340;&#24773;&#20917;&#35831;&#21442;&#38405;GNU&#36890;&#29992;&#20844;&#20849;&#35768;&#21487;&#35777;&#12290;
</p><p>
&#20320;&#24212;&#35813;&#24050;&#32463;&#21644;&#31243;&#24207;&#19968;&#36215;&#25910;&#21040;&#19968;&#20221;GNU&#36890;&#29992;&#20844;&#20849;&#35768;&#21487;&#35777;&#30340;&#21103;&#26412;&#12290;&#22914;&#26524;&#36824;&#27809;&#26377;&#65292;&#20889;&#20449;&#32473;&#65306;
The Free Software Foundation, Inc.,
59 Temple Place, Suite 330, Boston, MA 02111-1307 USA 
</p><p>
&#38750;GPL&#35768;&#21487;&#65288;&#20026;OEM/ ISV&#30340;&#23884;&#20837;&#24335;&#24212;&#29992;&#65289;&#20063;&#21487;&#20197;&#23433;&#25490;&#65292;&#22269;&#38469;&#23458;&#25143;&#35831;
<a class="ulink" href="http://sphinxsearch.com/contacts.html" target="_top">&#32852;&#31995;Sphinx</a> &#12289;&#20013;&#25991;&#23458;&#25143;&#35831;<a class="ulink" href="http://www.coreseek.cn/contact/" target="_top">&#32852;&#31995;Coreseek</a>&#20197;&#35752;&#35770;&#21830;&#19994;&#25480;&#26435;&#30340;&#21487;&#33021;&#24615;&#19982;&#32454;&#33410;&#12290; 
</p></div>
<div class="sect1" title="1.5.&nbsp;&#20316;&#32773;&#21644;&#36129;&#29486;&#32773;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="credits"></a>1.5.&nbsp;&#20316;&#32773;&#21644;&#36129;&#29486;&#32773;</h2></div></div></div>
<h3>&#20316;&#32773;</h3><p>
Sphinx &#30340;&#26368;&#21021;&#20316;&#32773; (&#35806;&#29983;&#20197;&#26469;&#30340;&#20027;&#35201;&#24320;&#21457;&#32773;):
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Andrew Aksyonoff, <a class="ulink" href="http://shodan.ru" target="_top">http://shodan.ru</a></li>
</ul></div>
<p>
</p><h3>Sphinx &#30340;&#22242;&#38431;</h3><p>
Sphinx&#25216;&#26415;&#20844;&#21496;&#21442;&#19982;&#36807;&#25110;&#27491;&#22312;&#21442;&#19982;Sphinx&#24320;&#21457;&#30340;&#24037;&#20316;&#20154;&#21592;(&#25353;&#29031;&#23383;&#27597;&#25490;&#24207;):
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Alexander Klimenko</li>
<li class="listitem">Alexey Dvoichenkov</li>
<li class="listitem">Alexey Vinogradov</li>
<li class="listitem">Ilya Kuznetsov</li>
<li class="listitem">Stanislav Klinov</li>
</ul></div>
<p>
</p><h3>Coreseek &#30340;&#22242;&#38431;</h3><p>
Coreseek &#21442;&#19982;CoreSeek/Sphinx&#24320;&#21457;&#30340;&#24037;&#20316;&#20154;&#21592;:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">nzinfo, <code class="email">&lt;<a class="email" href="mailto:li.monan(at)gmail.com">li.monan(at)gmail.com</a>&gt;</code></li>
<li class="listitem">HonestQiao, <code class="email">&lt;<a class="email" href="mailto:honestqiao(at)gmail.com">honestqiao(at)gmail.com</a>&gt;</code></li>
</ul></div>
<h3>&#36129;&#29486;&#32773;</h3><p>&#20026;Sphinx&#30340;&#24320;&#21457;&#20986;&#36807;&#21147;&#30340;&#20154;&#21592;&#21644;&#20182;&#20204;&#30340;&#36129;&#29486;&#22914;&#19979;&#65288;&#20197;&#19979;&#25490;&#21517;&#19981;&#20998;&#20808;&#21518;&#65289;:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Robert "coredev" Bengtsson (Sweden), &#36129;&#29486;&#20102;PostgreSQL&#25968;&#25454;&#28304;&#30340;&#21021;&#22987;&#29256;&#26412;</li>
<li class="listitem">Len Kranendonk, Perl API</li>
<li class="listitem">Dmytro Shteflyuk, Ruby API</li>
<li class="listitem">blueflycn, sphinx-for-chinese&#65292;&#21478;&#19968;&#20010;&#25903;&#25345;MMSEG&#20013;&#25991;&#20998;&#35789;&#30340;&#20010;&#20154;&#21457;&#24067;&#29256;&#26412;</li>
</ul></div>
<p>
</p><p>
&#27492;&#22806;&#65292;&#36824;&#26377;&#35768;&#22810;&#20154;&#25552;&#20986;&#20102;&#23453;&#36149;&#30340;&#24819;&#27861;&#12289;&#38169;&#35823;&#25253;&#21578;&#20197;&#21450;&#20462;&#27491;&#12290;&#22312;&#27492;&#19968;&#24182;&#33268;&#35874;&#65281;&#23545;CoreSeek/Sphinx&#25152;&#37319;&#29992;&#20381;&#36182;&#21644;&#24037;&#20855;&#36719;&#20214;&#30340;&#20316;&#32773;&#65292;&#22312;&#27492;&#20063;&#34920;&#31034;&#30001;&#34935;&#30340;&#24863;&#35874;&#19982;&#25964;&#24847;&#12290;
</p></div>
<div class="sect1" title="1.6.&nbsp;&#21382;&#21490;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="history"></a>1.6.&nbsp;&#21382;&#21490;</h2></div></div></div>
<p>
Coreseek &#30340;&#24320;&#21457;&#24037;&#20316;&#31867;&#20284;Sphinx&#65288;&#36215;&#22987;&#20110;2001&#24180;&#65289;&#65292;&#21487;&#20197;&#19978;&#28335;&#21040;2006&#24180;&#65288;Sphinx&#20110;&#35813;&#24180;&#24320;&#22987;&#23545;&#22806;&#25552;&#20379;&#65289;&#65292;&#37027;&#26102;&#25105;&#20204;&#35797;&#22270;&#20026;&#19968;&#20010;&#25968;&#25454;&#24211;&#39537;&#21160;&#30340;&#32593;&#31449;&#23547;&#25214;&#19968;&#20010;&#21487;&#25509;&#21463;&#30340;&#20013;&#25991;&#25628;&#32034;&#30340;&#35299;&#20915;&#26041;&#26696;&#65292;&#20294;&#26159;&#24403;&#26102;&#27809;&#26377;&#20219;&#20309;&#26041;&#26696;&#33021;&#22815;&#23436;&#20840;&#32780;&#21448;&#30452;&#25509;&#30340;&#28385;&#36275;&#35201;&#27714;&#12290;&#20107;&#23454;&#19978;&#65292;&#20027;&#35201;&#26159;&#22914;&#19979;&#38382;&#39064;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#25628;&#32034;&#36136;&#37327;(&#20363;&#22914;&#65306;&#31867;&#20284;Google&#30340;&#26377;&#25928;&#30340;&#30456;&#20851;&#24230;&#31639;&#27861;)
<div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">&#21333;&#32431;&#30340;&#32479;&#35745;&#23398;&#26041;&#27861;&#30340;&#25928;&#26524;&#38750;&#24120;&#31967;&#31957;&#65292;&#29305;&#21035;&#26159;&#22312;&#22823;&#37327;&#30340;&#30701;&#31687;&#25991;&#26723;&#30340;&#38598;&#21512;&#19978;&#65292;&#20363;&#22914;&#65306;&#35770;&#22363;&#12289;&#21338;&#23458;&#31561;&#31561;</li>
</ul></div></li>
<li class="listitem">&#25628;&#32034;&#36895;&#24230;
<div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">&#29305;&#21035;&#26159;&#24403;&#25628;&#32034;&#30340;&#30701;&#35821;&#21253;&#25324;&#8220;&#20572;&#27490;&#35789;&#8221;&#26102;&#65292;&#34920;&#29616;&#30340;&#23588;&#20854;&#26126;&#26174;&#65292;&#20363;&#22914;&#65306;&#33521;&#25991;&#65288;"to be or not to be"&#65289;&#12289;&#20013;&#25991;&#65288;&#8220;&#25105;&#30340;&#20320;&#30340;&#20182;&#30340;&#8221;&#65289;</li>
</ul></div></li>
<li class="listitem">&#24314;&#31435;&#32034;&#24341;&#26102;&#65292;&#30913;&#30424;IO&#21644;CPU&#28040;&#32791;&#38656;&#35201;&#21487;&#25511;
<div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">&#22312;&#20849;&#20139;&#30340;&#20027;&#26426;&#29615;&#22659;&#20013;&#65292;&#36825;&#19968;&#28857;&#30340;&#37325;&#35201;&#24615;&#26356;&#29978;&#20110;&#32034;&#24341;&#36895;&#24230;</li>
</ul></div></li>
<li class="listitem">&#20013;&#25991;&#25628;&#32034;&#30340;&#20934;&#30830;&#24615;&#21644;&#25928;&#29575;
<div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">&#22240;&#20026;&#20247;&#25152;&#21608;&#30693;&#30340;&#21407;&#22240;&#65292;&#21482;&#26377;&#20934;&#30830;&#30340;&#20013;&#25991;&#20998;&#35789;&#25165;&#33021;&#25552;&#39640;&#20013;&#25991;&#25628;&#32034;&#30340;&#20934;&#30830;&#24615;&#65292;&#24182;&#22823;&#22823;&#38477;&#20302;&#35745;&#31639;&#37327;.</li>
</ul></div></li>
</ul></div>
<p>
</p><p>&#36890;&#36807;&#32593;&#32476;&#65292;&#25105;&#20204;&#36824;&#20102;&#35299;&#21040;&#26377;&#26080;&#25968;&#30340;&#20154;&#23384;&#22312;&#31867;&#20284;&#30340;&#38656;&#27714;&#65292;&#20294;&#26159;&#27809;&#26377;&#19968;&#27454;&#30495;&#30495;&#21512;&#36866;&#30340;&#24037;&#20855;&#26469;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#12290;&#23572;&#21518;&#25105;&#20204;&#36827;&#34892;&#20102;&#19981;&#21516;&#36884;&#24452;&#30340;&#25506;&#32034;&#65292;&#23581;&#35797;&#20102;&#19981;&#21516;&#30340;&#26041;&#27861;&#65292;&#32463;&#36807;&#20102;&#21453;&#22797;&#30340;&#23454;&#36341;&#65292;&#24184;&#36816;&#30340;&#26159;&#25105;&#20204;&#25214;&#21040;&#20102;Sphinx&#65292;&#26368;&#32456;&#36873;&#25321;&#22522;&#20110;Sphinx&#12289;&#32467;&#21512;MMSeg&#65292;&#24320;&#21457;&#20986;Coreseek&#20013;&#25991;&#20840;&#25991;&#26816;&#32034;&#24341;&#25806;&#65292;&#24182;&#25353;&#29031;GPLv2&#21327;&#35758;&#21457;&#34892;&#65292;&#20197;&#20379;&#20225;&#19994;&#21644;&#20010;&#20154;&#35299;&#20915;&#20013;&#25991;&#25628;&#32034;&#38382;&#39064;&#12290;
</p><p>
&#38543;&#30528;&#26102;&#38388;&#30340;&#27969;&#36893;&#65292;&#20854;&#20182;&#30340;&#35299;&#20915;&#26041;&#26696;&#26377;&#20102;&#24456;&#22810;&#25913;&#36827;&#65292;&#26032;&#30340;&#26041;&#26696;&#20063;&#19981;&#26029;&#28044;&#29616;&#65292;&#20294;&#26159;&#65292;&#25105;&#20204;&#19968;&#33268;&#35748;&#20026;&#20173;&#28982;&#27809;&#26377;&#19968;&#31181;&#35299;&#20915;&#26041;&#26696;&#26159;&#36275;&#22815;&#30340;&#22909;&#65292;&#20197;&#33267;&#20110;&#33021;&#35753;&#25105;&#20204;&#25243;&#24323;Sphinx&#23558;&#25628;&#32034;&#24179;&#21488;&#36801;&#31227;&#36807;&#21435;&#12290;
</p><p>
&#36817;&#24180;&#26469;&#65292;CoreSeek/Sphinx&#30340;&#29992;&#25143;&#32473;&#20102;&#25105;&#20204;&#24456;&#22810;&#27491;&#38754;&#30340;&#21453;&#39304;&#21644;&#24314;&#35758;&#65292;&#25105;&#20204;&#20063;&#19981;&#26029;&#25913;&#36827;&#21644;&#25552;&#39640;&#65292;&#25552;&#20379;&#20102;&#26032;&#30340;&#23454;&#26102;&#32034;&#24341;&#65292;&#24182;&#22686;&#21152;&#20102;Python&#25968;&#25454;&#28304;&#65292;&#23558;CoreSeek/Sphinx&#30340;&#24212;&#29992;&#33539;&#22260;&#20174;&#24050;&#30693;&#19990;&#30028;&#25193;&#23637;&#21040;&#26410;&#30693;&#19990;&#30028;&#65292;&#20854;&#24212;&#29992;&#22330;&#26223;&#20063;&#36798;&#21040;&#26080;&#38480;&#31181;&#21487;&#33021;&#65307;&#22240;&#27492;&#65292;&#26174;&#32780;&#26131;&#35265;&#30340;&#65292;CoreSeek/Sphinx&#30340;&#24320;&#21457;&#36807;&#31243;&#23558;&#20250;&#32487;&#32493;&#65288;&#20063;&#35768;&#23558;&#25345;&#32493;&#21040;&#19990;&#30028;&#26411;&#26085;&#65289;&#12290;
</p></div></div>
<div class="chapter" title="&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#23433;&#35013;"><div class="titlepage"><div><div><h2 class="title"><a name="installation"></a>&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#23433;&#35013;</h2></div></div></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="sect1"><a href="#supported-system">2.1. &#25903;&#25345;&#30340;&#25805;&#20316;&#31995;&#32479;</a></span></dt>
<dt><span class="sect1"><a href="#required-tools">2.2. &#38656;&#35201;&#30340;&#24037;&#20855;</a></span></dt>
<dt><span class="sect1"><a href="#installing">2.3. &#22312;Linux&#12289;BSD&#19978;&#23433;&#35013;CoreSeek/Sphinx</a></span></dt>
<dt><span class="sect1"><a href="#installing-windows">2.4. &#22312;Windows&#19978;&#23433;&#35013;CoreSeek/Sphinx</a></span></dt>
<dt><span class="sect1"><a href="#install-problems">2.5. &#24050;&#30693;&#30340;&#23433;&#35013;&#38382;&#39064;&#21644;&#35299;&#20915;&#21150;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#quick-tour">2.6. CoreSeek/Sphinx&#24555;&#36895;&#20837;&#38376;&#25945;&#31243;</a></span></dt>
</dl></div>
<div class="sect1" title="2.1.&nbsp;&#25903;&#25345;&#30340;&#25805;&#20316;&#31995;&#32479;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="supported-system"></a>2.1.&nbsp;&#25903;&#25345;&#30340;&#25805;&#20316;&#31995;&#32479;</h2></div></div></div>
<p>
&#22312;&#32477;&#22823;&#22810;&#25968;&#29616;&#20195;&#30340;Unix&#31867;&#25805;&#20316;&#31995;&#32479;&#65288;&#20363;&#22914;Linux&#12289;BSD&#31561;&#65289;&#19978;&#65292;&#21482;&#38656;&#35201;&#19968;&#20010;C++&#32534;&#35793;&#22120;&#21644;&#22522;&#26412;&#30340;&#31995;&#32479;&#24037;&#20855;&#23601;&#21487;&#20197;&#32534;&#35793;&#24182;&#36816;&#34892;CoreSeek/Sphinx&#65292;&#32780;&#19981;&#38656;&#35201;&#23545;&#28304;&#30721;&#36827;&#34892;&#20219;&#20309;&#25913;&#21160;&#12290;
</p><p>
&#30446;&#21069;&#65292;CoreSeek/Sphinx&#21487;&#20197;&#22312;&#20197;&#19979;&#31995;&#32479;&#19978;&#36816;&#34892;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Linux 2.4.x, 2.6.x (&#21253;&#25324;&#21508;&#31181;&#21457;&#34892;&#29256;&#65292;&#22914;Redhat&#12289;Centos&#12289;Fedora&#12289;Gentoo&#12289;Debian&#12289;Ubuntu&#12289;Slackware&#12289;OpenSuse&#12289;ArchLinux&#31561;)</li>
<li class="listitem">Windows 2000, 2003, XP, Vista, Windows7, Windows2008</li>
<li class="listitem">FreeBSD 4.x, 5.x, 6.x, 7.x,8.x</li>
<li class="listitem">NetBSD 1.6, 3.0,4.x,5.x</li>
<li class="listitem">Solaris 9, 11</li>
<li class="listitem">Mac OS X</li>
</ul></div>
<p>
</p><p>
&#25903;&#25345;&#30340;CPU&#31181;&#31867;&#21253;&#25324; X86, X86-64, AMD64, SPARC64&#12290;&#30446;&#21069;&#32463;&#36807;&#23454;&#38469;&#27979;&#35797;&#21487;&#20197;&#22312;&#20027;&#27969;BSD&#24179;&#21488;&#12289;Linux&#24179;&#21488;&#21644;Windows&#24179;&#21488;&#36816;&#34892;&#65292;&#35814;&#24773;&#21487;&#20197;&#26597;&#30475;<a class="ulink" href="http://www.coreseek.cn/products-install/" target="_top">Coreseek&#27979;&#35797;&#36816;&#34892;&#29615;&#22659;&#21015;&#34920;</a>&#12290;
</p><p>
&#25105;&#20204;&#24076;&#26395;CoreSeek/Sphinx&#20063;&#33021;&#22815;&#22312;&#20854;&#20182;&#30340;&#31867;Unix&#25805;&#20316;&#31995;&#32479;&#24179;&#21488;&#19978;&#24037;&#20316;&#65292;&#20026;&#25152;&#26377;&#38656;&#35201;&#35299;&#20915;&#20013;&#25991;&#25628;&#32034;&#38382;&#39064;&#30340;&#29992;&#25143;&#26381;&#21153;&#65292;&#22914;&#26524;&#20320;&#36816;&#34892;CoreSeek/Sphinx&#32034;&#20351;&#29992;&#30340;&#25805;&#20316;&#31995;&#32479;&#19981;&#22312;&#19978;&#38754;&#30340;&#21517;&#21333;&#20013;&#65292;&#35831;&#21578;&#35785;&#25105;&#20204;&#65288;HonestQiao, <code class="email">&lt;<a class="email" href="mailto:honestqiao(at)gmail.com">honestqiao(at)gmail.com</a>&gt;</code>&#65289;&#12290;
</p><p>
&#30446;&#21069;&#30340;&#38454;&#27573;&#65292;CoreSeek/Sphinx&#30340;Windows&#29256;&#21487;&#29992;&#20110;&#27979;&#35797;&#12289;&#35843;&#35797;&#21644;&#26222;&#36890;&#29983;&#20135;&#29615;&#22659;&#65292;&#20294;&#19981;&#24314;&#35758;&#29992;&#20110;&#36127;&#36733;&#37327;&#36739;&#22823;&#30340;&#29983;&#20135;&#31995;&#32479;&#12290;&#38480;&#20110;Windows&#25805;&#20316;&#31995;&#32479;&#33258;&#36523;&#30340;&#38480;&#21046;&#65292;&#26368;&#31361;&#20986;&#30340;&#20004;&#20010;&#38382;&#39064;&#26159;&#65306;1&#65289;&#24182;&#21457;&#26597;&#35810;&#30340;&#25903;&#25345;&#19981;&#22909;&#65307;2&#65289;&#32570;&#23569;&#32034;&#24341;&#25968;&#25454;&#28909;&#20999;&#25442;&#30340;&#25903;&#25345;&#12290;&#34429;&#28982;&#30446;&#21069;&#24050;&#32463;&#26377;&#29992;&#25143;&#25104;&#21151;&#30340;&#22312;&#29983;&#20135;&#29615;&#22659;&#20811;&#26381;&#20102;&#36825;&#20004;&#20010;&#38382;&#39064;&#65292;&#20294;&#26159;&#25105;&#20204;&#20173;&#28982;&#19981;&#25512;&#33616;&#22312;Windows&#19979;&#36816;&#34892;CoreSeek/Sphinx&#25552;&#20379;&#39640;&#24378;&#24230;&#30340;&#25628;&#32034;&#26381;&#21153;&#12290;&#25105;&#20204;&#25512;&#33616;&#20351;&#29992;Linux&#25110;&#32773;BSD&#20316;&#20026;&#36816;&#34892;&#30340;&#25805;&#20316;&#31995;&#32479;&#24179;&#21488;&#65292;&#24182;&#21487;&#25552;&#20379;Linux&#12289;BSD&#31995;&#32479;&#19979;&#38024;&#23545;&#24615;&#30340;&#31995;&#32479;&#26550;&#26500;&#21644;&#24615;&#33021;&#20248;&#21270;&#25903;&#25345;&#26381;&#21153;&#12290;
</p></div>
<div class="sect1" title="2.2.&nbsp;&#38656;&#35201;&#30340;&#24037;&#20855;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="required-tools"></a>2.2.&nbsp;&#38656;&#35201;&#30340;&#24037;&#20855;</h2></div></div></div>
<p>
&#22312;&#31867;UNIX&#25805;&#20316;&#31995;&#32479;&#24179;&#21488;&#19978;&#65292;&#20320;&#38656;&#35201;&#20197;&#19979;&#30340;&#24037;&#20855;&#29992;&#26469;&#32534;&#35793;&#21644;&#23433;&#35013;CoreSeek/Sphinx:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">C++&#32534;&#35793;&#22120;&#12290;GNU gcc &#23601;&#33021;&#22815;&#24178;&#36825;&#20010;&#27963;.</li>
<li class="listitem">make&#31243;&#24207;&#12290;GNU make &#23601;&#33021;&#22815;&#24178;&#36825;&#20010;&#27963;.</li>
<li class="listitem">iconv&#24211;&#12290;GNU libiconv &#23601;&#33021;&#22815;&#25552;&#20379;&#25903;&#25345;.</li>
<li class="listitem">Python2.6&#65288;&#22914;&#26524;&#21551;&#29992;Python&#25968;&#25454;&#28304;&#25903;&#25345;&#65289;</li>
</ul></div>
<p>
&#22312;Windows&#24179;&#21488;&#19978;&#65292;&#20320;&#38656;&#35201;Microsoft Visual C/C++ Studio .NET 2003 &#25110;&#32773; 2005 &#25110;&#32773; 2008&#12290;&#22914;&#26524;&#20320;&#36824;&#38656;&#35201;&#20351;&#29992;Python&#25968;&#25454;&#28304;&#65292;&#25512;&#33616;&#23433;&#35013;ActiveState Python2.6&#12290;&#20854;&#20182;&#30340;&#32534;&#35793;&#22120;/&#24320;&#21457;&#29615;&#22659;&#20063;&#35768;&#20063;&#33021;&#25630;&#23450;&#36825;&#20214;&#20107;&#65292;&#20294;&#20320;&#21487;&#33021;&#38656;&#35201;&#33258;&#24049;&#25163;&#24037;&#21046;&#20316;&#20182;&#20204;&#25152;&#38656;&#30340;Makefile&#25110;&#32773;&#24037;&#31243;&#25991;&#20214;&#12290;
</p></div>
<div class="sect1" title="2.3.&nbsp;&#22312;Linux&#12289;BSD&#19978;&#23433;&#35013;CoreSeek/Sphinx"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installing"></a>2.3.&nbsp;&#22312;Linux&#12289;BSD&#19978;&#23433;&#35013;CoreSeek/Sphinx</h2></div></div></div>
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
	&#23558;&#20320;&#19979;&#36733;&#30340;tar&#21253;&#35299;&#21387;&#65292;&#24182;&#36827;&#20837;<code class="filename">coreseek</code> &#23376;&#30446;&#24405;&#65306; (&#25105;&#20204;&#22312;&#20363;&#23376;&#20013;&#20351;&#29992;&#30340;2.0.1-beta&#29256;&#26412;&#65307;&#20320;&#35201;&#26681;&#25454;&#20320;&#25152;&#20351;&#29992;&#30340;&#23454;&#38469;&#29256;&#26412;&#23545;&#25351;&#20196;&#21644;&#36335;&#24452;&#36827;&#34892;&#23545;&#24212;&#30340;&#20462;&#25913;)
	</p><p><strong class="userinput"><code><div class="literallayout"><p>$&nbsp;tar&nbsp;xzvf&nbsp;sphinx-2.0.1-beta.tar.gz<br>
$&nbsp;cd&nbsp;sphinx<br>
</p></div>
</code></strong></p></li>
<li class="listitem"><p>&#39318;&#20808;&#23433;&#35013;MMSeg:</p><p>
              <strong class="userinput"><code>
                <div class="literallayout"><p>$&nbsp;cd&nbsp;mmseg</p></div>

                <div class="literallayout"><p>$&nbsp;./configure&nbsp;--prefix=/usr/local/mmseg</p></div>

                <div class="literallayout"><p>$&nbsp;make</p></div>

                <div class="literallayout"><p>$&nbsp;make&nbsp;install</p></div>

                <div class="literallayout"><p>$&nbsp;cd&nbsp;..</p></div>

              </code></strong>
            </p><p>&#36816;&#34892;&#37197;&#32622; &#31243;&#24207;:</p><p><strong class="userinput"><code><div class="literallayout"><p>$&nbsp;./configure</p></div>
</code></strong></p><p>
	configure&#31243;&#24207;&#26377;&#24456;&#22810;&#36816;&#34892;&#36873;&#39033;&#12290;&#23436;&#25972;&#30340;&#21015;&#34920;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992; <code class="option">--help</code> &#24320;&#20851;&#24471;&#21040;&#12290;&#26368;&#37325;&#35201;&#30340;&#22914;&#19979;&#65306;
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="option">--prefix</code>, &#23450;&#20041;&#23558;Coreseek&#23433;&#35013;&#21040;&#20309;&#22788;;&#27604;&#22914;<code class="option">--prefix=/usr/local/sphinx</code>(&#20197;&#19979;&#20840;&#37096;&#31034;&#20363;&#37117;&#20551;&#23450;Coreseek&#23433;&#35013;&#22312;&#36825;&#20010;&#20301;&#32622;)</li>
<li class="listitem"><code class="option">--with-mysql</code>, &#24403;&#33258;&#21160;&#26816;&#27979;&#22833;&#36133;&#26102;&#65292;&#38656;&#35201;&#25351;&#20986;&#22312;&#37027;&#37324;&#33021;&#25214;&#21040;MySQL &#22836;&#25991;&#20214;&#21644;&#24211;&#25991;&#20214;;</li>
<li class="listitem"><code class="option">--with-pgsql</code>&#25351;&#20986;&#22312;&#37027;&#37324;&#33021;&#25214;&#21040;PostgreSQL&#22836;&#25991;&#20214;&#21644;&#24211;&#25991;&#20214;.</li>
<li class="listitem"><code class="option">--with-mmseg</code>, &#21551;&#29992;&#22522;&#20110;MMSeg&#30340;&#20013;&#25991;&#20998;&#35789;&#27861;&#65292;&#24182;&#25351;&#20986;&#22312;&#37027;&#37324;&#33021;&#25214;&#21040;MMSeg&#22836;&#25991;&#20214;&#21644;&#24211;&#25991;&#20214;.</li>
<li class="listitem"><code class="option">--with-python</code>, &#21551;&#29992;Python&#25968;&#25454;&#28304;&#25903;&#25345;. &#38656;&#35201;&#39044;&#20808;&#23433;&#35013;Python2.6.</li>
</ul></div>
<p>
	</p></li>
<li class="listitem"><p>&#32534;&#35793;&#28304;&#20195;&#30721;&#29983;&#25104;&#20108;&#36827;&#21046;&#31243;&#24207;:</p><p><strong class="userinput"><code><div class="literallayout"><p>$&nbsp;make</p></div>
</code></strong></p></li>
<li class="listitem"><p>&#23433;&#35013;&#20108;&#36827;&#21046;&#31243;&#24207;&#21040;&#20320;&#35774;&#23450;&#30340;&#30446;&#24405;&#19979;: (&#31867;Unix&#25805;&#20316;&#31995;&#32479;&#19979;&#40664;&#35748;&#20026;<code class="filename">/usr/local/bin/</code> , &#20294;&#26159;&#21487;&#20197;&#34987; <code class="option">./configure --prefix</code>&#20462;&#25913;&#23433;&#35013;&#30446;&#24405;&#65289;</p><p><strong class="userinput"><code><div class="literallayout"><p>$&nbsp;make&nbsp;install</p></div>
</code></strong></p></li>
</ol></div></div>
<div class="sect1" title="2.4.&nbsp;&#22312;Windows&#19978;&#23433;&#35013;CoreSeek/Sphinx"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installing-windows"></a>2.4.&nbsp;&#22312;Windows&#19978;&#23433;&#35013;CoreSeek/Sphinx</h2></div></div></div>
<p>&#22312;Windows&#19978;&#23433;&#35013;&#36890;&#24120;&#27604;&#22312;Linux&#29615;&#22659;&#19979;&#23481;&#26131;&#19968;&#20123;&#12290;&#35201;&#19981;&#26159;&#20026;&#20102;&#32473;&#20195;&#30721;&#21046;&#20316;patch&#65292;&#19968;&#33324;&#23433;&#35013;&#39044;&#20808;&#32534;&#35793;&#22909;&#30340;&#20108;&#36827;&#21046;&#25991;&#20214;&#21363;&#21487;&#65292;&#23427;&#20204;&#21487;&#20197;&#22312;&#32593;&#31449;&#30340;&#19979;&#36733;&#21306;&#25214;&#21040;.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#23558;&#20320;&#19979;&#36733;&#30340;.zip&#25991;&#20214;&#35299;&#21387;&#65292;&#27604;&#22914;
	<code class="filename">sphinx-2.0.1-beta-win32.zip</code>,
	&#25110;&#32773; <code class="filename">sphinx-2.0.1-beta-win32-pgsql.zip</code> &#22914;&#26524;&#20320;&#38656;&#35201;PostgresSQL&#25903;&#25345;&#12290;
	(&#25105;&#20204;&#22312;&#20363;&#23376;&#20013;&#20351;&#29992;&#30340;2.0.1-beta&#29256;&#26412;&#65307;&#20320;&#35201;&#26681;&#25454;&#20320;&#25152;&#20351;&#29992;&#30340;&#23454;&#38469;&#29256;&#26412;&#23545;&#25351;&#20196;&#21644;&#36335;&#24452;&#36827;&#34892;&#23545;&#24212;&#30340;&#20462;&#25913;)
Windows XP&#21450;&#20854;&#21518;&#32493;&#29256;&#26412;&#37117;&#21487;&#20197;&#30452;&#25509;&#35299;&#21387;.zip&#21387;&#32553;&#21253;&#65292;&#29992;&#20813;&#36153;&#30340;&#35299;&#21387;&#32553;&#31243;&#24207;&#20063;&#21487;&#65292;&#27604;&#22914; 7Zip.</p><p>&#22312;&#26412;&#25945;&#31243;&#30340;&#20854;&#20313;&#37096;&#20998;&#65292;&#25105;&#20204;&#20551;&#23450;&#19978;&#36848;&#21387;&#32553;&#21253;&#34987;&#35299;&#21387;&#21040;<code class="filename">C:\Sphinx</code>,
	 &#36825;&#26679; <code class="filename">searchd.exe</code> &#23545;&#24212;&#30340;&#36335;&#24452;&#23601;&#26159; <code class="filename">C:\Sphinx\bin\searchd.exe</code>. &#22914;&#26524;&#20320;&#25171;&#31639;&#32473;&#23433;&#35013;&#30446;&#24405;&#25110;&#32773;&#37197;&#32622;&#25991;&#20214;&#29992;&#20010;&#19981;&#21516;&#30340;&#36335;&#24452;&#65292;&#35831;&#22312;&#30456;&#24212;&#30340;&#22320;&#26041;&#33258;&#34892;&#20462;&#25913;&#36335;&#24452;&#12290;</p></li>
<li class="listitem"><p>&#32534;&#36753; sphinx.conf.in - &#38656;&#35201;&#20462;&#25913;@CONFDIR@&#30456;&#20851;&#39033;&#30446; - &#38024;&#23545;&#20320;&#30340;&#31995;&#32479;&#30340;&#23454;&#38469;&#24773;&#20917;&#36827;&#34892;&#20462;&#25913;.</p></li>
<li class="listitem"><p>&#25226; <code class="filename">searchd</code> &#26381;&#21153;&#23433;&#35013;&#25104;&#19968;&#20010;Windows&#26381;&#21153;:</p><p><strong class="userinput"><code>C:\Sphinx\bin&gt; C:\Sphinx\bin\searchd --install --config C:\Sphinx\sphinx.conf.in --servicename SphinxSearch</code></strong></p></li>
<li class="listitem"><p>&#36825;&#26679; <code class="filename">searchd</code> &#26381;&#21153;&#24212;&#35813;&#20986;&#29616;&#22312;&#8220;&#25511;&#21046;&#38754;&#26495;-&gt;&#31995;&#32479;&#31649;&#29702;-&gt;&#26381;&#21153;&#8221;&#30340;&#21015;&#34920;&#20013;&#20102;&#65292;&#20294;&#36824;&#27809;&#26377;&#34987;&#21551;&#21160;&#65292;&#22240;&#20026;&#22312;&#21551;&#21160;&#23427;&#20043;&#21069;&#65292;&#25105;&#20204;&#36824;&#38656;&#35201;&#20570;&#20123;&#37197;&#32622;&#24182;&#29992;<code class="filename">indexer</code>
	&#24314;&#31435;&#32034;&#24341; . &#36825;&#20123;&#21487;&#20197;&#21442;&#32771;
	<a class="link" href="#quick-tour" title="2.6.&nbsp;CoreSeek/Sphinx&#24555;&#36895;&#20837;&#38376;&#25945;&#31243;">&#24555;&#36895;&#20837;&#38376;&#25945;&#31243;</a>.</p><p>&#22312;&#25509;&#19979;&#26469;&#30340;&#23433;&#35013;&#27493;&#39588;&#65288;&#20854;&#20013;&#26368;&#22810;&#28041;&#21450;&#21040;&#30340;&#26159;&#31867;&#20284;&#22312;Linix&#29615;&#22659;&#19979;&#36816;&#34892;indexer&#21629;&#20196;
&#65289;&#20013;&#65292;&#20320;&#21487;&#33021;&#20250;&#24471;&#21040;&#19968;&#20010;&#26377;&#20851;libmysql.dll&#27809;&#26377;&#25214;&#21040;&#30340;&#38169;&#35823;&#25552;&#31034;&#12290;
&#22914;&#26524;&#23433;&#35013;&#36807;MySQL&#65292;&#20320;&#24212;&#35813;&#25214;&#19968;&#20010;Windows&#31995;&#32479;&#30446;&#24405;&#20013;&#65292;
&#25110;&#32773;&#26377;&#26102;&#22312;Windows \ System32&#30446;&#24405;&#20013;&#65292;&#25110;&#32773;&#22312;MySQL&#30340;&#23433;&#35013;&#30446;&#24405;&#20013;&#65292;&#25214;&#21040;libmysql.dll&#25991;&#20214;&#12290;&#22914;&#26524;&#20320;
&#30830;&#23454;&#25910;&#21040;&#19968;&#20010;&#36825;&#26679;&#30340;&#38169;&#35823;&#65292;&#35831;&#23558;&#25214;&#21040;&#30340;libmysql.dll&#25335;&#36125;&#21040;bin&#30446;&#24405;&#20013;&#12290;</p></li>
</ol></div></div>
<div class="sect1" title="2.5.&nbsp;&#24050;&#30693;&#30340;&#23433;&#35013;&#38382;&#39064;&#21644;&#35299;&#20915;&#21150;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="install-problems"></a>2.5.&nbsp;&#24050;&#30693;&#30340;&#23433;&#35013;&#38382;&#39064;&#21644;&#35299;&#20915;&#21150;&#27861;</h2></div></div></div>
<p>
&#22914;&#26524; <code class="filename">configure</code> &#31243;&#24207;&#27809;&#26377;&#25214;&#21040;MySQL &#30340;&#22836;&#25991;&#20214;&#21644;&#24211;&#25991;&#20214;,,
&#35831;&#35797;&#35797;&#26816;&#26597;&#26159;&#21542;&#23433;&#35013;&#20102; <code class="filename">mysql-devel</code> &#25110;&#32773; <code class="filename">mysql-client</code> &#20381;&#36182;&#21253;. &#22312;&#26377;&#20123;&#31995;&#32479;&#19978;&#65292;&#40664;&#35748;&#23433;&#35013;&#21253;&#25324;&#36825;&#20010;&#21253;. &#31867;&#20284;&#22914;&#27492;&#65292;libiconv&#31561;&#20063;&#21487;&#33021;&#20250;&#26377;&#31867;&#20284;&#30340;&#25552;&#31034;&#12290;
</p><p>
&#22914;&#26524; <code class="filename">make</code> &#31243;&#24207;&#32473;&#20986;&#22914;&#19979;&#38169;&#35823;&#25552;&#31034;
</p><pre class="programlisting">
/bin/sh: g++: command not found
make[1]: *** [libsphinx_a-sphinx.o] Error 127
</pre><p>
&#35831;&#26816;&#26597;&#26159;&#21542;&#23433;&#35013;&#20102;<code class="filename">gcc-c++</code> &#21253;.
</p><p>
&#22914;&#26524;&#20320;&#22312;&#32534;&#35793;&#26102;&#24471;&#21040;&#22914;&#19979;&#38169;&#35823;
</p><pre class="programlisting">
sphinx.cpp:67: error: invalid application of `sizeof' to
    incomplete type `Private::SizeError&lt;false&gt;'
</pre><p>
&#36825;&#24847;&#21619;&#30528;&#26576;&#20123;&#32534;&#35793;&#26102;&#30340;&#31867;&#22411;&#26816;&#26597;&#22833;&#36133;&#20102;&#65292;&#19968;&#20010;&#26368;&#26377;&#21487;&#33021;&#30340;&#21407;&#22240;&#26159;&#22312;&#20320;&#30340;&#31995;&#32479;&#19978;&#31867;&#22411;off_t&#30340;&#38271;&#24230;&#23567;&#20110;64bit&#12290;&#19968;&#20010;&#24555;&#36895;&#30340;&#20462;&#22797;&#25163;&#27573;&#26159;&#65292;&#20320;&#21487;&#20197;&#20462;&#25913;src/sphinx.h &#65292;&#23558;&#22312;&#23450;&#20041;&#31867;&#22411;SphOffset_t &#22788;&#65292;&#23558;off_t &#26367;&#25442;&#25104;DWORD&#65292;&#38656;&#35201;&#27880;&#24847;&#65292;&#36825;&#31181;&#25913;&#21160;&#23558;&#20351;&#20320;&#30340;&#20840;&#25991;&#32034;&#24341;&#25991;&#20214;&#19981;&#33021;&#36229;&#36807;2GB&#12290;&#21363;&#20415;&#36825;&#31181;&#20462;&#25913;&#26377;&#29992;&#65292;&#20063;&#35831;&#27719;&#25253;&#36825;&#19968;&#38382;&#39064;&#65292;&#22312;&#27719;&#25253;&#20013;&#35831;&#21253;&#25324;&#20855;&#20307;&#30340;&#38169;&#35823;&#20449;&#24687;&#20197;&#21450;&#25805;&#20316;&#31995;&#32479;&#32534;&#35793;&#22120;&#30340;&#37197;&#32622;&#24773;&#20917;&#12290;&#36825;&#26679;&#65292;&#25105;&#20204;&#21487;&#33021;&#33021;&#22815;&#22312;&#19979;&#19968;&#20010;&#29256;&#26412;&#20013;&#35299;&#20915;&#36825;&#19968;&#38382;&#39064;&#12290;
</p><p>
&#22914;&#20309;&#20320;&#36935;&#21040;&#20102;&#20854;&#20182;&#30340;&#20219;&#20309;&#38382;&#39064;&#65292;&#25110;&#32773;&#21069;&#38754;&#30340;&#24314;&#35758;&#23545;&#20320;&#27809;&#26377;&#24110;&#21161;&#65292;&#21035;&#29369;&#35947;&#65292;&#35831;&#31435;&#21051;&#32852;&#31995;&#25105;&#20204;.
</p></div>
<div class="sect1" title="2.6.&nbsp;CoreSeek/Sphinx&#24555;&#36895;&#20837;&#38376;&#25945;&#31243;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="quick-tour"></a>2.6.&nbsp;CoreSeek/Sphinx&#24555;&#36895;&#20837;&#38376;&#25945;&#31243;</h2></div></div></div>
<p>
&#20197;&#19979;&#25152;&#26377;&#30340;&#20363;&#23376;&#37117;&#20551;&#35774;&#20320;&#23558;CoreSeek/Sphinx&#23433;&#35013;&#22312;&#30446;&#24405;  <code class="filename">/usr/local/sphinx</code>, &#24182;&#19988;<code class="filename">searchd</code> &#23545;&#24212;&#30340;&#36335;&#24452;&#20026; <code class="filename">/usr/local/sphinx/bin/searchd</code>.
</p><p>
&#20026;&#20102;&#20351;&#29992;CoreSeek/Sphinx&#65292;&#20320;&#38656;&#35201;:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#21019;&#24314;&#37197;&#32622;&#25991;&#20214;.</p><p>
	&#32570;&#30465;&#30340;&#37197;&#32622;&#25991;&#20214;&#21517;&#20026; <code class="filename">sphinx.conf</code>.
	&#20840;&#37096;&#30340;CoreSeek/Sphinx&#25552;&#20379;&#30340;&#31243;&#24207;&#40664;&#35748;&#37117;&#22312;&#24403;&#21069;&#24037;&#20316;&#30340;&#30446;&#24405;&#19979;&#23547;&#25214;&#35813;&#25991;&#20214;.
	</p><p>
	&#30001;<code class="filename">configure</code> &#31243;&#24207;&#29983;&#25104;&#30340;&#31034;&#20363;&#37197;&#32622;&#25991;&#20214;<code class="filename">sphinx.conf.dist</code> &#20013;&#21253;&#25324;&#20840;&#37096;&#36873;&#39033;&#30340;&#27880;&#37322;&#65292;&#22797;&#21046;&#24182;&#32534;&#36753;&#36825;&#20010;&#25991;&#20214;&#20351;&#20043;&#36866;&#29992;&#20110;&#20320;&#30340;&#20855;&#20307;&#24773;&#20917;&#65306;
	 (&#35831;&#30830;&#35748; CoreSeek/Sphinx &#23433;&#35013;&#22312; <code class="filename">/usr/local/coreseek/</code>)
	</p><p><strong class="userinput"><code><div class="literallayout"><p>$&nbsp;cd&nbsp;/usr/local/sphinx/etc<br>
$&nbsp;cp&nbsp;sphinx.conf.dist&nbsp;sphinx.conf<br>
$&nbsp;vi&nbsp;sphinx.conf</p></div>
</code></strong></p><p>
	&#22312;&#31034;&#20363;&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#23558;&#35797;&#22270;&#23545;MySQL&#25968;&#25454;&#24211;<code class="filename">test</code>&#20013;&#30340; <code class="filename">documents</code>
	&#34920;&#24314;&#31435;&#32034;&#24341;&#65307;&#22240;&#27492;&#22312;&#36825;&#37324;&#36824;&#25552;&#20379;&#20102; <code class="filename">example.sql</code> &#29992;&#20110;&#32473;&#27979;&#35797;&#34920;&#22686;&#21152;&#23569;&#37327;&#25968;&#25454;&#29992;&#20110;&#27979;&#35797;:
	</p><p><strong class="userinput"><code><div class="literallayout"><p>$&nbsp;mysql&nbsp;-u&nbsp;test&nbsp;&lt;&nbsp;/usr/local/sphinx/etc/example.sql</p></div>
</code></strong></p></li>
<li class="listitem"><p>&#36816;&#34892;<code class="filename">indexer</code> &#20026;&#20320;&#30340;&#25968;&#25454;&#21019;&#24314;&#20840;&#25991;&#32034;&#24341;:</p><p><strong class="userinput"><code><div class="literallayout"><p>$&nbsp;cd&nbsp;/usr/local/sphinx/etc<br>
$&nbsp;/usr/local/sphinx/bin/indexer&nbsp;--all</p></div>
</code></strong></p></li>
<li class="listitem"><p>&#26816;&#32034;&#20320;&#26032;&#21019;&#24314;&#30340;&#32034;&#24341;!</p></li>
</ol></div>
<p>
&#20320;&#21487;&#20197;&#20351;&#29992;<code class="filename">search</code>&#65288;&#27880;&#24847;&#65292;&#26159;<code class="filename">search</code>&#32780;&#19981;&#26159;<code class="filename">searchd</code>&#65289;&#23454;&#29992;&#31243;&#24207;&#20174;&#21629;&#20196;&#34892;&#23545;&#32034;&#24341;&#36827;&#34892;&#26816;&#32034;:
</p><p><strong class="userinput"><code><div class="literallayout"><p>$&nbsp;cd&nbsp;/usr/local/sphinx/etc<br>
$&nbsp;/usr/local/sphinx/bin/search&nbsp;test</p></div>
</code></strong></p><p>
&#22914;&#26524;&#35201;&#20174;PHP&#33050;&#26412;&#26816;&#32034;&#32034;&#24341;&#65292;&#20320;&#38656;&#35201;:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#36816;&#34892;&#23432;&#25252;&#36827;&#31243;searchd&#65292;PHP&#33050;&#26412;&#38656;&#35201;&#36830;&#25509;&#21040;searchd&#19978;&#36827;&#34892;&#26816;&#32034;:</p><p><strong class="userinput"><code><div class="literallayout"><p>$&nbsp;cd&nbsp;/usr/local/sphinx/etc<br>
$&nbsp;/usr/local/sphinx/bin/searchd</p></div>
</code></strong></p></li>
<li class="listitem"><p>
		&#36816;&#34892;PHP API &#38468;&#24102;&#30340;test &#33050;&#26412;&#65288;&#36816;&#34892;&#20043;&#21069;&#35831;&#30830;&#35748;searchd&#23432;&#25252;&#36827;&#31243;&#24050;&#21551;&#21160;&#65289;:
		</p><p><strong class="userinput"><code><div class="literallayout"><p>$&nbsp;cd&nbsp;sphinx/api<br>
$&nbsp;php&nbsp;test.php&nbsp;test</p></div>
</code></strong></p></li>
<li class="listitem"><p>
		&#23558;API&#25991;&#20214;(&#20301;&#20110;<code class="filename">api/sphinxapi.php</code>) &#21253;&#21547;&#36827;&#20320;&#33258;&#24049;&#30340;&#33050;&#26412;&#65292;&#24320;&#22987;&#32534;&#31243;.
		</p></li>
</ol></div>
<p>
&#31069;&#20320;&#25628;&#32034;&#24841;&#24555;!
</p></div></div>
<div class="chapter" title="&#31532;&nbsp;3&nbsp;&#31456;&nbsp;&#24314;&#31435;&#32034;&#24341;"><div class="titlepage"><div><div><h2 class="title"><a name="indexing"></a>&#31532;&nbsp;3&nbsp;&#31456;&nbsp;&#24314;&#31435;&#32034;&#24341;</h2></div></div></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="sect1"><a href="#sources">3.1. &#25968;&#25454;&#28304;</a></span></dt>
<dt><span class="sect1"><a href="#attributes">3.2. &#23646;&#24615;</a></span></dt>
<dt><span class="sect1"><a href="#mva">3.3. MVA (&#22810;&#20540;&#23646;&#24615;)</a></span></dt>
<dt><span class="sect1"><a href="#indexes">3.4. &#32034;&#24341;</a></span></dt>
<dt><span class="sect1"><a href="#data-restrictions">3.5. &#28304;&#25968;&#25454;&#30340;&#38480;&#21046;</a></span></dt>
<dt><span class="sect1"><a href="#charsets">3.6. &#23383;&#31526;&#38598;&#12289;&#22823;&#23567;&#20889;&#36716;&#25442;&#21644;&#36716;&#25442;&#34920;</a></span></dt>
<dt><span class="sect1"><a href="#sql">3.7. SQL &#25968;&#25454;&#28304; (MySQL, PostgreSQL)</a></span></dt>
<dt><span class="sect1"><a href="#xmlpipe">3.8. xmlpipe &#25968;&#25454;&#28304;</a></span></dt>
<dt><span class="sect1"><a href="#xmlpipe2">3.9. xmlpipe2 &#25968;&#25454;&#28304;</a></span></dt>
<dt><span class="sect1"><a href="#pysource">3.10. Python &#25968;&#25454;&#28304;</a></span></dt>
<dt><span class="sect1"><a href="#live-updates">3.11. &#23454;&#26102;&#32034;&#24341;&#26356;&#26032;</a></span></dt>
<dt><span class="sect1"><a href="#delta-updates">3.12. &#22686;&#37327;&#32034;&#24341;&#26356;&#26032;</a></span></dt>
<dt><span class="sect1"><a href="#index-merging">3.13. &#32034;&#24341;&#21512;&#24182;</a></span></dt>
</dl></div>
<div class="sect1" title="3.1.&nbsp;&#25968;&#25454;&#28304;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sources"></a>3.1.&nbsp;&#25968;&#25454;&#28304;</h2></div></div></div>
<p>
&#32034;&#24341;&#30340;&#25968;&#25454;&#21487;&#20197;&#26469;&#33258;&#21508;&#31181;&#21508;&#26679;&#19981;&#21516;&#30340;&#26469;&#28304;&#65306;SQL&#25968;&#25454;&#24211;&#12289;&#32431;&#25991;&#26412;&#12289;HTML&#25991;&#20214;&#12289;&#37038;&#20214;&#31561;&#31561;&#12290;&#20174;CoreSeek/Sphinx&#30340;&#35270;&#35282;&#30475;&#65292;&#32034;&#24341;&#25968;&#25454;&#26159;&#19968;&#20010;&#32467;&#26500;&#21270;&#30340;<em class="glossterm">&#25991;&#26723;</em>&#30340;&#38598;&#21512;&#65292;&#20854;&#20013;&#27599;&#20010;<em class="glossterm">&#25991;&#26723;</em>&#26159;&#23383;&#27573;&#30340;&#38598;&#21512;&#65292;&#36825;&#31181;&#32467;&#26500;&#26356;&#21033;&#20110;SQL&#25968;&#25454;&#33719;&#21462;&#65292;&#20854;&#20013;&#27599;&#19968;&#34892;&#20195;&#34920;&#19968;&#20010;&#25991;&#26723;&#65292;&#27599;&#19968;&#21015;&#20195;&#34920;&#19968;&#20010;&#23383;&#27573;&#12290;
</p><p>
&#30001;&#20110;&#25968;&#25454;&#26469;&#28304;&#30340;&#19981;&#21516;&#65292;&#38656;&#35201;&#19981;&#21516;&#30340;&#20195;&#30721;&#26469;&#33719;&#21462;&#25968;&#25454;&#12289;&#22788;&#29702;&#25968;&#25454;&#20197;&#20379;CoreSeek/Sphinx&#36827;&#34892;&#32034;&#24341;&#30340;&#24314;&#31435;&#12290;&#36825;&#31181;&#20195;&#30721;&#34987;&#31216;&#20043;&#20026;<em class="glossterm">&#25968;&#25454;&#28304;&#39537;&#21160;&#31243;&#24207;</em>&#65288;&#31616;&#31216;&#65306;<em class="glossterm">&#39537;&#21160;</em>&#25110;<em class="glossterm">&#25968;&#25454;&#28304;</em>&#65289;&#12290;
</p><p>
&#22312;&#26412;&#25991;&#25776;&#20889;&#26102;&#65292;CoreSeek/Sphinx&#20013;&#21253;&#25324;MySQL&#21644;PostgreSQL&#25968;&#25454;&#28304;&#30340;&#39537;&#21160;&#31243;&#24207;&#65292;&#36825;&#20123;&#39537;&#21160;&#20351;&#29992;&#25968;&#25454;&#24211;&#31995;&#32479;&#25552;&#20379;&#30340;C/C++&#21407;&#29983;&#25509;&#21475;&#36830;&#25509;&#21040;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;&#24182;&#33719;&#21462;&#25968;&#25454;&#12290;&#27492;&#22806;&#65292;CoreSeek/Sphinx&#36824;&#25552;&#20379;&#20102;&#39069;&#22806;&#30340;&#34987;&#31216;&#20026;xmlpipe&#30340;&#25968;&#25454;&#28304;&#39537;&#21160;&#65292;&#35813;&#39537;&#21160;&#36816;&#34892;&#26576;&#20010;&#20855;&#20307;&#30340;&#21629;&#20196;&#65292;&#24182;&#20174;&#35813;&#21629;&#20196;&#30340;<code class="filename">stdout</code>&#20013;&#35835;&#20837;&#25968;&#25454;&#12290;&#25968;&#25454;&#30340;&#26684;&#24335;&#22312; <a class="xref" href="#xmlpipe" title="3.8.&nbsp;xmlpipe &#25968;&#25454;&#28304;">&#31532;&nbsp;3.8&nbsp;&#33410; &#8220;xmlpipe &#25968;&#25454;&#28304;&#8221;</a> &#20013;&#26377;&#20171;&#32461;&#12290;&#32463;&#36807;&#38271;&#36275;&#30340;&#21457;&#23637;&#65292;Coreseek&#36824;&#25552;&#20379;&#20102;&#20855;&#26377;&#29305;&#33394;&#30340;Python&#25968;&#25454;&#28304;&#39537;&#21160;&#65292;&#21487;&#20197;&#20351;&#29992;Python&#32534;&#20889;&#25968;&#25454;&#33719;&#21462;&#33050;&#26412;&#33258;&#23450;&#20041;&#25968;&#25454;&#28304;&#65292;&#20174;&#32780;&#24471;&#20197;&#33719;&#21462;&#20219;&#20309;&#24050;&#30693;&#19990;&#30028;&#21644;&#26410;&#30693;&#19990;&#30028;&#30340;&#25968;&#25454;&#12290;
</p><p>
&#22914;&#26524;&#30830;&#26377;&#24517;&#35201;&#65292;&#19968;&#20010;&#32034;&#24341;&#30340;&#25968;&#25454;&#21487;&#20197;&#26469;&#33258;&#22810;&#20010;&#25968;&#25454;&#28304;&#12290;&#36825;&#20123;&#25968;&#25454;&#23558;&#20005;&#26684;&#25353;&#29031;&#37197;&#32622;&#25991;&#20214;&#20013;&#23450;&#20041;&#30340;&#39034;&#24207;&#36827;&#34892;&#22788;&#29702;&#12290;&#25152;&#26377;&#20174;&#36825;&#20123;&#25968;&#25454;&#28304;&#33719;&#21462;&#21040;&#30340;&#25991;&#26723;&#23558;&#34987;&#21512;&#24182;&#65292;&#20849;&#21516;&#20135;&#29983;&#19968;&#20010;&#32034;&#24341;&#65292;&#22914;&#21516;&#20182;&#20204;&#26469;&#28304;&#20110;&#21516;&#19968;&#20010;&#25968;&#25454;&#28304;&#19968;&#26679;&#12290;
</p></div>
<div class="sect1" title="3.2.&nbsp;&#23646;&#24615;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="attributes"></a>3.2.&nbsp;&#23646;&#24615;</h2></div></div></div>
<p>
&#23646;&#24615;&#26159;&#38468;&#21152;&#22312;&#27599;&#20010;&#25991;&#26723;&#19978;&#30340;&#39069;&#22806;&#30340;&#20449;&#24687;&#65288;&#20540;&#65289;&#65292;&#21487;&#20197;&#22312;&#25628;&#32034;&#30340;&#26102;&#20505;&#29992;&#20110;&#36807;&#28388;&#21644;&#25490;&#24207;&#12290;
</p><p>
&#25628;&#32034;&#32467;&#26524;&#36890;&#24120;&#19981;&#20165;&#20165;&#26159;&#36827;&#34892;&#25991;&#26723;&#30340;&#21305;&#37197;&#21644;&#30456;&#20851;&#24230;&#30340;&#25490;&#24207;&#65292;&#32463;&#24120;&#36824;&#38656;&#35201;&#26681;&#25454;&#20854;&#20182;&#19982;&#25991;&#26723;&#30456;&#20851;&#32852;&#30340;&#20540;&#65292;&#23545;&#32467;&#26524;&#36827;&#34892;&#39069;&#22806;&#30340;&#22788;&#29702;&#12290;&#20363;&#22914;&#65292;&#29992;&#25143;&#21487;&#33021;&#38656;&#35201;&#23545;&#26032;&#38395;&#26816;&#32034;&#32467;&#26524;&#20381;&#27425;&#25353;&#26085;&#26399;&#21644;&#30456;&#20851;&#24230;&#25490;&#24207;&#65292;&#26816;&#32034;&#29305;&#23450;&#20215;&#26684;&#33539;&#22260;&#20869;&#30340;&#20135;&#21697;&#65292;&#26816;&#32034;&#26576;&#20123;&#29305;&#23450;&#29992;&#25143;&#30340;blog&#26085;&#24535;&#65292;&#25110;&#32773;&#23558;&#26816;&#32034;&#32467;&#26524;&#25353;&#26376;&#20998;&#32452;&#12290;&#20026;&#20102;&#39640;&#25928;&#22320;&#23436;&#25104;&#19978;&#36848;&#24037;&#20316;&#65292;Sphinx&#20801;&#35768;&#32473;&#25991;&#26723;&#38468;&#21152;&#19968;&#20123;&#39069;&#22806;&#30340;<em class="glossterm">&#23646;&#24615;</em>&#65292;&#24182;&#25226;&#36825;&#20123;&#20540;&#23384;&#20648;&#22312;&#20840;&#25991;&#32034;&#24341;&#20013;&#65292;&#20197;&#20415;&#22312;&#23545;&#20840;&#25991;&#21305;&#37197;&#32467;&#26524;&#36827;&#34892;&#36807;&#28388;&#12289;&#25490;&#24207;&#25110;&#20998;&#32452;&#26102;&#20351;&#29992;&#12290;
</p><p>&#23646;&#24615;&#19982;&#23383;&#27573;&#19981;&#21516;&#65292;&#19981;&#20250;&#34987;&#20840;&#25991;&#32034;&#24341;&#12290;&#20182;&#20204;&#20165;&#20165;&#26159;&#34987;&#23384;&#20648;&#22312;&#32034;&#24341;&#20013;&#65292;&#23646;&#24615;&#36827;&#34892;&#20840;&#25991;&#26816;&#32034;&#24335;&#19981;&#21487;&#33021;&#30340;&#12290;&#22914;&#26524;&#35201;&#23545;&#23646;&#24615;&#36827;&#34892;&#20840;&#25991;&#26816;&#32034;&#65292;&#31995;&#32479;&#23558;&#20250;&#36820;&#22238;&#19968;&#20010;&#38169;&#35823;&#12290;</p><p>&#20363;&#22914;&#65292;&#22914;&#26524;column&#34987;&#35774;&#32622;&#20026;&#23646;&#24615;&#65292;&#23601;&#19981;&#33021;&#20351;&#29992;&#25193;&#23637;&#34920;&#36798;&#24335;<code class="option">@column 1</code>&#21435;&#21305;&#37197;column&#20026;1&#30340;&#25991;&#26723;&#65307;&#22914;&#26524;&#25968;&#23383;&#23383;&#27573;&#25353;&#29031;&#26222;&#36890;&#30340;&#26041;&#24335;&#34987;&#32034;&#24341;&#65292;&#37027;&#20040;&#23601;&#21487;&#20197;&#36825;&#26679;&#26469;&#21305;&#37197;&#12290;</p><p>&#23646;&#24615;&#21487;&#29992;&#20110;&#36807;&#28388;&#65292;&#25110;&#32773;&#38480;&#21046;&#36820;&#22238;&#30340;&#25968;&#25454;&#65292;&#20197;&#21450;&#25490;&#24207;&#25110;&#32773; <a class="link" href="#clustering" title="5.7.&nbsp;&#32467;&#26524;&#20998;&#32452;&#65288;&#32858;&#31867;&#65289;">&#32467;&#26524;&#20998;&#32452;</a>;
&#20063;&#26377;&#21487;&#33021;&#26159;&#23436;&#20840;&#22522;&#20110;&#23646;&#24615;&#25490;&#24207;&#30340;&#32467;&#26524;, &#32780;&#27809;&#26377;&#20219;&#20309;&#25628;&#32034;&#30456;&#20851;&#21151;&#33021;&#30340;&#21442;&#19982;. &#27492;&#22806;, &#23646;&#24615;&#30452;&#25509;&#20174;&#25628;&#32034;&#26381;&#21153;&#31243;&#24207;&#36820;&#22238;&#20449;&#24687;, &#32780;&#34987;&#32034;&#24341;&#30340;&#25991;&#26412;&#20869;&#23481;&#21017;&#27809;&#26377;&#36820;&#22238;.</p><p>
&#35770;&#22363;&#24086;&#23376;&#34920;&#26159;&#19968;&#20010;&#24456;&#22909;&#30340;&#20363;&#23376;&#12290;&#20551;&#35774;&#21482;&#26377;&#24086;&#23376;&#30340;&#26631;&#39064;&#21644;&#20869;&#23481;&#36825;&#20004;&#20010;&#23383;&#27573;&#38656;&#35201;&#20840;&#25991;&#26816;&#32034;&#65292;&#20294;&#26159;&#26377;&#26102;&#26816;&#32034;&#32467;&#26524;&#38656;&#35201;&#34987;&#38480;&#21046;&#22312;&#26576;&#20010;&#29305;&#23450;&#30340;&#20316;&#32773;&#30340;&#24086;&#23376;&#25110;&#32773;&#23646;&#20110;&#26576;&#20010;&#23376;&#35770;&#22363;&#30340;&#24086;&#23376;&#20013;&#65288;&#20063;&#23601;&#26159;&#35828;&#65292;&#21482;&#26816;&#32034;&#22312;SQL&#34920;&#30340;author_id&#21644;forum_id&#36825;&#20004;&#20010;&#21015;&#19978;&#26377;&#29305;&#23450;&#20540;&#30340;&#37027;&#20123;&#34892;&#65289;&#65292;&#25110;&#32773;&#38656;&#35201;&#25353;post_date&#21015;&#23545;&#21305;&#37197;&#30340;&#32467;&#26524;&#25490;&#24207;&#65292;&#25110;&#32773;&#26681;&#25454;post_date&#21015;&#23545;&#24086;&#23376;&#25353;&#26376;&#20221;&#20998;&#32452;&#65292;&#24182;&#23545;&#27599;&#32452;&#20013;&#30340;&#24086;&#23376;&#35745;&#25968;&#12290;
</p><p>
&#20026;&#23454;&#29616;&#36825;&#20123;&#21151;&#33021;&#65292;&#21487;&#20197;&#23558;&#19978;&#36848;&#21508;&#21015;&#65288;&#38500;&#20102;&#26631;&#39064;&#21644;&#20869;&#23481;&#21015;&#65289;&#20316;&#20026;&#23646;&#24615;&#20570;&#32034;&#24341;&#65292;&#20043;&#21518;&#21363;&#21487;&#20351;&#29992;API&#35843;&#29992;&#26469;&#35774;&#32622;&#36807;&#28388;&#12289;&#25490;&#24207;&#21644;&#20998;&#32452;&#12290;&#20197;&#19979;&#26159;&#19968;&#20010;&#20363;&#23376;&#65306;
</p><h3>&#31034;&#20363;&#65306; sphinx.conf &#29255;&#27573;:</h3><p>
</p><pre class="programlisting">
...
sql_query = SELECT id, title, content, \
	author_id, forum_id, post_date FROM my_forum_posts
sql_attr_uint = author_id
sql_attr_uint = forum_id
sql_attr_timestamp = post_date
...
</pre><p>
</p><h3>&#31034;&#20363;&#65306; &#24212;&#29992;&#31243;&#24207;&#20195;&#30721; (&#20351;&#29992; PHP):</h3><p>
</p><pre class="programlisting">
// &#20165;&#25628;&#32034;ID&#20026;123&#30340;&#20316;&#32773;&#21457;&#24067;&#30340;&#20869;&#23481;
$cl-&gt;SetFilter ( "author_id", array ( 123 ) );

// &#20165;&#22312;id&#20026;1&#65292;3&#65292;7&#30340;&#23376;&#35770;&#22363;&#20013;&#25628;&#32034;
$cl-&gt;SetFilter ( "forum_id", array ( 1,3,7 ) );

// &#25353;&#29031;&#21457;&#24067;&#26102;&#38388;&#20498;&#24207;&#25490;&#21015;&#33719;&#21462;&#30340;&#32467;&#26524;
$cl-&gt;SetSortMode ( SPH_SORT_ATTR_DESC, "post_date" );
</pre><p>
</p><p>
&#21487;&#20197;&#36890;&#36807;&#21517;&#23383;&#26469;&#25351;&#31034;&#29305;&#23450;&#30340;&#23646;&#24615;&#65292;&#24182;&#19988;&#36825;&#20010;&#21517;&#23383;&#26159;&#22823;&#23567;&#20889;&#26080;&#20851;&#30340;&#65288;&#27880;&#24847;&#65306;&#30452;&#21040;&#30446;&#21069;&#20026;&#27490;&#65292;Sphinx&#36824;&#19981;&#25903;&#25345;&#20013;&#25991;&#20316;&#20026;&#23646;&#24615;&#30340;&#21517;&#31216;&#65289;&#12290;&#23646;&#24615;&#24182;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#34987;&#20840;&#25991;&#32034;&#24341;&#65292;&#20182;&#20204;&#21482;&#26159;&#25353;&#21407;&#23553;&#19981;&#21160;&#30340;&#23384;&#20648;&#22312;&#32034;&#24341;&#25991;&#20214;&#20013;&#12290;&#30446;&#21069;&#25903;&#25345;&#30340;&#23646;&#24615;&#31867;&#22411;&#22914;&#19979;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#26080;&#31526;&#21495;&#25972;&#25968;&#65288;1-32&#20301;&#23485;&#65289;;</li>
<li class="listitem">UNIX &#26102;&#38388;&#25139;&#65288;timestamps&#65289;;</li>
<li class="listitem">&#28014;&#28857;&#20540;&#65288;32&#20301;&#65292;IEEE 754&#21333;&#31934;&#24230;&#65289;;</li>
<li class="listitem">&#23383;&#31526;&#20018;&#24207;&#21015; (&#19987;&#25351;&#23588;&#20854;&#35745;&#31639;&#20986;&#26469;&#30340;&#23383;&#31526;&#20018;&#24207;&#21015;&#25972;&#25968;&#20540;);</li>
<li class="listitem"><a class="link" href="#conf-sql-attr-string" title="11.1.24.&nbsp;sql_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;(&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)">&#23383;&#31526;&#20018;</a> (&#29256;&#26412; 1.10-beta &#24320;&#22987;&#25903;&#25345;);</li>
<li class="listitem"><a class="link" href="#mva" title="3.3.&nbsp;MVA (&#22810;&#20540;&#23646;&#24615;)">&#22810;&#20540;&#23646;&#24615; MVA</a>(32&#20301;&#26080;&#31526;&#21495;&#25972;&#22411;&#20540;&#30340;&#21464;&#38271;&#24207;&#21015;).</li>
</ul></div>
<p>
</p><p>
&#30001;&#21508;&#20010;&#25991;&#26723;&#30340;&#20840;&#37096;&#30340;&#23646;&#24615;&#20449;&#24687;&#26500;&#25104;&#20102;&#19968;&#20010;&#38598;&#21512;&#65292;&#23427;&#20063;&#34987;&#31216;&#20026;&#25991;&#26723;&#20449;&#24687; <em class="glossterm">docinfo</em>. &#25991;&#26723;&#20449;&#24687;&#21487;&#20197;&#25353;&#22914;&#19979;&#20004;&#31181;&#26041;&#24335;&#20043;&#19968;&#23384;&#20648;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#19982;&#20840;&#25991;&#32034;&#24341;&#25968;&#25454;&#20998;&#24320;&#23384;&#20648;&#65288;&#8220;&#22806;&#37096;&#23384;&#20648;extern&#8221;&#65292;&#22312;<code class="filename">.spa</code>&#25991;&#20214;&#20013;&#23384;&#20648;&#65289;, &#25110;&#32773;</li>
<li class="listitem">&#22312;&#20840;&#25991;&#32034;&#24341;&#25968;&#25454;&#20013;&#65292;&#27599;&#20986;&#29616;&#19968;&#27425;&#25991;&#26723;ID &#23601;&#20986;&#29616;&#30456;&#24212;&#30340;&#25991;&#26723;&#20449;&#24687;&#65288;&#8220;&#20869;&#32852;&#23384;&#20648;inline&#8221;&#65292;&#22312;<code class="filename">.spd</code>&#25991;&#20214;&#20013;&#23384;&#20648;&#65289;&#12289;</li>
</ul></div>
<p>
</p><p>
&#24403;&#37319;&#29992;&#22806;&#37096;&#23384;&#20648;&#26041;&#24335;&#26102;&#65292;<code class="filename">searchd</code>&#24635;&#26159;&#22312;RAM&#20013;&#20445;&#25345;&#19968;&#20221;<code class="filename">.spa</code>&#25991;&#20214;&#30340;&#25335;&#36125;&#65288;&#35813;&#25991;&#20214;&#21253;&#21547;&#25152;&#26377;&#25991;&#26723;&#30340;&#25152;&#26377;&#25991;&#26723;&#20449;&#24687;&#65289;&#12290;&#36825;&#26159;&#20027;&#35201;&#26159;&#20026;&#20102;&#25552;&#39640;&#24615;&#33021;&#65292;&#22240;&#20026;&#30913;&#30424;&#30340;&#38543;&#26426;&#35775;&#38382;&#22826;&#24930;&#20102;&#12290;&#30456;&#21453;&#65292;&#20869;&#32852;&#23384;&#20648;&#24182;&#19981;&#38656;&#35201;&#20219;&#20309;&#39069;&#22806;&#30340;RAM&#65292;&#20294;&#20195;&#20215;&#26159;&#32034;&#24341;&#25991;&#20214;&#30340;&#20307;&#31215;&#22823;&#22823;&#22320;&#22686;&#21152;&#20102;&#65307;&#35831;&#27880;&#24847;&#65292;<span class="emphasis"><em>&#20840;&#37096;</em></span>&#23646;&#24615;&#20540;&#22312;&#25991;&#26723;ID&#20986;&#29616;&#30340;<span class="emphasis"><em>&#27599;&#19968;&#22788;</em></span>&#37117;&#34987;&#22797;&#21046;&#20102;&#19968;&#20221;&#65292;&#32780;&#25991;&#26723;ID&#20986;&#29616;&#30340;&#27425;&#25968;&#24688;&#26159;&#25991;&#26723;&#20013;&#19981;&#21516;&#20851;&#38190;&#23383;&#30340;&#25968;&#30446;&#12290;&#20165;&#24403;&#26377;&#19968;&#20010;&#24456;&#23567;&#30340;&#23646;&#24615;&#38598;&#12289;&#24222;&#22823;&#30340;&#25991;&#26412;&#25968;&#25454;&#38598;&#21644;&#21463;&#38480;&#30340;RAM&#26102;&#65292;&#20869;&#32852;&#23384;&#20648;&#25165;&#26159;&#19968;&#20010;&#21487;&#32771;&#34385;&#30340;&#36873;&#25321;&#12290;&#22312;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#22806;&#37096;&#23384;&#20648;&#21487;&#20196;&#24314;&#31435;&#32034;&#24341;&#21644;&#26816;&#32034;&#30340;&#25928;&#29575;&#37117;<span class="emphasis"><em>&#22823;&#24133;&#25552;&#39640;</em></span>&#12290;
</p><p>
&#26816;&#32034;&#26102;&#65292;&#37319;&#29992;&#22806;&#37096;&#23384;&#20648;&#26041;&#24335;&#20135;&#29983;&#30340;&#30340;&#20869;&#23384;&#38656;&#27714;&#20026; (1+&#23646;&#24615;&#24635;&#25968;)*&#25991;&#26723;&#24635;&#25968;*4&#23383;&#33410;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#24102;&#26377;&#20004;&#20010;&#23646;&#24615;&#21644;&#19968;&#20010;&#26102;&#38388;&#25139;&#30340;1&#21315;&#19975;&#31687;&#25991;&#26723;&#20250;&#28040;&#32791;(1+2+1)*10M*4 = 160 MB&#30340;RAM&#12290;&#36825;&#26159;&#27599;&#20010;&#26816;&#32034;&#30340;&#23432;&#25252;&#36827;&#31243;&#65288;<span class="emphasis"><em>PER DAEMON</em></span>&#65289;&#28040;&#32791;&#30340;&#37327;&#65292;&#32780;&#19981;&#26159;&#27599;&#27425;&#26597;&#35810;&#65292;<code class="filename">searchd</code>&#20165;&#22312;&#21551;&#21160;&#26102;&#20998;&#37197;160MB&#30340;&#20869;&#23384;&#65292;&#35835;&#20837;&#25968;&#25454;&#24182;&#22312;&#19981;&#21516;&#30340;&#26597;&#35810;&#20043;&#38388;&#20445;&#25345;&#36825;&#20123;&#25968;&#25454;&#12290;&#23376;&#36827;&#31243;&#24182;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#23545;&#36825;&#20123;&#25968;&#25454;&#20570;&#39069;&#22806;&#30340;&#25335;&#36125;&#12290;
</p></div>
<div class="sect1" title="3.3.&nbsp;MVA (&#22810;&#20540;&#23646;&#24615;)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mva"></a>3.3.&nbsp;MVA (&#22810;&#20540;&#23646;&#24615;)</h2></div></div></div>
<p>
&#22810;&#20540;&#23646;&#24615;MVA (multi-valued attributes)&#26159;&#25991;&#26723;&#23646;&#24615;&#30340;&#19968;&#31181;&#37325;&#35201;&#30340;&#29305;&#20363;&#65292;MVA&#20351;&#24471;&#21521;&#25991;&#26723;&#38468;&#21152;&#19968;&#31995;&#21015;&#30340;&#20540;&#20316;&#20026;&#23646;&#24615;&#30340;&#24819;&#27861;&#25104;&#20026;&#21487;&#33021;&#12290;&#36825;&#23545;&#25991;&#31456;&#30340;tags&#65292;&#20135;&#21697;&#31867;&#21035;&#31561;&#31561;&#38750;&#24120;&#26377;&#29992;&#12290;MVA&#23646;&#24615;&#25903;&#25345;&#36807;&#28388;&#21644;&#20998;&#32452;&#65288;&#20294;&#19981;&#25903;&#25345;&#20998;&#32452;&#25490;&#24207;&#65289;&#12290;
</p><p>
&#30446;&#21069;MVA&#21015;&#34920;&#39033;&#30340;&#20540;&#34987;&#38480;&#21046;&#20026;32&#20301;&#26080;&#31526;&#21495;&#25972;&#25968;&#12290;&#21015;&#34920;&#30340;&#38271;&#24230;&#19981;&#21463;&#38480;&#21046;&#65292;&#21482;&#35201;&#26377;&#36275;&#22815;&#30340;RAM&#65292;&#20219;&#24847;&#20010;&#25968;&#30340;&#20540;&#37117;&#21487;&#20197;&#34987;&#38468;&#21152;&#21040;&#25991;&#26723;&#19978;&#65288;&#21253;&#21547;MVA&#20540;&#30340;<code class="filename">.spm</code>&#25991;&#20214;&#20250;&#34987;<code class="filename">searchd</code>&#39044;&#32531;&#20914;&#21040;RAM&#20013;&#65289;&#12290;MVA&#30340;&#28304;&#25968;&#25454;&#26469;&#28304;&#26082;&#21487;&#20197;&#26159;&#19968;&#20010;&#21333;&#29420;&#30340;&#26597;&#35810;&#65292;&#20063;&#21487;&#20197;&#26159;&#25991;&#26723;&#23646;&#24615;&#65292;&#21442;&#32771; <a class="link" href="#conf-sql-attr-multi" title="11.1.23.&nbsp;sql_attr_multi&#65306;&#22810;&#20540;&#23646;&#24615;(MVA)&#23646;&#24615;">sql_attr_multi</a>&#20013;&#30340;&#26469;&#28304;&#31867;&#22411;&#12290;&#22312;&#31532;&#19968;&#31181;&#24773;&#20917;&#20013;&#65292;&#35813;&#26597;&#35810;&#39035;&#36820;&#22238;&#25991;&#26723;ID&#21644;MVA&#20540;&#30340;&#24207;&#23545;&#65307;&#32780;&#22312;&#31532;&#20108;&#31181;&#24773;&#20917;&#20013;&#65292;&#35813;&#23383;&#27573;&#34987;&#20998;&#26512;&#20026;&#25972;&#22411;&#20540;&#12290;&#23545;&#20110;&#22810;&#20540;&#23646;&#24615;&#30340;&#36755;&#20837;&#25968;&#25454;&#30340;&#39034;&#24207;&#27809;&#26377;&#20219;&#20309;&#38480;&#21046;&#65292;&#22312;&#32034;&#24341;&#36807;&#31243;&#20013;&#36825;&#20123;&#20540;&#20250;&#33258;&#21160;&#25353;&#25991;&#26723;ID&#20998;&#32452;&#65288;&#32780;&#30456;&#21516;&#25991;&#26723;ID&#19979;&#30340;&#25968;&#25454;&#20063;&#20250;&#25490;&#24207;&#65289;&#12290;
</p><p>
&#22312;&#36807;&#28388;&#36807;&#31243;&#20013;&#65292;MVA&#23646;&#24615;&#20013;&#30340;<span class="emphasis"><em>&#20219;&#20309;</em></span>&#19968;&#20010;&#20540;&#28385;&#36275;&#36807;&#28388;&#26465;&#20214;&#65292;&#21017;&#25991;&#26723;&#19982;&#36807;&#28388;&#26465;&#20214;&#21305;&#37197;&#65288;&#22240;&#27492;&#36890;&#36807;&#25490;&#20182;&#24615;&#36807;&#28388;&#30340;&#25991;&#26723;&#19981;&#20250;&#21253;&#21547;&#20219;&#20309;&#34987;&#31105;&#27490;&#30340;&#20540;&#65289;&#12290;&#25353;MVA&#23646;&#24615;&#20998;&#32452;&#26102;&#65292;&#19968;&#31687;&#25991;&#26723;&#20250;&#34987;&#20998;&#21040;&#19982;&#22810;&#20010;&#19981;&#21516;MVA&#20540;&#23545;&#24212;&#30340;&#22810;&#20010;&#32452;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#25991;&#26723;&#38598;&#21482;&#21253;&#21547;&#19968;&#31687;&#25991;&#26723;&#65292;&#23427;&#26377;&#19968;&#20010;&#21483;&#20570;tag&#30340;MVA&#23646;&#24615;&#65292;&#35813;&#23646;&#24615;&#30340;&#20540;&#26159;5&#12289;7&#21644;11&#65292;&#37027;&#20040;&#25353;tag&#30340;&#20998;&#32452;&#25805;&#20316;&#20250;&#20135;&#29983;&#19977;&#20010;&#32452;&#65292;&#23427;&#20204;&#30340;@count&#37117;&#26159;1&#65292;@groupby&#38190;&#20540;&#20998;&#21035;&#26159;5&#12289;7&#21644;11&#12290;&#36824;&#35201;&#27880;&#24847;&#65292;&#25353;MVA&#20998;&#32452;&#21487;&#33021;&#20250;&#23548;&#33268;&#32467;&#26524;&#38598;&#20013;&#26377;&#37325;&#22797;&#30340;&#25991;&#26723;&#65306;&#22240;&#20026;&#27599;&#31687;&#25991;&#25991;&#26723;&#21487;&#33021;&#23646;&#20110;&#19981;&#21516;&#30340;&#32452;&#65292;&#32780;&#19988;&#23427;&#21487;&#33021;&#22312;&#22810;&#20010;&#32452;&#20013;&#34987;&#36873;&#20026;&#26368;&#20339;&#32467;&#26524;&#65292;&#36825;&#20250;&#23548;&#33268;&#37325;&#22797;&#30340;ID&#12290;&#30001;&#20110;&#21382;&#21490;&#21407;&#22240;&#65292;PHP API&#23545;&#32467;&#26524;&#38598;&#30340;&#34892;&#36827;&#34892;&#25353;&#25991;&#26723;ID&#30340;&#26377;&#24207;hash&#65292;&#22240;&#27492;&#29992;PHP API&#36827;&#34892;&#23545;MVA&#23646;&#24615;&#30340;&#20998;&#32452;&#25805;&#20316;&#26102;&#20320;&#36824;&#38656;&#35201;&#20351;&#29992; <a class="link" href="#api-func-setarrayresult" title="8.1.6.&nbsp;SetArrayResult &#65288;&#35774;&#32622;&#32467;&#26524;&#36820;&#22238;&#26684;&#24335;&#65289;">SetArrayResult()</a>.
</p></div>
<div class="sect1" title="3.4.&nbsp;&#32034;&#24341;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="indexes"></a>3.4.&nbsp;&#32034;&#24341;</h2></div></div></div>
<p>
&#20026;&#20102;&#24555;&#36895;&#22320;&#30456;&#24212;&#21709;&#24212;&#26597;&#35810;&#65292;Sphinx&#38656;&#35201;&#20174;&#25991;&#26412;&#25968;&#25454;&#20013;&#24314;&#31435;&#19968;&#31181;&#20026;&#26597;&#35810;&#20570;&#20248;&#21270;&#30340;&#29305;&#27530;&#30340;&#25968;&#25454;&#32467;&#26500;&#12290;&#36825;&#31181;&#25968;&#25454;&#32467;&#26500;&#34987;&#31216;&#20026;&#32034;&#24341;&#65288;<em class="glossterm">index</em>&#65289;&#65307;&#32780;&#24314;&#31435;&#32034;&#24341;&#30340;&#36807;&#31243;&#20063;&#21483;&#20570;&#32034;&#24341;&#25110;&#24314;&#31435;&#32034;&#24341;&#65288;<em class="glossterm">indexing</em>&#65289;&#12290;
</p><p>
&#19981;&#21516;&#30340;&#32034;&#24341;&#31867;&#22411;&#26159;&#20026;&#19981;&#21516;&#30340;&#20219;&#21153;&#35774;&#35745;&#30340;&#12290;&#27604;&#22914;&#65292;&#22522;&#20110;&#30913;&#30424;&#30340;B-Tree&#23384;&#20648;&#32467;&#26500;&#30340;&#32034;&#24341;&#21487;&#20197;&#26356;&#26032;&#36215;&#26469;&#27604;&#36739;&#31616;&#21333;&#65288;&#23481;&#26131;&#21521;&#24050;&#26377;&#30340;&#32034;&#24341;&#25554;&#20837;&#26032;&#30340;&#25991;&#26723;&#65289;&#65292;&#20294;&#26159;&#25628;&#36215;&#26469;&#23601;&#30456;&#24403;&#24930;&#12290;&#22240;&#27492;Sphinx&#30340;&#31243;&#24207;&#26550;&#26500;&#20801;&#35768;&#36731;&#26494;&#23454;&#29616;&#22810;&#31181;&#19981;&#21516;&#30340;<em class="glossterm">&#32034;&#24341;&#31867;&#22411;</em>&#12290;
</p><p>
&#30446;&#21069;&#22312;Sphinx&#20013;&#23454;&#29616;&#30340;&#21807;&#19968;&#19968;&#31181;&#32034;&#24341;&#31867;&#22411;&#26159;&#20026;&#26368;&#20248;&#21270;&#24314;&#31435;&#32034;&#24341;&#21644;&#26816;&#32034;&#30340;&#36895;&#24230;&#32780;&#35774;&#35745;&#30340;&#12290;&#38543;&#20043;&#32780;&#26469;&#30340;&#20195;&#20215;&#26159;&#26356;&#26032;&#32034;&#24341;&#30456;&#24403;&#30340;&#24456;&#24930;&#12290;&#29702;&#35770;&#19978;&#35762;&#65292;&#26356;&#26032;&#36825;&#31181;&#32034;&#24341;&#29978;&#33267;&#21487;&#33021;&#27604;&#20174;&#22836;&#37325;&#24314;&#32034;&#24341;&#36824;&#35201;&#24930;&#12290;&#19981;&#36807;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#36825;&#21487;&#20197;&#38752;&#24314;&#31435;&#22810;&#20010;&#32034;&#24341;&#26469;&#35299;&#20915;&#32034;&#24341;&#26356;&#26032;&#24930;&#30340;&#38382;&#39064;&#65292;&#32454;&#33410;&#35831;&#21442;&#32771; <a class="xref" href="#live-updates" title="3.11.&nbsp;&#23454;&#26102;&#32034;&#24341;&#26356;&#26032;">&#31532;&nbsp;3.11&nbsp;&#33410; &#8220;&#23454;&#26102;&#32034;&#24341;&#26356;&#26032;&#8221;</a>.
</p><p>
&#23454;&#29616;&#26356;&#22810;&#30340;&#32034;&#24341;&#31867;&#22411;&#25903;&#25345;&#65292;&#24050;&#21015;&#20837;&#35745;&#21010;&#65307;&#30446;&#21069;&#24050;&#32463;&#21253;&#25324;&#19968;&#31181;&#21487;&#20197;&#23454;&#26102;&#26356;&#26032;&#30340;&#31867;&#22411;&#12290;
</p><p>
&#27599;&#20010;&#37197;&#32622;&#25991;&#20214;&#37117;&#21487;&#20197;&#25353;&#38656;&#37197;&#32622;&#36275;&#22815;&#22810;&#30340;&#32034;&#24341;&#12290;<code class="filename">indexer</code> &#24037;&#20855;&#21487;&#20197;&#23558;&#23427;&#20204;&#21516;&#26102;&#37325;&#26032;&#32034;&#24341;&#65288;&#22914;&#26524;&#20351;&#29992;&#20102;<code class="option">--all</code>&#36873;&#39033;&#65289;&#25110;&#32773;&#20165;&#26356;&#26032;&#26126;&#30830;&#25351;&#20986;&#30340;&#19968;&#20010;&#12290; <code class="filename">searchd</code>&#24037;&#20855;&#20250;&#20026;&#25152;&#26377;&#34987;&#25351;&#26126;&#30340;&#32034;&#24341;&#25552;&#20379;&#26816;&#32034;&#26381;&#21153;&#65292;&#32780;&#23458;&#25143;&#31471;&#21487;&#20197;&#22312;&#36816;&#34892;&#26102;&#25351;&#23450;&#20351;&#29992;&#37027;&#20123;&#32034;&#24341;&#36827;&#34892;&#26816;&#32034;&#12290;
</p></div>
<div class="sect1" title="3.5.&nbsp;&#28304;&#25968;&#25454;&#30340;&#38480;&#21046;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="data-restrictions"></a>3.5.&nbsp;&#28304;&#25968;&#25454;&#30340;&#38480;&#21046;</h2></div></div></div>
<p>
CoreSeek/Sphinx&#32034;&#24341;&#30340;&#28304;&#25968;&#25454;&#26377;&#19968;&#20123;&#38480;&#21046;&#65292;&#20854;&#20013;&#26368;&#37325;&#35201;&#30340;&#19968;&#26465;&#26159;:
</p><p><span class="bold"><strong>
&#25152;&#26377;&#25991;&#26723;&#30340;ID&#24517;&#39035;&#26159;&#21807;&#19968;&#30340;&#26080;&#31526;&#21495;&#38750;&#38646;&#25972;&#25968;&#65288;&#26681;&#25454;Sphinx&#26500;&#36896;&#26102;&#30340;&#36873;&#39033;&#65292;&#21487;&#33021;&#26159;32&#20301;&#25110;64&#20301;&#65289;
</strong></span></p><p>
&#22914;&#26524;&#19981;&#28385;&#36275;&#36825;&#20010;&#35201;&#27714;&#65292;&#21508;&#31181;&#31967;&#31957;&#30340;&#24773;&#20917;&#37117;&#21487;&#33021;&#21457;&#29983;&#12290;&#20363;&#22914;&#65292;CoreSeek/Sphinx&#24314;&#31435;&#32034;&#24341;&#26102;&#21487;&#33021;&#22312;&#31361;&#28982;&#23849;&#28291;&#65292;&#25110;&#32773;&#30001;&#20110;&#20914;&#31361;&#30340;&#25991;&#26723;ID&#32780;&#22312;&#32034;&#24341;&#32467;&#26524;&#20013;&#20135;&#29983;&#22855;&#24618;&#30340;&#32467;&#26524;&#12290;&#20063;&#21487;&#33021;&#65292;&#19968;&#21482;&#37325;&#36798;&#19968;&#21544;&#30340;&#24656;&#40857;&#26368;&#21518;&#36339;&#20986;&#20320;&#30340;&#30005;&#33041;&#65292;&#21521;&#20320;&#25172;&#33261;&#34507;&#12290;&#19981;&#35201;&#35828;&#25105;&#27809;&#26377;&#21578;&#35785;&#36807;&#20320;&#21679;&#65281;
</p></div>
<div class="sect1" title="3.6.&nbsp;&#23383;&#31526;&#38598;&#12289;&#22823;&#23567;&#20889;&#36716;&#25442;&#21644;&#36716;&#25442;&#34920;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charsets"></a>3.6.&nbsp;&#23383;&#31526;&#38598;&#12289;&#22823;&#23567;&#20889;&#36716;&#25442;&#21644;&#36716;&#25442;&#34920;</h2></div></div></div>
<p>
&#24403;&#24314;&#31435;&#32034;&#24341;&#26102;&#65292;Sphinx&#20174;&#25351;&#23450;&#30340;&#25968;&#25454;&#28304;&#33719;&#24471;&#25991;&#26412;&#25991;&#26723;&#65292;&#23558;&#25991;&#26412;&#20998;&#25104;&#35789;&#30340;&#38598;&#21512;&#65292;&#20877;&#23545;&#27599;&#20010;&#35789;&#20570;&#22823;&#23567;&#20889;&#36716;&#25442;&#65292;&#20110;&#26159;&#8220;Abc&#8221;&#65292;&#8220;ABC&#8221;&#21644;&#8220;abc&#8221;&#37117;&#34987;&#24403;&#20316;&#21516;&#19968;&#20010;&#35789;&#65288;word&#65292;&#25110;&#32773;&#26356;&#23398;&#31350;&#19968;&#28857;&#65292;&#35789;&#39033;<em class="glossterm">term</em>&#65289;
</p><p>
&#20026;&#20102;&#27491;&#30830;&#23436;&#25104;&#19978;&#36848;&#24037;&#20316;&#65292;Sphinx&#38656;&#35201;&#30693;&#36947;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#28304;&#25991;&#26412;&#26159;&#20160;&#20040;&#32534;&#30721;&#30340;;</li>
<li class="listitem">&#37027;&#20123;&#23383;&#31526;&#26159;&#23383;&#27597;&#65292;&#21738;&#20123;&#19981;&#26159;;</li>
<li class="listitem">&#21738;&#20123;&#23383;&#31526;&#38656;&#35201;&#34987;&#36716;&#25442;&#65292;&#20197;&#21450;&#34987;&#36716;&#25442;&#25104;&#20160;&#20040;.</li>
</ul></div>
<p>
&#36825;&#20123;&#37117;&#21487;&#20197;&#29992;
<code class="option"><a class="link" href="#conf-charset-type" title="11.2.15.&nbsp;charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;">charset_type</a></code> &#21644; 
<code class="option"><a class="link" href="#conf-charset-table" title="11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;">charset_table</a></code> &#36873;&#39033;&#20026;&#27599;&#20010;&#32034;&#24341;&#21333;&#29420;&#37197;&#32622;.
<code class="option"><a class="link" href="#conf-charset-type" title="11.2.15.&nbsp;charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;">charset_type</a></code>
&#25351;&#23450;&#25991;&#26723;&#30340;&#32534;&#30721;&#26159;&#21333;&#23383;&#33410;&#30340;&#65288;SBCS&#65289;&#36824;&#26159;UTF-8&#30340;&#12290;&#22312;Coreseek&#20013;&#65292;&#22914;&#26524;&#36890;&#36807;charset_dictpath&#35774;&#32622;&#20013;&#25991;&#35789;&#20856;&#21551;&#21160;&#20102;&#20013;&#25991;&#20998;&#35789;&#27169;&#24335;&#21518;&#65292;&#19981;&#20165;&#21487;&#20197;&#20351;&#29992;UTF-8&#32534;&#30721;&#30340;&#65292;&#36824;&#21487;&#20197;&#20351;&#29992;GBK&#21450;BIG5&#30340;&#32534;&#30721;&#65288;&#38656;&#35201;&#32534;&#35793;&#26102;&#25552;&#20379;iconv&#25903;&#25345;&#65289;&#65307;&#20294;&#26159;&#22312;&#20869;&#37096;&#23454;&#29616;&#20013;&#65292;&#20173;&#28982;&#26159;&#39044;&#20808;&#36716;&#25442;&#25104;UTF-8&#32534;&#30721;&#22312;&#36827;&#34892;&#22788;&#29702;&#30340;.
<code class="option"><a class="link" href="#conf-charset-table" title="11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;">charset_table</a></code>
&#21017;&#25351;&#23450;&#20102;&#23383;&#27597;&#31867;&#23383;&#31526;&#21040;&#23427;&#20204;&#30340;&#22823;&#23567;&#20889;&#36716;&#25442;&#29256;&#26412;&#30340;&#23545;&#24212;&#34920;&#65292;&#27809;&#26377;&#22312;&#36825;&#24352;&#34920;&#20013;&#20986;&#29616;&#30340;&#23383;&#31526;&#34987;&#35748;&#20026;&#26159;&#38750;&#23383;&#27597;&#31867;&#23383;&#31526;&#65292;&#24182;&#19988;&#22312;&#24314;&#31435;&#32034;&#24341;&#21644;&#26816;&#32034;&#26102;&#34987;&#24403;&#20316;&#35789;&#30340;&#20998;&#21106;&#31526;&#26469;&#30475;&#24453;&#12290;
</p><p>
&#27880;&#24847;&#65292;&#23613;&#31649;&#40664;&#35748;&#30340;&#36716;&#25442;&#34920;&#24182;&#19981;&#21253;&#21547;&#31354;&#26684;&#31526;
(ASCII code 0x20, Unicode U+0020) , &#20294;&#26159;&#36825;&#20040;&#20570;&#26159;
<span class="emphasis"><em>&#23436;&#20840;&#21512;&#27861;</em></span>&#30340;&#12290;
&#36825;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#21487;&#33021;&#26377;&#29992;&#65292;&#27604;&#22914;&#22312;&#23545;tag&#20113;&#26500;&#36896;&#32034;&#24341;&#30340;&#26102;&#20505;&#65292;&#36825;&#26679;&#19968;&#20010;&#29992;&#31354;&#26684;&#20998;&#24320;&#30340;&#35789;&#38598;&#23601;&#21487;&#20197;&#34987;&#24403;&#20316;&#19968;&#20010;<span class="emphasis"><em>&#21333;&#29420;&#30340;</em></span>&#26597;&#35810;&#39033;&#20102;.
</p><p>
&#40664;&#35748;&#36716;&#25442;&#34920;&#30446;&#21069;&#21253;&#25324;&#33521;&#25991;&#21644;&#20420;&#25991;&#23383;&#31526;&#12290;&#27426;&#36814;&#25552;&#20132;&#24744;&#20026;&#20854;&#20182;&#35821;&#35328;&#25776;&#20889;&#30340;&#36716;&#25442;&#34920;&#65281;
</p><p>
&#22312;Coreseek&#20013;&#65292;&#21551;&#29992;&#20013;&#25991;&#20998;&#35789;&#21518;&#65292;&#31995;&#32479;&#20250;&#20351;&#29992;MMSeg&#20869;&#32622;&#30340;&#30721;&#34920;&#65288;&#34987;&#30828;&#32534;&#30721;&#22312;MMSeg&#30340;&#31243;&#24207;&#20013;&#65289;&#65292;&#22240;&#27492;&#65292;charset_table&#22312;&#21551;&#29992;&#20998;&#35789;&#21518;&#23558;&#22833;&#25928;&#12290;
</p></div>
<div class="sect1" title="3.7.&nbsp;SQL &#25968;&#25454;&#28304; (MySQL, PostgreSQL)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql"></a>3.7.&nbsp;SQL &#25968;&#25454;&#28304; (MySQL, PostgreSQL)</h2></div></div></div>
<p>
&#23545;&#20110;&#25152;&#26377;&#30340;&#22522;&#20110;SQL&#39537;&#21160;&#65292;&#24314;&#31435;&#32034;&#24341;&#30340;&#36807;&#31243;&#22914;&#19979;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#36830;&#25509;&#21040;&#25968;&#25454;&#24211;;</li>
<li class="listitem">&#25191;&#34892;&#39044;&#26597;&#35810; (&#21442;&#35265; <a class="xref" href="#conf-sql-query-pre" title="11.1.11.&nbsp;sql_query_pre&#65306;&#24453;&#32034;&#24341;&#25968;&#25454;&#33719;&#21462;&#21069;&#26597;&#35810;">&#31532;&nbsp;11.1.11&nbsp;&#33410; &#8220;sql_query_pre&#65306;&#24453;&#32034;&#24341;&#25968;&#25454;&#33719;&#21462;&#21069;&#26597;&#35810;&#8221;</a>) &#65292;&#20197;&#20415;&#23436;&#25104;&#25152;&#26377;&#24517;&#39035;&#30340;&#21021;&#22987;&#35774;&#32622;&#65292;&#27604;&#22914;&#20026;MySQL&#36830;&#25509;&#35774;&#32622;&#32534;&#30721;;</li>
<li class="listitem">&#25191;&#34892;&#20027;&#26597;&#35810; (&#21442;&#35265; <a class="xref" href="#conf-sql-query" title="11.1.12.&nbsp;sql_query&#65306;&#33719;&#21462;&#24453;&#32034;&#24341;&#25968;&#25454;&#26597;&#35810;">&#31532;&nbsp;11.1.12&nbsp;&#33410; &#8220;sql_query&#65306;&#33719;&#21462;&#24453;&#32034;&#24341;&#25968;&#25454;&#26597;&#35810;&#8221;</a>) &#65292;&#20854;&#36820;&#22238;&#30340;&#30340;&#25968;&#25454;&#23558;&#34987;&#32034;&#24341;;</li>
<li class="listitem">&#25191;&#34892;&#21518;&#26597;&#35810; (&#21442;&#35265; <a class="xref" href="#conf-sql-query-post" title="11.1.30.&nbsp;sql_query_post&#65306;&#25968;&#25454;&#33719;&#21462;&#21518;&#26597;&#35810;">&#31532;&nbsp;11.1.30&nbsp;&#33410; &#8220;sql_query_post&#65306;&#25968;&#25454;&#33719;&#21462;&#21518;&#26597;&#35810;&#8221;</a>) &#65292;&#20197;&#20415;&#23436;&#25104;&#25152;&#26377;&#24517;&#39035;&#30340;&#28165;&#29702;&#24037;&#20316;;</li>
<li class="listitem">&#20851;&#38381;&#21040;&#25968;&#25454;&#24211;&#30340;&#36830;&#25509;;</li>
<li class="listitem">&#23545;&#30701;&#35821;&#36827;&#34892;&#25490;&#24207; (&#25110;&#32773;&#23398;&#31350;&#19968;&#28857;, &#32034;&#24341;&#31867;&#22411;&#30456;&#20851;&#30340;&#21518;&#22788;&#29702;);</li>
<li class="listitem">&#20877;&#27425;&#24314;&#31435;&#21040;&#25968;&#25454;&#24211;&#30340;&#36830;&#25509;;</li>
<li class="listitem">&#25191;&#34892;&#32034;&#24341;&#21518;&#26597;&#35810; (&#21442;&#35265; <a class="xref" href="#conf-sql-query-post-index" title="11.1.31.&nbsp;sql_query_post_index&#65306;&#25968;&#25454;&#32034;&#24341;&#21518;&#26597;&#35810;">&#31532;&nbsp;11.1.31&nbsp;&#33410; &#8220;sql_query_post_index&#65306;&#25968;&#25454;&#32034;&#24341;&#21518;&#26597;&#35810;&#8221;</a>) &#65292;&#20197;&#20415;&#23436;&#25104;&#25152;&#26377;&#26368;&#32456;&#30340;&#28165;&#29702;&#21892;&#21518;&#24037;&#20316;;</li>
<li class="listitem">&#20877;&#27425;&#20851;&#38381;&#21040;&#25968;&#25454;&#24211;&#30340;&#36830;&#25509;.</li>
</ul></div>
<p>
&#22823;&#22810;&#25968;&#21442;&#25968;&#26159;&#24456;&#30452;&#35266;&#30340;&#65292;&#20363;&#22914;&#25968;&#25454;&#24211;&#30340;&#29992;&#25143;&#21517;&#12289;&#20027;&#26426;&#12289;&#23494;&#30721;&#12290;&#19981;&#36807;&#65292;&#36824;&#26377;&#19968;&#20123;&#32454;&#33410;&#19978;&#30340;&#38382;&#39064;&#38656;&#35201;&#35752;&#35770;&#12290;
</p><h3><a name="ranged-queries"></a>&#21306;&#27573;&#26597;&#35810;</h3><p>
&#32034;&#24341;&#31995;&#32479;&#38656;&#35201;&#36890;&#36807;&#20027;&#26597;&#35810;&#26469;&#33719;&#21462;&#20840;&#37096;&#30340;&#25991;&#26723;&#20449;&#24687;&#65292;&#19968;&#31181;&#31616;&#21333;&#30340;&#23454;&#29616;&#26159;&#23558;&#25972;&#20010;&#34920;&#30340;&#25968;&#25454;&#35835;&#20837;&#20869;&#23384;&#65292;&#20294;&#26159;&#36825;&#21487;&#33021;&#23548;&#33268;&#25972;&#20010;&#34920;&#34987;&#38145;&#23450;&#24182;&#20351;&#24471;&#20854;&#20182;&#25805;&#20316;&#34987;&#38459;&#27490;&#65288;&#20363;&#22914;&#65306;&#22312;MyISAM&#26684;&#24335;&#19978;&#30340;INSERT&#25805;&#20316;&#65289;&#65292;&#21516;&#26102;&#65292;&#23558;&#28010;&#36153;&#22823;&#37327;&#20869;&#23384;&#29992;&#20110;&#23384;&#20648;&#26597;&#35810;&#32467;&#26524;&#65292;&#35832;&#22914;&#27492;&#31867;&#30340;&#38382;&#39064;&#21543;&#12290;
&#20026;&#20102;&#36991;&#20813;&#20986;&#29616;&#36825;&#31181;&#24773;&#20917;&#65292;CoreSeek/Sphinx&#25903;&#25345;&#19968;&#31181;&#34987;&#31216;&#20026; <em class="glossterm">&#21306;&#27573;&#26597;&#35810;</em>&#30340;&#25216;&#26415;.
&#39318;&#20808;&#65292;CoreSeek/Sphinx&#20174;&#25968;&#25454;&#24211;&#20013;&#21462;&#20986;&#25991;&#26723;ID&#30340;&#26368;&#23567;&#20540;&#21644;&#26368;&#22823;&#20540;&#65292;&#23558;&#30001;&#26368;&#22823;&#20540;&#21644;&#26368;&#23567;&#20540;&#23450;&#20041;&#33258;&#28982;&#25968;&#21306;&#38388;&#20998;&#25104;&#33509;&#24178;&#20221;&#65292;&#19968;&#27425;&#33719;&#21462;&#25968;&#25454;&#65292;&#24314;&#31435;&#32034;&#24341;&#12290;&#29616;&#20030;&#20363;&#22914;&#19979;&#65306;
</p><div class="example"><a name="ex-ranged-queries"></a><p class="title"><b>&#20363;&nbsp;3.1.&nbsp;&#33539;&#22260;&#26597;&#35810;&#29992;&#27861;&#20030;&#20363;</b></p><div class="example-contents"><pre class="programlisting">
# in sphinx.conf

sql_query_range	= SELECT MIN(id),MAX(id) FROM documents
sql_range_step = 1000
sql_query = SELECT * FROM documents WHERE id&gt;=$start AND id&lt;=$end
</pre></div></div>
<br class="example-break"><p>
&#22914;&#26524;&#36825;&#20010;&#34920;&#65288;documents&#65289;&#20013;&#65292;&#23383;&#27573;ID&#30340;&#26368;&#23567;&#20540;&#21644;&#26368;&#22823;&#20540;&#20998;&#21035;&#26159;1 &#21644;2345&#65292;&#21017;sql_query&#23558;&#25191;&#34892;3&#27425;&#65306;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">&#23558; <code class="option">$start</code> &#26367;&#25442;&#20026;1&#65292;&#24182;&#19988;&#23558; <code class="option">$end</code> &#26367;&#25442;&#20026; 1000;</li>
<li class="listitem">&#23558; <code class="option">$start</code> &#26367;&#25442;&#20026;1001&#65292;&#24182;&#19988;&#23558; <code class="option">$end</code> &#26367;&#25442;&#20026; 2000;</li>
<li class="listitem">&#23558; <code class="option">$start</code> &#26367;&#25442;&#20026;2001&#65292;&#24182;&#19988;&#23558; <code class="option">$end</code> &#26367;&#25442;&#20026; 2345.</li>
</ol></div>
<p>
&#26174;&#28982;&#65292;&#36825;&#23545;&#20110;&#21482;&#26377;2000&#34892;&#30340;&#34920;&#65292;&#20998;&#21306;&#26597;&#35810;&#19982;&#25972;&#20010;&#35835;&#20837;&#27809;&#26377;&#22826;&#22823;&#21306;&#21035;&#65292;&#20294;&#26159;&#24403;&#34920;&#30340;&#35268;&#27169;&#25193;&#22823;&#21040;&#21315;&#19975;&#32423;&#65288;&#29305;&#21035;&#26159;&#23545;&#20110;MyISAM&#26684;&#24335;&#30340;&#34920;&#65289;&#65292;&#20998;&#21306;&#21306;&#27573;&#26597;&#35810;&#23558;&#25552;&#20379;&#19968;&#20123;&#24110;&#21161;&#12290;
</p><h3><code class="option">&#21518;&#26597;&#35810;&#65288;sql_post&#65289;</code> &#19982; <code class="option">&#32034;&#24341;&#21518;&#26597;&#35810;&#65288;sql_post_index&#65289;</code>&#30340;&#24046;&#24322;</h3><p>
&#21518;&#26597;&#35810;&#21644;&#32034;&#24341;&#21518;&#26597;&#35810;&#30340;&#21306;&#21035;&#22312;&#20110;&#65292;&#24403;Sphinx&#33719;&#21462;&#21040;&#20840;&#37096;&#25991;&#26723;&#25968;&#25454;&#21518;&#65292;&#31435;&#21363;&#25191;&#34892;&#21518;&#26597;&#35810;&#65292;&#20294;&#26159;&#26500;&#24314;&#32034;&#24341;&#30340;&#36807;&#31243;&#20173;&#28982;<span class="bold"><strong>may</strong></span>&#22240;&#20026;&#26576;&#31181;&#21407;&#22240;&#22833;&#36133;&#12290;&#22312;&#21478;&#19968;&#26041;&#38754;&#65292;&#24403;&#32034;&#24341;&#21518;&#26597;&#35810;&#34987;&#25191;&#34892;&#26102;&#65292;&#21487;&#20197;<span class="bold"><strong>&#29702;&#25152;&#24403;&#28982;&#30340;&#35748;&#20026;</strong></span>&#32034;&#24341;&#24050;&#32463;&#25104;&#21151;&#26500;&#36896;&#23436;&#20102;&#12290;&#22240;&#20026;&#26500;&#36896;&#32034;&#24341;&#21487;&#33021;&#26159;&#20010;&#28459;&#38271;&#30340;&#36807;&#31243;&#65292;&#22240;&#27492;&#23545;&#19982;&#25968;&#25454;&#24211;&#30340;&#36830;&#25509;&#22312;&#25191;&#34892;&#21518;&#32034;&#24341;&#25805;&#20316;&#21518;&#34987;&#20851;&#38381;&#65292;&#22312;&#25191;&#34892;&#32034;&#24341;&#21518;&#25805;&#20316;&#21069;&#34987;&#20877;&#27425;&#25171;&#24320;&#12290;
</p></div>
<div class="sect1" title="3.8.&nbsp;xmlpipe &#25968;&#25454;&#28304;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlpipe"></a>3.8.&nbsp;xmlpipe &#25968;&#25454;&#28304;</h2></div></div></div>
<p>
xmlpipe &#25968;&#25454;&#28304;&#26159;&#22788;&#20110;&#35753;&#29992;&#25143;&#33021;&#22815;&#23558;&#29616;&#26377;&#25968;&#25454;&#23884;&#20837;Sphinx&#32780;&#26080;&#38656;&#24320;&#21457;&#26032;&#30340;&#25968;&#25454;&#28304;&#39537;&#21160;&#30340;&#30446;&#30340;&#34987;&#35774;&#35745;&#21644;&#25552;&#20379;&#30340;&#12290;&#23427;&#23558;&#27599;&#31687;&#25991;&#26723;&#38480;&#21046;&#20026;&#21482;&#33021;&#21253;&#25324;&#20004;&#20010;&#21487;&#20840;&#25991;&#32034;&#24341;&#30340;&#23383;&#27573;&#65292;&#20197;&#21450;&#21482;&#33021;&#21253;&#25324;&#20004;&#20010;&#23646;&#24615;&#12290;xmlpipe&#25968;&#25454;&#28304;&#24050;&#32463;&#34987;&#24223;&#24323;&#65292;&#22312;<a class="xref" href="#xmlpipe2" title="3.9.&nbsp;xmlpipe2 &#25968;&#25454;&#28304;">&#31532;&nbsp;3.9&nbsp;&#33410; &#8220;xmlpipe2 &#25968;&#25454;&#28304;&#8221;</a>&#20013;&#25551;&#36848;&#20102;xmlpipe&#30340;&#26367;&#20195;&#21697;xmlpipe2&#25968;&#25454;&#28304;&#12290;&#23545;&#20110;&#26032;&#30340;&#25968;&#25454;&#65292;&#24314;&#35758;&#37319;&#29992;xmlpipe2&#12290;
</p><p>
&#20026;&#20102;&#20351;&#29992;xmlpipe&#65292;&#38656;&#35201;&#23558;&#37197;&#32622;&#25991;&#20214;&#25913;&#20026;&#31867;&#20284;&#22914;&#19979;&#30340;&#26679;&#23376;&#65306;
</p><pre class="programlisting">
source example_xmlpipe_source
{
    type = xmlpipe
    xmlpipe_command = perl /www/mysite.com/bin/sphinxpipe.pl
}
</pre><p>
<code class="filename">indexer</code> &#23454;&#29992;&#31243;&#24207;&#23558;&#35201;&#36816;&#34892; <code class="option"><a class="link" href="#conf-xmlpipe-command" title="11.1.35.&nbsp;xmlpipe_command&#65306;&#25968;&#25454;&#33719;&#21462;&#21629;&#20196;">xmlpipe_command</a></code>,
&#25152;&#25351;&#23450;&#30340;&#21629;&#20196;&#65292;&#32780;&#21518;&#35835;&#21462;&#20854;&#21521;<code class="filename">&#26631;&#20934;&#36755;&#20986;stdout</code>&#19978;&#36755;&#20986;&#30340;&#25968;&#25454;&#65292;&#24182;&#23545;&#20043;&#36827;&#34892;&#35299;&#26512;&#24182;&#24314;&#31435;&#32034;&#24341;&#12290;
&#20005;&#26684;&#30340;&#35828;&#65292;&#26159;&#32034;&#24341;&#31995;&#32479;&#25171;&#24320;&#20102;&#19968;&#20010;&#19982;&#25351;&#23450;&#21629;&#20196;&#30456;&#36830;&#30340;&#31649;&#36947;&#65292;&#24182;&#20174;&#36825;&#20010;&#31649;&#36947;&#35835;&#21462;&#25968;&#25454;&#12290;
</p><p>
indexer &#23454;&#29992;&#31243;&#24207;&#20551;&#23450;&#22312;&#20174;&#26631;&#20934;&#36755;&#20837;&#35835;&#20837;&#30340;XML&#26684;&#24335;&#30340;&#25968;&#25454;&#20013;&#20013;&#23384;&#22312;&#19968;&#20010;&#25110;&#26356;&#22810;&#30340;&#25991;&#26723;&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;&#21253;&#25324;&#20004;&#20010;&#25991;&#26723;&#30340;&#25991;&#26723;&#25968;&#25454;&#27969;&#30340;&#20363;&#23376;&#65306;
</p><div class="example"><a name="ex-xmlpipe-document"></a><p class="title"><b>&#20363;&nbsp;3.2.&nbsp;XMLpipe &#25991;&#26723;&#25968;&#25454;&#27969;</b></p><div class="example-contents"><pre class="programlisting">
&lt;document&gt;
&lt;id&gt;123&lt;/id&gt;
&lt;group&gt;45&lt;/group&gt;
&lt;timestamp&gt;1132223498&lt;/timestamp&gt;
&lt;title&gt;test title&lt;/title&gt;
&lt;body&gt;
this is my document body
&lt;/body&gt;
&lt;/document&gt;

&lt;document&gt;
&lt;id&gt;124&lt;/id&gt;
&lt;group&gt;46&lt;/group&gt;
&lt;timestamp&gt;1132223498&lt;/timestamp&gt;
&lt;title&gt;another test&lt;/title&gt;
&lt;body&gt;
this is another document
&lt;/body&gt;
&lt;/document&gt;
</pre></div></div>
<p><br class="example-break">
</p><p>
&#36951;&#30041;&#30340;xmlpipe&#25968;&#25454;&#39537;&#21160;&#20351;&#29992;&#20869;&#32622;&#30340;&#35299;&#26512;&#22120;&#26469;&#35299;&#26512;xml&#25991;&#26723;&#65292;&#36825;&#20010;&#35299;&#26512;&#22120;&#30340;&#36895;&#24230;&#38750;&#24120;&#24555;&#65292;&#20294;&#26159;&#24182;&#27809;&#26377;&#25552;&#20379;&#23545;XML&#26684;&#24335;&#23436;&#25972;&#25903;&#25345;&#12290;&#36825;&#20010;&#35299;&#26512;&#22120;&#38656;&#35201;&#25991;&#26723;&#20013;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#21253;&#25324;&#20840;&#37096;&#30340;&#23383;&#27573;&#65292;&#24182;&#19988;<span class="emphasis"><em>&#20005;&#26684;</em></span>&#25353;&#29031;&#20363;&#23376;&#20013;&#32473;&#20986;&#30340;&#26684;&#24335;&#32473;&#20986;&#65292;&#32780;&#19988;&#23383;&#27573;&#30340;&#20986;&#29616;&#39034;&#24207;&#38656;&#35201;<span class="emphasis"><em>&#20005;&#26684;</em></span>&#25353;&#29031;&#20363;&#23376;&#20013;&#32473;&#20986;&#30340;&#39034;&#24207;&#12290;&#20165;&#26377;&#19968;&#20010;&#23383;&#27573;<code class="option">timestamp</code>&#26159;&#21487;&#36873;&#30340;&#65292;&#23427;&#30340;&#32570;&#30465;&#20540;&#20026;1&#12290;
</p></div>
<div class="sect1" title="3.9.&nbsp;xmlpipe2 &#25968;&#25454;&#28304;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlpipe2"></a>3.9.&nbsp;xmlpipe2 &#25968;&#25454;&#28304;</h2></div></div></div>
<p>
xmlpipe2&#20351;&#20320;&#21487;&#20197;&#29992;&#21478;&#19968;&#31181;&#33258;&#23450;&#20041;&#30340;XML&#26684;&#24335;&#21521;Sphinx&#20256;&#36755;&#20219;&#24847;&#25991;&#26412;&#25968;&#25454;&#21644;&#23646;&#24615;&#25968;&#25454;&#12290;&#25968;&#25454;&#27169;&#24335;&#65288;&#21363;&#25968;&#25454;&#23383;&#27573;&#30340;&#38598;&#21512;&#25110;&#32773;&#23646;&#24615;&#38598;&#65289;&#21487;&#20197;&#30001;XML&#27969;&#26412;&#36523;&#25351;&#23450;&#65292;&#20063;&#21487;&#20197;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#25968;&#25454;&#28304;&#30340;&#37197;&#32622;&#37096;&#20998;&#20013;&#25351;&#23450;&#12290;
</p><p>
&#22312;&#23545;xmlpipe2&#25968;&#25454;&#28304;&#20570;&#32034;&#24341;&#26102;&#65292;&#32034;&#24341;&#22120;&#36816;&#34892;&#25351;&#23450;&#30340;&#21629;&#20196;&#65292;&#25171;&#24320;&#19968;&#20010;&#36830;&#25509;&#21040;&#21069;&#36848;&#21629;&#20196;&#26631;&#20934;&#36755;&#20986;&#30340;&#31649;&#36947;&#65292;&#24182;&#31561;&#24453;&#25509;&#21463;&#20855;&#26377;&#27491;&#30830;&#26684;&#24335;&#30340;XML&#25968;&#25454;&#27969;&#12290;&#20197;&#19979;&#26159;&#19968;&#20010;&#25968;&#25454;&#27969;&#30340;&#26679;&#26412;&#65306; 
</p><div class="example"><a name="ex-xmlpipe2-document"></a><p class="title"><b>&#20363;&nbsp;3.3.&nbsp;xmlpipe2 &#25991;&#26723;&#25968;&#25454;&#27969;</b></p><div class="example-contents"><pre class="programlisting">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;sphinx:docset&gt;

&lt;sphinx:schema&gt;
&lt;sphinx:field name="subject"/&gt; 
&lt;sphinx:field name="content"/&gt;
&lt;sphinx:attr name="published" type="timestamp"/&gt;
&lt;sphinx:attr name="author_id" type="int" bits="16" default="1"/&gt;
&lt;/sphinx:schema&gt;

&lt;sphinx:document id="1234"&gt;
&lt;content&gt;this is the main content &lt;![CDATA[[and this &lt;cdata&gt; entry
must be handled properly by xml parser lib]]&gt;&lt;/content&gt;
&lt;published&gt;1012325463&lt;/published&gt;
&lt;subject&gt;note how field/attr tags can be
in &lt;b class="red"&gt;randomized&lt;/b&gt; order&lt;/subject&gt;
&lt;misc&gt;some undeclared element&lt;/misc&gt;
&lt;/sphinx:document&gt;

&lt;sphinx:document id="1235"&gt;
&lt;subject&gt;another subject&lt;/subject&gt;
&lt;content&gt;here comes another document, and i am given to understand,
that in-document field order must not matter, sir&lt;/content&gt;
&lt;published&gt;1012325467&lt;/published&gt;
&lt;/sphinx:document&gt;

&lt;!-- ... even more sphinx:document entries here ... --&gt;

&lt;sphinx:killlist&gt;
&lt;id&gt;1234&lt;/id&gt;
&lt;id&gt;4567&lt;/id&gt;
&lt;/sphinx:killlist&gt;

&lt;/sphinx:docset&gt;
</pre></div></div>
<p><br class="example-break">
</p><p>
&#20219;&#24847;&#22810;&#30340;&#25968;&#25454;&#23383;&#27573;&#21644;&#23646;&#24615;&#37117;&#26159;&#20801;&#35768;&#30340;&#12290;&#25968;&#25454;&#23383;&#27573;&#21644;&#23646;&#24615;&#22312;&#21516;&#19968;&#25991;&#26723;&#20803;&#32032;&#20013;&#20986;&#29616;&#30340;&#20808;&#21518;&#39034;&#24207;&#27809;&#26377;&#29305;&#21035;&#35201;&#27714;&#12290;&#12290;&#21333;&#19968;&#23383;&#27573;&#25968;&#25454;&#30340;&#26368;&#22823;&#38271;&#24230;&#26377;&#38480;&#21046;&#65292;&#36229;&#36807;2MB&#30340;&#25968;&#25454;&#20250;&#34987;&#25130;&#30701;&#21040;2MB&#65288;&#20294;&#36825;&#20010;&#38480;&#21046;&#21487;&#20197;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#25968;&#25454;&#28304;&#37096;&#20998;&#20013;&#20462;&#25913;&#65289;&#12290;
</p><p>
XML&#25968;&#25454;&#27169;&#24335;&#65288;Schema&#65289;&#65292;&#21363;&#25968;&#25454;&#23383;&#27573;&#21644;&#23646;&#24615;&#30340;&#23436;&#25972;&#21015;&#34920;&#65292;&#24517;&#39035;&#22312;&#20219;&#20309;&#25991;&#26723;&#34987;&#20998;&#26512;&#20043;&#21069;&#23601;&#30830;&#23450;&#12290;&#36825;&#26082;&#21487;&#20197;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#29992;<code class="option">xmlpipe_field</code>&#21644;<code class="option">xmlpipe_attr_XXX</code>&#36873;&#39033;&#25351;&#23450;&#65292;&#20063;&#21487;&#20197;&#23601;&#22312;&#25968;&#25454;&#27969;&#20013;&#29992;&lt;sphinx:schema&gt;&#20803;&#32032;&#25351;&#23450;&#12290; &lt;sphinx:schema&gt;&#20803;&#32032;&#26159;&#21487;&#36873;&#30340;&#65292;&#20294;&#22914;&#26524;&#20986;&#29616;&#65292;&#23601;&#24517;&#39035;&#26159;&lt;sphinx:docset&gt;&#20803;&#32032;&#30340;&#31532;&#19968;&#20010;&#23376;&#20803;&#32032;&#12290;&#22914;&#26524;&#27809;&#26377;&#22312;&#25968;&#25454;&#27969;&#20013;&#20869;&#23884;&#30340;&#25968;&#25454;&#27169;&#24335;&#23450;&#20041;&#65292;&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;&#30456;&#20851;&#35774;&#32622;&#23601;&#20250;&#29983;&#25928;&#65292;&#21542;&#21017;&#25968;&#25454;&#27969;&#20869;&#23884;&#30340;&#35774;&#32622;&#34987;&#20248;&#20808;&#37319;&#29992;&#12290;
</p><p>
&#26410;&#30693;&#31867;&#22411;&#30340;&#26631;&#31614;&#65288;&#26082;&#19981;&#26159;&#25968;&#25454;&#23383;&#27573;&#65292;&#20063;&#19981;&#26159;&#23646;&#24615;&#30340;&#26631;&#31614;&#65289;&#20250;&#34987;&#24573;&#30053;&#65292;&#20294;&#20250;&#32473;&#20986;&#35686;&#21578;&#12290;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&lt;misc&gt;&#26631;&#31614;&#20250;&#34987;&#24573;&#30053;&#12290;&#25152;&#26377;&#23884;&#20837;&#22312;&#20854;&#20182;&#26631;&#31614;&#20013;&#30340;&#26631;&#31614;&#21450;&#20854;&#23646;&#24615;&#37117;&#20250;&#34987;&#26080;&#35270;&#65288;&#20363;&#22914;&#19978;&#36848;&#20363;&#23376;&#20013;&#23884;&#20837;&#22312;&lt;subject&gt;&#26631;&#31614;&#20013;&#30340;&lt;b&gt;&#26631;&#31614;&#65289;
</p><p>
&#25903;&#25345;&#36755;&#20837;&#25968;&#25454;&#27969;&#30340;&#20309;&#31181;&#23383;&#31526;&#32534;&#30721;&#21462;&#20915;&#20110;&#31995;&#32479;&#20013;&#26159;&#21542;&#23433;&#35013;&#20102;<code class="filename">iconv</code>. xmlpipe2&#26159;&#29992; <code class="filename">libexpat</code>&#35299;&#26512;&#22120;&#35299;&#26512;&#30340;&#65292;&#35813;&#35299;&#26512;&#22120;&#20869;&#32622;&#23545; US-ASCII, ISO-8859-1, UTF-8 &#21644;&#19968;&#20123; UTF-16 &#21464;&#20307;&#30340;&#25903;&#25345;. CoreSeek/Sphinx&#30340; <code class="filename">configure</code> &#33050;&#26412;&#20063;&#20250;&#26816;&#26597; <code class="filename">libiconv</code> &#26159;&#21542;&#23384;&#22312;&#24182;&#20351;&#29992;&#23427;&#26469;&#22788;&#29702;&#20854;&#20182;&#30340;&#23383;&#31526;&#32534;&#30721;&#12290; <code class="filename">libexpat</code> &#20063;&#38544;&#21547;&#30340;&#35201;&#27714;&#22312;CoreSeek/Sphinx&#31471;&#20351;&#29992;UTF-8&#65292;&#22240;&#20026;&#23427;&#36820;&#22238;&#30340;&#20998;&#26512;&#36807;&#30340;&#25968;&#25454;&#24635;&#26159;UTF-8&#30340;&#12290;

</p><p>
xmlpipe2&#21487;&#20197;&#35782;&#21035;&#30340;XML&#20803;&#32032;&#65288;&#26631;&#31614;&#65289;&#65288;&#20197;&#21450;&#21069;&#36848;&#20803;&#32032;&#21487;&#29992;&#30340;&#23646;&#24615;&#65289;&#22914;&#19979;&#65306;
</p><div class="variablelist"><dl><dt><span class="term">sphinx:docset</span></dt>
<dd>&#39030;&#32423;&#20803;&#32032;&#65292;&#29992;&#20110;&#26631;&#26126;&#24182;&#21253;&#25324;xmlpipe2&#25991;&#26723;.</dd><dt><span class="term">sphinx:schema</span></dt>
<dd>&#21487;&#36873;&#20803;&#32032;&#65292;&#23427;&#35201;&#20040;&#26159;sphinx:docset&#30340;&#31532;&#19968;&#20010;&#23376;&#20803;&#32032;&#65292;&#35201;&#20040;&#24178;&#33030;&#19981;&#20986;&#29616;&#12290;&#22768;&#26126;&#25991;&#26723;&#30340;&#27169;&#24335;&#12290;&#21253;&#25324;&#25968;&#25454;&#23383;&#27573;&#21644;&#23646;&#24615;&#30340;&#22768;&#26126;&#12290;&#33509;&#27492;&#20803;&#32032;&#20986;&#29616;&#65292;&#21017;&#23427;&#20250;&#35206;&#30422;&#37197;&#32622;&#25991;&#20214;&#20013;&#23545;&#25968;&#25454;&#28304;&#30340;&#35774;&#23450;.
	</dd><dt><span class="term">sphinx:field</span></dt>
<dd>&#21487;&#36873;&#20803;&#32032;&#65292;sphinx:schema&#30340;&#23376;&#20803;&#32032;&#12290;&#22768;&#26126;&#19968;&#20010;&#20840;&#25991;&#25968;&#25454;&#23383;&#27573;.
		&#21487;&#29992;&#30340;&#23646;&#24615;&#21253;&#25324;:
		<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">"name", &#23427;&#25351;&#23450;&#20102;&#23383;&#27573;&#30340;&#21517;&#31216;&#65292;&#21518;&#32493;&#25968;&#25454;&#25991;&#26723;&#20013;&#20855;&#26377;&#27492;&#21517;&#31216;&#30340;&#20803;&#32032;&#30340;&#25968;&#25454;&#37117;&#34987;&#24403;&#20316;&#24453;&#26816;&#32034;&#30340;&#20840;&#25991;&#25968;&#25454;&#23545;&#24453;.</li>
<li class="listitem">"attr", &#29992;&#20110;&#29305;&#21035;&#25351;&#20986;&#23558;&#35813;&#23383;&#27573;&#20316;&#20026;&#23383;&#31526;&#20018;&#25110;&#32773;&#35789;&#27719;&#25968;&#32479;&#35745;&#23646;&#24615;. &#21487;&#20197;&#35774;&#32622;&#30340;&#20540;&#20026; "string" &#25110; "wordcount". &#29256;&#26412; 1.10-beta &#24320;&#22987;&#24341;&#20837;.</li>
</ul></div>
</dd><dt><span class="term">sphinx:attr</span></dt>
<dd>&#21487;&#36873;&#20803;&#32032;&#65292;sphinx:schema&#30340;&#23376;&#20803;&#32032;&#12290;&#29992;&#20110;&#22768;&#26126;&#20855;&#20307;&#23646;&#24615;&#12290;&#21487;&#29992;&#30340;&#23646;&#24615;&#21253;&#25324;:
		<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">"name", &#35774;&#23450;&#35813;&#23646;&#24615;&#21517;&#31216;&#65292;&#21518;&#32493;&#25991;&#26723;&#20013;&#20855;&#26377;&#35813;&#21517;&#31216;&#30340;&#20803;&#32032;&#24212;&#34987;&#24403;&#20316;&#19968;&#20010;&#23646;&#24615;&#23545;&#24453;.</li>
<li class="listitem">"type", &#35774;&#23450;&#35813;&#23646;&#24615;&#30340;&#31867;&#22411;&#12290;&#21487;&#33021;&#30340;&#31867;&#22411;&#21253;&#25324; "int", "timestamp", "str2ordinal", "bool", "float" &#21644; "multi".</li>
<li class="listitem">"bits", &#35774;&#23450;&#8220;int&#8221;&#22411;&#23646;&#24615;&#30340;&#23485;&#24230;&#65292;&#26377;&#25928;&#20540;&#20026;1&#21040;32.</li>
<li class="listitem">"default", &#35774;&#23450;&#35813;&#23646;&#24615;&#30340;&#40664;&#35748;&#20540;&#65292;&#33509;&#21518;&#32493;&#25991;&#26723;&#20013;&#27809;&#26377;&#25351;&#23450;&#36825;&#20010;&#23646;&#24615;&#65292;&#21017;&#20351;&#29992;&#27492;&#40664;&#35748;&#20540;.</li>
</ul></div>
</dd><dt><span class="term">sphinx:document</span></dt>
<dd>&#24517;&#39035;&#20986;&#29616;&#30340;&#20803;&#32032;&#65292;&#24517;&#39035;&#26159;sphinx:docset&#30340;&#23376;&#20803;&#32032;&#12290;&#21253;&#21547;&#20219;&#24847;&#22810;&#30340;&#20854;&#20182;&#20803;&#32032;&#65292;&#36825;&#20123;&#23376;&#20803;&#32032;&#24102;&#26377;&#24453;&#32034;&#24341;&#30340;&#25968;&#25454;&#23383;&#27573;&#21644;&#23646;&#24615;&#20540;&#65292;&#32780;&#36825;&#20123;&#25968;&#25454;&#23383;&#27573;&#25110;&#23646;&#24615;&#20540;&#26082;&#21487;&#20197;&#26159;&#29992;sphinx:field&#21644;sphinx:attr&#20803;&#32032;&#22768;&#26126;&#30340;&#65292;&#20063;&#21487;&#20197;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#22768;&#26126;&#12290;&#21807;&#19968;&#30340;&#24050;&#30693;&#23646;&#24615;&#26159;&#8220;id&#8221;&#65292;&#23427;&#24517;&#39035;&#21253;&#21547;&#19968;&#20010;&#21807;&#19968;&#30340;&#25972;&#22411;&#30340;&#25991;&#26723;ID.
	</dd><dt><span class="term">sphinx:killlist</span></dt>
<dd>&#21487;&#36873;&#20803;&#32032;&#65292;&#24517;&#39035;&#26159;sphinx:docset&#30340;&#23376;&#20803;&#32032;&#12290;
		&#23427;&#21253;&#21547;&#19968;&#25209;&#8220;id&#8220;&#20803;&#32032;&#65292;&#20854;&#20869;&#23481;&#26159;&#25991;&#26723;&#32534;&#21495;ID&#65292;&#23558;&#34987;&#20316;&#20026;&#24403;&#21069;&#32034;&#24341;&#30340; <a class="link" href="#conf-sql-query-killlist" title="11.1.16.&nbsp;sql_query_killlist&#65306;Kill-list&#26597;&#35810;">&#22833;&#25928;&#21517;&#21333;&#21015;&#34920;</a> &#12290;
	</dd></dl></div>
<p>
</p></div>
<div class="sect1" title="3.10.&nbsp;Python &#25968;&#25454;&#28304;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="pysource"></a>3.10.&nbsp;Python &#25968;&#25454;&#28304;</h2></div></div></div>
<p>
Coreseek&#25903;&#25345;&#20351;&#29992;Python&#32534;&#20889;&#25968;&#25454;&#28304;&#33050;&#26412;&#65292;&#20174;&#32780;&#21487;&#20197;&#24456;&#26041;&#20415;&#30340;&#25193;&#23637;CoreSeek/Sphinx&#30340;&#21151;&#33021;&#65292;&#26469;&#36731;&#26131;&#30340;&#20174;&#20219;&#20309;Python&#21487;&#20197;&#25805;&#20316;&#30340;&#22320;&#26041;&#33719;&#21462;&#38656;&#35201;&#36827;&#34892;&#26816;&#32034;&#30340;&#25968;&#25454;&#12290;&#24403;&#21069;&#65292;Python&#20960;&#20046;&#25903;&#25345;&#25152;&#26377;&#30340;SQL&#25968;&#25454;&#24211;&#20197;&#21450;NoSql&#23384;&#20648;&#31995;&#32479;&#65292;&#21487;&#20197;&#26597;&#30475;<a class="ulink" href="http://wiki.python.org/moin/DatabaseInterfaces" target="_top">Python DatabaseInterfaces</a>&#33719;&#24471;&#35814;&#32454;&#21015;&#34920;&#12290;

</p><pre class="programlisting">
python #&#29992;&#20110;&#37197;&#32622;Python&#25968;&#25454;&#28304;&#31243;&#24207;&#30340;PYTHONPATH
{
    path = /usr/local/coreseek/etc/pysource
    path = /usr/local/coreseek/etc/pysource/csft_demo
}

source sourcename
{
    type = python            #&#25968;&#25454;&#31867;&#22411;
    name = csft_demo.MainSource   #&#35843;&#29992;&#30340;python&#30340;&#31867;&#21517;&#31216;
}
</pre><p>
&#22312;&#20197;&#19978;&#37197;&#32622;&#20013;&#65292;&#23545;&#24212;&#30340;Python&#25968;&#25454;&#28304;&#33050;&#26412;&#65292;&#20026;/usr/local/coreseek/etc/pysource/csft_demo/__init__.py&#65292;&#25191;&#34892;&#32034;&#24341;&#25805;&#20316;&#26102;&#65292;&#23558;&#20174;&#35813;&#33050;&#26412;&#33719;&#21462;&#25968;&#25454;&#65292;&#35831;&#26597;&#30475;<a class="xref" href="#coreseek-confgroup-pysource" title="12.3.&nbsp;Python&#25968;&#25454;&#28304;&#31243;&#24207;&#25509;&#21475;">&#31532;&nbsp;12.3&nbsp;&#33410; &#8220;Python&#25968;&#25454;&#28304;&#31243;&#24207;&#25509;&#21475;&#8221;</a>&#20102;&#35299;&#32454;&#33410;&#12290;
	  </p></div>
<div class="sect1" title="3.11.&nbsp;&#23454;&#26102;&#32034;&#24341;&#26356;&#26032;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="live-updates"></a>3.11.&nbsp;&#23454;&#26102;&#32034;&#24341;&#26356;&#26032;</h2></div></div></div>
<p>
&#24403;&#21069;&#20027;&#35201;&#26377;&#20004;&#31181;&#26041;&#27861;&#26469;&#32500;&#25252;&#20840;&#25991;&#32034;&#24341;&#30340;&#20869;&#23481;&#26159;&#26368;&#26032;&#30340;&#12290;&#35831;&#27880;&#24847;&#65292;&#20294;&#26159;&#65292;&#36825;&#20004;&#31181;&#22788;&#29702;&#26041;&#27861;
&#30340;&#20219;&#21153;&#26159;&#24212;&#23545;<span class="emphasis"><em>&#20840;&#25991;&#25968;&#25454;&#26356;&#26032;</em></span>&#65292;&#32780;&#19981;&#26159;
&#23646;&#24615;&#26356;&#26032;&#12290;&#20174;&#29256;&#26412;0.9.8&#24320;&#22987;&#25903;&#25345;&#21363;&#26102;&#30340;&#23646;&#24615;&#26356;&#26032;&#12290;&#21442;&#30475; <a class="link" href="#api-func-updateatttributes" title="8.7.2.&nbsp;UpdateAttributes &#65288;&#26356;&#26032;&#23646;&#24615;&#65289;">UpdateAttributes()</a>
API &#35843;&#29992;&#20102;&#35299;&#35814;&#24773;&#12290;
</p><p>
&#26041;&#27861;&#19968;&#65292;&#20351;&#29992;&#22522;&#20110;&#30913;&#30424;&#30340;&#32034;&#24341;&#65292;&#25163;&#21160;&#20998;&#21306;&#65292;&#28982;&#21518;&#23450;&#26399;&#37325;&#24314;&#36739;&#23567;&#30340;&#20998;&#21306;&#65288;&#34987;&#31216;&#20026;&#8220;&#22686;&#37327;&#8221;&#65289;&#12290;&#36890;&#36807;&#23613;&#21487;&#33021;&#30340;&#20943;&#23567;&#37325;&#24314;&#37096;&#20998;&#30340;&#22823;&#23567;&#65292;&#21487;&#20197;&#23558;&#24179;&#22343;&#32034;&#24341;&#28382;&#21518;&#26102;&#38388;&#38477;&#20302;&#21040;30~60&#31186;&#12290;&#22312;0.9.x&#29256;&#26412;&#20013;&#65292;&#36825;&#26159;&#21807;&#19968;&#21487;&#29992;&#30340;&#26041;&#27861;&#12290;&#22312;&#19968;&#20010;&#24040;&#22823;&#30340;&#25991;&#26723;&#38598;&#19978;&#65292;&#36825;&#21487;&#33021;&#26159;&#26368;&#26377;&#25928;&#30340;&#19968;&#31181;&#26041;&#27861;&#12290;&#21442;&#30475;<a class="xref" href="#delta-updates" title="3.12.&nbsp;&#22686;&#37327;&#32034;&#24341;&#26356;&#26032;">&#31532;&nbsp;3.12&nbsp;&#33410; &#8220;&#22686;&#37327;&#32034;&#24341;&#26356;&#26032;&#8221;</a>&#20102;&#35299;&#35814;&#24773;&#12290;
</p><p>
&#26041;&#27861;&#20108;&#65292;&#29256;&#26412;1.x&#65288;&#20174;&#29256;&#26412;1.10-beta&#24320;&#22987;&#65289;&#22686;&#21152;&#20102;&#23454;&#26102;&#32034;&#24341;&#65288;&#31616;&#20889;&#20026;Rt&#32034;&#24341;&#65289;&#30340;&#25903;&#25345;&#65292;&#29992;&#20110;&#21450;&#26102;&#26356;&#26032;&#20840;&#25991;&#25968;&#25454;&#12290;&#22312;RT&#32034;&#24341;&#19978;&#30340;&#26356;&#26032;&#65292;&#21487;&#20197;&#22312;1~2&#27627;&#31186;&#65288;0.001-0.002&#31186;&#65289;&#20869;&#20986;&#29616;&#22312;&#25628;&#32034;&#32467;&#26524;&#20013;&#12290;&#28982;&#32780;&#65292;RT&#23454;&#26102;&#32034;&#24341;&#22312;&#22788;&#29702;&#36739;&#22823;&#25968;&#25454;&#37327;&#30340;&#25209;&#37327;&#32034;&#24341;&#19978;&#25928;&#29575;&#24182;&#19981;&#39640;&#12290;&#21442;&#30475; 
<a class="xref" href="#rt-indexes" title="&#31532;&nbsp;4&nbsp;&#31456;&nbsp;RT&#23454;&#26102;&#32034;&#24341;">&#31532;&nbsp;4&nbsp;&#31456; <i>RT&#23454;&#26102;&#32034;&#24341;</i></a> &#20102;&#35299;&#35814;&#24773;&#12290;
</p></div>
<div class="sect1" title="3.12.&nbsp;&#22686;&#37327;&#32034;&#24341;&#26356;&#26032;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="delta-updates"></a>3.12.&nbsp;&#22686;&#37327;&#32034;&#24341;&#26356;&#26032;</h2></div></div></div>
<p>
&#26377;&#36825;&#20040;&#19968;&#31181;&#24120;&#35265;&#30340;&#24773;&#20917;&#65306;&#25972;&#20010;&#25968;&#25454;&#38598;&#38750;&#24120;&#22823;&#65292;&#20197;&#33267;&#20110;&#38590;&#20110;&#32463;&#24120;&#24615;&#30340;&#37325;&#24314;&#32034;&#24341;&#65292;&#20294;&#26159;&#27599;&#27425;&#26032;&#22686;&#30340;&#35760;&#24405;&#21364;&#30456;&#24403;&#22320;&#23569;&#12290;&#19968;&#20010;&#20856;&#22411;&#30340;&#20363;&#23376;&#26159;&#65306;&#19968;&#20010;&#35770;&#22363;&#26377;1000000&#20010;&#24050;&#32463;&#24402;&#26723;&#30340;&#24086;&#23376;&#65292;&#20294;&#27599;&#22825;&#21482;&#26377;1000&#20010;&#26032;&#24086;&#23376;&#12290;
</p><p>
&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#21487;&#20197;&#29992;&#25152;&#35859;&#30340;&#8220;&#20027;&#32034;&#24341;&#65291;&#22686;&#37327;&#32034;&#24341;&#8221;&#65288;main+delta&#65289;&#27169;&#24335;&#26469;&#23454;&#29616;&#8220;&#36817;&#23454;&#26102;&#8221;&#30340;&#32034;&#24341;&#26356;&#26032;&#12290;
</p><p>
&#36825;&#31181;&#26041;&#27861;&#30340;&#22522;&#26412;&#24605;&#36335;&#26159;&#35774;&#32622;&#20004;&#20010;&#25968;&#25454;&#28304;&#21644;&#20004;&#20010;&#32034;&#24341;&#65292;&#23545;&#24456;&#23569;&#26356;&#26032;&#25110;&#26681;&#26412;&#19981;&#26356;&#26032;&#30340;&#25968;&#25454;&#24314;&#31435;&#20027;&#32034;&#24341;&#65292;&#32780;&#23545;&#26032;&#22686;&#25991;&#26723;&#24314;&#31435;&#22686;&#37327;&#32034;&#24341;&#12290;&#22312;&#19978;&#36848;&#20363;&#23376;&#20013;&#65292;&#37027;1000000&#20010;&#24050;&#32463;&#24402;&#26723;&#30340;&#24086;&#23376;&#25918;&#22312;&#20027;&#32034;&#24341;&#20013;&#65292;&#32780;&#27599;&#22825;&#26032;&#22686;&#30340;1000&#20010;&#24086;&#23376;&#21017;&#25918;&#22312;&#22686;&#37327;&#32034;&#24341;&#20013;&#12290;&#22686;&#37327;&#32034;&#24341;&#26356;&#26032;&#30340;&#39057;&#29575;&#21487;&#20197;&#38750;&#24120;&#24555;&#65292;&#32780;&#25991;&#26723;&#21487;&#20197;&#22312;&#20986;&#29616;&#20960;&#20998;&#31181;&#20869;&#23601;&#21487;&#20197;&#34987;&#26816;&#32034;&#21040;&#12290;
</p><p>
&#30830;&#23450;&#20855;&#20307;&#26576;&#19968;&#25991;&#26723;&#30340;&#20998;&#23646;&#37027;&#20010;&#32034;&#24341;&#30340;&#20998;&#31867;&#24037;&#20316;&#21487;&#20197;&#33258;&#21160;&#23436;&#25104;&#12290;&#19968;&#20010;&#21487;&#36873;&#30340;&#26041;&#26696;&#26159;&#65292;&#24314;&#31435;&#19968;&#20010;&#35745;&#25968;&#34920;&#65292;&#35760;&#24405;&#23558;&#25991;&#26723;&#38598;&#20998;&#25104;&#20004;&#37096;&#20998;&#30340;&#37027;&#20010;&#25991;&#26723;ID&#65292;&#32780;&#27599;&#27425;&#37325;&#26032;&#26500;&#24314;&#20027;&#32034;&#24341;&#26102;&#65292;&#36825;&#20010;&#34920;&#37117;&#20250;&#34987;&#26356;&#26032;&#12290;
</p><div class="example"><a name="ex-live-updates"></a><p class="title"><b>&#20363;&nbsp;3.4.&nbsp;&#23436;&#20840;&#33258;&#21160;&#21270;&#30340;&#23454;&#26102;&#32034;&#24341;</b></p><div class="example-contents"><pre class="programlisting">
# in MySQL
CREATE TABLE sph_counter
(
    counter_id INTEGER PRIMARY KEY NOT NULL,
    max_doc_id INTEGER NOT NULL
);

# in sphinx.conf
source main
{
    # ...
    sql_query_pre = SET NAMES utf8
    sql_query_pre = REPLACE INTO sph_counter SELECT 1, MAX(id) FROM documents
    sql_query = SELECT id, title, body FROM documents \
        WHERE id&lt;=( SELECT max_doc_id FROM sph_counter WHERE counter_id=1 )
}

source delta : main
{
    sql_query_pre = SET NAMES utf8
    sql_query = SELECT id, title, body FROM documents \
        WHERE id&gt;( SELECT max_doc_id FROM sph_counter WHERE counter_id=1 )
}

index main
{
    source = main
    path = /path/to/main
    # ... all the other settings
}

# note how all other settings are copied from main,
# but source and path are overridden (they MUST be)
index delta : main
{
    source = delta
    path = /path/to/delta
}
</pre></div></div>
<p><br class="example-break">
</p><p>
&#35831;&#27880;&#24847;&#65292;&#19978;&#20363;&#20013;&#25105;&#20204;&#26174;&#31034;&#35774;&#32622;&#20102;&#25968;&#25454;&#28304;delta&#30340;<code class="code">sql_query_pre</code>&#36873;&#39033;&#65292;&#35206;&#30422;&#20102;&#20840;&#23616;&#35774;&#32622;&#12290;&#24517;&#39035;&#26174;&#31034;&#22320;&#35206;&#30422;&#36825;&#20010;&#36873;&#39033;&#65292;&#21542;&#21017;&#23545;delta&#20570;&#32034;&#24341;&#30340;&#26102;&#20505;&#20063;&#20250;&#36816;&#34892;&#37027;&#26465;<code class="code">REPLACE</code>&#26597;&#35810;&#65292;&#37027;&#26679;&#20250;&#23548;&#33268;delta&#28304;&#20013;&#36873;&#20986;&#30340;&#25968;&#25454;&#20026;&#31354;&#12290;&#21487;&#26159;&#31616;&#21333;&#22320;&#23558;delta&#30340;<code class="code">sql_query_pre</code>&#35774;&#32622;&#25104;&#31354;&#20063;&#19981;&#34892;&#65292;&#22240;&#20026;&#22312;&#32487;&#25215;&#26469;&#30340;&#25968;&#25454;&#28304;&#19978;&#31532;&#19968;&#27425;&#36816;&#34892;&#36825;&#20010;&#25351;&#20196;&#30340;&#26102;&#20505;&#65292;&#32487;&#25215;&#26469;&#30340;<span class="emphasis"><em>&#25152;&#26377;</em></span>&#20540;&#37117;&#20250;&#34987;&#28165;&#31354;&#65292;&#36825;&#26679;&#32534;&#30721;&#35774;&#32622;&#30340;&#37096;&#20998;&#20063;&#20250;&#20002;&#22833;&#12290;&#22240;&#27492;&#38656;&#35201;&#20877;&#27425;&#26174;&#24335;&#35843;&#29992;&#32534;&#30721;&#35774;&#32622;&#26597;&#35810;&#12290;
</p></div>
<div class="sect1" title="3.13.&nbsp;&#32034;&#24341;&#21512;&#24182;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="index-merging"></a>3.13.&nbsp;&#32034;&#24341;&#21512;&#24182;</h2></div></div></div>
<p>
&#21512;&#24182;&#20004;&#20010;&#24050;&#26377;&#30340;&#32034;&#24341;&#27604;&#37325;&#26032;&#23545;&#25152;&#26377;&#25968;&#25454;&#20570;&#32034;&#24341;&#26356;&#26377;&#25928;&#29575;&#65292;&#32780;&#19988;&#26377;&#26102;&#20505;&#24517;&#39035;&#36825;&#26679;&#20570;&#65288;&#20363;&#22914;&#22312;&#8220;&#20027;&#32034;&#24341;&#65291;&#22686;&#37327;&#32034;&#24341;&#8221;&#20998;&#21306;&#27169;&#24335;&#20013;&#24212;&#21512;&#24182;&#20027;&#32034;&#24341;&#21644;&#22686;&#37327;&#32034;&#24341;&#65292;&#32780;&#19981;&#26159;&#31616;&#21333;&#22320;&#37325;&#26032;&#32034;&#24341;&#8220;&#20027;&#32034;&#24341;&#23545;&#24212;&#30340;&#25968;&#25454;&#65289;&#12290;&#22240;&#27492;<code class="filename">indexer</code>&#26377;&#36825;&#20010;&#36873;&#39033;&#12290;&#21512;&#24182;&#32034;&#24341;&#19968;&#33324;&#27604;&#37325;&#26032;&#32034;&#24341;&#24555;&#65292;&#20294;&#22312;&#22823;&#22411;&#32034;&#24341;&#19978;&#20173;&#28982;<span class="emphasis"><em>&#19981;&#26159;</em></span>&#19968;&#36468;&#32780;&#23601;&#12290;&#22522;&#26412;&#19978;&#65292;&#24453;&#21512;&#24182;&#30340;&#20004;&#20010;&#32034;&#24341;&#37117;&#20250;&#34987;&#35835;&#20837;&#20869;&#23384;&#19968;&#27425;&#65292;&#32780;&#21512;&#24182;&#21518;&#30340;&#20869;&#23481;&#38656;&#35201;&#20889;&#20837;&#30913;&#30424;&#19968;&#27425;&#12290;&#20363;&#22914;&#65292;&#21512;&#24182;100GB&#21644;1GB&#30340;&#20004;&#20010;&#32034;&#24341;&#23558;&#23548;&#33268;202GB&#30340;IO&#25805;&#20316;&#65288;&#20294;&#24456;&#21487;&#33021;&#36824;&#26159;&#27604;&#37325;&#26032;&#32034;&#24341;&#23569;&#65289;
</p><p>
&#22522;&#26412;&#30340;&#21629;&#20196;&#35821;&#27861;&#22914;&#19979;&#65306;
</p><pre class="programlisting">
indexer --merge DSTINDEX SRCINDEX [--rotate]
</pre><p>
SRCINDEX&#30340;&#20869;&#23481;&#34987;&#21512;&#24182;&#21040;DSTINDEX&#20013;&#65292;&#22240;&#27492;&#21482;&#26377;DSTINDEX&#32034;&#24341;&#20250;&#34987;&#25913;&#21464;&#12290;
&#33509;DSTINDEX&#24050;&#32463;&#34987;<code class="filename">searchd</code>&#20110;&#25552;&#20379;&#26381;&#21153;&#65292;&#21017;<code class="option">--rotate</code>&#21442;&#25968;&#26159;&#24517;&#39035;&#30340;&#12290;
&#26368;&#21021;&#35774;&#35745;&#30340;&#20351;&#29992;&#27169;&#24335;&#26159;&#65292;&#23558;&#23567;&#37327;&#30340;&#26356;&#26032;&#20174;SRCINDEX&#21512;&#24182;&#21040;DSTINDEX&#20013;&#12290;
&#22240;&#27492;&#65292;&#24403;&#23646;&#24615;&#34987;&#21512;&#24182;&#26102;&#65292;&#19968;&#26086;&#20986;&#29616;&#20102;&#37325;&#22797;&#30340;&#25991;&#26723;ID&#65292;SRCINDEX&#20013;&#30340;&#23646;&#24615;&#20540;&#26356;&#20248;&#20808;&#65288;&#20250;&#35206;&#30422;DSTINDEX&#20013;&#30340;&#20540;&#65289;&#12290;
&#19981;&#36807;&#35201;&#27880;&#24847;&#65292;&#8220;&#26087;&#30340;&#8221;&#20851;&#38190;&#23383;&#22312;&#36825;&#20010;&#36807;&#31243;&#20013;&#24182;<span class="emphasis"><em>&#19981;</em></span>&#20250;&#34987;&#33258;&#21160;&#21024;&#38500;&#12290;
&#20363;&#22914;&#65292;&#22312;DSTINDEX&#20013;&#26377;&#19968;&#20010;&#21483;&#20570;&#8220;old&#8221;&#30340;&#20851;&#38190;&#23383;&#19982;&#25991;&#26723;123&#30456;&#20851;&#32852;&#65292;&#32780;&#22312;SRCINDEX&#20013;&#21017;&#26377;&#20851;&#38190;&#23383;&#8220;new&#8221;&#19982;&#21516;&#19968;&#20010;&#25991;&#26723;&#30456;&#20851;&#65292;&#37027;&#20040;&#22312;&#21512;&#24182;&#21518;&#29992;&#36825;&#20004;&#20010;&#20851;&#38190;&#23383;<span class="emphasis"><em>&#37117;</em></span>&#33021;&#25214;&#21040;&#25991;&#26723;123&#12290;
&#24744;&#21487;&#20197;&#32473;&#20986;&#19968;&#20010;&#26174;&#24335;&#26465;&#20214;&#26469;&#23558;&#25991;&#26723;&#20174;DSTINDEX&#20013;&#31227;&#38500;&#65292;&#20197;&#20415;&#24212;&#23545;&#36825;&#31181;&#24773;&#20917;&#65292;&#30456;&#20851;&#30340;&#24320;&#20851;&#26159;<code class="option">--merge-dst-range</code>:
</p><pre class="programlisting">
indexer --merge main delta --merge-dst-range deleted 0 0
</pre><p>
&#36825;&#20010;&#24320;&#20851;&#20801;&#35768;&#24744;&#22312;&#21512;&#24182;&#36807;&#31243;&#20013;&#23545;&#30446;&#26631;&#32034;&#24341;&#23454;&#26045;&#36807;&#28388;&#12290;&#36807;&#28388;&#22120;&#21487;&#20197;&#26377;&#22810;&#20010;&#65292;&#21482;&#26377;&#28385;&#36275;&#20840;&#37096;&#36807;&#28388;&#26465;&#20214;&#30340;&#25991;&#26723;&#25165;&#20250;&#22312;&#26368;&#32456;&#21512;&#24182;&#21518;&#30340;&#32034;&#24341;&#20013;&#20986;&#29616;&#12290;&#22312;&#19978;&#36848;&#20363;&#23376;&#20013;&#65292;&#36807;&#28388;&#22120;&#21482;&#20801;&#35768;&#8220;deleted&#8221;&#20026;0&#30340;&#37027;&#20123;&#26465;&#20214;&#36890;&#36807;&#65292;&#32780;&#21435;&#38500;&#25152;&#26377;&#26631;&#35760;&#20026;&#24050;&#21024;&#38500;&#65288;&#8220;deleted&#8221;&#65289;&#30340;&#35760;&#24405;&#65288;&#21487;&#20197;&#36890;&#36807;&#35843;&#29992;<a class="link" href="#api-func-updateatttributes" title="8.7.2.&nbsp;UpdateAttributes &#65288;&#26356;&#26032;&#23646;&#24615;&#65289;">UpdateAttributes()</a>&#35774;&#32622;&#25991;&#26723;&#30340;&#23646;&#24615;&#65289;&#12290;
</p></div></div>
<div class="chapter" title="&#31532;&nbsp;4&nbsp;&#31456;&nbsp;RT&#23454;&#26102;&#32034;&#24341;"><div class="titlepage"><div><div><h2 class="title"><a name="rt-indexes"></a>&#31532;&nbsp;4&nbsp;&#31456;&nbsp;RT&#23454;&#26102;&#32034;&#24341;</h2></div></div></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="sect1"><a href="#rt-overview">4.1. RT&#23454;&#26102;&#32034;&#24341;&#27010;&#35272;</a></span></dt>
<dt><span class="sect1"><a href="#rt-caveats">4.2. RT&#23454;&#26102;&#32034;&#24341;&#20351;&#29992;&#27880;&#24847;&#20107;&#39033;</a></span></dt>
<dt><span class="sect1"><a href="#rt-internals">4.3. RT&#23454;&#26102;&#32034;&#24341;&#21407;&#29702;</a></span></dt>
<dt><span class="sect1"><a href="#rt-binlog">4.4. &#20108;&#36827;&#21046;&#26085;&#24535;</a></span></dt>
</dl></div>
<p>
&#23454;&#26102;&#32034;&#24341;&#65288;&#25110;&#32773;&#31616;&#31216;&#20026;RT&#32034;&#24341;&#65289;&#26159;&#19968;&#20010;&#26032;&#30340;&#32034;&#24341;&#21518;&#31471;&#65292;&#20320;&#21487;&#20197;&#23454;&#26102;&#30340;&#25554;&#20837;&#12289;&#26356;&#26032;&#25110;&#32773;&#21024;&#38500;&#25991;&#26723;&#65288;&#34892;&#65289;&#12290;RT&#32034;&#24341;&#22312;&#29256;&#26412;1.10-beta&#20013;&#21152;&#20837;&#12290;&#26597;&#35810;&#26102;&#21487;&#20197;&#20351;&#29992;SPhinxAPI&#12289;SphinxQL&#12289;SphinxSE&#65292;&#19981;&#36807;&#30446;&#21069;&#21482;&#33021;&#20351;&#29992;SphinxQL&#26469;&#26356;&#26032;&#12290;&#35814;&#32454;&#30340;SphinxQL&#21442;&#32771;&#35831;&#26597;&#30475; <a class="xref" href="#sphinxql-reference" title="&#31532;&nbsp;7&nbsp;&#31456;&nbsp;SphinxQL &#25351;&#21335;">&#31532;&nbsp;7&nbsp;&#31456; <i>SphinxQL &#25351;&#21335;</i></a>.
</p><div class="sect1" title="4.1.&nbsp;RT&#23454;&#26102;&#32034;&#24341;&#27010;&#35272;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rt-overview"></a>4.1.&nbsp;RT&#23454;&#26102;&#32034;&#24341;&#27010;&#35272;</h2></div></div></div>
<p>
&#21644;&#20854;&#20182;&#31867;&#22411;&#30340;&#32034;&#24341;&#31867;&#20284;&#65292;RT&#32034;&#24341;&#22312; <code class="filename">sphinx.conf</code>&#20013;&#23450;&#20041;&#12290;&#23427;&#19982;&#30913;&#30424;&#32034;&#24341;&#26377;&#30528;&#26126;&#26174;&#30340;&#24046;&#24322;&#65292;a) &#25968;&#25454;&#28304;&#35774;&#32622;&#19981;&#38656;&#35201;&#32780;&#19988;&#20250;&#34987;&#24573;&#30053;&#65292;b) &#20320;&#24212;&#35813;&#26126;&#30830;&#30340;&#23450;&#20041;&#25152;&#26377;&#30340;&#25991;&#26412;&#23383;&#27573;&#65292;&#32780;&#19981;&#20165;&#20165;&#26159;&#23646;&#24615;&#12290;&#19979;&#38754;&#26159;&#20363;&#23376;
</p><div class="example"><a name="ex-rt-updates"></a><p class="title"><b>&#20363;&nbsp;4.1.&nbsp;RT&#23454;&#26102;&#32034;&#24341;&#23450;&#20041;</b></p><div class="example-contents"><pre class="programlisting">
index rt
{
	type = rt
	path = /usr/local/sphinx/data/rt
	rt_field = title
	rt_field = content
	rt_attr_uint = gid
}
</pre></div></div>
<br class="example-break"><p>
RT&#32034;&#24341;&#30446;&#21069;&#36824;&#22312;&#32487;&#32493;&#24320;&#21457;&#23436;&#21892;&#20013;&#65288;&#20174;&#29256;&#26412;1.10-beta&#24320;&#22987;&#65289;&#12290;
&#22240;&#27492;&#65292;&#20182;&#21487;&#33021;&#32570;&#20047;&#26576;&#20123;&#29305;&#23450;&#30340;&#21151;&#33021;&#65306;&#20363;&#22914;&#65292;&#21069;&#32512;/&#20013;&#32512;&#32034;&#24341;&#65292;MVA&#23646;&#24615;&#31561;&#30446;&#21069;&#23578;&#19981;&#25903;&#25345;&#12290;&#20294;&#26159;&#65292;&#25152;&#26377;&#24120;&#35268;&#32034;&#24341;&#21151;&#33021;&#21644;&#25628;&#32034;&#21151;&#33021;&#37117;&#24050;&#32463;&#23454;&#29616;&#65292;&#24182;&#19988;&#32463;&#36807;&#20102;&#20869;&#37096;&#30340;&#27979;&#35797;&#12290;&#25105;&#20204;&#36824;&#26377;&#19968;&#20123;&#23454;&#38469;&#36816;&#33829;&#29983;&#20135;&#29615;&#22659;&#65288;&#24182;&#38750;&#26368;&#19981;&#37325;&#35201;&#30340;&#37096;&#20998;&#65289;&#24050;&#32463;&#22312;&#20351;&#29992;RT&#32034;&#24341;&#65292;&#24182;&#19988;&#21462;&#24471;&#20102;&#36739;&#22909;&#30340;&#25928;&#26524;&#12290;
</p><p>
RT&#32034;&#24341;&#21487;&#20197;&#20351;&#29992;MySQL&#21327;&#35758;&#35775;&#38382;&#65292;&#25903;&#25345;INSERT, REPLACE, DELETE, &#20197;&#21450;
SELECT&#31561;SQL&#35821;&#21477;. &#20197;&#19979;&#26159;&#19968;&#20010;&#22312;&#28436;&#31034;&#32034;&#24341;&#19978;&#30340;&#25805;&#20316;&#20250;&#35805;&#20363;&#23376;&#65306;
</p><pre class="programlisting">
$ mysql -h 127.0.0.1 -P 9306
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1
Server version: 1.10-dev (r2153)

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; INSERT INTO rt VALUES ( 1, 'first record', 'test one', 123 );
Query OK, 1 row affected (0.05 sec)

mysql&gt; INSERT INTO rt VALUES ( 2, 'second record', 'test two', 234 );
Query OK, 1 row affected (0.00 sec)

mysql&gt; SELECT * FROM rt;
+------+--------+------+
| id   | weight | gid  |
+------+--------+------+
|    1 |      1 |  123 |
|    2 |      1 |  234 |
+------+--------+------+
2 rows in set (0.02 sec)

mysql&gt; SELECT * FROM rt WHERE MATCH('test');
+------+--------+------+
| id   | weight | gid  |
+------+--------+------+
|    1 |   1643 |  123 |
|    2 |   1643 |  234 |
+------+--------+------+
2 rows in set (0.01 sec)

mysql&gt; SELECT * FROM rt WHERE MATCH('@title test');
Empty set (0.00 sec)
</pre><p>
&#24182;&#34892;&#21644;&#25209;&#37327;INSERT&#35821;&#27861;&#37117;&#25903;&#25345;&#65292;&#20363;&#22914;&#65306;&#21487;&#20197;&#20808;&#25351;&#23450;&#19968;&#20010;&#21015;&#30340;&#23383;&#27573;&#65292;&#28982;&#21518;&#21516;&#26102;&#25554;&#20837;&#22810;&#34892;&#12290;
&#21024;&#38500;&#21487;&#20197;&#20351;&#29992;DELETE&#35821;&#21477;&#65292;&#20294;&#26159;&#30446;&#21069;&#21807;&#19968;&#25903;&#25345;&#30340;&#35821;&#27861;&#26159;DELETE FROM &lt;index&gt; WHERE id=&lt;id&gt;&#12290;REPLACE&#20063;&#25903;&#25345;&#65292;&#21487;&#20197;&#29992;&#20110;&#26356;&#26032;&#25968;&#25454;&#12290;
</p><pre class="programlisting">
mysql&gt; INSERT INTO rt ( id, title ) VALUES ( 3, 'third row' ), ( 4, 'fourth entry' );
Query OK, 2 rows affected (0.01 sec)

mysql&gt; SELECT * FROM rt;
+------+--------+------+
| id   | weight | gid  |
+------+--------+------+
|    1 |      1 |  123 |
|    2 |      1 |  234 |
|    3 |      1 |    0 |
|    4 |      1 |    0 |
+------+--------+------+
4 rows in set (0.00 sec)

mysql&gt; DELETE FROM rt WHERE id=2;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; SELECT * FROM rt WHERE MATCH('test');
+------+--------+------+
| id   | weight | gid  |
+------+--------+------+
|    1 |   1500 |  123 |
+------+--------+------+
1 row in set (0.00 sec)

mysql&gt; INSERT INTO rt VALUES ( 1, 'first record on steroids', 'test one', 123 );
ERROR 1064 (42000): duplicate id '1'

mysql&gt; REPLACE INTO rt VALUES ( 1, 'first record on steroids', 'test one', 123 );
Query OK, 1 row affected (0.01 sec)

mysql&gt; SELECT * FROM rt WHERE MATCH('steroids');
+------+--------+------+
| id   | weight | gid  |
+------+--------+------+
|    1 |   1500 |  123 |
+------+--------+------+
1 row in set (0.01 sec)
</pre><p>
RT&#32034;&#24341;&#20013;&#23384;&#20648;&#30340;&#25968;&#25454;&#21487;&#20197;&#22312;&#27491;&#24120;&#20851;&#38381;&#21518;&#32487;&#32493;&#23384;&#22312;&#12290;&#22914;&#26524;&#24320;&#21551;&#20102;&#20108;&#36827;&#21046;&#26085;&#24535;&#65292;&#21017;&#21487;&#20197;&#22312;&#23849;&#28291;&#25110;&#32773;&#38750;&#27491;&#24120;&#20851;&#38381;&#21518;&#32487;&#32493;&#23384;&#22312;&#65292;&#24182;&#22312;&#38543;&#21518;&#30340;&#21551;&#21160;&#20013;&#24674;&#22797;&#12290;
</p></div>
<div class="sect1" title="4.2.&nbsp;RT&#23454;&#26102;&#32034;&#24341;&#20351;&#29992;&#27880;&#24847;&#20107;&#39033;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rt-caveats"></a>4.2.&nbsp;RT&#23454;&#26102;&#32034;&#24341;&#20351;&#29992;&#27880;&#24847;&#20107;&#39033;</h2></div></div></div>
<p>
&#22312;&#29256;&#26412;1.10-beta&#26102;&#65292;RT&#32034;&#24341;&#36824;&#22788;&#20110;&#29305;&#27530;&#21151;&#33021;&#27979;&#35797;&#38454;&#27573;&#65306;&#34429;&#28982;&#27809;&#26377;&#22823;&#30340;&#38382;&#39064;&#65292;&#20294;&#26159;&#36824;&#26377;&#19968;&#20123;&#24635;&#25152;&#21608;&#30693;&#30340;&#20197;&#33267;&#20110;&#21487;&#20197;&#25605;&#23616;&#30340;&#38382;&#39064;&#65292;&#20197;&#21450;&#19968;&#20123;&#29305;&#23450;&#30340;&#20351;&#29992;&#38480;&#21046;&#12290;&#36825;&#20123;&#20351;&#29992;&#38480;&#21046;&#22312;&#19979;&#38754;&#19968;&#19968;&#21015;&#20986;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#21069;&#32512;&#21644;&#20013;&#32512;&#32034;&#24341;&#23578;&#19981;&#25903;&#25345;.</li>
<li class="listitem">MVA&#23646;&#24615;&#23578;&#19981;&#25903;&#25345;.</li>
<li class="listitem">&#24120;&#35268;&#30340;&#30913;&#30424;&#22359;&#20248;&#21270;&#23578;&#26410;&#23454;&#29616;</li>
<li class="listitem">&#22312;&#32034;&#24341;&#21021;&#22987;&#21270;&#21019;&#24314;&#26102;&#65292;&#23646;&#24615;&#25353;&#29031;&#31867;&#21035;&#34987;&#37325;&#26032;&#25490;&#24207;&#65292;&#20182;&#20204;&#30340;&#39034;&#24207;&#22914;&#19979;&#65306;uint, bigint, float, timestamp, string. &#22240;&#27492;&#65292;&#22312;&#25191;&#34892;INSERT&#26102;&#65292;&#22914;&#26524;&#27809;&#26377;&#26126;&#30830;&#25351;&#23450;&#21015;&#21517;&#65292;&#23601;&#38656;&#35201;&#20381;&#27425;&#39318;&#20808;&#32473;&#20986;&#25152;&#26377;uint&#21015;&#30340;&#20540;&#65292;&#28982;&#21518;&#26159;bigint&#21015;&#30340;&#20540;&#65292;&#20197;&#27492;&#31867;&#25512;&#12290;</li>
<li class="listitem">&#40664;&#35748;&#20445;&#30041;&#30340;&#20869;&#23384;&#22359;&#22823;&#23567;(<code class="option">rt_mem_limit</code>)&#20026;32M&#65292;&#23545;&#20110;&#22823;&#22411;&#32034;&#24341;&#32780;&#35328;&#21487;&#33021;&#24615;&#33021;&#19981;&#22909;&#65292;&#22914;&#26524;&#25171;&#31639;&#35201;&#32034;&#24341;GB&#32423;&#21035;&#30340;&#25968;&#25454;&#65292;&#20320;&#24212;&#35813;&#22686;&#22823;&#21040;256~1024M&#12290;</li>
<li class="listitem">&#36739;&#39640;&#27604;&#20363;&#30340;DELETE/REPLACE&#21487;&#23548;&#33268;&#22823;&#37327;&#30340;&#22833;&#25928;&#21517;&#21333;&#30862;&#29255;&#21644;&#24433;&#21709;&#25628;&#32034;&#24615;&#33021;&#12290;</li>
<li class="listitem">&#30446;&#21069;&#30340;&#31995;&#32479;&#23545;&#20107;&#21153;&#22788;&#29702;&#27809;&#26377;&#20570;&#24378;&#21046;&#38480;&#21046;&#65307;&#22826;&#22810;&#24182;&#21457;&#30340;INSERT/REPLACE&#20107;&#21153;&#21487;&#33021;&#20250;&#32791;&#36153;&#22823;&#37327;&#30340;&#20869;&#23384;&#12290;</li>
<li class="listitem">&#22312;&#20108;&#36827;&#21046;&#26085;&#24535;&#25439;&#22351;&#30340;&#24773;&#20917;&#19979;&#65292;&#24674;&#22797;&#23558;&#22312;&#31532;&#19968;&#20010;&#25439;&#22351;&#30340;&#20107;&#21153;&#22788;&#20572;&#27490;&#65292;&#21363;&#20351;&#22312;&#25216;&#26415;&#19978;&#21487;&#20197;&#32487;&#32493;&#25628;&#23547;&#38543;&#21518;&#23436;&#22909;&#30340;&#20107;&#21153;&#20197;&#21450;&#37325;&#26032;&#20351;&#29992;&#65292;&#20063;&#26080;&#27982;&#20110;&#20107;&#12290;&#24403;&#28982;&#65292;&#20108;&#36827;&#21046;&#26085;&#24535;&#25991;&#20214;&#20013;&#38388;&#25439;&#22351;&#30340;&#24773;&#20917;&#65288;&#30001;&#20110;&#26159;&#29255;&#29366;&#30913;&#30424;/CDD/&#30913;&#24102;&#65311;&#65289;&#26159;&#26497;&#20026;&#32597;&#35265;&#30340;&#65292;&#29978;&#33267;&#27704;&#36828;&#19981;&#20250;&#30896;&#21040;&#12290;</li>
</ul></div></div>
<div class="sect1" title="4.3.&nbsp;RT&#23454;&#26102;&#32034;&#24341;&#21407;&#29702;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rt-internals"></a>4.3.&nbsp;RT&#23454;&#26102;&#32034;&#24341;&#21407;&#29702;</h2></div></div></div>
<p>
RT&#32034;&#24341;&#20869;&#37096;&#26159;&#21306;&#22359;&#21270;&#30340;&#12290;&#23427;&#20445;&#30041;&#20102;&#20869;&#23384;&#21306;&#22359;&#29992;&#20110;&#23384;&#20648;&#25152;&#26377;&#26368;&#26032;&#30340;&#21464;&#21270;&#12290;&#20869;&#23384;&#21306;&#22359;&#30340;&#20869;&#23384;&#20351;&#29992;&#30001;&#27599;&#20010;&#32034;&#24341;&#35774;&#32622;&#20013;&#30340;<a class="link" href="#conf-rt-mem-limit" title="11.2.49.&nbsp;rt_mem_limit&#65306;RT&#32034;&#24341;&#20869;&#23384;&#38480;&#21046;">rt_mem_limit</a>&#25351;&#20196;&#20005;&#26684;&#38480;&#21046;&#12290;&#19968;&#26086;&#20869;&#23384;&#21306;&#22359;&#30340;&#22686;&#38271;&#36229;&#36807;&#36825;&#20010;&#38480;&#21046;&#65292;&#23601;&#20250;&#26681;&#25454;&#20854;&#20869;&#23481;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#30913;&#30424;&#21306;&#22359;&#65292;&#24182;&#23558;&#20869;&#23384;&#21306;&#22359;&#22797;&#20301;&#12290;&#22240;&#27492;&#65292;&#22312;RT&#32034;&#24341;&#20013;&#65292;&#34429;&#28982;&#22823;&#22810;&#25968;&#30340;&#21464;&#21270;&#37117;&#20250;&#22312;&#20869;&#23384;&#20013;&#30636;&#38388;&#25191;&#34892;&#23436;&#25104;&#65288;&#27627;&#31186;&#32423;&#65289;&#65292;&#36825;&#20123;&#20869;&#23384;&#21306;&#22359;&#28322;&#28385;&#21040;&#30913;&#30424;&#21306;&#22359;&#24314;&#31435;&#30340;&#21464;&#21270;&#20250;&#26377;&#19968;&#23450;&#30340;&#24310;&#26102;&#65288;&#20960;&#31186;&#38047;&#65289;&#12290;
</p><p>
&#30913;&#30424;&#21306;&#22359;&#20854;&#23454;&#23601;&#26159;&#22522;&#20110;&#30913;&#30424;&#30340;&#32034;&#24341;&#12290;&#20294;&#26159;&#20182;&#20204;&#26159;RT&#32034;&#24341;&#30340;&#19968;&#37096;&#20998;&#24182;&#30001;&#20854;&#33258;&#21160;&#31649;&#29702;&#65292;&#25152;&#20197;&#26080;&#38656;&#25163;&#21160;&#37197;&#32622;&#65292;&#23601;&#31639;&#20320;&#24819;&#35201;&#31649;&#29702;&#30446;&#21069;&#20063;&#27809;&#26377;&#25552;&#20379;&#26041;&#24335;&#12290;&#22240;&#20026;&#21482;&#26377;&#22312;RT&#32034;&#24341;&#30340;&#20869;&#23384;&#21306;&#22359;&#36798;&#21040;&#20102;&#38480;&#21046;&#26102;&#25165;&#20250;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#30913;&#30424;&#21306;&#22359;&#65292;&#27599;&#20010;&#30913;&#30424;&#21306;&#22359;&#30340;&#22823;&#23567;&#22522;&#26412;&#19978;&#20026;<code class="option">rt_mem_limit</code> &#20010;&#23383;&#33410;&#12290;
</p><p>
&#19968;&#33324;&#32780;&#35328;&#65292;&#26368;&#22909;&#35774;&#32622;&#19968;&#20010;&#36739;&#22823;&#38480;&#21046;&#20540;&#65292;&#20351;&#24471;&#21047;&#26032;&#39057;&#29575;&#21644;&#32034;&#24341;&#30862;&#29255;&#65288;&#30913;&#30424;&#21306;&#22359;&#65289;&#37117;&#23613;&#21487;&#33021;&#26368;&#23567;&#21270;&#12290;&#20363;&#22914;&#65292;&#22312;&#19968;&#20010;&#19987;&#38376;&#30340;&#25628;&#32034;&#26381;&#21153;&#22120;&#19978;&#35201;&#22788;&#29702;&#19968;&#20010;&#36739;&#22823;&#30340;RT&#32034;&#24341;&#65292;&#24314;&#35758;&#23558;<code class="option">rt_mem_limit</code>&#35774;&#32622;&#20026;1~2GB&#12290;&#20840;&#23616;&#30340;&#20869;&#23384;&#38480;&#21046;&#35745;&#21010;&#23454;&#29616;&#65292;&#20294;&#26159;&#22312;&#29256;&#26412;1.10-beta&#20013;&#23578;&#26410;&#25903;&#25345;&#12290;
</p><p>
&#30913;&#30424;&#21306;&#22359;&#30340;&#20840;&#25991;&#32034;&#24341;&#25968;&#25454;&#24182;&#19981;&#20250;&#30495;&#30340;&#34987;&#20462;&#25913;&#65292;&#25152;&#20197;&#20840;&#25991;&#32034;&#24341;&#23383;&#27573;&#30340;&#21464;&#21270;&#65288;&#21363;&#21024;&#38500;&#34892;&#21644;&#26356;&#26032;&#65289;&#20854;&#23454;&#20351;&#29992;&#22833;&#25928;&#21517;&#21333;&#21015;&#34920;&#25490;&#38500;&#26469;&#33258;&#20110;&#30913;&#30424;&#21306;&#22359;&#30340;&#20808;&#21069;&#29256;&#26412;&#30340;&#34892;&#65292;&#20294;&#26159;&#23454;&#38469;&#19978;&#24182;&#19981;&#20250;&#20174;&#29289;&#29702;&#19978;&#28165;&#38500;&#25968;&#25454;&#12290;&#22240;&#27492;&#65292;&#22312;&#19968;&#20010;&#20855;&#26377;&#36739;&#39640;&#20840;&#25991;&#32034;&#24341;&#26356;&#26032;&#29575;&#30340;&#24773;&#20917;&#19979;&#65292;&#26368;&#32456;&#21487;&#33021;&#34987;&#20808;&#21069;&#29256;&#26412;&#30340;&#34892;&#27745;&#26579;&#65292;&#20197;&#21450;&#38477;&#20302;&#25628;&#32034;&#24615;&#33021;&#12290;&#24050;&#32463;&#35745;&#21010;&#20174;&#32034;&#24341;&#20013;&#29289;&#29702;&#28165;&#38500;&#20197;&#25552;&#39640;&#24615;&#33021;&#65292;&#20294;&#26159;&#22312;&#29256;&#26412;1.10-beta&#20013;&#23578;&#26410;&#25903;&#25345;&#12290;
</p><p>
&#20869;&#23384;&#21306;&#22359;&#20013;&#30340;&#25968;&#25454;&#20250;&#22312;&#27491;&#24120;&#20851;&#38381;&#26102;&#20889;&#20837;&#21040;&#30913;&#30424;&#65292;&#24182;&#22312;&#21551;&#21160;&#26102;&#20877;&#27425;&#36733;&#20837;&#12290;&#20294;&#26159;&#22312;&#23432;&#25252;&#36827;&#31243;&#25110;&#32773;&#26381;&#21153;&#22120;&#23849;&#28291;&#30340;&#24773;&#20917;&#19979;&#65292;&#20869;&#23384;&#21306;&#22359;&#20013;&#30340;&#26356;&#26032;&#25968;&#25454;&#21487;&#33021;&#20250;&#20002;&#22833;&#12290;&#20026;&#20102;&#38450;&#27490;&#36825;&#31181;&#24773;&#20917;&#30340;&#21457;&#29983;&#65292;&#21487;&#20197;&#20351;&#29992;&#20107;&#21153;&#19987;&#29992;&#30340;&#20108;&#36827;&#21046;&#26085;&#24535;&#12290;&#26597;&#30475; <a class="xref" href="#rt-binlog" title="4.4.&nbsp;&#20108;&#36827;&#21046;&#26085;&#24535;">&#31532;&nbsp;4.4&nbsp;&#33410; &#8220;&#20108;&#36827;&#21046;&#26085;&#24535;&#8221;</a> &#20102;&#35299;&#35814;&#24773;&#12290;
</p><p>
&#22312;RT&#32034;&#24341;&#20013;&#20840;&#25991;&#21464;&#21270;&#26159;&#22522;&#20110;&#20107;&#21153;&#30340;&#12290;&#20182;&#20204;&#20250;&#34987;&#23384;&#20648;&#21040;&#27599;&#20010;&#32447;&#31243;&#22788;&#29702;&#27744;&#20013;&#65292;&#24182;&#22312;COMMIT&#26102;&#31435;&#21051;&#24212;&#29992;&#29983;&#25928;&#12290;&#22312;&#21333;&#27425;COMMIT&#20013;&#25552;&#20132;&#22823;&#37327;&#30340;&#25209;&#37327;&#26356;&#26032;&#26377;&#21161;&#20110;&#32034;&#24341;&#30340;&#24555;&#36895;&#29983;&#25104;&#12290;
</p></div>
<div class="sect1" title="4.4.&nbsp;&#20108;&#36827;&#21046;&#26085;&#24535;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rt-binlog"></a>4.4.&nbsp;&#20108;&#36827;&#21046;&#26085;&#24535;</h2></div></div></div>
<p>
&#20108;&#36827;&#21046;&#26085;&#24535;&#26412;&#36136;&#19978;&#26159;&#19968;&#31181;&#25925;&#38556;&#24674;&#22797;&#26426;&#21046;&#12290;&#24403;&#24320;&#21551;&#20108;&#36827;&#21046;&#26085;&#24535;&#26102;&#65292;<code class="filename">searchd</code>&#23558;&#27599;&#26465;&#20107;&#21153;&#22788;&#29702;&#20889;&#20837;&#21040;&#20108;&#36827;&#21046;&#26085;&#24535;&#65292;&#24182;&#21487;&#20197;&#29992;&#20110;&#22312;&#38750;&#27491;&#24120;&#20851;&#38381;&#21518;&#24674;&#22797;&#25968;&#25454;&#12290;&#24403;&#27491;&#24120;&#20851;&#38381;&#26102;&#65292;&#20869;&#23384;&#21306;&#22359;&#30340;&#25968;&#25454;&#20250;&#20889;&#20837;&#21040;&#30913;&#30424;&#65292;&#28982;&#21518;&#21024;&#38500;&#25152;&#26377;&#30340;&#20108;&#36827;&#21046;&#26085;&#24535;&#25991;&#20214;&#12290;
</p><p>
&#22312;&#27491;&#24120;&#30340;&#25805;&#20316;&#20013;&#65292;&#27599;&#24403;&#36798;&#21040;<code class="option">binlog_max_log_size</code> &#30340;&#38480;&#21046; (&#40664;&#35748;&#20026; 128M)&#26102;&#65292;&#23601;&#20250;&#25171;&#24320;&#19968;&#20010;&#26032;&#30340;&#20108;&#36827;&#21046;&#26085;&#24535;&#25991;&#20214;&#12290;&#24050;&#26377;&#30340;&#65292;&#24050;&#20851;&#38381;&#30340;&#20108;&#36827;&#21046;&#26085;&#24535;&#25991;&#20214;&#20250;&#19968;&#30452;&#20445;&#23384;&#65292;&#30452;&#21040;&#23427;&#20204;&#23384;&#20648;&#30340;&#20869;&#23481;&#34987;&#21047;&#26032;&#21040;&#30913;&#30424;&#21306;&#22359;&#20013;&#12290;&#22914;&#26524;&#35774;&#32622;&#38480;&#21046;&#20026;0&#65292;&#21017;&#22312;<code class="filename">searchd</code>&#36816;&#34892;&#30340;&#36807;&#31243;&#20013;&#27704;&#36828;&#19981;&#20250;&#21024;&#38500;&#20108;&#36827;&#21046;&#26085;&#24535;&#25991;&#20214;&#65307;&#20294;&#26159;&#22312;&#27491;&#24120;&#20851;&#38381;&#26102;&#65292;&#36824;&#26159;&#20250;&#21024;&#38500;&#25481;&#12290;
</p><p>
&#30446;&#21069;&#26377;&#19977;&#31181;&#19981;&#21516;&#30340;&#20108;&#36827;&#21046;&#26085;&#24535;&#21047;&#26032;&#31574;&#30053;&#65292;&#30001;<a class="link" href="#conf-binlog-flush" title="11.4.31.&nbsp;binlog_flush&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#21047;&#26032;">binlog_flush</a>&#36873;&#39033;&#26469;&#25511;&#21046;&#65292;&#35774;&#32622;&#20026;0&#34920;&#31034;&#27599;&#31186;&#23558;&#26085;&#24535;&#21047;&#26032;&#19968;&#27425;&#21040;&#25805;&#20316;&#31995;&#32479;&#21644;&#21516;&#27493;&#21040;&#30913;&#30424;&#65292;&#35774;&#32622;&#20026;1&#34920;&#31034;&#34920;&#31034;&#27599;&#27425;&#20107;&#21153;&#22788;&#29702;&#37117;&#21047;&#26032;&#21644;&#21516;&#27493;&#65292;&#35774;&#32622;&#20026;2&#65288;&#40664;&#35748;&#27169;&#24335;&#65289;&#34920;&#31034;&#27599;&#27425;&#20107;&#21153;&#22788;&#29702;&#26102;&#21047;&#26032;&#21333;&#27599;&#31186;&#21516;&#27493;&#19968;&#27425;&#12290;&#21516;&#27493;&#30456;&#23545;&#32780;&#35328;&#26159;&#27604;&#36739;&#24930;&#30340;&#65292;&#22240;&#20026;&#20182;&#38656;&#35201;&#23558;&#25968;&#25454;&#29289;&#29702;&#20889;&#20837;&#21040;&#30913;&#30424;&#65292;&#25152;&#20197;&#27169;&#24335;1&#26159;&#26368;&#23433;&#20840;&#30340;&#27169;&#24335;&#65288;&#27599;&#27425;&#25552;&#20132;&#30340;&#20107;&#29289;&#22788;&#29702;&#65292;&#37117;&#30830;&#20445;&#26159;&#20889;&#20837;&#21040;&#30913;&#30424;&#30340;&#65289;&#12290;&#21047;&#26032;&#26085;&#24535;&#21040;&#25805;&#20316;&#31995;&#32479;&#26159;&#20026;&#20102;&#38450;&#27490;<code class="filename">searchd</code>&#23849;&#28291;&#26102;&#25968;&#25454;&#20002;&#22833;&#65292;&#22914;&#26524;&#25805;&#20316;&#31995;&#32479;&#27809;&#26377;&#23849;&#28291;&#21017;&#25968;&#25454;&#21487;&#20197;&#23433;&#20840;&#20889;&#20837;&#21040;&#30913;&#30424;&#12290;&#27169;&#24335;2&#26159;&#40664;&#35748;&#30340;&#27169;&#24335;&#12290;
</p><p>
&#22312;&#38750;&#27491;&#24120;&#20851;&#38381;&#21518;&#20877;&#27425;&#37325;&#21551;&#27492;&#36827;&#34892;&#25968;&#25454;&#24674;&#22797;&#65292;&#20108;&#36827;&#21046;&#26085;&#24535;&#30340;&#20869;&#23481;&#20250;&#34987;&#37325;&#26032;&#25191;&#34892;&#65292;&#26368;&#21518;&#27491;&#24120;&#23384;&#20648;&#30340;&#25152;&#26377;&#20107;&#21153;&#22788;&#29702;&#37117;&#20250;&#34987;&#36824;&#21407;&#12290;&#20107;&#21153;&#22788;&#29702;&#37117;&#20250;&#34987;&#26657;&#39564;&#65292;&#20197;&#30830;&#20445;&#20108;&#36827;&#21046;&#26085;&#24535;&#25991;&#20214;&#20013;&#25439;&#22351;&#30340;&#22403;&#22334;&#25968;&#25454;<span class="bold"><strong>&#19981;&#20250;</strong></span>&#34987;&#37325;&#26032;&#25191;&#34892;&#65307;&#22240;&#32780;&#19968;&#20010;&#30772;&#22351;&#30340;&#20107;&#21153;&#22788;&#29702;&#23558;&#34987;&#26816;&#27979;&#21040;&#65292;&#22312;&#30446;&#21069;&#29256;&#26412;&#20013;&#23427;&#23558;&#19981;&#20250;&#34987;&#37325;&#26032;&#25191;&#34892;&#12290;&#20107;&#21153;&#22788;&#29702;&#37117;&#20174;&#19968;&#20010;&#29305;&#27530;&#26631;&#24535;&#21644;&#26102;&#38388;&#25139;&#24320;&#22987;&#65292;&#36825;&#26679;&#23376;&#20026;&#25216;&#26415;&#19978;&#22788;&#29702;&#36339;&#36807;&#30772;&#22351;&#30340;&#20107;&#21153;&#22788;&#29702;&#24182;&#20174;&#19979;&#19968;&#26465;&#27491;&#30830;&#30340;&#24320;&#22987;&#32487;&#32493;&#25191;&#34892;&#12289;&#25110;&#32773;&#20174;&#26576;&#20010;&#25351;&#23450;&#26102;&#38388;&#25139;&#24320;&#22987;&#37325;&#26032;&#25191;&#34892;&#20107;&#21153;&#25552;&#20379;&#20102;&#21487;&#33021;&#65288;&#26102;&#38388;&#28857;&#24674;&#22797;&#65289;&#65292;&#20294;&#26159;&#22312;&#29256;&#26412;1.10-beta&#26102;&#23578;&#26410;&#23454;&#29616;&#35813;&#21151;&#33021;&#12290;
</p><p>
&#20108;&#36827;&#21046;&#26085;&#24535;&#23384;&#22312;&#19968;&#20010;&#21103;&#20316;&#29992;&#65292;&#37027;&#23601;&#26159;&#22312;&#19968;&#20010;&#23567;&#30340;RT&#32034;&#19978;&#26356;&#26032;&#26102;&#65292;&#38500;&#38750;&#27491;&#24120;&#20851;&#26426;&#65292;&#21542;&#21017;&#20869;&#23384;&#21306;&#22359;&#23436;&#20840;&#20805;&#36275;&#23548;&#33268;&#20108;&#36827;&#21046;&#26085;&#24535;&#25991;&#20214;&#19981;&#26029;&#22686;&#38271;&#32780;&#21448;&#27704;&#36828;&#37117;&#19981;&#20250;&#34987;&#21024;&#38500;&#25481;&#12290;&#20108;&#36827;&#21046;&#26085;&#24535;&#22522;&#26412;&#19978;&#21482;&#36861;&#21152;&#30456;&#23545;&#20110;&#26368;&#21518;&#22312;&#30913;&#30424;&#19978;&#23436;&#22909;&#20445;&#23384;&#29366;&#24577;&#30340;&#22686;&#37327;&#65292;&#38500;&#38750;&#20869;&#23384;&#21306;&#22359;&#24471;&#21040;&#20445;&#23384;&#65292;&#21542;&#21017;&#23427;&#20204;&#19981;&#20250;&#34987;&#21024;&#38500;&#12290;&#19968;&#20010;&#19981;&#26029;&#22686;&#38271;&#30340;&#20108;&#36827;&#21046;&#26085;&#24535;&#23545;&#20110;&#30913;&#30424;&#20351;&#29992;&#21644;&#23849;&#28291;&#24674;&#22797;&#26102;&#38388;&#37117;&#19981;&#26159;&#22909;&#20107;&#12290;&#20174;&#29256;&#26412;2.0.1-beta&#24320;&#22987;&#65292;&#21487;&#20197;&#36890;&#36807;<a class="link" href="#conf-rt-flush-period" title="11.4.37.&nbsp;rt_flush_period&#65306;RT&#32034;&#24341;&#21047;&#26032;&#21608;&#26399;">rt_flush_period</a>&#25351;&#20196;&#37197;&#32622;<code class="filename">searchd</code>&#26469;&#21608;&#26399;&#24615;&#21047;&#26032;&#20869;&#23384;&#21306;&#22359;&#21040;&#30913;&#30424;&#20197;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#12290;&#24403;&#21608;&#26399;&#24615;&#21047;&#26032;&#21551;&#29992;&#26102;&#65292;<code class="filename">searchd</code>&#20250;&#20445;&#30041;&#19968;&#20010;&#29420;&#31435;&#30340;&#32447;&#31243;&#29992;&#20110;&#26816;&#26597;RT&#32034;&#24341;&#30340;&#20869;&#23384;&#21306;&#22359;&#26159;&#21542;&#38656;&#35201;&#20889;&#22238;&#21040;&#30913;&#30424;&#12290;&#19968;&#26086;&#20889;&#22238;&#21040;&#30913;&#30424;&#65292;&#21508;&#20010;&#20108;&#36827;&#21046;&#26085;&#24535;&#37117;&#21487;&#20197;&#65288;&#33021;&#22815;&#65289;&#23433;&#20840;&#30340;&#21024;&#38500;&#12290;
</p><p>
&#35831;&#27880;&#24847;<code class="code">rt_flush_period</code> &#20165;&#25511;&#21046;<span class="emphasis"><em>&#26816;&#26597;</em></span>&#21457;&#29983;&#30340;&#39057;&#29575;&#12290;&#20294;&#26159;&#36825;&#24182;&#19981;<span class="emphasis"><em>&#20445;&#35777;</em></span>&#29305;&#21035;&#26159;&#20869;&#23384;&#21306;&#22359;&#19968;&#23450;&#20250;&#24471;&#21040;&#20445;&#23384;&#12290;&#20363;&#22914;&#65292;&#23450;&#26399;&#37325;&#26032;&#20445;&#23384;&#19968;&#20010;&#24040;&#22823;&#30340;&#20869;&#23384;&#21306;&#22359;&#20294;&#26159;&#20165;&#26356;&#26032;&#20102;&#23525;&#23525;&#25968;&#34892;&#26159;&#27809;&#26377;&#20219;&#20309;&#24847;&#20041;&#30340;&#12290;searchd&#23432;&#25252;&#36827;&#31243;&#23558;&#20250;&#36890;&#36807;&#26576;&#20123;&#21551;&#21457;&#24335;&#26041;&#27861;&#21028;&#26029;&#26159;&#21542;&#38656;&#35201;&#30495;&#30340;&#25191;&#34892;&#21047;&#26032;&#12290;
</p></div></div>
<div class="chapter" title="&#31532;&nbsp;5&nbsp;&#31456;&nbsp;&#25628;&#32034;"><div class="titlepage"><div><div><h2 class="title"><a name="searching"></a>&#31532;&nbsp;5&nbsp;&#31456;&nbsp;&#25628;&#32034;</h2></div></div></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="sect1"><a href="#matching-modes">5.1. &#21305;&#37197;&#27169;&#24335;</a></span></dt>
<dt><span class="sect1"><a href="#boolean-syntax">5.2. &#24067;&#23572;&#26597;&#35810;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#extended-syntax">5.3. &#25193;&#23637;&#26597;&#35810;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#weighting">5.4. &#26435;&#20540;&#35745;&#31639;</a></span></dt>
<dt><span class="sect1"><a href="#expressions">5.5. &#34920;&#36798;&#24335;&#65292;&#20989;&#25968;&#65292;&#36816;&#31639;&#31526;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#operators">5.5.1. &#36816;&#31639;&#31526;</a></span></dt>
<dt><span class="sect2"><a href="#numeric-functions">5.5.2. &#25968;&#20540;&#20989;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#date-time-functions">5.5.3. &#26085;&#26399;&#21644;&#26102;&#38388;&#20989;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#type-conversion-functions">5.5.4. &#31867;&#22411;&#36716;&#25442;&#20989;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#comparison-functions">5.5.5. &#27604;&#36739;&#20989;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#misc-functions">5.5.6. &#20854;&#23427;&#20989;&#25968;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#sorting-modes">5.6. &#25490;&#24207;&#27169;&#24335;</a></span></dt>
<dt><span class="sect1"><a href="#clustering">5.7. &#32467;&#26524;&#20998;&#32452;&#65288;&#32858;&#31867;&#65289;</a></span></dt>
<dt><span class="sect1"><a href="#distributed">5.8. &#20998;&#24067;&#24335;&#25628;&#32034;</a></span></dt>
<dt><span class="sect1"><a href="#query-log-format">5.9. &#25628;&#32034;&#26381;&#21153;(<code class="filename">searchd</code>) &#26597;&#35810;&#26085;&#24535;&#26684;&#24335;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#plain-log-format">5.9.1. &#32431;&#25991;&#26412;&#26085;&#24535;&#26684;&#24335;</a></span></dt>
<dt><span class="sect2"><a href="#sphinxql-log-format">5.9.2. SphinxQL &#26085;&#24535;&#26684;&#24335;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#sphinxql">5.10. MySQL &#21327;&#35758;&#25903;&#25345;&#19982; SphinxQL</a></span></dt>
<dt><span class="sect1"><a href="#multi-queries">5.11. &#25209;&#37327;&#26597;&#35810;</a></span></dt>
<dt><span class="sect1"><a href="#collations">5.12. &#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;</a></span></dt>
<dt><span class="sect1"><a href="#udf">5.13. &#29992;&#25143;&#33258;&#23450;&#20041;&#20989;&#25968; (UDF)</a></span></dt>
</dl></div>
<div class="sect1" title="5.1.&nbsp;&#21305;&#37197;&#27169;&#24335;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="matching-modes"></a>5.1.&nbsp;&#21305;&#37197;&#27169;&#24335;</h2></div></div></div>
<p>
&#26377;&#22914;&#19979;&#21487;&#36873;&#30340;&#21305;&#37197;&#27169;&#24335;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">SPH_MATCH_ALL, &#21305;&#37197;&#25152;&#26377;&#26597;&#35810;&#35789;(&#40664;&#35748;&#27169;&#24335;);</li>
<li class="listitem">SPH_MATCH_ANY, &#21305;&#37197;&#26597;&#35810;&#35789;&#20013;&#30340;&#20219;&#24847;&#19968;&#20010;;</li>
<li class="listitem">SPH_MATCH_PHRASE, &#23558;&#25972;&#20010;&#26597;&#35810;&#30475;&#20316;&#19968;&#20010;&#35789;&#32452;&#65292;&#35201;&#27714;&#25353;&#39034;&#24207;&#23436;&#25972;&#21305;&#37197;;</li>
<li class="listitem">SPH_MATCH_BOOLEAN, &#23558;&#26597;&#35810;&#30475;&#20316;&#19968;&#20010;&#24067;&#23572;&#34920;&#36798;&#24335; (&#21442;&#35265; <a class="xref" href="#boolean-syntax" title="5.2.&nbsp;&#24067;&#23572;&#26597;&#35810;&#35821;&#27861;">&#31532;&nbsp;5.2&nbsp;&#33410; &#8220;&#24067;&#23572;&#26597;&#35810;&#35821;&#27861;&#8221;</a>);</li>
<li class="listitem">SPH_MATCH_EXTENDED, &#23558;&#26597;&#35810;&#30475;&#20316;&#19968;&#20010;CoreSeek/Sphinx&#20869;&#37096;&#26597;&#35810;&#35821;&#35328;&#30340;&#34920;&#36798;&#24335; (&#21442;&#35265; <a class="xref" href="#extended-syntax" title="5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;">&#31532;&nbsp;5.3&nbsp;&#33410; &#8220;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;&#8221;</a>). &#20174;&#29256;&#26412;Coreseek 3/Sphinx 0.9.9&#24320;&#22987;, &#36825;&#20010;&#36873;&#39033;&#34987;&#36873;&#39033;SPH_MATCH_EXTENDED2&#20195;&#26367;&#65292;&#23427;&#25552;&#20379;&#20102;&#26356;&#22810;&#21151;&#33021;&#21644;&#26356;&#20339;&#30340;&#24615;&#33021;&#12290;&#20445;&#30041;&#36825;&#20010;&#36873;&#39033;&#26159;&#20026;&#20102;&#19982;&#36951;&#30041;&#30340;&#26087;&#20195;&#30721;&#20860;&#23481;&#8212;&#8212;&#36825;&#26679;&#21363;&#20351;Sphinx&#21450;&#20854;&#32452;&#20214;&#21253;&#25324;API&#21319;&#32423;&#30340;&#26102;&#20505;&#65292;&#26087;&#30340;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#36824;&#33021;&#22815;&#32487;&#32493;&#24037;&#20316;&#12290;</li>
<li class="listitem">SPH_MATCH_EXTENDED2, &#20351;&#29992;&#31532;&#20108;&#29256;&#30340;&#8220;&#25193;&#23637;&#21305;&#37197;&#27169;&#24335;&#8221;&#23545;&#26597;&#35810;&#36827;&#34892;&#21305;&#37197;.</li>
<li class="listitem">SPH_MATCH_FULLSCAN, &#24378;&#21046;&#20351;&#29992;&#19979;&#25991;&#25152;&#36848;&#30340;&#8220;&#23436;&#25972;&#25195;&#25551;&#8221;&#27169;&#24335;&#26469;&#23545;&#26597;&#35810;&#36827;&#34892;&#21305;&#37197;&#12290;&#27880;&#24847;&#65292;&#22312;&#27492;&#27169;&#24335;&#19979;&#65292;&#25152;&#26377;&#30340;&#26597;&#35810;&#35789;&#37117;&#34987;&#24573;&#30053;&#65292;&#23613;&#31649;&#36807;&#28388;&#22120;&#12289;&#36807;&#28388;&#22120;&#33539;&#22260;&#20197;&#21450;&#20998;&#32452;&#20173;&#28982;&#36215;&#20316;&#29992;&#65292;&#20294;&#20219;&#20309;&#25991;&#26412;&#21305;&#37197;&#37117;&#19981;&#20250;&#21457;&#29983;.</li>
</ul></div>
<p>
</p><p>
&#24403;&#22914;&#19979;&#26465;&#20214;&#28385;&#36275;&#26102;&#65292;SPH_MATCH_FULLSCAN&#27169;&#24335;&#33258;&#21160;&#20195;&#26367;&#20854;&#20182;&#25351;&#23450;&#30340;&#27169;&#24335;&#34987;&#28608;&#27963;:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">&#26597;&#35810;&#20018;&#26159;&#31354;&#30340;&#65288;&#21363;&#38271;&#24230;&#23383;&#31526;&#20018;&#20026;&#38646;&#65289;</li>
<li class="listitem"><a class="link" href="#conf-docinfo" title="11.2.4.&nbsp;docinfo&#65306;&#25991;&#26723;&#20449;&#24687;&#23384;&#20648;&#27169;&#24335;">docinfo</a> &#23384;&#20648;&#26041;&#24335;&#20026; <code class="code">extern</code>.</li>
</ol></div>
<p>
&#22312;&#23436;&#25972;&#25195;&#25551;&#27169;&#24335;&#20013;&#65292;&#20840;&#37096;&#24050;&#32034;&#24341;&#30340;&#25991;&#26723;&#37117;&#34987;&#30475;&#20316;&#26159;&#21305;&#37197;&#30340;&#12290;&#36825;&#31867;&#21305;&#37197;&#20173;&#28982;&#20250;&#34987;&#36807;&#28388;&#12289;&#25490;&#24207;&#25110;&#20998;&#32452;&#65292;&#20294;&#26159;&#24182;&#19981;&#20250;&#20570;&#20219;&#20309;&#30495;&#27491;&#30340;&#20840;&#25991;&#26816;&#32034;&#12290;&#36825;&#31181;&#27169;&#24335;&#21487;&#20197;&#29992;&#26469;&#32479;&#19968;&#20840;&#25991;&#26816;&#32034;&#21644;&#38750;&#20840;&#25991;&#26816;&#32034;&#30340;&#20195;&#30721;&#65292;&#25110;&#32773;&#20943;&#36731;SQL&#26381;&#21153;&#22120;&#30340;&#36127;&#25285;&#65288;&#26377;&#20123;&#26102;&#20505;Sphinx&#25195;&#25551;&#30340;&#36895;&#24230;&#35201;&#20248;&#20110;&#31867;&#20284;&#30340;MySQL&#26597;&#35810;&#65289;&#12290;
&#8220;&#22312;&#35770;&#22363;&#20013;&#25628;&#32034;&#24086;&#23376;&#8221;&#36825;&#20214;&#20107;&#21487;&#29992;&#20316;&#23436;&#25972;&#25628;&#32034;&#27169;&#24335;&#30340;&#20363;&#23376;&#65306;&#29992;<code class="code">SetFilter()</code>&#25351;&#23450;&#29992;&#25143;ID&#20294;&#19981;&#25552;&#20379;&#20219;&#20309;&#26597;&#35810;&#35789;&#65292;Sphinx&#20250;&#21305;&#37197;<code class="code">SetFilter()</code>&#25152;&#33021;&#21305;&#37197;&#30340;&#20840;&#37096;&#25991;&#26723;&#65292;&#20063;&#23601;&#26159;&#36825;&#20010;&#29992;&#25143;ID&#23545;&#24212;&#30340;&#20840;&#37096;&#24086;&#23376;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#20854;&#32467;&#26524;&#30340;&#31532;&#19968;&#25490;&#24207;&#26631;&#20934;&#26159;&#30456;&#20851;&#24230;&#65292;&#20854;&#27425;&#26159;Sphinx&#25991;&#26723;ID&#65292;&#27491;&#24207;&#65288;&#36739;&#32769;&#30340;&#25991;&#26723;&#22312;&#21069;&#65289;&#12290;
</p><p>
&#27880;&#24847;&#65292;&#22312;&#23436;&#25972;&#25195;&#25551;&#27169;&#24335;&#20013;&#65292;&#25991;&#26723;&#24517;&#39035;&#26377;&#33267;&#23569;&#19968;&#20010;&#23646;&#24615;&#12290;&#21542;&#21017;&#65292;&#21363;&#20415;&#35774;&#32622;docinfo&#30340;&#23384;&#20648;&#26041;&#24335;&#20026;extern&#65292;&#20063;&#26080;&#27861;&#21551;&#29992;&#23436;&#25972;&#25195;&#25551;&#27169;&#24335;&#12290;
</p></div>
<div class="sect1" title="5.2.&nbsp;&#24067;&#23572;&#26597;&#35810;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boolean-syntax"></a>5.2.&nbsp;&#24067;&#23572;&#26597;&#35810;&#35821;&#27861;</h2></div></div></div>
<p>
&#24067;&#23572;&#26597;&#35810;SPH_MATCH_BOOLEAN&#20801;&#35768;&#20351;&#29992;&#19979;&#21015;&#29305;&#27530;&#36816;&#31639;&#31526;:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#26174;&#24335;&#30340;&#19982;&#65288;AND&#65289;&#36816;&#31639;&#31526;: <pre class="programlisting">hello &amp; world</pre></li>
<li class="listitem">&#25110;&#65288;OR&#65289;&#36816;&#31639;&#31526;: <pre class="programlisting">hello | world</pre></li>
<li class="listitem">&#38750;&#65288;NOT&#65289;&#36816;&#31639;&#31526;:
<pre class="programlisting">
hello -world
hello !world
</pre></li>
<li class="listitem">&#20998;&#32452;&#65288;grouping&#65289;: <pre class="programlisting">( hello world )</pre></li>
</ul></div>
<p>
&#20197;&#19979;&#26159;&#19968;&#20010;&#20351;&#29992;&#20102;&#22914;&#19978;&#20840;&#37096;&#36816;&#31639;&#31526;&#30340;&#20363;&#23376;&#65306;
</p><div class="example"><a name="ex-boolean-query"></a><p class="title"><b>&#20363;&nbsp;5.1.&nbsp;&#24067;&#23572;&#26597;&#35810;&#20363;&#23376;</b></p><div class="example-contents"><pre class="programlisting">
( cat -dog ) | ( cat -mouse)
</pre></div></div>
<p><br class="example-break">
</p><p>
&#19982;(AND)&#36816;&#31639;&#31526;&#20026;&#40664;&#35748;&#25805;&#20316;&#65292;&#25152;&#20197;&#8220;hello world&#8221;&#20854;&#23454;&#23601;&#26159;&#8220;hello &amp; world&#8221;
</p><p>
&#25110;(OR)&#36816;&#31639;&#31526;&#30340;&#20248;&#20808;&#32423;&#39640;&#20110;&#19982;&#36816;&#31639;&#31526;&#65292;&#22240;&#27492;&#8220;lookingfor cat | dog | mouse&#8221;&#24847;&#24605;&#26159;"looking for ( cat | dog | mouse )" &#32780;<span class="emphasis"><em>&#19981;&#26159;</em></span> "(looking for cat) | dog | mouse"
</p><p>
&#20687;&#8220;-dog&#8221;&#36825;&#31181;&#26597;&#35810;&#19981;&#33021;&#34987;&#25191;&#34892;&#65292;&#22240;&#20026;&#23427;&#24046;&#19981;&#22810;&#21253;&#25324;&#32034;&#24341;&#25152;&#26377;&#25991;&#26723;&#12290;&#36825;&#26082;&#26377;&#25216;&#26415;&#19978;&#30340;&#21407;&#22240;&#65292;&#20063;&#26377;&#24615;&#33021;&#19978;&#30340;&#21407;&#22240;&#12290;&#20174;&#25216;&#26415;&#19978;&#35828;&#65292;Sphinx&#24182;&#19981;&#24635;&#26159;&#20445;&#25345;&#19968;&#20010;&#20840;&#37096;&#25991;&#26723;ID&#30340;&#21015;&#34920;&#12290;&#24615;&#33021;&#26041;&#38754;&#65292;&#24403;&#25991;&#26723;&#38598;&#38750;&#24120;&#22823;&#30340;&#26102;&#20505;&#65288;&#21363;10-100M&#20010;&#25991;&#26723;&#65289;&#65292;&#23545;&#36825;&#31181;&#25191;&#34892;&#26597;&#35810;&#21487;&#33021;&#38656;&#35201;&#24456;&#38271;&#30340;&#26102;&#38388;&#12290;
</p></div>
<div class="sect1" title="5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="extended-syntax"></a>5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;</h2></div></div></div>
<p>
&#22312;&#25193;&#23637;&#26597;&#35810;&#27169;&#24335;SPH_MATCH_EXTENDED2&#20013;&#21487;&#20197;&#20351;&#29992;&#22914;&#19979;&#29305;&#27530;&#36816;&#31639;&#31526;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#25110;&#65288;OR&#65289;&#36816;&#31639;&#31526;: <pre class="programlisting">hello | world</pre></li>
<li class="listitem">&#38750;&#65288;NOT&#65289;&#36816;&#31639;&#31526;:
<pre class="programlisting">
hello -world
hello !world
</pre></li>
<li class="listitem">&#23383;&#27573;&#65288;field&#65289;&#25628;&#32034;&#31526;: <pre class="programlisting">@title hello @body world</pre></li>
<li class="listitem">&#23383;&#27573;&#38480;&#20301;&#20462;&#39280;&#31526;&#65288;&#29256;&#26412;Coreseek 3/Sphinx 0.9.9-rc1&#20013;&#24341;&#20837;&#65289;: <pre class="programlisting">@body[50] hello</pre></li>
<li class="listitem">&#22810;&#23383;&#27573;&#25628;&#32034;&#31526;: <pre class="programlisting">@(title,body) hello world</pre></li>
<li class="listitem">&#20840;&#23383;&#27573;&#25628;&#32034;&#31526;: <pre class="programlisting">@* hello</pre></li>
<li class="listitem">&#35789;&#32452;&#25628;&#32034;&#31526;: <pre class="programlisting">"hello world"</pre></li>
<li class="listitem">&#36817;&#20284;&#36317;&#31163;&#25628;&#32034;&#31526;: <pre class="programlisting">"hello world"~10</pre></li>
<li class="listitem">&#38400;&#20540;&#21305;&#37197;&#31526;: <pre class="programlisting">"the world is a wonderful place"/3</pre></li>
<li class="listitem">&#20005;&#26684;&#26377;&#24207;&#25628;&#32034;&#31526;&#65288;&#21363;&#8220;&#22312;&#21069;&#8221;&#25628;&#32034;&#31526;&#65289;: <pre class="programlisting">aaa &lt;&lt; bbb &lt;&lt; ccc</pre></li>
<li class="listitem">&#20005;&#26684;&#24418;&#24335;&#20462;&#39280;&#31526;&#65288;&#29256;&#26412;Coreseek 3/Sphinx 0.9.9-rc1&#20013;&#24341;&#20837;&#65289;: <pre class="programlisting">raining =cats and =dogs</pre></li>
<li class="listitem">&#23383;&#27573;&#24320;&#22987;&#21644;&#23383;&#27573;&#32467;&#26463;&#20462;&#39280;&#31526; (&#29256;&#26412;Coreseek 3.1/Sphinx 0.9.9-rc2&#20013;&#24341;&#20837;): <pre class="programlisting">^hello world$</pre></li>
<li class="listitem">NEAR, &#24191;&#20041;&#20020;&#36817;&#36816;&#31639;&#31526; (&#29256;&#26412;2.0.1-beta&#20013;&#24341;&#20837;): <pre class="programlisting">hello NEAR/3 world NEAR/4 "my test"</pre></li>
<li class="listitem">SENTENCE &#21477;&#23376;&#36816;&#31639;&#31526; (&#29256;&#26412;2.0.1-beta&#20013;&#24341;&#20837;): <pre class="programlisting">all SENTENCE words SENTENCE "in one sentence"</pre></li>
<li class="listitem">PARAGRAPH &#27573;&#33853;&#36816;&#31639;&#31526; (&#29256;&#26412;2.0.1-beta&#20013;&#24341;&#20837;): <pre class="programlisting">"Bill Gates" PARAGRAPH "Steve Jobs"</pre></li>
<li class="listitem">ZONE &#21306;&#22495;&#38480;&#21046;&#36816;&#31639;&#31526; (&#29256;&#26412;2.0.1-beta&#20013;&#24341;&#20837;): <pre class="programlisting">ZONE:(h3,h4) only in these titles</pre></li>
</ul></div>
<p>

&#20197;&#19979;&#26159;&#19978;&#36848;&#26576;&#20123;&#36816;&#31639;&#31526;&#30340;&#31034;&#20363;&#65306;
</p><div class="example"><a name="ex-extended-query"></a><p class="title"><b>&#20363;&nbsp;5.2.&nbsp;&#25193;&#23637;&#21305;&#37197;&#27169;&#24335;&#65306;&#26597;&#35810;&#20363;&#23376;</b></p><div class="example-contents"><pre class="programlisting">
"hello world" @title "example program"~10 @body python -(php|perl) @* code
</pre></div></div>
<p><br class="example-break">
&#20363;&#23376;&#20013;&#26597;&#35810;&#30340;&#23436;&#25972;&#35299;&#37322;&#22914;&#19979;&#65306;

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#22312;&#25991;&#26723;&#30340;&#20219;&#24847;&#23383;&#27573;&#20013;&#25214;&#30456;&#37051;&#30340;&#8220;hello&#8221;&#21644;&#8220;world&#8221;</li>
<li class="listitem">&#19981;&#20165;&#22914;&#27492;&#65292;&#31526;&#21512;&#19978;&#36848;&#26465;&#20214;&#30340;&#25991;&#26723;&#30340;title&#23383;&#27573;&#20013;&#36824;&#24517;&#39035;&#21253;&#21547; &#8220;example&#8221;&#21644;&#8220;program&#8221;&#36825;&#20004;&#20010;&#35789;&#65292;&#24182;&#19988;&#20182;&#20204;&#20043;&#38388;&#33267;&#22810;&#26377;10&#20010;&#65288;&#19981;&#21253;&#25324;10&#20010;&#65289;&#20854;&#20182;&#30340;&#35789;&#65288;&#20363;&#22914;&#8220;example PHP program&#8221;&#21487;&#20197;&#21305;&#37197;&#65292;&#20294;&#8220;example script to introduce outside data into the correct context for your program&#8221;&#23601;&#19981;&#34892;&#65292;&#22240;&#20026;&#20013;&#38388;&#26377;10&#20010;&#25110;&#20197;&#19978;&#30340;&#35789;&#12290;</li>
<li class="listitem">&#21516;&#26102;&#65292;body&#23383;&#27573;&#24517;&#39035;&#21547;&#26377;&#35789;&#8220;python&#8221;&#65292;&#20294;&#26082;&#27809;&#26377;&#8220;php&#8221;&#20063;&#27809;&#26377;&#8220;perl&#8221;</li>
<li class="listitem">&#26368;&#21518;, &#20219;&#19968;&#23383;&#27573;&#20013;&#21253;&#21547;&#8221;code&#8220;.</li>
</ul></div>
<p>
</p><p>
&#19982;(AND)&#25805;&#20316;&#20026;&#40664;&#35748;&#25805;&#20316;&#65292;&#22240;&#27492;&#8220;hello world&#8221;&#24847;&#24605;&#26159;&#8220;hello&#8221;&#21644;&#8220;world&#8221;&#24517;&#39035;&#21516;&#26102;&#23384;&#22312;&#25991;&#26723;&#25165;&#33021;&#21305;&#37197;&#12290;
</p><p>
&#25110;&#65288;OR&#65289;&#36816;&#31639;&#31526;&#30340;&#20248;&#20808;&#32423;&#35201;&#39640;&#20110;&#19982;&#36816;&#31639;&#31526;&#65292;&#22240;&#27492;"looking for cat | dog | mouse" &#24847;&#24605;&#26159;"looking for ( cat | dog | mouse )" &#32780;<span class="emphasis"><em>&#19981;&#26159;</em></span>"(looking for cat) | dog | mouse"&#65307;
</p><p>
&#23383;&#27573;&#38480;&#21046;(field limit)&#31526;(field limit)&#23558;&#20854;&#21518;&#25351;&#23450;&#30340;&#25628;&#32034;&#38480;&#21046;&#22312;&#26576;&#20010;&#29305;&#23450;&#30340;&#23383;&#27573;&#20013;&#12290;&#36890;&#24120;&#65292;&#22914;&#26524;&#32473;&#20986;&#30340;&#23383;&#27573;&#21517;&#23454;&#38469;&#24182;&#19981;&#23384;&#22312;&#65292;&#20320;&#20250;&#24471;&#21040;&#19968;&#26465;&#38169;&#35823;&#20449;&#24687;&#12290;&#20294;&#21487;&#20197;&#36890;&#36807;&#22312;&#26597;&#35810;&#30340;&#26368;&#24320;&#22987;&#22788;&#21152;&#19978;@@relaxed&#36873;&#39033;&#26469;&#25918;&#23485;&#38480;&#21046;&#12290;
</p><pre class="programlisting">
@@relaxed @nosuchfield my query
</pre><p>
&#24403;&#25628;&#32034;&#22810;&#20010;&#20855;&#26377;&#19981;&#21516;schema&#30340;&#32034;&#24341;&#26102;&#36825;&#21487;&#33021;&#26377;&#29992;&#12290;
</p><p>
&#29256;&#26412;Coreseek 3/Sphinx 0.9.9-rc1&#21448;&#24341;&#20837;&#20102;&#23383;&#27573;&#38480;&#20301;&#65288;field position limit&#65289;&#31526;&#12290;&#23427;&#25226;&#25628;&#32034;&#38480;&#21046;&#22312;&#25351;&#23450;&#23383;&#27573;&#65288;&#19968;&#20010;&#25110;&#22810;&#20010;&#65289;&#30340;&#21069;N&#20010;&#20301;&#32622;&#12290;&#20363;&#22914;&#8220;@body[50] hello&#8221;<span class="bold"><strong>&#19981;&#20250;</strong></span>&#21305;&#37197;&#37027;&#20123;body&#23383;&#27573;&#21253;&#21547;&#8220;hello&#8221;&#65292;&#20294;&#23427;&#20986;&#29616;&#22312;&#31532;51&#20010;&#20301;&#32622;&#25110;&#32773;&#26356;&#38752;&#21518;&#30340;&#25991;&#26723;&#12290;
</p><p>
&#36817;&#20284;&#36317;&#31163;&#20197;&#35789;&#20026;&#21333;&#20301;&#65292;&#38543;&#35789;&#25968;&#21464;&#21270;&#32780;&#21464;&#21270;&#65292;&#24182;&#24212;&#29992;&#20110;&#24341;&#21495;&#20013;&#30340;&#20840;&#37096;&#35789;&#12290;&#20030;&#20010;&#20363;&#23376;&#65292;"cat dog mouse"~5 &#36825;&#20010;&#26597;&#35810;&#30340;&#24847;&#24605;&#26159;&#24517;&#39035;&#26377;&#19968;&#20010;&#23569;&#20110;8&#20010;&#35789;&#30340;&#35789;&#20018;&#65292;&#23427;&#35201;&#21253;&#21547;&#20840;&#37096;&#30340;&#19977;&#20010;&#35789;&#65292;&#20063;&#23601;&#26159;&#35828;"CAT aaa bbb ccc DOG eee fff MOUSE" &#36825;&#20010;&#25991;&#26723;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#21305;&#37197;&#36825;&#20010;&#26597;&#35810;&#65292;&#22240;&#20026;&#36825;&#20010;&#35789;&#20018;&#27491;&#22909;&#26159;8&#20010;&#35789;&#12290;
</p><p>
&#38400;&#20540;&#21305;&#37197;&#31526;&#24341;&#20837;&#20102;&#19968;&#31181;&#27169;&#31946;&#21305;&#37197;&#12290;&#23427;&#20801;&#35768;&#33267;&#23569;&#21547;&#26377;&#26576;&#20010;&#38408;&#20540;&#25968;&#37327;&#20010;&#21305;&#37197;&#35789;&#30340;&#25991;&#26723;&#36890;&#36807;&#12290;&#19978;&#36848;&#20363;&#23376;&#65288;"the world is a wonderful place"/3&#65289;&#20250;&#21305;&#37197;&#21547;&#26377;&#25351;&#23450;&#30340;&#20845;&#20010;&#35789;&#20013;&#30340;&#33267;&#23569;&#19977;&#20010;&#30340;&#37027;&#20123;&#25991;&#26723;&#12290;&#19978;&#38754;&#20363;&#23376;&#20013;&#30340;&#19968;&#20010;&#26597;&#35810;&#8221;the world is a wonderful place&#8221;/3&#21305;&#37197;&#30340;&#25991;&#26723;&#33267;&#23569;&#21547;&#26377;&#25351;&#23450;&#30340;6&#20010;&#35789;&#20013;&#30340;3&#20010;&#12290;
</p><p>
&#20005;&#26684;&#26377;&#24207;&#25628;&#32034;&#31526;&#65288;&#21363;&#8220;&#22312;&#21069;&#8221;&#25628;&#32034;&#31526;&#65289;&#26159;&#22312;&#29256;&#26412;0.9.9-rc2&#20013;&#24341;&#20837;&#30340;&#65292;&#23427;&#30340;&#20960;&#20010;&#21442;&#25968;&#22312;&#34987;&#21305;&#37197;&#30340;&#25991;&#26723;&#20013;&#24517;&#39035;&#20005;&#26684;&#25353;&#26597;&#35810;&#20013;&#20986;&#29616;&#30340;&#39034;&#24207;&#20986;&#29616;&#12290;&#20363;&#22914;&#65292;&#8220;black &lt;&lt; cat&#8221;&#36825;&#20010;&#26597;&#35810;&#65288;&#19981;&#21253;&#25324;&#24341;&#21495;&#65289;&#21487;&#20197;&#21305;&#37197;&#8220;black and white cat&#8221;&#65292;&#20294;<span class="emphasis"><em>&#19981;&#33021;</em></span>&#21305;&#37197;&#8220;the cat was black&#8221;&#12290;&#39034;&#24207;&#36816;&#31639;&#31526;&#30340;&#20248;&#20808;&#32423;&#26368;&#20302;&#65292;&#23427;&#26082;&#21487;&#20197;&#24212;&#29992;&#22312;&#26368;&#31616;&#21333;&#30340;&#20851;&#38190;&#35789;&#19978;&#65292;&#20063;&#21487;&#20197;&#29992;&#22312;&#26356;&#22797;&#26434;&#30340;&#34920;&#36798;&#24335;&#19978;&#65292;&#27604;&#22914;&#19979;&#38754;&#20063;&#26159;&#20010;&#27491;&#30830;&#30340;&#26597;&#35810;&#65306;
</p><pre class="programlisting">
(bag of words) &lt;&lt; "exact phrase" &lt;&lt; red|green|blue
</pre><p>
</p><p>
&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#20102;&#8220;&#20005;&#26684;&#24418;&#24335;&#8221;&#20851;&#38190;&#23383;&#20462;&#39280;&#31526;&#65292;&#23427;&#20445;&#35777;&#20851;&#38190;&#35789;&#22312;&#21305;&#37197;&#25991;&#26723;&#20013;&#20005;&#26684;&#20197;&#25351;&#23450;&#30340;&#24418;&#24335;&#20986;&#29616;&#65292;&#32780;&#40664;&#35748;&#34892;&#20026;&#21482;&#35201;&#27714;&#35789;&#26681;&#30456;&#21516;&#12290;&#20363;&#22914;&#65292;&#26597;&#35810;&#8220;runs&#8221;&#26082;&#21487;&#20197;&#21305;&#37197;&#21547;&#26377;&#8220;runs&#8221;&#30340;&#25991;&#26723;&#65292;<span class="emphasis"><em>&#20063;</em></span>&#21487;&#20197;&#21305;&#37197;&#21547;&#26377;&#8220;running&#8221;&#30340;&#25991;&#26723;&#65292;&#22240;&#20026;&#36825;&#20108;&#32773;&#30340;&#35789;&#26681;&#37117;&#26159;&#8220;run&#8221;&#8212;&#8212;&#32780;&#22914;&#26524;&#26597;&#35810;&#26159;&#8220;=runs&#8221;&#65292;&#37027;&#23601;&#21482;&#26377;&#21069;&#32773;&#33021;&#21305;&#37197;&#12290;&#20005;&#26684;&#24418;&#24335;&#20462;&#39280;&#31526;&#35201;&#27714;<a class="link" href="#conf-index-exact-words" title="11.2.42.&nbsp;index_exact_words&#65306;&#35789;&#24178;&#21270;&#21518;&#21407;&#35789;&#32034;&#24341;">index_exact_words</a>&#36873;&#39033;&#22788;&#20110;&#21551;&#29992;&#29366;&#24577;&#12290;&#36825;&#26159;&#20010;&#24433;&#21709;&#20851;&#38190;&#23383;&#30340;&#20462;&#39280;&#31526;&#65292;&#21487;&#20197;&#19982;&#20854;&#20182;&#19968;&#20123;&#36816;&#31639;&#31526;&#28151;&#21512;&#20351;&#29992;&#65292;&#20363;&#22914;&#35789;&#32452;&#25628;&#32034;&#31526;&#12289;&#36817;&#20284;&#25628;&#32034;&#31526;&#21644;&#38408;&#20540;&#25628;&#32034;&#31526;&#31561;&#12290;
</p><p>
&#20851;&#38190;&#23383;&#20462;&#39280;&#31526;&#8220;&#23383;&#27573;&#24320;&#22987;&#8221;&#21644;&#8220;&#23383;&#27573;&#32467;&#26463;&#8221;&#26159;&#22312;&#29256;&#26412;Coreseek 3.1/Sphinx 0.9.9-rc2&#20013;&#24341;&#20837;&#30340;&#65292;&#23427;&#20204;&#30830;&#20445;&#21482;&#22312;&#19968;&#20010;&#20840;&#25991;&#23383;&#27573;&#30340;&#26368;&#24320;&#22987;&#25110;&#26368;&#32467;&#26463;&#20301;&#32622;&#21305;&#37197;&#20851;&#38190;&#23383;&#12290;&#20363;&#22914;&#65292;&#26597;&#35810;&#8220;^hello world$&#8221;(&#21253;&#25324;&#24341;&#21495;&#65292;&#20063;&#23601;&#26159;&#35828;&#36825;&#20010;&#26597;&#35810;&#26159;&#35789;&#32452;&#25628;&#32034;&#31526;&#21644;&#23383;&#27573;&#36215;&#27490;&#20462;&#39280;&#31526;&#30340;&#32452;&#21512;)&#21305;&#37197;&#30340;&#25991;&#26723;&#24517;&#28982;&#21253;&#25324;&#26576;&#20010;&#20005;&#26684;&#21482;&#26377;&#8220;hello world&#8221;&#36825;&#20010;&#35789;&#32452;&#30340;&#23383;&#27573;&#12290;
</p><p>
&#33258;&#29256;&#26412;Coreseek 3/Sphinx 0.9.9-rc1&#22987;&#65292;&#21487;&#20197;&#23884;&#22871;&#20219;&#24847;&#23618;&#25968;&#30340;&#25324;&#21495;&#21644;&#8220;&#38750;&#8221;&#25805;&#20316;&#65292;&#20294;&#36825;&#31867;&#26597;&#35810;&#35201;&#24819;&#33021;&#22815;&#35745;&#31639;&#20986;&#32467;&#26524;&#65292;&#23601;&#24517;&#39035;&#20445;&#35777;&#19981;&#33021;&#38544;&#21547;&#22320;&#28041;&#21450;&#25152;&#26377;&#25991;&#26723;&#12290;
</p><pre class="programlisting">
// &#27491;&#30830;&#26597;&#35810;
aaa -(bbb -(ccc ddd))

// &#19981;&#33021;&#22788;&#29702;&#30340;&#26597;&#35810;
-aaa
aaa | -bbb
</pre><p>
</p><p>
<span class="bold"><strong>NEAR &#24191;&#20041;&#20020;&#36817;&#36816;&#31639;&#31526;</strong></span>, &#29256;&#26412;2.0.1-beta&#24341;&#20837;, &#26159;&#36817;&#20284;&#36317;&#31163;&#36816;&#31639;&#31526;&#30340;&#24191;&#20041;&#29256;&#26412;&#12290;&#20854;&#35821;&#27861;&#26159; <code class="code">NEAR/N</code>, &#21306;&#20998;&#22823;&#23567;&#20889;, &#24182;&#19988;&#19981;&#20801;&#35768;&#26377;&#31354;&#26684;&#22312; NEAR &#20851;&#38190;&#35789;&#19982;&#26012;&#32447;&#20197;&#21450;&#36317;&#31163;&#20540;&#20043;&#38388;&#12290;
</p><p>
&#21407;&#22987;&#30340;&#36817;&#20284;&#36317;&#31163;&#36816;&#31639;&#31526;&#20165;&#23545;&#32473;&#22914;&#30340;&#20851;&#38190;&#35789;&#38598;&#36215;&#20316;&#29992;&#12290;&#32780;NEAR&#21017;&#26356;&#21152;&#36890;&#29992;&#65292;&#21487;&#20197;&#25509;&#21463;&#20219;&#24847;&#30340;&#23376;&#34920;&#36798;&#24335;&#20316;&#20026;&#20854;&#21442;&#25968;&#65292;&#24403;&#20004;&#20010;&#34920;&#36798;&#24335;&#22312;N&#20010;&#35789;&#27719;&#30340;&#36317;&#31163;&#20013;&#65288;&#19981;&#35770;&#20808;&#21518;&#39034;&#24207;&#65289;&#21457;&#29616;&#23545;&#26041;&#26102;&#25991;&#26723;&#34987;&#36873;&#20013;&#12290;NEAR&#26159;&#24038;&#32467;&#21512;&#30340;&#65292;&#19982;&#8220;&#22312;&#21069;&#8221;&#25628;&#32034;&#31526;&#20855;&#26377;&#30456;&#21516;&#65288;&#26368;&#20302;&#65289;&#30340;&#20248;&#20808;&#32423;&#12290;
</p><p>
&#20320;&#38656;&#35201;&#26126;&#30333;&#20026;&#20160;&#20040;&#19968;&#20010;&#20351;&#29992;NEAR&#30340;&#26597;&#35810;<code class="code">(one NEAR/7 two NEAR/7 three)</code>
&#24182;&#19981;&#23436;&#20840;&#31561;&#21516;&#20110;&#19968;&#20010;&#20351;&#29992;&#20851;&#38190;&#35789;&#36817;&#20284;&#36317;&#31163;&#30340;&#26597;&#35810;
<code class="code">("one two three"~7)</code>&#12290;
&#36825;&#37324;&#30340;&#21306;&#21035;&#22312;&#20110;&#65292;&#36817;&#20284;&#36317;&#31163;&#36816;&#31639;&#31526;&#20801;&#35768;&#26368;&#22810;6&#20010;&#27809;&#26377;&#21305;&#37197;&#30340;&#35789;&#27719;&#20986;&#29616;&#22312;3&#20010;&#21305;&#37197;&#21040;&#30340;&#35789;&#27719;&#20043;&#38388;&#65292;&#20294;&#26159;NEAR&#30340;&#29256;&#26412;&#38480;&#21046;&#36739;&#23569;: &#23427;&#20801;&#35768;&#26368;&#22810;6&#20010;&#35789;&#27719;&#20986;&#29616;&#22312;
'one' &#19982; 'two' &#20043;&#38388;&#65292;&#28982;&#21518;&#20801;&#35768;&#21305;&#37197;&#21040;&#30340;two&#20851;&#38190;&#35789;&#19982;'three'&#20043;&#38388;&#26377;&#26368;&#22810;6&#20010;&#35789;&#27719;&#12290;
</p><p>
<span class="bold"><strong>SENTENCE &#21477;&#23376; &#21644; PARAGRAPH &#27573;&#33853;&#36816;&#31639;&#31526;</strong></span>, &#22312;&#29256;&#26412;2.0.1-beta&#20013;&#24341;&#20837;,
&#24403;&#23427;&#30340;&#21442;&#25968;&#37117;&#22788;&#20110;&#21516;&#19968;&#20010;&#21477;&#23376;&#25110;&#32773;&#27573;&#33853;&#20013;&#26102;&#25991;&#26723;&#34987;&#36873;&#20013;&#12290;&#21442;&#25968;&#21487;&#20197;&#26159;&#20851;&#38190;&#35789;&#25110;&#32773;&#30701;&#35821;&#65292;&#27963;&#30528;&#30456;&#21516;&#30340;&#36816;&#31639;&#31526;&#23454;&#20363;&#12290;&#19979;&#38754;&#26159;&#20960;&#20010;&#20363;&#23376;&#65306;
</p><pre class="programlisting">
one SENTENCE two
one SENTENCE "two three"
one SENTENCE "two three" SENTENCE four
</pre><p>
&#21442;&#25968;&#22312;&#21477;&#23376;&#25110;&#32773;&#27573;&#33853;&#20013;&#30340;&#39034;&#24207;&#19981;&#20135;&#29983;&#24433;&#21709;&#12290;&#35813;&#21151;&#33021;&#20165;&#22312;<a class="link" href="#conf-index-sp" title="11.2.8.&nbsp;index_sp&#65306;&#32034;&#24341;&#21477;&#23376;&#21644;&#27573;&#33853;&#20449;&#24687;">index_sp</a> (&#21477;&#23376;&#21644;&#27573;&#33853;&#32034;&#24341;&#21151;&#33021;) &#21551;&#29992;&#26102;&#29983;&#25928;&#65292;&#21542;&#21017;&#20316;&#20026;&#21333;&#32431;&#30340;AND&#25805;&#20316;&#23545;&#24453;&#12290;&#21442;&#32771;<code class="code">index_sp</code>&#31456;&#33410;&#30340;&#25991;&#26723;&#20102;&#35299;&#31995;&#32479;&#26159;&#22914;&#20309;&#26469;&#21028;&#26029;&#19968;&#20010;&#21477;&#23376;&#25110;&#32773;&#27573;&#33853;&#30340;&#12290;
</p><p>
<span class="bold"><strong>ZONE &#21306;&#22495;&#38480;&#21046;&#36816;&#31639;&#31526;</strong></span>, &#29256;&#26412;2.0.1-beta&#24341;&#20837;, &#38750;&#24120;&#31867;&#20284;&#20110;&#23383;&#27573;&#38480;&#21046;&#36816;&#31639;&#31526;&#65292;&#20294;&#26159;&#38480;&#21046;&#22312;&#19968;&#20010;&#32473;&#23450;&#30340;&#23383;&#27573;&#20869;&#25110;&#32773;&#21306;&#22495;&#30340;&#21015;&#34920;&#12290;&#35831;&#27880;&#24847;&#65292;&#20854;&#38543;&#21518;&#30340;&#23383;&#34920;&#36798;&#24335;&#24182;<span class="emphasis"><em>&#19981;</em></span>&#35201;&#27714;&#38480;&#23450;&#22312;&#19968;&#20010;&#32473;&#23450;&#30340;&#36830;&#32493;&#21306;&#22495;&#20043;&#20869;&#65292;&#21487;&#20197;&#36328;&#36234;&#22810;&#20010;&#30456;&#21516;&#30340;&#21306;&#22495;&#36827;&#34892;&#21305;&#37197;&#12290;&#20363;&#22914;, <code class="code">(ZONE:th hello world)</code> &#26597;&#35810;
<span class="emphasis"><em>&#23558;</em></span> &#21305;&#37197;&#19979;&#38754;&#28436;&#31034;&#30340;&#25991;&#26723;:
</p><pre class="programlisting">
&lt;th&gt;Table 1. Local awareness of Hello Kitty brand.&lt;/th&gt;
.. some table data goes here ..
&lt;th&gt;Table 2. World-wide brand awareness.&lt;/th&gt;
</pre><p>
ZONE&#36816;&#31639;&#31526;&#23545;&#26597;&#35810;&#30340;&#24433;&#21709;&#30452;&#21040;&#19979;&#19968;&#20010;&#26597;&#35810;&#23383;&#27573;&#25110;&#32773;&#21306;&#22495;&#38480;&#21046;&#31526;&#21495;&#65292;&#25110;&#32773;&#21040;&#21491;&#25324;&#21495;&#32467;&#26463;&#12290;&#23427;&#20165;&#36866;&#29992;&#20110;&#21551;&#29992;&#20102;&#21306;&#22495;&#25903;&#25345;(&#21442;&#30475; <a class="xref" href="#conf-index-zones" title="11.2.9.&nbsp;index_zones&#65306;&#32034;&#24341;&#26631;&#31614;&#21306;&#22495;&#20449;&#24687;">&#31532;&nbsp;11.2.9&nbsp;&#33410; &#8220;index_zones&#65306;&#32034;&#24341;&#26631;&#31614;&#21306;&#22495;&#20449;&#24687;&#8221;</a>) &#30340;&#32034;&#24341;&#65292;&#21542;&#21017;&#23558;&#34987;&#24573;&#30053;&#25481;&#12290;
</p></div>
<div class="sect1" title="5.4.&nbsp;&#26435;&#20540;&#35745;&#31639;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="weighting"></a>5.4.&nbsp;&#26435;&#20540;&#35745;&#31639;</h2></div></div></div>
<p>
&#37319;&#29992;&#20309;&#31181;&#26435;&#20540;&#35745;&#31639;&#20989;&#25968;&#65288;&#30446;&#21069;&#65289;&#21462;&#20915;&#20110;&#26597;&#35810;&#30340;&#27169;&#24335;&#12290;
</p><p>
&#26435;&#20540;&#35745;&#31639;&#20989;&#25968;&#26377;&#22914;&#19979;&#20004;&#20010;&#20027;&#35201;&#37096;&#20998;&#65306;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">phrase rank,</li>
<li class="listitem">statistical rank.</li>
</ol></div>
<p>
</p><p>
&#35789;&#32452;&#35780;&#20998;&#26681;&#25454;&#25991;&#26723;&#21644;&#26597;&#35810;&#30340;&#26368;&#38271;&#20844;&#20849;&#23376;&#20018;&#65288;LCS&#65292;longest common subsequence&#65289;&#30340;&#38271;&#24230;&#36827;&#34892;&#12290;&#22240;&#27492;&#22914;&#26524;&#25991;&#26723;&#23545;&#26597;&#35810;&#35789;&#32452;&#26377;&#19968;&#20010;&#31934;&#30830;&#21305;&#37197;&#65288;&#21363;&#25991;&#26723;&#30452;&#25509;&#21253;&#21547;&#35813;&#35789;&#32452;&#65289;&#65292;&#37027;&#20040;&#23427;&#30340;&#35789;&#32452;&#35780;&#20998;&#23601;&#21462;&#24471;&#20102;&#21487;&#33021;&#30340;&#26368;&#22823;&#20540;&#65292;&#20063;&#23601;&#26159;&#26597;&#35810;&#20013;&#35789;&#30340;&#20010;&#25968;&#12290;
</p><p>
&#32479;&#35745;&#23398;&#35780;&#20998;&#22522;&#20110;&#32463;&#20856;&#30340;BM25&#20989;&#25968;&#65292;&#35813;&#20989;&#25968;&#20165;&#32771;&#34385;&#35789;&#39057;&#12290;&#22914;&#26524;&#26576;&#35789;&#22312;&#25972;&#20010;&#25968;&#25454;&#24211;&#20013;&#24456;&#23569;&#35265;&#65288;&#21363;&#25991;&#26723;&#38598;&#19978;&#30340;&#20302;&#39057;&#35789;&#65289;&#25110;&#32773;&#22312;&#26576;&#20010;&#29305;&#23450;&#25991;&#26723;&#20013;&#34987;&#32463;&#24120;&#25552;&#21450;&#65288;&#21363;&#29305;&#23450;&#25991;&#26723;&#19978;&#30340;&#39640;&#39057;&#35789;&#65289;&#65292;&#37027;&#20040;&#23427;&#23601;&#24471;&#21040;&#19968;&#20010;&#36739;&#39640;&#30340;&#26435;&#37325;&#12290;&#26368;&#32456;&#30340;BM25&#26435;&#20540;&#26159;&#19968;&#20010;0&#21040;1&#20043;&#38388;&#30340;&#28014;&#28857;&#25968;&#12290;
</p><p>
&#22312;&#25152;&#26377;&#27169;&#24335;&#20013;&#65292;&#25968;&#25454;&#23383;&#27573;&#30340;&#35789;&#32452;&#35780;&#20998;&#26159;LCS&#20056;&#20197;&#29992;&#25143;&#25351;&#23450;&#30340;&#25968;&#25454;&#23383;&#27573;&#26435;&#20540;&#12290;&#25968;&#25454;&#23383;&#27573;&#26435;&#20540;&#26159;&#25972;&#25968;&#65292;&#40664;&#35748;&#20026;1&#65292;&#19988;&#23383;&#27573;&#30340;&#26435;&#20540;&#24517;&#39035;&#19981;&#23567;&#20110;1&#12290;
</p><p>
&#22312;SPH_MATCH_BOOLEAN&#27169;&#24335;&#20013;&#65292;&#19981;&#20570;&#20219;&#20309;&#26435;&#37325;&#20272;&#35745;&#65292;&#27599;&#19968;&#20010;&#21305;&#37197;&#39033;&#30340;&#26435;&#37325;&#37117;&#26159;1&#12290;
</p><p>
&#22312;SPH_MATCH_ALL&#21644;SPH_MATCH_PHRASE&#27169;&#24335;&#20013;&#65292;&#26368;&#32456;&#30340;&#26435;&#20540;&#26159;&#35789;&#32452;&#35780;&#20998;&#30340;&#21152;&#26435;&#21644;&#12290;
</p><p>
&#22312;SPH_MATCH_ANY&#27169;&#24335;&#20013;&#65292;&#20110;&#21069;&#38754;&#36848;&#20004;&#27169;&#24335;&#30340;&#22522;&#26412;&#24605;&#24819;&#31867;&#20284;&#65292;&#21482;&#26159;&#27599;&#20010;&#25968;&#25454;&#23383;&#27573;&#30340;&#26435;&#37325;&#37117;&#20877;&#21152;&#19978;&#19968;&#20010;&#21305;&#37197;&#35789;&#25968;&#30446;&#12290;&#22312;&#37027;&#20043;&#21069;&#65292;&#24102;&#26435;&#30340;&#35789;&#32452;&#30456;&#20851;&#24230;&#34987;&#39069;&#22806;&#20056;&#20197;&#19968;&#20010;&#36275;&#22815;&#22823;&#30340;&#25968;&#65292;&#20197;&#20415;&#30830;&#20445;<span class="bold"><strong>&#20219;&#20309;</strong></span>&#19968;&#20010;&#26377;&#36739;&#22823;&#35789;&#32452;&#35780;&#20998;&#30340;&#25968;&#25454;&#23383;&#27573;&#37117;&#20250;&#20351;&#25972;&#20010;&#21305;&#37197;&#30340;&#30456;&#20851;&#24230;&#36739;&#39640;&#65292;&#21363;&#20351;&#35813;&#25968;&#25454;&#23383;&#27573;&#30340;&#26435;&#37325;&#27604;&#36739;&#20302;&#12290;
</p><p>
&#22312;SPH_MATCH_EXTENDED&#27169;&#24335;&#20013;&#65292;&#26368;&#32456;&#30340;&#26435;&#20540;&#26159;&#24102;&#26435;&#30340;&#35789;&#32452;&#35780;&#20998;&#21644;BM25&#26435;&#37325;&#30340;&#21644;&#65292;&#20877;&#20056;&#20197;1000&#24182;&#22235;&#33293;&#20116;&#20837;&#21040;&#25972;&#25968;&#12290;
</p><p>
&#36825;&#20010;&#34892;&#20026;&#23558;&#26469;&#20250;&#34987;&#20462;&#25913;&#65292;&#20197;&#20415;&#20351;MATCH_ALL&#21644;MATCH_ANY&#36825;&#20004;&#20010;&#27169;&#24335;&#20063;&#33021;&#20351;&#29992;BM25&#31639;&#27861;&#12290;&#36825;&#23558;&#20351;&#35789;&#32452;&#35780;&#20998;&#30456;&#21516;&#30340;&#25628;&#32034;&#32467;&#26524;&#29255;&#26029;&#24471;&#21040;&#25913;&#36827;&#65292;&#36825;&#22312;&#21482;&#26377;&#19968;&#20010;&#35789;&#30340;&#26597;&#35810;&#20013;&#23588;&#20854;&#26377;&#29992;&#12290;
</p><p>
&#20851;&#38190;&#30340;&#24605;&#24819;&#65288;&#23545;&#20110;&#38500;&#24067;&#23572;&#27169;&#24335;&#20197;&#22806;&#30340;&#20840;&#37096;&#27169;&#24335;&#20013;&#65289;&#26159;&#23376;&#35789;&#32452;&#30340;&#21305;&#37197;&#36234;&#22909;&#21017;&#35780;&#20998;&#36234;&#39640;&#65292;&#31934;&#30830;&#21305;&#37197;&#65288;&#21305;&#37197;&#25972;&#20010;&#35789;&#32452;&#65289;&#35780;&#20998;&#26368;&#39640;&#12290;&#20316;&#32773;&#30340;&#32463;&#39564;&#26159;&#65292;&#36825;&#31181;&#22522;&#20110;&#35789;&#32452;&#30456;&#20284;&#24615;&#30340;&#35780;&#20998;&#26041;&#27861;&#21487;&#20197;&#25552;&#20379;&#27604;&#20219;&#20309;&#21333;&#32431;&#30340;&#32479;&#35745;&#27169;&#22411;&#65288;&#27604;&#22914;&#20854;&#20182;&#25628;&#32034;&#24341;&#25806;&#20013;&#24191;&#27867;&#20351;&#29992;&#30340;BM25&#65289;&#26126;&#26174;&#26356;&#39640;&#30340;&#25628;&#32034;&#36136;&#37327;&#12290;
</p></div>
<div class="sect1" title="5.5.&nbsp;&#34920;&#36798;&#24335;&#65292;&#20989;&#25968;&#65292;&#36816;&#31639;&#31526;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="expressions"></a>5.5.&nbsp;&#34920;&#36798;&#24335;&#65292;&#20989;&#25968;&#65292;&#36816;&#31639;&#31526;</h2></div></div></div>
<p>
Sphinx&#20801;&#35768;&#20320;&#22312;SphinxQL&#21644;SphinxAPI&#20013;&#20351;&#29992;&#20219;&#24847;&#30340;&#34920;&#36798;&#24335;&#65292;&#21487;&#20197;&#28041;&#21450;&#23646;&#24615;&#30340;&#20540;&#65292;&#20869;&#37096;&#23646;&#24615;&#65288;&#25991;&#26723;&#32534;&#21495;&#21644;&#30456;&#20851;&#24230;&#65289;&#65292;&#31639;&#26415;&#36816;&#31639;&#31526;&#65292;&#20869;&#32622;&#30340;&#20989;&#25968;&#21644;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#20989;&#25968;&#12290;&#26412;&#31456;&#33410;&#26159;&#25903;&#25345;&#30340;&#36816;&#31639;&#31526;&#21644;&#20989;&#25968;&#30340;&#35828;&#26126;&#25991;&#26723;&#12290;&#19979;&#38754;&#26159;&#29992;&#20110;&#24555;&#36895;&#26597;&#30475;&#30340;&#23436;&#25972;&#21442;&#32771;&#21015;&#34920;&#12290;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#expr-ari-ops">&#31639;&#26415;&#36816;&#31639;&#31526;: +, -, *, /, %, DIV, MOD</a></li>
<li class="listitem"><a class="link" href="#expr-comp-ops">&#27604;&#36739;&#36816;&#31639;&#31526;: &lt;, &gt; &lt;=, &gt;=, =, &lt;&gt;</a></li>
<li class="listitem"><a class="link" href="#expr-bool-ops">&#24067;&#23572;&#36816;&#31639;&#31526;: AND, OR, NOT</a></li>
<li class="listitem"><a class="link" href="#expr-bitwise-ops">&#20301;&#36816;&#31639;&#31526;: &amp;, |</a></li>
<li class="listitem"><a class="link" href="#expr-func-abs">ABS()</a></li>
<li class="listitem"><a class="link" href="#expr-func-bigint">BIGINT()</a></li>
<li class="listitem"><a class="link" href="#expr-func-ceil">CEIL()</a></li>
<li class="listitem"><a class="link" href="#expr-func-cos">COS()</a></li>
<li class="listitem"><a class="link" href="#expr-func-crc32">CRC32()</a></li>
<li class="listitem"><a class="link" href="#expr-func-day">DAY()</a></li>
<li class="listitem"><a class="link" href="#expr-func-exp">EXP()</a></li>
<li class="listitem"><a class="link" href="#expr-func-floor">FLOOR()</a></li>
<li class="listitem"><a class="link" href="#expr-func-geodist">GEODIST()</a></li>
<li class="listitem"><a class="link" href="#expr-func-idiv">IDIV()</a></li>
<li class="listitem"><a class="link" href="#expr-func-if">IF()</a></li>
<li class="listitem"><a class="link" href="#expr-func-in">IN()</a></li>
<li class="listitem"><a class="link" href="#expr-func-interval">INTERVAL()</a></li>
<li class="listitem"><a class="link" href="#expr-func-ln">LN()</a></li>
<li class="listitem"><a class="link" href="#expr-func-log10">LOG10()</a></li>
<li class="listitem"><a class="link" href="#expr-func-log2">LOG2()</a></li>
<li class="listitem"><a class="link" href="#expr-func-max">MAX()</a></li>
<li class="listitem"><a class="link" href="#expr-func-min">MIN()</a></li>
<li class="listitem"><a class="link" href="#expr-func-month">MONTH()</a></li>
<li class="listitem"><a class="link" href="#expr-func-now">NOW()</a></li>
<li class="listitem"><a class="link" href="#expr-func-pow">POW()</a></li>
<li class="listitem"><a class="link" href="#expr-func-sin">SIN()</a></li>
<li class="listitem"><a class="link" href="#expr-func-sint">SINT()</a></li>
<li class="listitem"><a class="link" href="#expr-func-sqrt">SQRT()</a></li>
<li class="listitem"><a class="link" href="#expr-func-year">YEAR()</a></li>
<li class="listitem"><a class="link" href="#expr-func-yearmonth">YEARMONTH()</a></li>
<li class="listitem"><a class="link" href="#expr-func-yearmonthday">YEARMONTHDAY()</a></li>
</ul></div>
<p>
</p><div class="sect2" title="5.5.1.&nbsp;&#36816;&#31639;&#31526;"><div class="titlepage"><div><div><h3 class="title"><a name="operators"></a>5.5.1.&nbsp;&#36816;&#31639;&#31526;</h3></div></div></div>
<div class="variablelist"><dl><dt><span class="term"><a name="expr-ari-ops"></a>&#31639;&#26415;&#36816;&#31639;&#31526;: +, -, *, /, %, DIV, MOD</span></dt>
<dd>
&#26631;&#20934;&#31639;&#26415;&#36816;&#31639;&#31526;&#12290;&#35745;&#31639;&#21487;&#20197;&#20197;&#19977;&#31181;&#19981;&#21516;&#30340;&#31934;&#24230;&#36827;&#34892;&#65306;(a) &#21333;&#31934;&#24230;32&#20301;IEEE754&#28014;&#28857;&#20540;&#65288;&#40664;&#35748;&#24773;&#20917;&#65289;&#65292;(b) 32&#20301;&#26377;&#31526;&#21495;&#25972;&#25968;&#65292;(c) 64&#20301;&#26377;&#31526;&#21495;&#25972;&#25968;&#12290;&#22914;&#26524;&#27809;&#26377;&#20219;&#20309;&#36820;&#22238;&#28014;&#28857;&#25968;&#30340;&#25805;&#20316;&#65292;&#34920;&#36798;&#24335;&#20998;&#26512;&#22120;&#20250;&#33258;&#21160;&#20999;&#25442;&#21040;&#25972;&#25968;&#27169;&#24335;&#65292;&#21542;&#21017;&#20351;&#29992;&#40664;&#35748;&#30340;&#28014;&#28857;&#27169;&#24335;&#12290;&#27604;&#22914;&#65292;&#23545;&#20110;&#34920;&#36798;&#24335;&#8220;<code class="code">a+b</code>&#8221;&#65292;&#22914;&#26524;&#20004;&#20010;&#21442;&#25968;&#37117;&#26159;32&#20301;&#25972;&#25968;&#30340;&#65292;&#21017;&#23427;&#20250;&#34987;&#20197;32&#20301;&#25972;&#25968;&#27169;&#24335;&#35745;&#31639;&#65292;&#22914;&#26524;&#20004;&#20010;&#21442;&#25968;&#37117;&#26159;&#25972;&#25968;&#65292;&#32780;&#20854;&#20013;&#19968;&#20010;&#26159;64&#20301;&#30340;&#65292;&#21017;&#20197;64&#20301;&#25972;&#25968;&#27169;&#24335;&#35745;&#31639;&#65292;&#21542;&#21017;&#20197;&#28014;&#28857;&#27169;&#24335;&#35745;&#31639;&#12290;&#28982;&#32780;&#34920;&#36798;&#24335;&#8220;<code class="code">a/b</code>&#8221;&#25110;&#32773;&#8220;<code class="code">sqrt(a)</code>&#8221;&#21364;&#24635;&#26159;&#20351;&#29992;&#28014;&#28857;&#27169;&#24335;&#35745;&#31639;&#65292;&#22240;&#20026;&#36825;&#20123;&#25805;&#20316;&#36820;&#22238;&#38750;&#25972;&#25968;&#30340;&#32467;&#26524;&#65292;&#35201;&#35753;&#21069;&#32773;&#20351;&#29992;&#25972;&#25968;&#27169;&#24335;&#65292;&#21487;&#20197;&#20351;&#29992;<code class="code">IDIV(a,b)</code>&#25110;&#32773;<code class="code">a DIV b</code>&#12290;&#21478;&#22806;&#65292;&#22914;&#26524;&#20004;&#20010;&#21442;&#25968;&#37117;&#26159;32&#20301;&#30340;&#65292;&#34920;&#36798;&#24335;&#8220;<code class="code">a*b</code>&#8221;&#24182;&#19981;&#20250;&#33258;&#21160;&#25552;&#21319;&#21040;64&#20301;&#27169;&#24335;&#12290;&#35201;&#24819;&#24378;&#21046;64&#20301;&#27169;&#24335;&#65292;&#21487;&#20197;&#29992;BIGINT()&#12290;&#65288;&#20294;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#22914;&#26524;&#34920;&#36798;&#24335;&#20013;&#21516;&#26102;&#26377;&#28014;&#28857;&#25968;&#65292;&#37027;&#20040;BIGINT()&#30340;&#21629;&#36816;&#23601;&#26159;&#31616;&#21333;&#22320;&#34987;&#24573;&#30053;&#65289;
</dd><dt><span class="term"><a name="expr-comp-ops"></a>&#27604;&#36739;&#36816;&#31639;&#31526;: &lt;, &gt; &lt;=, &gt;=, =, &lt;&gt;</span></dt>
<dd>
&#27604;&#36739;&#25805;&#20316;&#31526;&#65288;&#27604;&#22914;=&#21644;&lt;=&#65289;&#22312;&#26465;&#20214;&#20026;&#30495;&#26102;&#36820;&#22238;1.0&#65292;&#21542;&#21017;&#36820;&#22238;0.0&#12290;&#20363;&#22914;<code class="code">(a=b)+3</code>&#22312;&#23646;&#24615;&#8220;a&#8221;&#19982;&#23646;&#24615;&#8220;b&#8221;&#30456;&#31561;&#26102;&#36820;&#22238;4&#65292;&#21542;&#21017;&#36820;&#22238;3&#12290;&#19982;MySQL&#19981;&#21516;&#65292;&#30456;&#31561;&#24615;&#27604;&#36739;&#31526;&#65288;&#21363;=&#21644;&lt;&gt;&#65289;&#20013;&#24341;&#20837;&#20102;&#19968;&#20010;&#23567;&#30340;&#38408;&#20540;&#65288;&#40664;&#35748;&#26159;1e-6&#65289;&#12290;&#22914;&#26524;&#34987;&#27604;&#36739;&#30340;&#20004;&#20010;&#20540;&#30340;&#24046;&#24322;&#22312;&#38408;&#20540;&#20043;&#20869;&#65292;&#21017;&#20108;&#32773;&#34987;&#35748;&#20026;&#30456;&#31561;&#12290;
</dd><dt><span class="term"><a name="expr-bool-ops"></a>&#24067;&#23572;&#36816;&#31639;&#31526;: AND, OR, NOT</span></dt>
<dd>
&#24067;&#23572;&#25805;&#20316;&#31526;&#65288;AND,OR,NOT&#65289;&#26159;&#22312;&#29256;&#26412;Coreseek 3.1/Sphinx 0.9.9-rc2&#20013;&#24341;&#20837;&#30340;&#65292;&#20854;&#34892;&#20026;&#19982;&#19968;&#33324;&#30340;&#24067;&#23572;&#25805;&#20316;&#27809;&#26377;&#20004;&#26679;&#12290;&#23427;&#20204;&#20840;&#37096;&#26159;&#24038;&#32467;&#21512;&#65292;&#32780;&#19988;&#27604;&#20043;&#20854;&#20182;&#25805;&#20316;&#31526;&#65292;&#23427;&#20204;&#26377;&#26368;&#20302;&#30340;&#20248;&#20808;&#32423;&#65292;&#20854;&#20013;NOT&#30340;&#20248;&#20808;&#32423;&#27604;AND&#21644;OR&#39640;&#65292;&#20294;&#20173;&#26087;&#20302;&#20110;&#25152;&#26377;&#20854;&#20182;&#25805;&#20316;&#31526;&#12290;AND&#21644;OR&#26377;&#30456;&#21516;&#30340;&#20248;&#20808;&#32423;&#65292;&#22240;&#27492;&#24314;&#35758;&#20351;&#29992;&#25324;&#21495;&#26469;&#36991;&#20813;&#22312;&#22797;&#26434;&#30340;&#34920;&#36798;&#24335;&#20013;&#20986;&#29616;&#28151;&#20081;&#12290;
</dd><dt><span class="term"><a name="expr-bitwise-ops"></a>&#20301;&#36816;&#31639;&#31526;: &amp;, |</span></dt>
<dd>
&#36825;&#20123;&#36816;&#31639;&#31526;&#20998;&#21035;&#36827;&#34892;&#25353;&#20301;AND&#21644;OR&#12290;&#25805;&#20316;&#25968;
&#24517;&#39035;&#26159;&#25972;&#25968;&#31867;&#22411;&#12290;&#29256;&#26412;1.10-beta&#24341;&#20837;&#12290;
</dd></dl></div></div>
<div class="sect2" title="5.5.2.&nbsp;&#25968;&#20540;&#20989;&#25968;"><div class="titlepage"><div><div><h3 class="title"><a name="numeric-functions"></a>5.5.2.&nbsp;&#25968;&#20540;&#20989;&#25968;</h3></div></div></div>
<div class="variablelist"><dl><dt><span class="term"><a name="expr-func-abs"></a>ABS( x )</span></dt>
<dd>&#36820;&#22238; x &#30340;&#32477;&#23545;&#20540;&#12290;</dd><dt><span class="term"><a name="expr-func-ceil"></a>CEIL( x )</span></dt>
<dd>&#36820;&#22238;&#22823;&#20110;&#25110;&#31561;&#20110;&#35813; x &#30340;&#26368;&#23567;&#25972;&#25968;&#12290;</dd><dt><span class="term"><a name="expr-func-cos"></a>COS( x )</span></dt>
<dd>&#36820;&#22238; x &#30340;&#20313;&#24358;&#12290;</dd><dt><span class="term"><a name="expr-func-exp"></a>EXP( x )</span></dt>
<dd>&#36820;&#22238;e&#30340;X&#20056;&#26041;&#21518;&#30340;&#20540;&#65288;e=2.718...&#20316;&#20026;&#33258;&#28982;&#23545;&#25968;&#30340;&#24213;&#65289;&#12290;</dd><dt><span class="term"><a name="expr-func-floor"></a>FLOOR( x )</span></dt>
<dd>&#36820;&#22238;&#23567;&#20110;&#25110;&#31561;&#20110;&#35813; x &#30340;&#26368;&#22823;&#25972;&#25968;&#12290;</dd><dt><span class="term"><a name="expr-func-idiv"></a>IDIV( x, y )</span></dt>
<dd>
&#36820;&#22238; x &#25972;&#38500; y &#30340;&#32467;&#26524;&#12290;&#20004;&#20010;&#21442;&#25968;&#37117;&#24517;&#39035;&#26159;&#25972;&#25968;&#31867;&#22411;&#12290;
</dd><dt><span class="term"><a name="expr-func-ln"></a>LN( x )</span></dt>
<dd>&#36820;&#22238; x &#30340;&#33258;&#28982;&#23545;&#25968; (&#33258;&#28982;&#23545;&#25968;&#30340;&#24213;&#20026;e=2.718...).</dd><dt><span class="term"><a name="expr-func-log10"></a>LOG10( x )</span></dt>
<dd>&#36820;&#22238; x &#30340;&#24120;&#29992;&#23545;&#25968; (&#24213;&#20026;10).</dd><dt><span class="term"><a name="expr-func-log2"></a>LOG2( x )</span></dt>
<dd>&#36820;&#22238; x &#30340;&#20108;&#36827;&#21046;&#23545;&#25968; (&#24213;&#20026;2).</dd><dt><span class="term"><a name="expr-func-max"></a>MAX( x, y )</span></dt>
<dd>&#36820;&#22238; x, y &#20013;&#36739;&#22823;&#30340;&#21442;&#25968;.</dd><dt><span class="term"><a name="expr-func-min"></a>MIN( x, y )</span></dt>
<dd>&#36820;&#22238; x, y &#20013;&#36739;&#23567;&#30340;&#21442;&#25968;.</dd><dt><span class="term"><a name="expr-func-pow"></a>POW( x, y )</span></dt>
<dd>&#36820;&#22238; x &#30340; y &#27425;&#26041;&#30340;&#20901;&#12290;</dd><dt><span class="term"><a name="expr-func-sin"></a>SIN( x )</span></dt>
<dd>&#36820;&#22238; x &#30340;&#27491;&#24358;.</dd><dt><span class="term"><a name="expr-func-sqrt"></a>SQRT( x )</span></dt>
<dd>&#36820;&#22238; x &#30340;&#24179;&#26041;&#26681;.</dd></dl></div></div>
<div class="sect2" title="5.5.3.&nbsp;&#26085;&#26399;&#21644;&#26102;&#38388;&#20989;&#25968;"><div class="titlepage"><div><div><h3 class="title"><a name="date-time-functions"></a>5.5.3.&nbsp;&#26085;&#26399;&#21644;&#26102;&#38388;&#20989;&#25968;</h3></div></div></div>
<div class="variablelist"><dl><dt><span class="term"><a name="expr-func-day"></a>DAY( t )</span></dt>
<dd>&#26681;&#25454;&#24403;&#21069;&#26102;&#21306;&#65292;&#36820;&#22238;&#26102;&#38388;&#25139; t &#23545;&#24212;&#30340;&#25152;&#22312;&#26376;&#26085;&#26399;&#65288;&#33539;&#22260;&#22312;1.. 31 &#65289;&#12290;&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;</dd><dt><span class="term"><a name="expr-func-month"></a>MONTH( t )</span></dt>
<dd>&#26681;&#25454;&#24403;&#21069;&#26102;&#21306;&#65292;&#36820;&#22238;&#26102;&#38388;&#25139; t &#23545;&#24212;&#30340;&#26376;&#20221;&#65288;&#33539;&#22260;&#22312;1.. 12 &#65289;&#12290;&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;</dd><dt><span class="term"><a name="expr-func-now"></a>NOW()</span></dt>
<dd>&#23558;&#24403;&#21069;&#26102;&#38388;&#25139;&#20316;&#20026;&#25972;&#25968;&#36820;&#22238;&#12290;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;</dd><dt><span class="term"><a name="expr-func-year"></a>YEAR( t )</span></dt>
<dd>&#26681;&#25454;&#24403;&#21069;&#26102;&#21306;&#65292;&#36820;&#22238;&#26102;&#38388;&#25139; t &#23545;&#24212;&#30340;&#24180;&#20221;&#65288;&#33539;&#22260;&#22312;1969.. 2038 &#65289;&#12290;&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;</dd><dt><span class="term"><a name="expr-func-yearmonth"></a>YEARMONTH( t )</span></dt>
<dd>&#26681;&#25454;&#24403;&#21069;&#26102;&#21306;&#65292;&#36820;&#22238;&#26102;&#38388;&#25139; t &#23545;&#24212;&#30340;&#25972;&#25968;&#24180;&#20221;&#21644;&#26376;&#20221;&#65288;&#33539;&#22260;&#22312;196912..203801 &#65289;&#12290;&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;</dd><dt><span class="term"><a name="expr-func-yearmonthday"></a>YEARMONTHDAY()</span></dt>
<dd>&#26681;&#25454;&#24403;&#21069;&#26102;&#21306;&#65292;&#36820;&#22238;&#26102;&#38388;&#25139; t &#23545;&#24212;&#30340;&#25972;&#25968;&#24180;&#20221;&#12289;&#26376;&#20221;&#21644;&#26085;&#26399;&#65288;&#33539;&#22260;&#22312;19691231..20380119 &#65289;&#12290;&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;</dd></dl></div></div>
<div class="sect2" title="5.5.4.&nbsp;&#31867;&#22411;&#36716;&#25442;&#20989;&#25968;"><div class="titlepage"><div><div><h3 class="title"><a name="type-conversion-functions"></a>5.5.4.&nbsp;&#31867;&#22411;&#36716;&#25442;&#20989;&#25968;</h3></div></div></div>
<div class="variablelist"><dl><dt><span class="term"><a name="expr-func-bigint"></a>BIGINT()</span></dt>
<dd>
&#23427;&#23558;&#23427;&#30340;&#25972;&#22411;&#21442;&#25968;&#24378;&#34892;&#25552;&#21319;&#21040;64&#20301;&#65292;&#32780;&#23545;&#28014;&#28857;&#21442;&#25968;&#26080;&#25928;&#12290;&#24341;&#20837;&#23427;&#26159;&#20026;&#20102;&#21487;&#20197;&#24378;&#21046;&#26576;&#20123;&#34920;&#36798;&#24335;&#65288;&#22914;&#8220;<code class="code">a*b</code>&#8221;&#65289;&#29992;64&#20301;&#27169;&#24335;&#35745;&#31639;&#65292;&#21363;&#20351;&#25152;&#26377;&#30340;&#21442;&#25968;&#37117;&#26159;32&#20301;&#30340;&#12290;
&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</dd><dt><span class="term"><a name="expr-func-sint"></a>SINT()</span></dt>
<dd>
&#24378;&#21046;&#23558;32&#20301;&#26080;&#31526;&#21495;&#25972;&#25968;&#37325;&#26032;&#35808;&#37322;&#20026;&#26377;&#31526;&#21495;&#25968;&#65292;&#24182;&#25552;&#31034;&#36947;64&#20301;&#65288;&#22240;&#20026;32&#20301;&#31867;&#22411;&#26159;&#26080;&#31526;&#21495;&#30340;&#65289;&#12290;&#36890;&#36807;&#20197;&#19979;&#30340;&#20363;&#23376;&#24456;&#23481;&#26131;&#26126;&#30333;&#65306;&#36890;&#24120;1-2&#30340;&#35745;&#31639;&#32467;&#26524;&#65288;32&#20301;&#26080;&#31526;&#21495;&#25972;&#25968;&#65289;&#20026;4294967295&#65292;&#20294;&#26159;SINT(1-2)&#30340;&#35745;&#31639;&#32467;&#26524;&#20026;-1&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290; 
</dd></dl></div></div>
<div class="sect2" title="5.5.5.&nbsp;&#27604;&#36739;&#20989;&#25968;"><div class="titlepage"><div><div><h3 class="title"><a name="comparison-functions"></a>5.5.5.&nbsp;&#27604;&#36739;&#20989;&#25968;</h3></div></div></div>
<div class="variablelist"><dl><dt><span class="term"><a name="expr-func-if"></a>IF( expr, x, y )</span></dt>
<dd><code class="code">IF()</code> &#34892;&#20026;&#19982;&#20854;&#23545;&#24212;&#30340;MySQL&#30340;&#26377;&#25152;&#19981;&#21516;&#12290;&#23427;&#25509;&#21463;3&#20010;&#21442;&#25968;&#65292;&#26816;&#26597;&#31532;&#19968;&#20010;&#21442;&#25968; expr &#26159;&#21542;&#20026;0.0&#65292;&#33509;&#38750;&#38646;&#21017;&#36820;&#22238;&#31532;&#20108;&#20010;&#21442;&#25968; x &#65292;&#20026;&#38646;&#26102;&#21017;&#36820;&#22238;&#31532;&#19977;&#20010;&#21442;&#25968; y &#12290;&#27880;&#24847;&#65292;&#19982;&#27604;&#36739;&#25805;&#20316;&#31526;&#19981;&#21516;&#65292;<code class="code">IF()</code>&#24182;<span class="bold"><strong>&#19981;</strong></span>&#20351;&#29992;&#38408;&#20540;&#65281;&#22240;&#27492;&#22312;&#31532;&#19968;&#20010;&#21442;&#25968;&#20013;&#20351;&#29992;&#27604;&#36739;&#32467;&#26524;&#26159;&#23433;&#20840;&#30340;&#65292;&#20294;&#20351;&#29992;&#31639;&#26415;&#36816;&#31639;&#31526;&#21017;&#21487;&#33021;&#20135;&#29983;&#24847;&#26009;&#20043;&#22806;&#30340;&#32467;&#26524;&#12290;&#27604;&#22914;&#65292;&#19979;&#38754;&#20004;&#20010;&#35843;&#29992;&#20250;&#20135;&#29983;<span class="emphasis"><em>&#19981;&#21516;</em></span>&#30340;&#32467;&#26524;&#65292;&#34429;&#28982;&#22312;&#36923;&#36753;&#19978;&#20182;&#20204;&#26159;&#31561;&#20215;&#30340;&#65306;
<pre class="programlisting">
IF ( sqrt(3)*sqrt(3)-3&lt;&gt;0, a, b )
IF ( sqrt(3)*sqrt(3)-3, a, b )
</pre>
&#22312;&#31532;&#19968;&#31181;&#24773;&#20917;&#19979;&#65292;&#30001;&#20110;&#26377;&#38408;&#20540;&#65292;&#27604;&#36739;&#25805;&#20316;&#31526;&lt;&gt;&#36820;&#22238;0.0&#65288;&#36923;&#36753;&#20551;&#65289;&#65292;&#20110;&#26159;<code class="code">IF()</code>&#24635;&#26159;&#36820;&#22238;&#8216;b&#8217;&#12290;&#22312;&#31532;&#20108;&#31181;&#24773;&#20917;&#19979;&#65292;<code class="code">IF()</code>&#20989;&#25968;&#20146;&#33258;&#25797;&#33258;&#22312;<span class="emphasis"><em>&#27809;&#26377;</em></span>&#38408;&#20540;&#30340;&#24773;&#20917;&#19979;&#23558;&#21516;&#26679;&#30340; <code class="code">sqrt(3)*sqrt(3)-3</code>&#19982;&#38646;&#20540;&#20570;&#27604;&#36739;&#12290;&#20294;&#30001;&#20110;&#28014;&#28857;&#25968;&#36816;&#31639;&#30340;&#31934;&#24230;&#38382;&#39064;&#65292;&#35813;&#34920;&#36798;&#24335;&#30340;&#32467;&#26524;&#19982;0&#20540;&#20250;&#26377;&#24494;&#23567;&#30340;&#24046;&#24322;&#65292;&#22240;&#27492;&#35813;&#20540;&#19982;&#38646;&#20540;&#30340;&#30456;&#31561;&#27604;&#36739;&#19981;&#20250;&#36890;&#36807;&#65292;&#19978;&#36848;&#31532;&#20108;&#31181;&#24773;&#20917;&#20013;<code class="code">IF()</code>&#20250;&#36820;&#22238;&#8216;a&#8217;&#20570;&#20026;&#32467;&#26524;&#12290;
</dd><dt><span class="term"><a name="expr-func-in"></a>IN( expr, val1, ... )</span></dt>
<dd>
&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#20102;&#20989;&#25968;IN(expr, val1, val2, &#8230;)&#65292;&#23427;&#38656;&#35201;&#20004;&#20010;&#25110;&#26356;&#22810;&#21442;&#25968;&#65292;&#22914;&#26524;&#31532;&#19968;&#20010;&#21442;&#25968;&#19982;&#21518;&#32493;&#20219;&#20309;&#19968;&#20010;&#21442;&#25968;&#65288;val1&#21040;valN&#65289;&#30456;&#31561;&#21017;&#36820;&#22238;1&#65292;&#21542;&#21017;&#36820;&#22238;0&#12290;&#30446;&#21069;&#65292;&#25152;&#26377;&#34987;&#27979;&#35797;&#26159;&#21542;&#30456;&#31561;&#30340;&#21442;&#25968;&#65288;&#19981;&#21253;&#25324;expr&#26412;&#36523;&#65289;&#24517;&#39035;&#26159;&#24120;&#37327;&#12290;&#65288;&#25903;&#25345;&#20219;&#24847;&#34920;&#36798;&#24335;&#22312;&#25216;&#26415;&#19978;&#26159;&#21487;&#20197;&#23454;&#29616;&#30340;&#65292;&#26410;&#26469;&#25105;&#20204;&#20250;&#36825;&#20040;&#20570;&#65289;&#12290;&#36825;&#20123;&#24120;&#37327;&#32463;&#36807;&#39044;&#20808;&#25490;&#24207;&#65292;&#27979;&#35797;&#30456;&#31561;&#26102;&#21487;&#20197;&#20351;&#29992;&#20108;&#20803;&#26597;&#25214;&#20197;&#25552;&#39640;&#25928;&#29575;&#65292;&#22240;&#27492;&#21363;&#20351;&#21442;&#25968;&#21015;&#34920;&#24456;&#38271;IN()&#20063;&#36824;&#21487;&#20197;&#25552;&#20379;&#36739;&#39640;&#30340;&#36895;&#24230;&#12290;&#33258;&#29256;&#26412;0.9.9-rc2&#22987;&#65292;&#31532;&#19968;&#20010;&#21442;&#25968;&#21487;&#20197;&#26159;&#19968;&#20010;MVA&#22810;&#20540;&#23646;&#24615;&#65292;&#36825;&#31181;&#24773;&#20917;&#19979;&#21482;&#35201;MVA&#20013;&#30340;&#20219;&#20309;&#19968;&#20010;&#20540;&#19982;&#21518;&#38754;&#21015;&#34920;&#20013;&#30340;&#20219;&#20309;&#19968;&#20010;&#20540;&#30456;&#31561;IN()&#23601;&#36820;&#22238;1&#12290; &#20174;&#29256;&#26412;2.0.1-beta&#24320;&#22987;&#65292;IN()&#20063;&#25903;&#25345;<code class="code">IN(expr,@uservar)</code>&#35821;&#27861;&#20197;&#26816;&#26597;&#20854;&#20540;&#26159;&#21542;&#22312;&#32473;&#23450;&#30340;&#20840;&#23616;&#29992;&#25143;&#21464;&#37327;&#21015;&#34920;&#20013;&#12290;
</dd><dt><span class="term"><a name="expr-func-interval"></a>INTERVAL( expr, point1, ...)</span></dt>
<dd>
&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#20102;&#20989;&#25968;INTERVAL(expr, point1, point2, point3, &#8230;)&#65292;&#23427;&#25509;&#21463;2&#20010;&#25110;&#26356;&#22810;&#21442;&#25968;&#65292;&#36820;&#22238;&#31532;&#19968;&#20010;&#23567;&#20110;&#31532;&#19968;&#20010;&#21442;&#25968;expr&#30340;&#21442;&#25968;&#30340;&#19979;&#26631;&#65306;&#22914;&#26524;expr&lt;point1&#65292;&#36820;&#22238;0&#65307;&#22914;&#26524;point1&lt;=expr&lt;point2&#65292;&#36820;&#22238;1&#65292;&#19968;&#27425;&#31867;&#25512;&#12290;&#26174;&#28982;&#65292;&#24517;&#39035;&#26377;point1&lt;point2&lt;&#8230;&lt;pointN&#25165;&#33021;&#20445;&#35777;&#36825;&#20010;&#20989;&#25968;&#27491;&#30830;&#24037;&#20316;&#12290;
</dd></dl></div></div>
<div class="sect2" title="5.5.6.&nbsp;&#20854;&#23427;&#20989;&#25968;"><div class="titlepage"><div><div><h3 class="title"><a name="misc-functions"></a>5.5.6.&nbsp;&#20854;&#23427;&#20989;&#25968;</h3></div></div></div>
<div class="variablelist"><dl><dt><span class="term"><a name="expr-func-crc32"></a>CRC32( s )</span></dt>
<dd>
&#36820;&#22238;&#23383;&#31526;&#20018; s &#30340;CRC32&#20540;. &#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</dd><dt><span class="term"><a name="expr-func-geodist"></a>GEODIST( lat1, long1, lat2, long2 )</span></dt>
<dd>
&#29256;&#26412;0.9.9-rc2&#24341;&#20837;&#20989;&#25968;GEODIST(lat1, long1, lat2, long2)&#65292;&#23427;&#26681;&#25454;&#22352;&#26631;&#35745;&#31639;&#20004;&#20010;&#25351;&#23450;&#28857;&#20043;&#38388;&#30340;&#22320;&#34920;&#36317;&#31163;&#12290;&#35831;&#27880;&#24847;&#32463;&#32428;&#24230;&#37117;&#35201;&#20197;&#35282;&#24230;&#20026;&#21333;&#20301;&#65292;&#32780;&#32467;&#26524;&#26159;&#20197;&#31859;&#20026;&#21333;&#20301;&#30340;&#12290;&#22235;&#20010;&#21442;&#25968;&#37117;&#21487;&#20197;&#26159;&#20219;&#24847;&#34920;&#36798;&#24335;&#12290;&#24403;&#20854;&#20013;&#19968;&#23545;&#21442;&#25968;&#24341;&#29992;&#30340;&#26159;&#25991;&#26723;&#23646;&#24615;&#23545;&#32780;&#21478;&#19968;&#23545;&#21442;&#25968;&#26159;&#24120;&#25968;&#65292;&#31995;&#32479;&#20250;&#33258;&#21160;&#36873;&#25321;&#19968;&#26465;&#20248;&#21270;&#30340;&#36335;&#24452;&#12290;
</dd></dl></div></div></div>
<div class="sect1" title="5.6.&nbsp;&#25490;&#24207;&#27169;&#24335;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sorting-modes"></a>5.6.&nbsp;&#25490;&#24207;&#27169;&#24335;</h2></div></div></div>
<p>
&#21487;&#20351;&#29992;&#22914;&#19979;&#27169;&#24335;&#23545;&#25628;&#32034;&#32467;&#26524;&#25490;&#24207;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">SPH_SORT_RELEVANCE &#27169;&#24335;, &#25353;&#30456;&#20851;&#24230;&#38477;&#24207;&#25490;&#21015;&#65288;&#26368;&#22909;&#30340;&#21305;&#37197;&#25490;&#22312;&#26368;&#21069;&#38754;&#65289;</li>
<li class="listitem">SPH_SORT_ATTR_DESC &#27169;&#24335;, &#25353;&#23646;&#24615;&#38477;&#24207;&#25490;&#21015; &#65288;&#23646;&#24615;&#20540;&#36234;&#22823;&#30340;&#36234;&#26159;&#25490;&#22312;&#21069;&#38754;&#65289;</li>
<li class="listitem">SPH_SORT_ATTR_ASC &#27169;&#24335;, &#25353;&#23646;&#24615;&#21319;&#24207;&#25490;&#21015;&#65288;&#23646;&#24615;&#20540;&#36234;&#23567;&#30340;&#36234;&#26159;&#25490;&#22312;&#21069;&#38754;&#65289;</li>
<li class="listitem">SPH_SORT_TIME_SEGMENTS &#27169;&#24335;, &#20808;&#25353;&#26102;&#38388;&#27573;&#65288;&#26368;&#36817;&#19968;&#23567;&#26102;/&#22825;/&#21608;/&#26376;&#65289;&#38477;&#24207;&#65292;&#20877;&#25353;&#30456;&#20851;&#24230;&#38477;&#24207;</li>
<li class="listitem">SPH_SORT_EXTENDED &#27169;&#24335;, &#25353;&#19968;&#31181;&#31867;&#20284;SQL&#30340;&#26041;&#24335;&#23558;&#21015;&#32452;&#21512;&#36215;&#26469;&#65292;&#21319;&#24207;&#25110;&#38477;&#24207;&#25490;&#21015;&#12290;</li>
<li class="listitem">SPH_SORT_EXPR &#27169;&#24335;&#65292;&#25353;&#26576;&#20010;&#31639;&#26415;&#34920;&#36798;&#24335;&#25490;&#24207;&#12290;</li>
</ul></div>
<p>
</p><p>
SPH_SORT_RELEVANCE&#24573;&#30053;&#20219;&#20309;&#38468;&#21152;&#30340;&#21442;&#25968;&#65292;&#27704;&#36828;&#25353;&#30456;&#20851;&#24230;&#35780;&#20998;&#25490;&#24207;&#12290;&#25152;&#26377;&#20854;&#20313;&#30340;&#27169;&#24335;&#37117;&#35201;&#27714;&#39069;&#22806;&#30340;&#25490;&#24207;&#23376;&#21477;&#65292;&#23376;&#21477;&#30340;&#35821;&#27861;&#36319;&#20855;&#20307;&#30340;&#27169;&#24335;&#26377;&#20851;&#12290;SPH_SORT_ATTR_ASC, SPH_SORT_ATTR_DESC&#20197;&#21450;SPH_SORT_TIME_SEGMENTS&#36825;&#19977;&#20010;&#27169;&#24335;&#20165;&#35201;&#27714;&#19968;&#20010;&#23646;&#24615;&#21517;&#12290;

SPH_SORT_RELEVANCE&#27169;&#24335;&#31561;&#20215;&#20110;&#22312;&#25193;&#23637;&#27169;&#24335;&#20013;&#25353;"@weight DESC, @id ASC"&#25490;&#24207;&#65292;SPH_SORT_ATTR_ASC &#27169;&#24335;&#31561;&#20215;&#20110;"attribute ASC, @weight DESC, @id ASC"&#65292;&#32780;SPH_SORT_ATTR_DESC &#31561;&#20215;&#20110;"attribute DESC, @weight DESC, @id ASC"&#12290; 
</p><h3>SPH_SORT_TIME_SEGMENTS &#27169;&#24335;</h3><p>
&#22312;SPH_SORT_TIME_SEGMENTS&#27169;&#24335;&#20013;&#65292;&#23646;&#24615;&#20540;&#34987;&#20998;&#21106;&#25104;&#8220;&#26102;&#38388;&#27573;&#8221;&#65292;&#28982;&#21518;&#20808;&#25353;&#26102;&#38388;&#27573;&#25490;&#24207;&#65292;&#20877;&#25353;&#30456;&#20851;&#24230;&#25490;&#24207;&#12290;
</p><p>
&#26102;&#38388;&#27573;&#26159;&#26681;&#25454;&#25628;&#32034;&#21457;&#29983;&#26102;&#30340;<span class="emphasis"><em>&#24403;&#21069;&#26102;&#38388;&#25139;</em></span>&#35745;&#31639;&#30340;&#65292;&#22240;&#27492;&#32467;&#26524;&#38543;&#26102;&#38388;&#32780;&#21464;&#21270;&#12290;&#25152;&#35828;&#30340;&#26102;&#38388;&#27573;&#26377;&#22914;&#19979;&#36825;&#20123;&#20540;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#26368;&#36817;&#19968;&#23567;&#26102;</li>
<li class="listitem">&#26368;&#36817;&#19968;&#22825;</li>
<li class="listitem">&#26368;&#36817;&#19968;&#21608;</li>
<li class="listitem">&#26368;&#36817;&#19968;&#26376;</li>
<li class="listitem">&#26368;&#36817;&#19977;&#26376;</li>
<li class="listitem">&#20854;&#20182;.</li>
</ul></div>
<p>
&#26102;&#38388;&#27573;&#30340;&#20998;&#27861;&#22266;&#21270;&#22312;&#25628;&#32034;&#31243;&#24207;&#20013;&#20102;&#65292;&#20294;&#22914;&#26524;&#38656;&#35201;&#65292;&#20063;&#21487;&#20197;&#27604;&#36739;&#23481;&#26131;&#22320;&#25913;&#21464;&#65288;&#38656;&#35201;&#20462;&#25913;&#28304;&#30721;&#65289;&#12290;
</p><p>
&#36825;&#31181;&#27169;&#24335;&#26159;&#20026;&#20102;&#26041;&#20415;&#23545;Blog&#26085;&#24535;&#21644;&#26032;&#38395;&#25552;&#35201;&#31561;&#30340;&#25628;&#32034;&#32780;&#22686;&#21152;&#30340;&#12290;&#20351;&#29992;&#36825;&#20010;&#27169;&#24335;&#26102;&#65292;&#22788;&#20110;&#26356;&#36817;&#26102;&#38388;&#27573;&#30340;&#35760;&#24405;&#20250;&#25490;&#22312;&#21069;&#38754;&#65292;&#20294;&#26159;&#22312;&#21516;&#19968;&#26102;&#38388;&#27573;&#20013;&#30340;&#35760;&#24405;&#21448;&#26681;&#25454;&#30456;&#20851;&#24230;&#25490;&#24207;&#65293;&#36825;&#19981;&#21516;&#20110;&#21333;&#32431;&#25353;&#26102;&#38388;&#25139;&#25490;&#24207;&#32780;&#19981;&#32771;&#34385;&#30456;&#20851;&#24230;&#12290;
</p><h3><a name="sort-extended"></a>SPH_SORT_EXTENDED mode</h3><p>
&#22312; SPH_SORT_EXTENDED &#27169;&#24335;&#20013;&#65292;&#24744;&#21487;&#20197;&#25351;&#23450;&#19968;&#20010;&#31867;&#20284;SQL&#30340;&#25490;&#24207;&#34920;&#36798;&#24335;&#65292;&#20294;&#28041;&#21450;&#30340;&#23646;&#24615;&#65288;&#21253;&#25324;&#20869;&#37096;&#23646;&#24615;&#65289;&#19981;&#33021;&#36229;&#36807;5&#20010;&#65292;&#20363;&#22914;&#65306;
</p><pre class="programlisting">
@relevance DESC, price ASC, @id DESC
</pre><p>
</p><p>
&#21482;&#35201;&#20570;&#20102;&#30456;&#20851;&#35774;&#32622;&#65292;&#19981;&#31649;&#26159;&#20869;&#37096;&#23646;&#24615;&#65288;&#24341;&#25806;&#21160;&#24577;&#35745;&#31639;&#20986;&#26469;&#30340;&#37027;&#20123;&#23646;&#24615;&#65289;&#36824;&#26159;&#29992;&#25143;&#23450;&#20041;&#30340;&#23646;&#24615;&#23601;&#37117;&#21487;&#20197;&#20351;&#29992;&#12290;&#20869;&#37096;&#23646;&#24615;&#30340;&#21517;&#23383;&#24517;&#39035;&#29992;&#29305;&#27530;&#31526;&#21495;@&#24320;&#22836;&#65292;&#29992;&#25143;&#23646;&#24615;&#25353;&#21407;&#26679;&#20351;&#29992;&#23601;&#34892;&#20102;&#12290;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#37324;&#65292;<code class="option">@relevance</code>&#21644;<code class="option">@id</code>&#26159;&#20869;&#37096;&#23646;&#24615;&#65292;&#32780;<code class="option">price</code>&#26159;&#29992;&#25143;&#23450;&#20041;&#23646;&#24615;&#12290;
</p><p>
&#21487;&#29992;&#30340;&#20869;&#32622;&#23646;&#24615;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">@id (&#21305;&#37197;&#25991;&#26723;&#30340; ID)</li>
<li class="listitem">@weight (&#21305;&#37197;&#26435;&#20540;)</li>
<li class="listitem">@rank (&#31561;&#21516; weight)</li>
<li class="listitem">@relevance (&#31561;&#21516; weight)</li>
<li class="listitem">@random (&#38543;&#26426;&#39034;&#24207;&#36820;&#22238;&#32467;&#26524;)</li>
</ul></div>
<p>
<code class="option">@rank</code> &#21644; <code class="option">@relevance</code> &#21482;&#26159; <code class="option">@weight</code> &#30340;&#21035;&#21517;.
</p><h3><a name="sort-expr"></a>SPH_SORT_EXPR &#27169;&#24335;</h3><p>
&#34920;&#36798;&#24335;&#25490;&#24207;&#27169;&#24335;&#20351;&#24744;&#21487;&#20197;&#23545;&#21305;&#37197;&#39033;&#25353;&#20219;&#20309;&#31639;&#26415;&#34920;&#36798;&#24335;&#25490;&#24207;&#65292;&#34920;&#36798;&#24335;&#20013;&#30340;&#39033;&#21487;&#20197;&#26159;&#23646;&#24615;&#20540;&#65292;&#20869;&#37096;&#23646;&#24615;&#65288;@id&#21644;@weight&#65289;&#65292;&#31639;&#26415;&#36816;&#31639;&#31526;&#21644;&#19968;&#20123;&#20869;&#24314;&#30340;&#20989;&#25968;&#12290;&#20363;&#22914;&#65306;
</p><pre class="programlisting">
$cl-&gt;SetSortMode ( SPH_SORT_EXPR,
	"@weight + ( user_karma + ln(pageviews) )*0.1" );
</pre><p>
&#22312;&#34920;&#36798;&#24335;&#20013;&#25903;&#25345;&#30340;&#36816;&#31639;&#31526;&#21644;&#20989;&#25968;&#35831;&#21442;&#30475;&#19987;&#38376;&#30340;&#31456;&#33410;<a class="xref" href="#expressions" title="5.5.&nbsp;&#34920;&#36798;&#24335;&#65292;&#20989;&#25968;&#65292;&#36816;&#31639;&#31526;">&#31532;&nbsp;5.5&nbsp;&#33410; &#8220;&#34920;&#36798;&#24335;&#65292;&#20989;&#25968;&#65292;&#36816;&#31639;&#31526;&#8221;</a>.
</p></div>
<div class="sect1" title="5.7.&nbsp;&#32467;&#26524;&#20998;&#32452;&#65288;&#32858;&#31867;&#65289;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="clustering"></a>5.7.&nbsp;&#32467;&#26524;&#20998;&#32452;&#65288;&#32858;&#31867;&#65289;</h2></div></div></div>
<p>
&#26377;&#26102;&#23558;&#25628;&#32034;&#32467;&#26524;&#20998;&#32452;&#65288;&#25110;&#32773;&#35828;&#8220;&#32858;&#31867;&#8221;&#65289;&#24182;&#23545;&#27599;&#32452;&#20013;&#30340;&#32467;&#26524;&#35745;&#25968;&#26159;&#24456;&#26377;&#29992;&#30340;&#65293;&#20363;&#22914;&#30011;&#20010;&#28418;&#20142;&#30340;&#22270;&#26469;&#23637;&#31034;&#27599;&#20010;&#26376;&#26377;&#22810;&#23569;&#30340;blog&#26085;&#24535;&#65292;&#25110;&#32773;&#25226;Web&#25628;&#32034;&#32467;&#26524;&#25353;&#31449;&#28857;&#20998;&#32452;&#65292;&#25110;&#32773;&#25226;&#25214;&#21040;&#30340;&#35770;&#22363;&#24086;&#23376;&#25353;&#20854;&#20316;&#32773;&#20998;&#32452;&#31561;&#31561;&#12290;
</p><p>
&#29702;&#35770;&#19978;&#65292;&#36825;&#21487;&#20197;&#20998;&#20004;&#27493;&#23454;&#29616;&#65306;&#39318;&#20808;&#22312;Sphinx&#20013;&#20570;&#20840;&#25991;&#26816;&#32034;&#65292;&#20877;&#22312;SQL&#26381;&#21153;&#22120;&#31471;&#23545;&#24471;&#21040;&#30340;ID&#20998;&#32452;&#12290;&#20294;&#26159;&#29616;&#23454;&#20013;&#22312;&#22823;&#32467;&#26524;&#38598;&#65288;10K&#21040;10M&#20010;&#21305;&#37197;&#65289;&#19978;&#36825;&#26679;&#20570;&#36890;&#24120;&#20250;&#20005;&#37325;&#24433;&#21709;&#24615;&#33021;&#12290;
</p><p>
&#20026;&#36991;&#20813;&#19978;&#36848;&#38382;&#39064;&#65292;Sphinx&#25552;&#20379;&#20102;&#19968;&#31181;&#8220;&#20998;&#32452;&#27169;&#24335;&#8221;&#65292;&#21487;&#20197;&#29992;API&#35843;&#29992;SetGroupBy()&#26469;&#24320;&#21551;&#12290;&#22312;&#20998;&#32452;&#26102;&#65292;&#26681;&#25454;group-by&#20540;&#32473;&#21305;&#37197;&#39033;&#36171;&#20197;&#19968;&#20010;&#20998;&#32452;&#12290;&#36825;&#20010;&#20540;&#29992;&#19979;&#21015;&#20869;&#24314;&#20989;&#25968;&#20043;&#19968;&#26681;&#25454;&#29305;&#23450;&#30340;&#23646;&#24615;&#20540;&#35745;&#31639;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">SPH_GROUPBY_DAY, &#20174;&#26102;&#38388;&#25139;&#20013;&#25353;YYYYMMDD&#26684;&#24335;&#25277;&#21462;&#24180;&#12289;&#26376;&#12289;&#26085;;</li>
<li class="listitem">SPH_GROUPBY_WEEK, &#20174;&#26102;&#38388;&#25139;&#20013;&#25353;YYYYNNN&#26684;&#24335;&#25277;&#21462;&#24180;&#20221;&#21644;&#25351;&#23450;&#21608;&#25968;&#65288;&#33258;&#24180;&#21021;&#35745;&#36215;&#65289;&#30340;&#31532;&#19968;&#22825;;</li>
<li class="listitem">SPH_GROUPBY_MONTH, &#20174;&#26102;&#38388;&#25139;&#20013;&#25353;YYYYMM&#26684;&#24335;&#25277;&#21462;&#26376;&#20221;;</li>
<li class="listitem">SPH_GROUPBY_YEAR, &#20174;&#26102;&#38388;&#25139;&#20013;&#25353;YYYY&#26684;&#24335;&#25277;&#21462;&#24180;&#20221;;</li>
<li class="listitem">SPH_GROUPBY_ATTR, &#20351;&#29992;&#23646;&#24615;&#20540;&#33258;&#36523;&#36827;&#34892;&#20998;&#32452;.</li>
</ul></div>
<p>
</p><p>
&#26368;&#32456;&#30340;&#25628;&#32034;&#32467;&#26524;&#20013;&#27599;&#32452;&#21253;&#21547;&#19968;&#20010;&#26368;&#20339;&#21305;&#37197;&#12290;&#20998;&#32452;&#20989;&#25968;&#20540;&#21644;&#27599;&#32452;&#30340;&#21305;&#37197;&#25968;&#30446;&#20998;&#21035;&#20197;&#8220;&#34394;&#25311;&#8221;&#23646;&#24615;
<span class="bold"><strong>@group</strong></span> &#21644;
<span class="bold"><strong>@count</strong></span> &#30340;&#24418;&#24335;&#36820;&#22238;.
</p><p>
&#32467;&#26524;&#38598;&#25353;group-by&#25490;&#24207;&#23376;&#21477;&#25490;&#24207;&#65292;&#35821;&#27861;&#19982;<a class="link" href="#sort-extended" title="5.6.&nbsp;SPH_SORT_EXTENDED mode"><code class="option">SPH_SORT_EXTENDED</code> &#25490;&#24207;&#23376;&#21477;</a>&#30340;&#35821;&#27861;&#30456;&#20284;&#12290;&#38500;&#20102;<code class="option">@id</code>&#21644;<code class="option">@weight</code>&#65292;&#20998;&#32452;&#25490;&#24207;&#23376;&#21477;&#36824;&#21253;&#25324;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">@group (groupby&#20989;&#25968;&#20540;),</li>
<li class="listitem">@count (&#32452;&#20013;&#30340;&#21305;&#37197;&#25968;&#30446;).</li>
</ul></div>
<p>
</p><p>
&#40664;&#35748;&#27169;&#24335;&#26159;&#26681;&#25454;groupby&#20989;&#25968;&#20540;&#38477;&#24207;&#25490;&#21015;&#65292;&#21363;&#25353;&#29031; <code class="option">"@group desc"</code>.
</p><p>
&#25490;&#24207;&#23436;&#25104;&#26102;&#65292;&#32467;&#26524;&#21442;&#25968;<code class="option">total_found</code>&#20250;&#21253;&#21547;&#22312;&#25972;&#20010;&#32034;&#24341;&#19978;&#21305;&#37197;&#30340;&#32452;&#30340;&#24635;&#25968;&#30446;&#12290;
</p><p>
<span class="bold"><strong>&#27880;&#24847;:</strong></span> &#20998;&#32452;&#25805;&#20316;&#22312;&#22266;&#23450;&#30340;&#20869;&#23384;&#20013;&#25191;&#34892;&#65292;&#22240;&#27492;&#23427;&#32473;&#20986;&#30340;&#26159;&#36817;&#20284;&#32467;&#26524;&#65307;&#25152;&#20197;<code class="option">total_found</code>&#25253;&#21578;&#30340;&#25968;&#30446;&#21487;&#33021;&#27604;&#23454;&#38469;&#32473;&#20986;&#30340;&#20010;&#20998;&#32452;&#25968;&#30446;&#30340;&#21644;&#22810;&#12290;<code class="option">@count</code>&#20063;&#21487;&#33021;&#34987;&#20302;&#20272;&#12290;&#35201;&#38477;&#20302;&#19981;&#20934;&#30830;&#24615;&#65292;&#24212;&#25552;&#39640;<code class="option">max_matches</code>&#12290;&#22914;&#26524;<code class="option">max_matches</code>&#20801;&#35768;&#23384;&#20648;&#25214;&#21040;&#30340;&#20840;&#37096;&#20998;&#32452;&#65292;&#37027;&#32467;&#26524;&#23601;&#26159;&#30334;&#20998;&#20043;&#30334;&#20934;&#30830;&#30340;&#12290;
</p><p>
&#20363;&#22914;&#65292;&#22914;&#26524;&#25353;&#30456;&#20851;&#24230;&#25490;&#24207;&#65292;&#21516;&#26102;&#29992;<code class="code">SPH_GROUPBY_DAY</code>&#20989;&#25968;&#25353;&#23646;&#24615;<code class="code">"published"</code>&#20998;&#32452;&#65292;&#37027;&#20040;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#32467;&#26524;&#20013;&#21253;&#21547;&#27599;&#22825;&#30340;&#21305;&#37197;&#32467;&#26524;&#20013;&#26368;&#30456;&#20851;&#30340;&#37027;&#19968;&#20010;&#65292;&#22914;&#26524;&#37027;&#22825;&#26377;&#35760;&#24405;&#21305;&#37197;&#30340;&#35805;,</li>
<li class="listitem">&#32467;&#26524;&#20013;&#36824;&#38468;&#21152;&#32473;&#20986;&#22825;&#30340;&#32534;&#21495;&#21644;&#27599;&#22825;&#30340;&#21305;&#37197;&#25968;&#30446;,</li>
<li class="listitem">&#32467;&#26524;&#20197;&#22825;&#30340;&#32534;&#21495;&#38477;&#24207;&#25490;&#21015;&#65288;&#21363;&#26368;&#36817;&#30340;&#26085;&#23376;&#22312;&#21069;&#38754;&#65289;.</li>
</ul></div>
<p>
</p><p>
&#20174;&#29256;&#26412;0.9.9-rc2&#24320;&#22987;, &#24403;&#20351;&#29992;GROUP BY&#26102;&#65292;&#21487;&#20197;&#36890;&#36807;<a class="link" href="#api-func-setselect" title="8.2.4.&nbsp;SetSelect (&#35774;&#32622;&#36820;&#22238;&#20449;&#24687;&#30340;&#20869;&#23481;)">SetSelect()</a> API&#35843;&#29992;&#32858;&#21512;&#20989;&#25968; (AVG(), MIN(),
MAX(), SUM()) 
</p></div>
<div class="sect1" title="5.8.&nbsp;&#20998;&#24067;&#24335;&#25628;&#32034;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="distributed"></a>5.8.&nbsp;&#20998;&#24067;&#24335;&#25628;&#32034;</h2></div></div></div>
<p>
&#20026;&#25552;&#39640;&#21487;&#20280;&#32553;&#24615;&#65292;Sphnix&#25552;&#20379;&#20102;&#20998;&#24067;&#24335;&#26816;&#32034;&#33021;&#21147;&#12290;&#20998;&#24067;&#24335;&#26816;&#32034;&#21487;&#20197;&#25913;&#21892;&#26597;&#35810;&#24310;&#36831;&#38382;&#39064;&#65288;&#21363;&#32553;&#30701;&#26597;&#35810;&#26102;&#38388;&#65289;&#21644;&#25552;&#39640;&#22810;&#26381;&#21153;&#22120;&#12289;&#22810;CPU&#25110;&#22810;&#26680;&#29615;&#22659;&#19979;&#30340;&#21534;&#21520;&#29575;&#65288;&#21363;&#27599;&#31186;&#21487;&#20197;&#23436;&#25104;&#30340;&#26597;&#35810;&#25968;&#65289;&#12290;&#36825;&#23545;&#20110;&#22823;&#37327;&#25968;&#25454;&#65288;&#21363;&#21313;&#20159;&#32423;&#30340;&#35760;&#24405;&#25968;&#21644;TB&#32423;&#30340;&#25991;&#26412;&#37327;&#65289;&#19978;&#30340;&#25628;&#32034;&#24212;&#29992;&#26469;&#35828;&#26159;&#24456;&#20851;&#38190;&#30340;&#12290;
</p><p>
&#20854;&#20851;&#38190;&#24605;&#24819;&#26159;&#23545;&#25968;&#25454;&#36827;&#34892;&#27700;&#24179;&#20998;&#21306;&#65288;HP&#65292;Horizontally partition&#65289;&#65292;&#28982;&#21518;&#24182;&#34892;&#22788;&#29702;&#12290;
</p><p>
&#20998;&#21306;&#19981;&#33021;&#33258;&#21160;&#23436;&#25104;&#65292;&#24744;&#38656;&#35201;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#22312;&#19981;&#21516;&#26381;&#21153;&#22120;&#19978;&#35774;&#32622;Sphinx&#31243;&#24207;&#38598;&#65288;<code class="filename">indexer</code>&#21644;<code class="filename">searchd</code>&#65289;&#30340;&#22810;&#20010;&#23454;&#20363;;</li>
<li class="listitem">&#35753;&#36825;&#20123;&#23454;&#20363;&#23545;&#25968;&#25454;&#30340;&#19981;&#21516;&#37096;&#20998;&#20570;&#32034;&#24341;&#65288;&#24182;&#26816;&#32034;&#65289;;</li>
<li class="listitem">&#22312;<code class="filename">searchd</code>&#30340;&#19968;&#20123;&#23454;&#20363;&#19978;&#37197;&#32622;&#19968;&#20010;&#29305;&#27530;&#30340;&#20998;&#24067;&#24335;&#32034;&#24341;;</li>
<li class="listitem">&#28982;&#21518;&#23545;&#36825;&#20010;&#32034;&#24341;&#36827;&#34892;&#26597;&#35810;.</li>
</ul></div>
<p>
&#36825;&#20010;&#29305;&#27530;&#32034;&#24341;&#21482;&#21253;&#25324;&#23545;&#20854;&#20182;&#26412;&#22320;&#25110;&#36828;&#31243;&#32034;&#24341;&#30340;&#24341;&#29992;&#65292;&#22240;&#27492;&#19981;&#33021;&#23545;&#23427;&#25191;&#34892;&#37325;&#26032;&#24314;&#31435;&#32034;&#24341;&#30340;&#25805;&#20316;&#65292;&#30456;&#21453;&#65292;&#22914;&#26524;&#35201;&#23545;&#36825;&#20010;&#29305;&#27530;&#32034;&#24341;&#36827;&#34892;&#37325;&#24314;&#65292;&#35201;&#37325;&#24314;&#30340;&#26159;&#37027;&#20123;&#34987;&#36825;&#20010;&#32034;&#24341;&#34987;&#24341;&#29992;&#21040;&#30340;&#32034;&#24341;&#12290;
</p><p>
&#24403;<code class="filename">searchd</code>&#25910;&#21040;&#19968;&#20010;&#23545;&#20998;&#24067;&#24335;&#32034;&#24341;&#30340;&#26597;&#35810;&#26102;&#65292;&#23427;&#20570;&#22914;&#19979;&#25805;&#20316;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">&#36830;&#25509;&#21040;&#36828;&#31243;&#20195;&#29702;;</li>
<li class="listitem">&#25191;&#34892;&#26597;&#35810;;</li>
<li class="listitem">&#65288;&#22312;&#36828;&#31243;&#20195;&#29702;&#25191;&#34892;&#25628;&#32034;&#30340;&#21516;&#26102;&#65289;&#23545;&#26412;&#22320;&#32034;&#24341;&#36827;&#34892;&#26597;&#35810;;</li>
<li class="listitem">&#25509;&#25910;&#26469;&#33258;&#36828;&#31243;&#20195;&#29702;&#30340;&#25628;&#32034;&#32467;&#26524;;</li>
<li class="listitem">&#23558;&#25152;&#26377;&#32467;&#26524;&#21512;&#24182;&#65292;&#21024;&#38500;&#37325;&#22797;&#39033;;</li>
<li class="listitem">&#23558;&#21512;&#24182;&#21518;&#30340;&#32467;&#26524;&#36820;&#22238;&#32473;&#23458;&#25143;&#31471;.</li>
</ol></div>
<p>
</p><p>
&#22312;&#24212;&#29992;&#31243;&#24207;&#30475;&#26469;&#65292;&#26222;&#36890;&#32034;&#24341;&#21644;&#20998;&#24067;&#24335;&#32034;&#24341;&#23436;&#20840;&#27809;&#26377;&#21306;&#21035;&#12290;
&#20063;&#23601;&#26159;&#35828;&#65292;&#20998;&#24067;&#24335;&#32034;&#24341;&#23545;&#24212;&#29992;&#31243;&#24207;&#32780;&#35328;&#26159;&#23436;&#20840;&#36879;&#26126;&#30340;&#65292;&#23454;&#38469;&#19978;&#20063;&#26080;&#38656;&#30693;&#36947;&#26597;&#35810;&#20351;&#29992;&#30340;&#32034;&#24341;&#26159;&#20998;&#24067;&#24335;&#30340;&#36824;&#26159;&#26412;&#22320;&#30340;&#12290;
(&#23601;&#31639;&#26159;&#22312;0.9.9&#20043;&#20013;&#65292; Sphinx&#20063;&#19981;&#25903;&#25345;&#20197;&#20854;&#20182;&#30340;&#26041;&#24335;&#26469;&#32467;&#21512;&#20998;&#24067;&#24335;&#32034;&#24341;&#36827;&#34892;&#25628;&#32034;,
&#20063;&#35768;&#22312;&#23558;&#26469;&#20250;&#21435;&#25481;&#35813;&#38480;&#21046;.)
</p><p>
&#20219;&#19968;&#20010;<code class="filename">searchd</code>&#23454;&#20363;&#21487;&#20197;&#21516;&#26102;&#20570;&#20026;&#20027;&#25511;&#31471;&#65288;master&#65292;&#23545;&#25628;&#32034;&#32467;&#26524;&#20570;&#32858;&#21512;&#65289;&#21644;&#20174;&#23646;&#31471;&#65288;&#21482;&#20570;&#26412;&#22320;&#25628;&#32034;&#65289;&#12290;&#36825;&#26377;&#22914;&#19979;&#20960;&#28857;&#22909;&#22788;&#65306;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">&#38598;&#32676;&#20013;&#30340;&#27599;&#21488;&#26426;&#22120;&#37117;&#21487;&#20197;&#20570;&#20026;&#20027;&#25511;&#31471;&#26469;&#25628;&#32034;&#25972;&#20010;&#38598;&#32676;&#65292;&#25628;&#32034;&#35831;&#27714;&#21487;&#20197;&#22312;&#20027;&#25511;&#31471;&#20043;&#38388;&#33719;&#24471;&#36127;&#36733;&#24179;&#34913;&#65292;&#30456;&#24403;&#20110;&#23454;&#29616;&#20102;&#19968;&#31181;HA&#65288;high availability&#65292;&#39640;&#21487;&#29992;&#24615;&#65289;&#65292;&#21487;&#20197;&#24212;&#23545;&#26576;&#20010;&#33410;&#28857;&#22833;&#25928;&#30340;&#24773;&#20917;&#12290;
</li>
<li class="listitem">
&#22914;&#26524;&#22312;&#21333;&#21488;&#22810;CPU&#25110;&#22810;&#26680;&#26426;&#22120;&#19978;&#20351;&#29992;&#65292;&#19968;&#20010;&#20570;&#20026;&#20195;&#29702;&#23545;&#26412;&#26426;&#36827;&#34892;&#25628;&#32034;&#30340;searchd&#23454;&#20363;&#23601;&#21487;&#20197;&#21033;&#29992;&#21040;&#20840;&#37096;&#30340;CPU&#25110;&#32773;&#26680;&#12290;
</li>
</ol></div>
<p>
</p><p>
&#22914;&#26524;&#22312;&#21333;&#21488;&#22810;CPU&#25110;&#22810;&#26680;&#26426;&#22120;&#19978;&#20351;&#29992;&#65292;&#19968;&#20010;&#20570;&#20026;&#20195;&#29702;&#23545;&#26412;&#26426;&#36827;&#34892;&#25628;&#32034;&#30340;searchd&#23454;&#20363;&#23601;&#21487;&#20197;&#21033;&#29992;&#21040;&#20840;&#37096;&#30340;CPU&#25110;&#32773;&#26680;&#12290;
</p></div>
<div class="sect1" title="5.9.&nbsp;&#25628;&#32034;&#26381;&#21153;(searchd) &#26597;&#35810;&#26085;&#24535;&#26684;&#24335;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="query-log-format"></a>5.9.&nbsp;&#25628;&#32034;&#26381;&#21153;(<code class="filename">searchd</code>) &#26597;&#35810;&#26085;&#24535;&#26684;&#24335;</h2></div></div></div>
<p>
&#22312;&#29256;&#26412;2.0.1-beta&#20013;&#25903;&#25345;&#19979;&#36848;&#30340;&#20004;&#31181;&#26597;&#35810;&#26085;&#24535;&#26684;&#24335;&#12290;&#20197;&#21069;&#30340;&#29256;&#26412;&#21482;&#25903;&#25345;&#33258;&#23450;&#20041;&#30340;&#32431;&#25991;&#26412;&#26684;&#24335;&#65292;&#30446;&#21069;&#20063;&#20173;&#28982;&#26159;&#40664;&#35748;&#30340;&#26085;&#24535;&#26684;&#24335;&#12290; &#28982;&#32780;&#65292;&#34429;&#28982;&#23427;&#21487;&#33021;&#20250;&#26041;&#20415;&#20154;&#24037;&#30417;&#27979;&#21644;&#23457;&#26597;&#65292;&#20294;&#38590;&#20197;&#22238;&#25918;&#20197;&#20415;&#20570;&#24615;&#33021;&#27979;&#35797;&#65292;&#23427;&#21482;&#33021;
&#35760;&#24405;<span class="emphasis"><em>&#25628;&#32034;</em></span>&#26597;&#35810;&#32780;&#19981;&#33021;&#35760;&#24405;&#25628;&#32034;&#35831;&#27714;&#30340;&#20854;&#20182;&#20449;&#24687;&#65292;&#20063;&#19981;&#24635;&#26159;&#21253;&#21547;&#23436;&#25972;&#30340;&#25628;&#32034;&#26597;&#35810;&#25968;&#25454;&#31561;&#12290;
&#40664;&#35748;&#32431;&#25991;&#26412;&#26684;&#24335;&#20063;&#24456;&#38590;&#65288;&#26377;&#26102;&#19981;&#21487;&#33021;&#65289;&#20026;&#24615;&#33021;&#27979;&#35797;&#30340;&#30446;&#30340;&#32780;&#22238;&#25918;&#12290;&#26032;&#30340;<code class="code"> sphinxql </code>
&#26684;&#24335;&#21017;&#32531;&#35299;&#20102;&#36825;&#20010;&#38382;&#39064;&#65292;&#20854;&#30446;&#30340;&#26159;&#23436;&#25972;&#21644;&#33258;&#21160;&#21270;&#30340;&#35760;&#24405;&#20449;&#24687;&#65292;&#21363;&#20351;&#38477;&#20302;&#20102;&#31616;&#27905;&#21644;&#21487;&#35835;&#24615;&#20063;&#26080;&#25152;&#35859;&#12290;
</p><div class="sect2" title="5.9.1.&nbsp;&#32431;&#25991;&#26412;&#26085;&#24535;&#26684;&#24335;"><div class="titlepage"><div><div><h3 class="title"><a name="plain-log-format"></a>5.9.1.&nbsp;&#32431;&#25991;&#26412;&#26085;&#24535;&#26684;&#24335;</h3></div></div></div>
<p>
&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;<code class="filename">searchd</code> &#23558;&#20840;&#37096;&#25104;&#21151;&#25191;&#34892;&#30340;&#25628;&#32034;&#26597;&#35810;&#37117;&#35760;&#24405;&#22312;&#26597;&#35810;&#26085;&#24535;&#25991;&#20214;&#20013;&#12290;&#20197;&#19979;&#26159;&#19968;&#20010;&#31867;&#20284;&#35760;&#24405;&#25991;&#20214;&#30340;&#20363;&#23376;&#65306;
</p><pre class="programlisting">
[Fri Jun 29 21:17:58 2007] 0.004 sec [all/0/rel 35254 (0,20)] [lj] test
[Fri Jun 29 21:20:34 2007] 0.024 sec [all/0/rel 19886 (0,20) @channel_id] [lj] test
</pre><p>
&#26085;&#24535;&#26684;&#24335;&#22914;&#19979;
</p><pre class="programlisting">
[query-date] query-time [match-mode/filters-count/sort-mode
    total-matches (offset,limit) @groupby-attr] [index-name] query
</pre><p>
&#21305;&#37197;&#27169;&#24335;&#65288;match-mode&#65289;&#21487;&#20197;&#26159;&#22914;&#19979;&#20540;&#20043;&#19968;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">"all" &#20195;&#34920; SPH_MATCH_ALL &#27169;&#24335;;</li>
<li class="listitem">"any" &#20195;&#34920; SPH_MATCH_ANY &#27169;&#24335;;</li>
<li class="listitem">"phr" &#20195;&#34920; SPH_MATCH_PHRASE &#27169;&#24335;;</li>
<li class="listitem">"bool" &#20195;&#34920; SPH_MATCH_BOOLEAN &#27169;&#24335;;</li>
<li class="listitem">"ext" &#20195;&#34920; SPH_MATCH_EXTENDED &#27169;&#24335;;</li>
<li class="listitem">"ext2" &#20195;&#34920; SPH_MATCH_EXTENDED2 &#27169;&#24335;;</li>
<li class="listitem">"scan" &#20195;&#34920;&#20351;&#29992;&#20102;&#23436;&#25972;&#25195;&#25551;&#27169;&#24335;&#65292;&#36825;&#21487;&#33021;&#26159;&#30001;&#20110;&#35774;&#32622;&#20102;SPH_MATCH_FULLSCAN&#27169;&#24335;&#23548;&#33268;&#30340;&#65292;&#20063;&#21487;&#33021;&#26159;&#22240;&#20026;&#26597;&#35810;&#26159;&#31354;&#30340;&#12290; (&#21442;&#35265;&#25991;&#26723; <a class="link" href="#matching-modes" title="5.1.&nbsp;&#21305;&#37197;&#27169;&#24335;">&#21305;&#37197;&#27169;&#24335;</a>)</li>
</ul></div>
<p>
&#25490;&#24207;&#27169;&#24335;&#65288;sort-mode&#65289;&#21487;&#20197;&#21462;&#22914;&#19979;&#20540;&#20043;&#19968;:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">"rel" &#20195;&#34920; SPH_SORT_RELEVANCE &#27169;&#24335;;</li>
<li class="listitem">"attr-" &#20195;&#34920; SPH_SORT_ATTR_DESC &#27169;&#24335;;</li>
<li class="listitem">"attr+" &#20195;&#34920; SPH_SORT_ATTR_ASC &#27169;&#24335;;</li>
<li class="listitem">"tsegs" &#20195;&#34920; SPH_SORT_TIME_SEGMENTS &#27169;&#24335;;</li>
<li class="listitem">"ext" &#20195;&#34920; SPH_SORT_EXTENDED &#27169;&#24335;.</li>
</ul></div>
<p>
</p><p>&#27492;&#22806;&#65292;&#22914;&#26524;<code class="filename">searchd</code> &#21551;&#21160;&#30340;&#26102;&#20505;&#24102;&#21442;&#25968; <code class="option">--iostats</code>&#65292;&#37027;&#20040;&#22312;&#21015;&#20986;&#34987;&#25628;&#32034;&#30340;&#20840;&#37096;&#32034;&#24341;&#21518;&#36824;&#20250;&#32473;&#20986;&#19968;&#22359;&#25968;&#25454;&#12290;</p><p>&#19968;&#20010;&#26597;&#35810;&#26085;&#24535;&#39033;&#30475;&#36215;&#26469;&#23601;&#20687;&#36825;&#26679;:</p><pre class="programlisting">
[Fri Jun 29 21:17:58 2007] 0.004 sec [all/0/rel 35254 (0,20)] [lj]
   [ios=6 kb=111.1 ms=0.5] test
</pre><p>
&#22810;&#20986;&#26469;&#30340;&#36825;&#22359;&#25968;&#25454;&#26159;&#20851;&#20110;&#25628;&#32034;&#20013;&#25191;&#34892;&#30340;I/O&#25805;&#20316;&#30340;&#20449;&#24687;&#65292;&#21253;&#25324;&#25191;&#34892;&#30340;I/O&#25805;&#20316;&#27425;&#25968;&#12289;&#20174;&#32034;&#24341;&#25991;&#20214;&#20013;&#35835;&#21462;&#25968;&#25454;&#30340;kb&#25968;&#21644;I/O&#25805;&#20316;&#21344;&#29992;&#30340;&#26102;&#38388;&#65288;&#23613;&#31649;&#36825;&#20010;&#26102;&#38388;&#36824;&#21253;&#25324;&#19968;&#20010;&#21518;&#21488;&#22788;&#29702;&#32452;&#20214;&#25152;&#21344;&#29992;&#30340;&#65292;&#20294;&#20027;&#35201;&#26159;I/O&#26102;&#38388;&#65289;
</p></div>
<div class="sect2" title="5.9.2.&nbsp;SphinxQL &#26085;&#24535;&#26684;&#24335;"><div class="titlepage"><div><div><h3 class="title"><a name="sphinxql-log-format"></a>5.9.2.&nbsp;SphinxQL &#26085;&#24535;&#26684;&#24335;</h3></div></div></div>
<p>
&#36825;&#26159;&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#30340;&#26032;&#30340;&#26085;&#24535;&#26684;&#24335;&#65292;&#20854;&#30446;&#26631;&#26159;&#24320;&#22987;&#20197;&#19968;&#31181;&#31616;&#21333;&#30340;&#26684;&#24335;&#21435;&#33258;&#21160;&#35760;&#24405;&#25152;&#26377;&#30340;&#19968;&#20999;&#65288;&#20363;&#22914;&#20026;&#20102;&#33258;&#21160;&#22238;&#25918;&#65289;&#12290;
&#26032;&#30340;&#26684;&#24335;&#21487;&#20197;&#36890;&#36807;&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;<a class="link" href="#conf-query-log-format" title="11.4.6.&nbsp;query_log_format&#65306;&#26597;&#35810;&#26085;&#24535;&#26684;&#24335;">query_log_format</a>&#25351;&#20196;&#26469;&#21551;&#29992;&#65292;
&#25110;&#32773;&#22312;&#35775;&#38382;&#36807;&#31243;&#20013;&#36890;&#36807;SphinxQL&#35821;&#21477;<a class="link" href="#sphinxql-set" title="7.7.&nbsp;SET&#65288;&#35774;&#32622;&#26381;&#21153;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;"><code class="code">SET GLOBAL query_log_format=...</code></a>
&#36827;&#34892;&#26469;&#22238;&#20999;&#25442;&#12290;&#22312;&#26032;&#30340;&#26684;&#24335;&#20013;&#65292;&#21069;&#38754;&#30340;&#20363;&#23376;&#23558;&#22914;&#19979;&#25152;&#31034;&#65306;&#65288;&#20026;&#20102;&#26041;&#20415;&#38405;&#35835;&#36827;&#34892;&#20102;&#25442;&#34892;&#65292;&#20294;&#26159;&#22312;&#23454;&#38469;&#30340;&#26085;&#24535;&#20013;&#27599;&#34892;&#19968;&#20010;&#26597;&#35810;&#65289;
</p><pre class="programlisting">
/* Fri Jun 29 21:17:58.609 2007 2011 conn 2 wall 0.004 found 35254 */
SELECT * FROM lj WHERE MATCH('test') OPTION ranker=proximity;

/* Fri Jun 29 21:20:34 2007.555 conn 3 wall 0.024 found 19886 */
SELECT * FROM lj WHERE MATCH('test') GROUP BY channel_id
OPTION ranker=proximity;
</pre><p>
&#35831;&#27880;&#24847;&#65292; <span class="bold"><strong>&#25152;&#26377;</strong></span>&#30340;&#35831;&#27714;&#37117;&#23558;&#20197;&#27492;&#26684;&#24335;&#35760;&#24405;&#65292;
&#21253;&#25324;&#37027;&#20123;&#36890;&#36807;SphinxAPI&#21644;SphinxSE&#21457;&#36865;&#30340;&#35831;&#27714;&#65292;&#32780;&#19981;&#21482;&#26159;&#37027;&#20123;&#36890;&#36807;SphinxQL &#21457;&#36865;&#30340;&#35831;&#27714;&#12290;
&#36824;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#36825;&#31181;&#26085;&#24535;&#35760;&#24405;&#26041;&#24335;&#20165;&#36866;&#21512;&#32431;&#25991;&#26412;&#26085;&#24535;&#26684;&#24335;&#65292;&#22914;&#26524;&#20351;&#29992;'syslog'&#35760;&#24405;&#21017;&#19981;&#20250;&#24037;&#20316;&#12290;
</p><p>
SphinxQL&#26085;&#24535;&#26684;&#24335;&#30456;&#23545;&#40664;&#35748;&#30340;&#32431;&#25991;&#26412;&#26085;&#24535;&#26684;&#24335;&#30340;&#29305;&#28857;&#22914;&#19979;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#25152;&#26377;&#31867;&#22411;&#30340;&#35831;&#27714;&#37117;&#20250;&#34987;&#35760;&#24405;&#12290; (&#35813;&#24037;&#20316;&#36824;&#22312;&#32487;&#32493;&#21644;&#23436;&#21892;.)</li>
<li class="listitem">&#20840;&#37096;&#25253;&#34920;&#25968;&#25454;&#23558;&#34987;&#23613;&#21487;&#33021;&#30340;&#35760;&#24405;&#12290;</li>
<li class="listitem">&#38169;&#35823;&#21644;&#25552;&#37266;&#20063;&#20250;&#34987;&#35760;&#24405;&#12290;</li>
<li class="listitem">&#35813;&#26085;&#24535;&#21487;&#20197;&#36890;&#36807;SphinxQL&#33258;&#21160;&#22238;&#25918;&#12290;</li>
<li class="listitem">&#39069;&#22806;&#30340;&#24615;&#33021;&#35745;&#25968;&#22120;&#65288;&#30446;&#21069;&#65292;&#35760;&#24405;&#20102;&#27599;&#20010;Agent&#30340;&#20998;&#24067;&#24335;&#26597;&#35810;&#26102;&#38388;&#65289;&#34987;&#35760;&#24405;&#12290;</li>
</ul></div>
<p>

</p><p>
&#27599;&#20010;&#35831;&#27714;&#65288;&#21253;&#25324;SphinxAPI&#21644;SphinxQL &#65289;&#37117;&#27491;&#22909;&#23545;&#24212;&#19968;&#20010;&#26085;&#24535;&#35760;&#24405;&#34892;&#12290;
&#25152;&#26377;&#30340;&#35831;&#27714;&#31867;&#22411;&#65292;&#21253;&#25324;INSERT, CALL SNIPPETS&#31561;&#65292;&#37117;&#20250;&#34987;&#35760;&#24405;&#65288;&#20294;
&#32534;&#20889;&#26412;&#25163;&#20876;&#26102;&#65292;&#36825;&#26041;&#38754;&#30340;&#24037;&#20316;&#36824;&#22312;&#32487;&#32493;&#21644;&#23436;&#21892;&#65289;&#12290; 
&#27599;&#20010;&#35760;&#24405;&#34892;&#37117;&#26159;&#26377;&#25928;&#30340;SphinxQL&#35821;&#21477;&#65292;&#21487;&#20197;&#29992;&#20110;&#23436;&#25972;&#30340;&#37325;&#26500;&#35831;&#27714;&#65292;&#20294;&#26159;&#35831;&#27714;&#35760;&#24405;&#22914;&#26524;&#22826;&#22823;&#21017;&#38656;&#35201;&#32771;&#34385;&#24615;&#33021;&#21407;&#22240;&#32780;&#32553;&#30701;&#12290;
&#20854;&#20182;&#20449;&#24687;&#65292;&#20363;&#22914;&#24615;&#33021;&#35745;&#25968;&#22120;&#31561;&#20250;&#34987;&#20316;&#20026;&#27880;&#37322;&#35760;&#24405;&#22312;&#35831;&#27714;&#21518;&#12290;
</p></div></div>
<div class="sect1" title="5.10.&nbsp;MySQL &#21327;&#35758;&#25903;&#25345;&#19982; SphinxQL"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql"></a>5.10.&nbsp;MySQL &#21327;&#35758;&#25903;&#25345;&#19982; SphinxQL</h2></div></div></div>
<p>
Sphinx&#30340;searchd&#23432;&#25252;&#31243;&#24207;&#20174; &#29256;&#26412;0.9.9-rc2&#24320;&#22987;&#25903;&#25345;MySQL&#20108;&#36827;&#21046;&#32593;&#32476;&#21327;&#35758;&#65292;&#24182;&#19988;&#33021;&#22815;&#36890;&#36807;&#26631;&#20934;&#30340;MySQL API&#35775;&#38382;&#12290;&#20363;&#22914;&#65292;&#8220;mysql&#8221;&#21629;&#20196;&#34892;&#31243;&#24207;&#21487;&#20197;&#24456;&#22909;&#22320;&#24037;&#20316;&#12290;&#20197;&#19979;&#26159;&#29992;MySQL&#23458;&#25143;&#31471;&#23545;Sphinx&#36827;&#34892;&#26597;&#35810;&#30340;&#20363;&#23376;&#65306;
</p><pre class="programlisting">
$ mysql -P 9306
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1
Server version: 0.9.9-dev (r1734)

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; SELECT * FROM test1 WHERE MATCH('test') 
    -&gt; ORDER BY group_id ASC OPTION ranker=bm25;
+------+--------+----------+------------+
| id   | weight | group_id | date_added |
+------+--------+----------+------------+
|    4 |   1442 |        2 | 1231721236 |
|    2 |   2421 |      123 | 1231721236 |
|    1 |   2421 |      456 | 1231721236 |
+------+--------+----------+------------+
3 rows in set (0.00 sec)
</pre><p>
</p><p>
&#35831;&#27880;&#24847;mysqld&#29978;&#33267;&#26681;&#26412;&#27809;&#26377;&#22312;&#27979;&#35797;&#26426;&#19978;&#36816;&#34892;&#12290;&#25152;&#26377;&#20107;&#24773;&#37117;&#26159;searchd&#33258;&#24049;&#25630;&#23450;&#30340;&#12290;
</p><p>
&#26032;&#30340;&#35775;&#38382;&#26041;&#27861;&#26159;&#23545;&#21407;&#29983;API&#30340;&#19968;&#31181;<span class="emphasis"><em>&#34917;&#20805;</em></span>&#65292;&#21407;&#29983;API&#20173;&#28982;&#23436;&#32654;&#21487;&#29992;&#12290;&#20107;&#23454;&#19978;&#65292;&#20004;&#31181;&#35775;&#38382;&#26041;&#27861;&#21487;&#20197;&#21516;&#26102;&#20351;&#29992;&#12290;&#21478;&#22806;&#65292;&#21407;&#29983;API&#20173;&#26087;&#26159;&#40664;&#35748;&#30340;&#35775;&#38382;&#26041;&#27861;&#12290;MySQL&#21327;&#35758;&#25903;&#25345;&#38656;&#35201;&#32463;&#36807;&#39069;&#22806;&#30340;&#37197;&#32622;&#25165;&#33021;&#21551;&#29992;&#12290;&#24403;&#28982;&#36825;&#21482;&#38656;&#35201;&#26356;&#21160;&#19968;&#34892;&#37197;&#32622;&#25991;&#20214;&#65292;&#21152;&#20837;&#19968;&#20010;&#21327;&#35758;&#20026;mysql41&#30340;&#30417;&#21548;&#22120;&#65288;<a class="link" href="#conf-listen" title="11.4.1.&nbsp;listen&#65306;&#30417;&#21548;&#35774;&#32622;">listener</a>&#65289;&#23601;&#21487;&#20197;&#20102;&#65306;
</p><pre class="programlisting">
listen = localhost:9306:mysql41
</pre><p>
</p><p>
&#22914;&#26524;&#20165;&#20165;&#25903;&#25345;&#36825;&#20010;&#21327;&#35758;&#20294;&#19981;&#25903;&#25345;SQL&#35821;&#27861;&#65292;&#37027;&#27809;&#20160;&#20040;&#23454;&#38469;&#24847;&#20041;&#12290;&#22240;&#27492;Sphinx&#29616;&#22312;&#36824;&#25903;&#25345;SQL&#30340;&#19968;&#20010;&#24456;&#23567;&#30340;&#23376;&#38598;&#65292;&#25105;&#20204;&#32473;&#36825;&#20010;&#23376;&#38598;&#36215;&#20010;&#32496;&#21495;&#65292;&#21483;SphinxQL&#12290;&#23427;&#25903;&#25345;&#22312;&#25152;&#26377;&#31867;&#22411;&#30340;&#32034;&#24341;&#19978;&#36827;&#34892;&#26631;&#20934;SELECT&#26597;&#35810;&#65292;&#25903;&#25345;&#22312;RT&#32034;&#24341;&#19978;&#20351;&#29992;INSERT&#12289;REPLACE&#12289;DELETE&#26469;&#26356;&#25913;&#20449;&#24687;&#65292;&#20197;&#21450;&#26356;&#22810;&#30340;&#22788;&#29702;&#12290;
&#35814;&#32454;&#30340;SphinQL&#25351;&#21335;&#35831;&#26597;&#30475; <a class="xref" href="#sphinxql-reference" title="&#31532;&nbsp;7&nbsp;&#31456;&nbsp;SphinxQL &#25351;&#21335;">&#31532;&nbsp;7&nbsp;&#31456; <i>SphinxQL &#25351;&#21335;</i></a>.
</p></div>
<div class="sect1" title="5.11.&nbsp;&#25209;&#37327;&#26597;&#35810;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="multi-queries"></a>5.11.&nbsp;&#25209;&#37327;&#26597;&#35810;</h2></div></div></div>
<p>
&#22810;&#26597;&#35810;&#65292;&#25110;&#32773;&#25209;&#37327;&#26597;&#35810;&#65292;&#29992;&#20110;&#19968;&#27425;&#21457;&#36865;&#22810;&#26465;&#26597;&#35810;&#21040;Sphinx&#65288;&#26356;&#19987;&#19994;&#30340;&#35828;&#27861;&#26159;&#20877;&#19968;&#27425;&#32593;&#32476;&#35831;&#27714;&#20013;&#65289;&#12290;
</p><p>
&#30446;&#21069;&#26377;&#20004;&#20010;&#26041;&#27861;&#26469;&#23454;&#29616;&#25209;&#37327;&#26597;&#35810;&#65292;&#20182;&#20204;&#26159;
<a class="link" href="#api-func-addquery" title="8.6.2.&nbsp;AddQuery &#65288;&#22686;&#21152;&#25209;&#37327;&#26597;&#35810;&#65289;">AddQuery()</a> &#21644;
<a class="link" href="#api-func-runqueries" title="8.6.3.&nbsp;RunQueries &#65288;&#25191;&#34892;&#25209;&#37327;&#26597;&#35810;&#65289;">RunQueries()</a>&#12290;
&#20320;&#20063;&#21487;&#20197;&#36890;&#36807;SphinxQL&#26469;&#25191;&#34892;&#25209;&#37327;&#26597;&#35810;&#65292;&#21442;&#35265;
<a class="xref" href="#sphinxql-multi-queries" title="7.18.&nbsp;&#22810;&#32467;&#26524;&#38598;&#26597;&#35810;&#65288;&#25209;&#37327;&#26597;&#35810;&#65289;">&#31532;&nbsp;7.18&nbsp;&#33410; &#8220;&#22810;&#32467;&#26524;&#38598;&#26597;&#35810;&#65288;&#25209;&#37327;&#26597;&#35810;&#65289;&#8221;</a>.
(&#20107;&#23454;&#19978;&#65292;&#24120;&#35268;&#30340; <a class="link" href="#api-func-addquery" title="8.6.2.&nbsp;AddQuery &#65288;&#22686;&#21152;&#25209;&#37327;&#26597;&#35810;&#65289;">Query()</a>
&#35843;&#29992;&#22312;&#20869;&#37096;&#23454;&#29616;&#19978;&#26159;&#19968;&#27425;&#21333;&#29420;&#30340;AddQuery()&#35843;&#29992;&#32039;&#36319;RunQueries()&#35843;&#29992;&#12290;) 
AddQuery()&#20250;&#20445;&#25345;&#21069;&#38754;&#30340;API&#35843;&#29992;&#23545;&#26597;&#35810;&#35774;&#32622;&#30340;&#24403;&#21069;&#29366;&#24577;&#65292;&#24182;&#19988;&#35760;&#20303;&#36825;&#20123;&#26597;&#35810;&#12290;RunQueries()&#23454;&#38469;&#19978;&#21457;&#36865;&#25152;&#26377;&#35760;&#20303;&#30340;&#26597;&#35810;&#65292;&#24182;&#20381;&#27425;&#36820;&#22238;&#22810;&#20010;&#32467;&#26524;&#38598;&#12290;
&#23545;&#20110;&#26597;&#35810;&#26412;&#36523;&#27809;&#26377;&#20219;&#20309;&#38480;&#21046;&#65292;&#20294;&#22312;&#19968;&#27425;&#25209;&#37327;&#26597;&#35810;&#20013;&#20250;&#36827;&#34892;&#26597;&#35810;&#25968;&#30446;&#30340;&#23436;&#25104;&#26816;&#26597; (&#21442;&#35265; <a class="xref" href="#conf-max-batch-queries" title="11.4.25.&nbsp;max_batch_queries&#65306;&#26368;&#22823;&#25209;&#37327;&#26597;&#35810;">&#31532;&nbsp;11.4.25&nbsp;&#33410; &#8220;max_batch_queries&#65306;&#26368;&#22823;&#25209;&#37327;&#26597;&#35810;&#8221;</a>).
</p><p>
&#20026;&#20160;&#20040;&#35201;&#20351;&#29992;&#25209;&#37327;&#26597;&#35810;&#21602;&#65311; &#36890;&#24120;&#26159;&#26159;&#20026;&#20102;&#25552;&#21319;&#24615;&#33021;&#12290;
&#39318;&#20808;&#65292;&#22312;&#19968;&#27425;&#25209;&#37327;&#26597;&#35810;&#20013;&#23558;&#22810;&#20010;&#35831;&#27714;&#19968;&#27425;&#21457;&#36865;&#21040;<code class="filename">searchd </code>
&#32780;&#19981;&#26159;&#30001;&#19968;&#20010;&#25509;&#19968;&#20010;&#30340;&#21457;&#36865;&#65292;&#25110;&#22810;&#25110;&#23569;&#20250;&#20943;&#23569;&#32593;&#32476;&#36890;&#20449;&#12290; &#20854;&#27425;&#65292;&#26356;&#37325;&#35201;&#30340;&#26159;&#65292;&#22312;&#25209;&#37327;&#26597;&#35810;&#20013;&#21457;&#36865;&#22810;&#26465;&#26597;&#35810;&#26102;&#65292;<code class="filename">searchd</code>&#20250;&#25191;&#34892;&#26576;&#20123;&#20869;&#37096;&#20248;&#21270;&#12290;&#38543;&#30528;&#26102;&#38388;&#30340;&#25512;&#31227;&#36880;&#28176;&#22686;&#21152;&#20102;&#26032;&#30340;&#20248;&#21270;&#25514;&#26045;&#65292;&#22312;&#21487;&#33021;&#30340;&#24773;&#20917;&#19979;&#23558;&#25152;&#26377;&#30340;&#26597;&#35810;&#25171;&#21253;&#20026;&#25209;&#37327;&#26597;&#35810;&#26159;&#26377;&#24847;&#20041;&#30340;&#65292;&#22240;&#27492;&#31616;&#21333;&#22320;&#21319;&#32423;Sphinx&#21040;&#19968;&#20010;&#26032;&#30340;&#29256;&#26412;&#23558;&#33258;&#21160;&#21551;&#29992;&#26032;&#30340;&#20248;&#21270;&#25514;&#26045;&#12290;
&#22312;&#22788;&#29702;&#26102;&#22914;&#26524;&#27809;&#26377;&#20219;&#20309;&#21487;&#33021;&#30340;&#25209;&#37327;&#26597;&#35810;&#20248;&#21270;&#21487;&#24212;&#29992;&#65292;&#26597;&#35810;&#22312;&#20869;&#37096;&#23558;&#34987;&#19968;&#20010;&#25509;&#19968;&#20010;&#30340;&#22788;&#29702;&#12290;
</p><p>
&#20026;&#20160;&#20040;&#65288;&#25110;&#32773;&#35828;&#20160;&#20040;&#26102;&#20505;&#65289;&#19981;&#20351;&#29992;&#25209;&#37327;&#26597;&#35810;&#21602;&#65311;
&#25209;&#37327;&#26597;&#35810;&#35201;&#27714;&#19968;&#27425;&#22788;&#29702;&#20013;&#30340;&#26597;&#35810;&#37117;&#26159;&#30456;&#20114;&#29420;&#31435;&#30340;&#65292;&#20294;&#26159;&#26377;&#26102;&#20505;&#24182;&#38750;&#22914;&#27492;&#12290;
&#20063;&#23601;&#26159;&#35828;&#65292;&#26377;&#26102;&#20505;&#26597;&#35810;B&#26159;&#22522;&#20110;&#26597;&#35810;A&#30340;&#32467;&#26524;&#30340;&#65292;&#21482;&#33021;&#22312;&#26597;&#35810;A&#36816;&#34892;&#23436;&#25104;&#20197;&#21518;&#25165;&#33021;&#29983;&#25104;&#26032;&#30340;&#26597;&#35810;&#12290;&#20363;&#22914;&#65292;&#20320;&#21487;&#33021;&#38656;&#35201;&#22312;&#20027;&#32034;&#24341;&#26597;&#19981;&#21040;&#20219;&#20309;&#32467;&#26524;&#30340;&#26102;&#20505;&#65292;&#20877;&#20174;&#31532;&#20108;&#20010;&#32034;&#24341;&#26597;&#35810;&#26174;&#31034;&#32467;&#26524;&#12290;&#25110;&#32773;&#65292;&#26377;&#26102;&#20505;&#38656;&#35201;&#26681;&#25454;&#31532;&#19968;&#27425;&#26597;&#35810;&#30340;&#32467;&#26524;&#25968;&#21435;&#25351;&#23450;&#31532;&#20108;&#27425;&#26597;&#35810;&#30340;&#32467;&#26524;&#20559;&#31227;&#37327;&#12290;&#35832;&#22914;&#27492;&#31867;&#24773;&#20917;&#19979;&#65292;&#20320;&#19981;&#24471;&#19981;&#20351;&#29992;&#22810;&#27425;&#20998;&#24320;&#30340;&#26597;&#35810;&#65288;&#25110;&#32773;&#22810;&#27425;&#20998;&#24320;&#30340;&#25209;&#37327;&#26597;&#35810;&#65289;&#12290;
</p><p>
&#25130;&#27490;&#29256;&#26412;0.9.10&#65292;&#26377;&#20004;&#20010;&#20027;&#35201;&#30340;&#20248;&#21270;&#25514;&#26045;&#38656;&#35201;&#27880;&#24847;&#65306;
&#20844;&#20849;&#26597;&#35810;&#20248;&#21270;&#65288;&#20174;&#29256;&#26412;0.9.8&#24320;&#22987;&#25552;&#20379;&#65289;&#65307;&#20844;&#20849;&#23376;&#26641;&#20248;&#21270;&#65288;&#20174;&#29256;&#26412;0.9.10&#24320;&#22987;&#25552;&#20379;&#65289;&#12290;
</p><p>
<span class="bold"><strong>&#20844;&#20849;&#26597;&#35810;&#20248;&#21270;</strong></span> &#26159;&#25351; <code class="filename">searchd</code>&#21457;&#29616;&#25209;&#37327;&#26597;&#35810;&#20013;&#30340;&#26597;&#35810;&#20165;&#25490;&#24207;&#21644;&#20998;&#32452;&#35774;&#32622;&#19981;&#21516;&#26102;&#65292;&#23558;<span class="emphasis"><em>&#21482;&#25191;&#34892;&#19968;&#27425;&#25628;&#32034;</em></span>&#12290;
&#20363;&#22914;&#65292;&#22914;&#26524;&#19968;&#27425;&#25209;&#37327;&#26597;&#35810;&#21253;&#21547;&#19977;&#20010;&#26597;&#35810;&#65292;&#26597;&#35810;&#20851;&#38190;&#23383;&#20840;&#37096;&#37117;&#26159;&#8220;ipod nano&#8221;&#65292;&#20294;&#26159;&#31532;&#19968;&#20010;&#26597;&#35810;&#21462;&#25353;&#29031;&#20215;&#26684;&#25490;&#24207;&#21069;&#21313;&#30340;&#32467;&#26524;&#65292;&#31532;&#20108;&#20010;&#26597;&#35810;&#25353;&#29031;&#20379;&#24212;&#21830;&#20998;&#32452;&#24182;&#21462;&#35780;&#20998;&#26368;&#39640;&#30340;&#21069;&#20116;&#20010;&#20379;&#36135;&#21830;&#65292;&#32780;&#31532;&#19977;&#20010;&#26597;&#35810;&#21462;&#26368;&#39640;&#20215;&#26684;&#30340;&#65292;&#21017;&#38024;&#23545;"ipod nano"&#30340;&#20840;&#25991;&#26597;&#35810;&#20165;&#25191;&#34892;&#19968;&#27425;&#65292;&#20294;&#20854;&#32467;&#26524;&#20250;&#37325;&#22797;&#20351;&#29992;&#26469;&#24314;&#31435;&#19977;&#20010;&#19981;&#21516;&#30340;&#32467;&#26524;&#38598;&#12290;
</p><p>
&#20174;&#36825;&#20010;&#20248;&#21270;&#25514;&#26045;&#24471;&#21040;&#22909;&#22788;&#30340;&#19968;&#20010;&#20856;&#22411;&#30340;&#26696;&#20363;&#23601;&#26159;&#25152;&#35859;&#30340;<span class="bold"><strong>faceted&#20998;&#38754;&#25628;&#32034;</strong></span>&#12290;&#20107;&#23454;&#19978;&#65292;&#20998;&#38754;&#25628;&#32034;&#21487;&#20197;&#36890;&#36807;&#25191;&#34892;&#19968;&#23450;&#25968;&#37327;&#30340;&#26597;&#35810;&#65292;&#19968;&#26469;&#33719;&#21462;&#25628;&#32034;&#32467;&#26524;&#26412;&#36523;&#65292;&#21516;&#26102;&#36827;&#34892;&#30456;&#21516;&#20840;&#25991;&#20851;&#38190;&#23383;&#30340;&#19968;&#20123;&#20854;&#20182;&#26597;&#35810;&#65292;&#22914;&#26681;&#25454;&#19981;&#21516;&#30340;&#20998;&#32452;&#35774;&#32622;&#25152;&#26377;&#24517;&#35201;&#30340;&#20998;&#32452;&#32467;&#26524;&#65288;&#21069;&#19977;&#20316;&#32773;&#65292;&#21069;&#20116;&#20379;&#36135;&#21830;&#31561;&#31561;&#65289;&#12290;&#32780;&#36825;&#20123;&#21482;&#38656;&#35201;&#20445;&#25345;&#20840;&#25991;&#26816;&#32034;&#21644;&#36807;&#28388;&#35774;&#32622;&#30456;&#21516;&#65292;&#20844;&#20849;&#26597;&#35810;&#20248;&#21270;&#23558;&#20250;&#35302;&#21457;&#24182;&#22823;&#24133;&#25552;&#39640;&#26597;&#35810;&#24615;&#33021;&#12290;
</p><p>
<span class="bold"><strong>&#20844;&#20849;&#23376;&#26641;&#20248;&#21270;</strong></span> &#26356;&#21152;&#26377;&#36259;&#12290;
&#23427;&#33021;&#35753; <code class="filename">searchd</code> &#20998;&#26512;&#21033;&#29992;&#25209;&#37327;&#20840;&#25991;&#26597;&#35810;&#20013;&#30340;&#30456;&#20284;&#20043;&#22788;&#12290;&#23427;&#21487;&#20197;&#35782;&#21035;&#25152;&#26377;&#26597;&#35810;&#20013;&#30340;&#20844;&#20849;&#20840;&#25991;&#26597;&#35810;&#37096;&#20998;&#65288;&#23376;&#26641;&#65289;&#65292;&#24182;&#19988;&#22312;&#26597;&#35810;&#20013;&#32531;&#23384;&#20854;&#32467;&#26524;&#12290;&#20363;&#22914;&#65292;&#25105;&#20204;&#21487;&#20197;&#30475;&#19979;&#38754;&#30340;&#25209;&#37327;&#26597;&#35810;&#65306;
</p><pre class="programlisting">
barack obama president
barack obama john mccain
barack obama speech
</pre><p>
&#20182;&#20204;&#26377;&#19968;&#20010;&#20849;&#21516;&#30340;&#37096;&#20998;&#26159;&#20004;&#20010;&#21333;&#35789;("barack obama")&#65292;&#36825;&#23558;&#34987;&#35745;&#31639;&#19968;&#27425;&#65292;&#28982;&#21518;&#32531;&#23384;&#24182;&#22312;&#26597;&#35810;&#20043;&#38388;&#20849;&#20139;&#12290;&#36825;&#20010;&#24037;&#20316;&#23601;&#26159;&#20844;&#20849;&#23376;&#26641;&#20248;&#21270;&#26469;&#20570;&#30340;&#12290;&#27599;&#20010;&#26597;&#35810;&#30340;&#32531;&#23384;&#22823;&#23567;&#30001;<a class="link" href="#conf-subtree-docs-cache" title="11.4.26.&nbsp;subtree_docs_cache&#65306;&#23376;&#26641;&#20248;&#21270;&#25991;&#26723;&#32531;&#23384;">subtree_docs_cache</a>
&#21644; <a class="link" href="#conf-subtree-hits-cache" title="11.4.27.&nbsp;subtree_hits_cache&#65306;&#23376;&#26641;&#20248;&#21270;&#21629;&#20013;&#32531;&#23384;">subtree_hits_cache</a>&#25351;&#20196;&#20005;&#26684;&#25511;&#21046;&#65288;&#20351;&#24471;&#21363;&#20351;&#32531;&#23384;&#21305;&#37197;&#20102;&#8220;i am&#8221;&#30340;&#36229;&#22810;&#25991;&#26723;&#20063;&#19981;&#20250;&#32791;&#23613;&#20869;&#23384;&#21644;&#23548;&#33268;&#26381;&#21153;&#26381;&#21153;&#22120;&#25346;&#25481;&#65289;
</p><p>
&#19979;&#38754;&#28436;&#31034;&#30340;&#20195;&#30721;&#65288;&#20351;&#29992;PHP &#65289;&#23637;&#31034;&#20102;&#22312;&#21516;&#19968;&#26597;&#35810;&#20013;&#20351;&#29992;3&#31181;&#19981;&#21516;
&#25490;&#24207;&#26041;&#24335;&#65306;
</p><pre class="programlisting">
require ( "sphinxapi.php" );
$cl = new SphinxClient ();
$cl-&gt;SetMatchMode ( SPH_MATCH_EXTENDED2 );

$cl-&gt;SetSortMode ( SPH_SORT_RELEVANCE );
$cl-&gt;AddQuery ( "the", "lj" );
$cl-&gt;SetSortMode ( SPH_SORT_EXTENDED, "published desc" );
$cl-&gt;AddQuery ( "the", "lj" );
$cl-&gt;SetSortMode ( SPH_SORT_EXTENDED, "published asc" );
$cl-&gt;AddQuery ( "the", "lj" );
$res = $cl-&gt;RunQueries();
</pre><p>
</p><p>
&#22914;&#20309;&#30830;&#35748;&#25209;&#37327;&#26597;&#35810;&#30340;&#35831;&#27714;&#30495;&#30340;&#34987;&#20248;&#21270;&#20102;&#21602;&#65311;
&#22914;&#26524;&#20248;&#21270;&#36807;&#65292;&#22312;&#20182;&#20204;&#21508;&#33258;&#30340;&#26597;&#35810;&#26085;&#24535;&#23558;&#26377;&#19968;&#20010;&#8220;&#20493;&#25968;&#8220;&#21306;&#27573;
&#29305;&#21035;&#20043;&#22788;&#26377;&#22810;&#23569;&#20010;&#26597;&#35810;&#26159;&#19968;&#36215;&#22788;&#29702;&#30340;&#65306;
</p><pre class="programlisting">
[Sun Jul 12 15:18:17.000 2009] 0.040 sec x3 [ext2/0/rel 747541 (0,20)] [lj] the
[Sun Jul 12 15:18:17.000 2009] 0.040 sec x3 [ext2/0/ext 747541 (0,20)] [lj] the
[Sun Jul 12 15:18:17.000 2009] 0.040 sec x3 [ext2/0/ext 747541 (0,20)] [lj] the
</pre><p>
&#35831;&#27880;&#24847; "x3" &#21306;&#27573;. &#36825;&#24847;&#21619;&#30528;&#35813;&#26597;&#35810;&#26159;&#20248;&#21270;&#30340;&#24182;&#19988;&#22312;&#21516;&#19968;&#25209;&#27425;&#20013;&#22788;&#29702;&#20102;3&#20010;&#26597;&#35810;&#12290;&#20316;&#20026;&#21442;&#32771;&#65292;&#27809;&#26377;&#36827;&#34892;&#25209;&#37327;&#26597;&#35810;&#22788;&#29702;&#30340;&#22810;&#27425;&#26597;&#35810;&#30340;&#36890;&#24120;&#26085;&#24535;&#20250;&#26159;&#19979;&#38754;&#36825;&#26679;&#65306;
</p><pre class="programlisting">
[Sun Jul 12 15:18:17.062 2009] 0.059 sec [ext2/0/rel 747541 (0,20)] [lj] the
[Sun Jul 12 15:18:17.156 2009] 0.091 sec [ext2/0/ext 747541 (0,20)] [lj] the
[Sun Jul 12 15:18:17.250 2009] 0.092 sec [ext2/0/ext 747541 (0,20)] [lj] the
</pre><p>
&#35831;&#27880;&#24847;&#27599;&#20010;&#26597;&#35810;&#22810;&#26102;&#38388;&#26597;&#35810;&#26696;&#20214;&#26159;&#30001;&#19968;&#20010;&#22240;&#32032;&#25913;&#21892;
&#30340;1.5&#20493;&#33267;2.3&#20493;&#65292;&#36825;&#21462;&#20915;&#20110;&#22312;&#29305;&#23450;&#30340;&#25490;&#24207;&#27169;&#24335;&#12290; &#20854;&#23454;&#22312;&#36825;&#20004;&#26041;&#38754;&#65292;
&#24120;&#35265;&#30340;&#26597;&#35810;&#20248;&#21270;&#21644;&#20849;&#21516;&#23376;&#26641;&#65292;&#36824;&#26377;&#30340;&#25253;&#21578;&#21644;3&#20493;
&#29978;&#33267;&#26356;&#22810;&#30340;&#25913;&#36827;&#65292;&#32780;&#19988;&#20174;&#29983;&#20135;&#24773;&#20917;&#30340;&#65292;&#32780;&#19981;&#20165;&#20165;&#26159;
&#32508;&#21512;&#27979;&#35797;&#12290;
&#20540;&#24471;&#25552;&#37266;&#30340;&#26159;&#25209;&#37327;&#26597;&#35810;&#26041;&#24335;&#20013;&#27599;&#20010;&#26597;&#35810;&#30340;&#26102;&#38388;&#20250;&#25913;&#21892;1.5&#20493;&#21040;2.3&#20493;&#65292;&#20855;&#20307;&#22914;&#20309;&#21462;&#20915;&#20110;&#29305;&#23450;&#30340;&#25490;&#24207;&#27169;&#24335;&#12290;&#20854;&#23454;&#65292;&#19981;&#20165;&#22312;&#32508;&#21512;&#27979;&#35797;&#20013;&#65292;&#20844;&#20849;&#26597;&#35810;&#20248;&#21270;&#21644;&#20844;&#20849;&#23376;&#26641;&#20248;&#21270;&#37117;&#20250;&#25552;&#21319;3&#20493;&#25110;&#32773;&#26356;&#22810;&#30340;&#25913;&#21892;&#65292;&#22312;&#23454;&#38469;&#29983;&#20135;&#36816;&#33829;&#29615;&#22659;&#20013;&#20063;&#26159;&#22914;&#27492;&#12290;
</p></div>
<div class="sect1" title="5.12.&nbsp;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collations"></a>5.12.&nbsp;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;</h2></div></div></div>
<p>
Sphinx&#20174;&#29256;&#26412;2.0.1-beta&#24320;&#22987;&#25903;&#25345;&#23383;&#31526;&#20018;&#25490;&#24207;&#65292;&#32780;&#25490;&#24207;&#35268;&#21017;&#21183;&#24517;&#20250;&#24433;&#21709;&#23383;&#31526;&#20018;&#23646;&#24615;&#30340;&#27604;&#36739;&#12290;Sphinx&#22312;&#36827;&#34892;&#23383;&#31526;&#20018;&#23646;&#24615;&#30340;ORDER BY&#25110;&#32773;GROUP BY&#25805;&#20316;&#26102;&#25152;&#36827;&#34892;&#30340;&#23383;&#31526;&#20018;&#27604;&#36739;&#65292;&#19982;&#23383;&#31526;&#38598;&#30340;&#32534;&#30721;&#35774;&#23450;&#21644;&#31574;&#30053;&#26377;&#20851;&#12290;
</p><p>
&#22312;&#32034;&#24341;&#26102;&#65292;&#23383;&#31526;&#20018;&#23646;&#24615;&#20165;&#20165;&#26159;&#23384;&#20648;&#36215;&#26469;&#65292;&#27809;&#26377;&#23383;&#31526;&#38598;
&#25110;&#35821;&#35328;&#20449;&#24687;&#38468;&#21152;&#32473;&#20182;&#20204;&#12290; &#36825;&#27809;&#20851;&#31995;&#65292;Sphinx
&#21482;&#38656;&#35201;&#23384;&#20648;&#24182;&#36880;&#23383;&#36820;&#22238;&#23383;&#31526;&#20018;&#32473;&#35843;&#29992;&#30340;&#24212;&#29992;&#31243;&#24207;&#12290;
&#20294;&#26159;&#22914;&#26524;&#20320;&#35753;Sphinx&#36827;&#34892;&#23383;&#31526;&#20018;&#20540;&#25490;&#24207;&#65292;&#36825;&#20010;&#35831;&#27714;&#23601;&#20250;&#20135;&#29983;&#27495;&#20041;&#12290;
</p><p>
&#39318;&#20808;&#65292;&#21333;&#23383;&#33410;&#65288;ASCII&#30721;&#25110;ISO - 8859 - 1&#25110;Windows - 1251 &#65289;&#23383;&#31526;&#20018;
&#22788;&#29702;&#19981;&#21516;&#20110;UTF - 8&#32534;&#30721;&#30340;&#23383;&#31526;&#20018;&#65288;&#21487;&#33021;
&#27599;&#19968;&#20010;&#23383;&#31526;&#21253;&#21547;&#21487;&#21464;&#25968;&#30446;&#30340;&#23383;&#33410;&#65289;&#12290; &#22240;&#27492;&#65292;&#25105;&#20204;&#38656;&#35201;&#30693;&#36947;&#23383;&#31526;&#38598;&#30340;&#31867;&#22411;&#65292;&#20197;&#20415;&#33021;&#22815;&#27491;&#30830;&#22320;&#35299;&#26512;&#27599;&#20010;&#21407;&#22987;&#23383;&#33410;&#20026;&#26377;&#24847;&#20041;&#30340;&#23383;&#31526;&#12290;
</p><p>
&#31532;&#20108;&#65292;&#25105;&#20204;&#36824;&#38656;&#35201;&#30693;&#36947;&#29305;&#23450;&#35821;&#35328;&#30340;
&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;&#12290; &#20363;&#22914;&#65292;&#24403;&#25490;&#24207;&#26681;&#25454;&#32654;&#22269;&#35268;&#21017;&#24182;
&#22312;en_US&#21306;&#22495;&#26102;&#65292;&#37325;&#38899;&#23383;&#31526;' &iuml;'&#65288;&#24102;&#20998;&#38899;&#31526;&#30340;&#23567;&#20889;&#23383;&#27597;i &#65289;
&#22312;&#19968;&#20123;&#22320;&#26041;&#24212;&#35813;&#25918;&#22312;'Z '&#30340;&#23551;&#38754;&#12290; &#28982;&#32780;&#65292;&#26681;&#25454;&#27861;&#22269;&#35268;&#21017;&#25490;&#24207;
&#24182;&#22312;fr_FR&#21306;&#22495;&#30340;&#35821;&#35328;&#29615;&#22659;&#20013;&#26102;&#65292;&#23427;&#24212;&#35813;&#25918;&#22312;'i'&#21644;'J'&#20043;&#38388;&#12290; &#32780;&#19968;&#20123;
&#20854;&#20182;&#35821;&#35328;&#35268;&#21017;&#21487;&#20197;&#36873;&#25321;&#24573;&#30053;&#25152;&#26377;&#30340;&#21475;&#38899;&#65292;&#20351;' &iuml;'
&#21644;'i'&#21487;&#20197;&#20219;&#24847;&#28151;&#21512;&#12290;
</p><p>
&#31532;&#19977;&#20301;&#65292;&#20294;&#24182;&#38750;&#26368;&#19981;&#37325;&#35201;&#30340;&#65292;&#25105;&#20204;&#20063;&#35768;&#38656;&#35201;&#21306;&#20998;&#22312;&#26576;&#20123;&#22330;&#26223;&#19979;&#22823;&#23567;&#20889;&#30456;&#20851;&#30340;&#25490;&#24207;&#65292;&#32780;&#22312;&#20854;&#20182;&#19968;&#20123;&#24773;&#20917;&#19979;&#22823;&#23567;&#20889;&#26080;&#20851;&#30340;&#25490;&#24207;&#12290;
</p><p>
&#25490;&#24207;&#35268;&#21017;&#32467;&#21512;&#20197;&#19978;&#25152;&#36848;&#65306;&#23383;&#31526;&#38598;&#65292; &#35821;&#35328;&#35268;&#21017;&#65292;
&#65292;&#22823;&#23567;&#20889;&#21306;&#20998;&#12290;Sphinx&#30446;&#21069;&#25552;&#20379;&#20197;&#19979;&#22235;&#31181;
&#25490;&#24207;&#35268;&#21017;&#12290;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><code class="option">libc_ci</code></li>
<li class="listitem"><code class="option">libc_cs</code></li>
<li class="listitem"><code class="option">utf8_general_ci</code></li>
<li class="listitem"><code class="option">binary</code></li>
</ol></div>
<p>
</p><p>
&#21069;&#20004;&#20010;&#25490;&#24207;&#35268;&#21017;&#20381;&#36182;&#20110;&#20960;&#20010;&#26631;&#20934;C&#24211;&#65288;libc&#65289;&#30340;&#35843;&#29992;&#65292;
&#22240;&#27492;&#65292;&#21487;&#20197;&#25903;&#25345;&#20219;&#20309;&#22312;&#24744;&#30340;&#31995;&#32479;&#20013;&#23433;&#35013;&#30340;&#35821;&#35328;&#29615;&#22659;&#12290;&#20182;&#20204;&#20998;&#21035;&#25552;&#20379;&#23545;&#22823;&#23567;&#20889;&#26080;&#20851;&#21644;&#22823;&#23567;&#20889;&#25935;&#24863;&#30340;&#25490;&#24207;&#35268;&#21017;&#25903;&#25345;&#12290;
&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#20250;&#20351;&#29992;C&#35821;&#35328;&#29615;&#22659;&#65292;&#25353;&#20301;&#36827;&#34892;&#36880;&#23383;&#33410;&#23545;&#27604;&#12290;&#20320;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992;<a class="link" href="#conf-collation-libc-locale" title="11.4.34.&nbsp;collation_libc_locale&#65306;&#26381;&#21153;&#31471;libc&#23383;&#31526;&#38598;">collation_libc_locale</a>&#25351;&#20196;&#26469;&#21046;&#23450;&#19968;&#20010;&#22312;&#24403;&#21069;&#31995;&#32479;&#20013;&#21487;&#29992;&#30340;&#20854;&#20182;&#35821;&#35328;&#29615;&#22659;&#35774;&#32622;&#26469;&#25913;&#21464;&#23427;&#12290;&#36824;&#21487;&#20197;&#36890;&#36807;<code class="filename">locale</code>&#21629;&#20196;&#26469;&#33719;&#24471;&#24403;&#21069;&#31995;&#32479;&#19978;&#21487;&#29992;&#30340;&#35821;&#35328;&#29615;&#22659;&#21015;&#34920;&#65306;
</p><pre class="programlisting">
$ locale -a
C
en_AG
en_AU.utf8
en_BW.utf8
en_CA.utf8
en_DK.utf8
en_GB.utf8
en_HK.utf8
en_IE.utf8
en_IN
en_NG
en_NZ.utf8
en_PH.utf8
en_SG.utf8
en_US.utf8
en_ZA.utf8
en_ZW.utf8
es_ES
fr_FR
POSIX
ru_RU.utf8
ru_UA.utf8
</pre><p>
</p><p>
&#19981;&#21516;&#31995;&#32479;&#19978;&#30340;&#35821;&#35328;&#29615;&#22659;&#21015;&#34920;&#21487;&#33021;&#26377;&#25152;&#19981;&#21516;&#12290;&#35831;&#21442;&#32771;&#25805;&#20316;&#31995;&#32479;&#30340;&#25991;&#26723;&#65292;&#20197;&#23433;&#35013;&#26356;&#22810;&#25152;&#38656;&#30340;&#35821;&#35328;&#29615;&#22659;&#12290;
</p><p>
<code class="option">utf8_general_ci</code> &#19982; <code class="option">binary</code> &#35821;&#35328;&#29615;&#22659;&#26159;Sphinx&#20869;&#24314;&#25903;&#25345;&#30340;&#12290;&#31532;&#19968;&#20010;&#26159;UTF-8&#25968;&#25454;&#30340;&#36890;&#29992;&#23383;&#31526;&#20018;&#26657;&#23545;&#31867;&#22411;&#65288;&#27809;&#26377;&#38024;&#23545;&#20219;&#20309;&#35821;&#35328;&#36827;&#34892;&#23450;&#21046;&#65289;&#12290;&#23427;&#19982;MySQL&#30340;
<code class="option">utf8_general_ci</code> &#25490;&#24207;&#35268;&#21017;&#31867;&#20284;&#12290;&#31532;&#20108;&#20010;&#26159;&#31616;&#21333;&#30340;&#23383;&#33410;&#23545;&#27604;&#12290;
</p><p>
&#23383;&#31526;&#38598;&#26657;&#23545;&#21487;&#20197;&#22312;&#27599;&#27425;&#20250;&#35805;&#36807;&#31243;&#20013;&#36890;&#36807;SphinxQL&#30340;
<code class="code">SET collation_connection</code>&#35821;&#21477;&#26469;&#35206;&#30422;&#20840;&#23616;&#35774;&#32622;&#12290;&#25152;&#26377;&#21518;&#32493;&#30340;SphinxQL&#26597;&#35810;&#37117;&#23558;&#20351;&#29992;&#35813;&#23383;&#31526;&#38598;&#26657;&#23545;&#12290;SphinxAPI&#21644;SphinxSE&#26597;&#35810;&#37117;&#23558;&#20351;&#29992;&#30001;<a class="link" href="#conf-collation-server" title="11.4.33.&nbsp;collation_server&#65306;&#26381;&#21153;&#31471;&#40664;&#35748;&#23383;&#31526;&#38598;">collation_server</a>&#37197;&#32622;&#25351;&#20196;&#19987;&#38376;&#25351;&#23450;&#30340;&#26381;&#21153;&#22120;&#40664;&#35748;&#23383;&#31526;&#38598;&#26657;&#23545;&#12290;&#24403;&#21069;&#65292;Sphinx&#30340;&#40664;&#35748;&#23383;&#31526;&#38598;&#26657;&#23545;&#20026; <code class="option">libc_ci</code>&#12290;
</p><p>
&#25490;&#24207;&#35268;&#21017;&#20250;&#24433;&#21709;&#25152;&#26377;&#30340;&#23383;&#31526;&#20018;&#23646;&#24615;&#27604;&#36739;&#25805;&#20316;&#65292;&#21253;&#25324;&#22312;ORDER BY &#21644; GROUp By&#20013;&#30340;&#20351;&#29992;&#65292;&#26681;&#25454;&#25152;&#36873;&#25321;&#30340;&#25490;&#24207;&#35268;&#21017;&#23558;&#36820;&#22238;&#19981;&#21516;&#30340;&#25490;&#24207;&#25110;&#32773;&#20998;&#32452;&#32467;&#26524;&#12290;
</p></div>
<div class="sect1" title="5.13.&nbsp;&#29992;&#25143;&#33258;&#23450;&#20041;&#20989;&#25968; (UDF)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="udf"></a>5.13.&nbsp;&#29992;&#25143;&#33258;&#23450;&#20041;&#20989;&#25968; (UDF)</h2></div></div></div>
<p>
&#20174;&#29256;&#26412;2.0.1-beta&#24320;&#22987;&#65292;Sphinx&#25903;&#25345;&#29992;&#25143;&#33258;&#23450;&#20041;&#20989;&#25968;&#65292;&#25110;&#32773;&#31616;&#31216;&#20026;UDF&#12290;
&#20182;&#20204;&#21487;&#20197;&#34987;<code class="filename">searchd</code>&#21160;&#24577;&#30340;&#21152;&#36733;&#25110;&#32773;&#21368;&#36733;&#65292;&#32780;&#19981;&#29992;&#37325;&#21551;&#39547;&#23432;&#36827;&#31243;&#65292;
&#24182;&#21487;&#20197;&#22312;&#25628;&#32034;&#26102;&#29992;&#22312;&#34920;&#36798;&#24335;&#20013;&#12290;UDF&#30340;&#21151;&#33021;&#22914;&#19979;&#25152;&#36848;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#20989;&#25968;&#21487;&#20197;&#25509;&#21463;&#25972;&#25968; (32-bit &#19982; 64-bit), &#28014;&#28857;&#25968;, &#23383;&#31526;&#20018;, &#25110;&#32773;MVA&#21442;&#25968;.</li>
<li class="listitem">&#20989;&#25968;&#21487;&#20197;&#36820;&#22238;&#25972;&#25968;&#25110;&#32773;&#28014;&#28857;&#25968;&#20540;.</li>
<li class="listitem">&#20989;&#25968;&#21487;&#20197;&#26816;&#26597;&#21442;&#25968;&#25968;&#37327;&#12289;&#31867;&#22411;&#21644;&#21517;&#31216;&#65292;&#20197;&#21450;&#24341;&#21457;&#38169;&#35823;.</li>
<li class="listitem">&#30446;&#21069;&#20165;&#25903;&#25345;&#31616;&#21333;&#30340;&#20989;&#25968;&#65288;&#21363;&#38750;&#32858;&#21512;&#30340;&#65289;.</li>
</ul></div>
<p>
</p><p>
&#29992;&#25143;&#33258;&#23450;&#20041;&#20989;&#25968;&#38656;&#35201;&#20320;&#30340;&#31995;&#32479;&#25903;&#25345;&#21160;&#24577;&#24211;&#35843;&#29992;&#65288;&#20063;&#23601;&#26159;&#20849;&#20139;&#23545;&#35937;&#65289;&#12290;
&#22823;&#37096;&#20998;&#29616;&#20195;&#25805;&#20316;&#31995;&#32479;&#37117;&#25903;&#25345;&#65292;&#21253;&#25324;Linux&#12289;Windows&#12289;MacOS&#12289;Solaris&#12289;BSD&#20197;&#21450;&#20854;&#20182;&#30340;&#12290;
&#65288;&#20869;&#37096;&#27979;&#35797;&#26159;&#22312;Linux&#21644;Windows&#19978;&#36827;&#34892;&#30340;&#12290;&#65289;UDF&#24211;&#38656;&#35201;&#25918;&#32622;&#22312;&#26377;<a class="link" href="#conf-plugin-dir" title="11.4.35.&nbsp;plugin_dir&#65306;&#25554;&#20214;&#30446;&#24405;">plugin_dir</a>
&#25351;&#20196;&#19987;&#38376;&#25351;&#23450;&#30340;&#30446;&#24405;&#20013;&#65292;&#24182;&#19988;&#26381;&#21153;&#38656;&#35201;&#37197;&#32622;&#20026;<code class="option">workers = threads</code>&#27169;&#24335;&#12290;&#24211;&#25991;&#20214;&#19981;&#33021;&#20351;&#29992;&#30456;&#23545;&#36335;&#24452;&#12290;
&#19968;&#26086;&#24211;&#25991;&#20214;&#25104;&#21151;&#32534;&#35793;&#26500;&#24314;&#24182;&#25335;&#36125;&#21040;&#27491;&#30830;&#30340;&#20301;&#32622;&#65292;&#23601;&#21487;&#20197;&#20351;&#29992;<a class="link" href="#sphinxql-create-function" title="7.13.&nbsp;CREATE FUNCTION&#65288;&#28155;&#21152;&#33258;&#23450;&#20041;&#20989;&#25968;&#65289;&#35821;&#27861;">CREATE FUNCTION</a> and
<a class="link" href="#sphinxql-drop-function" title="7.14.&nbsp;DROP FUNCTION&#65288;&#21024;&#38500;&#33258;&#23450;&#20041;&#20989;&#25968;&#65289;&#35821;&#27861;">DROP FUNCTION</a>&#35821;&#21477;&#26469;&#20998;&#21035;&#21160;&#24577;&#30340;&#23433;&#35013;&#25110;&#32773;&#21453;&#23433;&#35013;&#36825;&#20123;&#20989;&#25968;&#12290;
&#21333;&#20010;&#24211;&#21487;&#20197;&#21253;&#21547;&#22810;&#20010;&#20989;&#25968;&#12290;&#27599;&#20010;&#24211;&#20250;&#22312;&#31532;&#19968;&#27425;&#23433;&#35013;&#20854;&#20013;&#30340;&#26576;&#20010;&#20989;&#25968;&#26102;&#21152;&#36733;&#65292;&#24182;&#22312;&#21453;&#23433;&#35013;&#24211;&#20013;&#30340;&#25152;&#26377;&#20989;&#25968;&#21518;&#34987;&#21368;&#36733;&#12290;
</p><p>
&#24211;&#20989;&#25968;&#23558;&#23454;&#29616;&#21487;&#34987;SQL&#35821;&#21477;&#35843;&#29992;&#30340;UDF&#65292;&#20182;&#20204;&#38656;&#35201;&#36981;&#24490;C&#35843;&#29992;&#35268;&#21017;&#65292;&#20197;&#21450;&#31616;&#21333;&#30340;&#21629;&#21517;&#32422;&#23450;&#12290;
Sphinx&#28304;&#20195;&#30721;&#21457;&#34892;&#21253;&#20013;&#21253;&#21547;&#20102;&#19968;&#20010;&#31616;&#21333;&#30340;&#31034;&#20363;&#25991;&#20214;&#65292;
<a class="ulink" href="http://code.google.com/p/sphinxsearch/source/browse/trunk/src/udfexample.c" target="_top">src/udfexample.c</a>,
&#20854;&#20013;&#23450;&#20041;&#20102;&#19968;&#20123;&#31616;&#21333;&#30340;&#20989;&#25968;&#26469;&#28436;&#31034;&#22914;&#20309;&#20351;&#29992;&#35777;&#20070;&#12289;&#23383;&#31526;&#20018;&#20197;&#21450;MVA&#21442;&#25968;&#65307;&#20320;&#21487;&#20197;&#20351;&#29992;&#20854;&#20013;&#30340;&#26576;&#19968;&#20010;&#20026;&#26679;&#26495;&#26469;&#21019;&#24314;&#20320;&#30340;&#26032;&#20989;&#25968;&#12290;
&#23427;&#21253;&#21547;&#20102;UDF&#25509;&#21475;&#30340;&#22836;&#25991;&#20214;
<a class="ulink" href="http://code.google.com/p/sphinxsearch/source/browse/trunk/src/udfexample.c" target="_top">src/sphinxudf.h</a>,
&#20854;&#20013;&#23450;&#20041;&#20102;&#25152;&#38656;&#30340;&#31867;&#22411;&#21644;&#32467;&#26500;&#12290;<code class="filename">sphinxudf.h</code>&#22836;&#26159;&#29420;&#31435;&#30340;&#65292;&#20063;&#23601;&#26159;&#35828;&#19981;&#38656;&#35201;Sphinx&#28304;&#20195;&#30721;&#30340;&#20219;&#20309;&#20854;&#20182;&#37096;&#20998;&#23601;&#21487;&#20197;&#32534;&#35793;&#12290;
</p><p>
&#20320;&#24819;&#35201;&#29992;&#22312;SELECT&#35821;&#21477;&#20013;&#30340;&#20219;&#20309;&#19968;&#20010;&#20989;&#25968;&#65292;&#37117;&#38656;&#35201;&#33267;&#23569;&#20004;&#20010;&#30456;&#24212;&#30340;C/C++&#20989;&#25968;&#65306;&#21021;&#22987;&#21270;&#35843;&#29992;&#21644;&#20989;&#25968;&#26412;&#36523;&#30340;&#35843;&#29992;&#12290;
&#20320;&#20063;&#21487;&#20197;&#26681;&#25454;&#38656;&#35201;&#23450;&#20041;&#21453;&#21021;&#22987;&#21270;&#35843;&#29992;&#20197;&#20415;&#20989;&#25968;&#38656;&#35201;&#22312;&#26597;&#35810;&#21518;&#36827;&#34892;&#28165;&#29702;&#12290;
SQL&#20013;&#30340;&#20989;&#25968;&#21517;&#26159;&#22823;&#23567;&#20889;&#26080;&#36764;&#21834;&#30340;&#65292;&#20294;&#26159;C&#20989;&#25968;&#19981;&#26159;&#65292;&#20182;&#20204;&#38656;&#35201;&#20840;&#37096;&#20026;&#23567;&#20889;&#12290;
&#20989;&#25968;&#21517;&#31216;&#38169;&#35823;&#23558;&#20250;&#38459;&#27490;UDF&#35843;&#20837;&#12290;
&#20320;&#36824;&#38656;&#35201;&#29305;&#21035;&#27880;&#24847;&#32534;&#35793;&#26102;&#30340;&#35843;&#29992;&#32422;&#23450;&#65292;&#21253;&#25324;&#21442;&#25968;&#39034;&#24207;&#21644;&#31867;&#22411;&#65292;&#20197;&#21450;&#20027;&#35843;&#29992;&#20989;&#25968;&#30340;&#36820;&#22238;&#31867;&#22411;&#12290;
&#20219;&#20309;&#30095;&#24573;&#37117;&#21487;&#33021;&#23548;&#33268;&#26381;&#21153;&#23849;&#28291;&#65292;&#26368;&#22909;&#30340;&#24773;&#20917;&#20063;&#35768;&#26159;&#36820;&#22238;&#20102;&#19981;&#21487;&#39044;&#26399;&#30340;&#32467;&#26524;&#12290;
&#26368;&#21518;&#20294;&#24182;&#38750;&#26368;&#19981;&#37325;&#35201;&#30340;&#65292;&#25152;&#26377;&#30340;&#20989;&#25968;&#37117;&#24517;&#39035;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#12290;
</p><p>
&#20551;&#35774;&#22240;&#20026;&#22240;&#20026;&#27979;&#35797;&#30340;&#21407;&#22240;&#65292;&#20320;&#22312;SphinxQL&#20013;&#30340;UDF&#36215;&#21517;&#20026;<code class="code">MYFUNC</code>&#12290;&#21021;&#22987;&#21270;&#12289;&#20027;&#35843;&#29992;&#19982;&#21368;&#36733;&#20989;&#25968;&#38656;&#35201;&#25353;&#29031;&#20197;&#19979;&#26041;&#24335;&#21629;&#21517;&#24182;&#20351;&#29992;&#23545;&#24212;&#30340;&#21442;&#25968;&#65306;
</p><pre class="programlisting">
/// &#21021;&#22987;&#21270;
/// &#26597;&#35810;&#21021;&#22987;&#21270;&#26102;&#35843;&#29992;called once during query initialization
/// returns 0 on success
/// returns non-zero and fills error_message buffer on failure
int myfunc_init ( SPH_UDF_INIT * init, SPH_UDF_ARGS * args,
                  char * error_message );

/// &#20027;&#35843;&#29992;
/// &#36820;&#22238;&#35745;&#31639;&#30340;&#32467;&#26524;
/// &#32473;error_flag&#20889;&#20837;&#38750;&#38646;&#20540;&#34920;&#31034;&#20986;&#29616;&#38169;&#35823;
RETURN_TYPE myfunc ( SPH_UDF_INIT * init, SPH_UDF_ARGS * args,
                     char * error_flag );

/// &#21487;&#36873;&#30340;&#21368;&#36733;&#20989;&#25968;
/// &#35843;&#29992;&#19968;&#27425;&#28165;&#29702;&#19968;&#27425;&#20197;&#23436;&#25104;&#26597;&#35810;&#22788;&#29702;
void myfunc_deinit ( SPH_UDF_INIT * init );
</pre><p>
&#19978;&#38754;&#25552;&#21040;&#30340;&#20004;&#20010;&#32467;&#26500;&#20307;&#65292; <code class="code">SPH_UDF_INIT</code> &#21644;
<code class="code">SPH_UDF_ARGS</code>&#22312; <code class="filename">src/sphinxudf.h</code>&#34903;&#22836;&#22836;&#25991;&#20214;&#20013;&#23450;&#20041;&#24182;&#35828;&#26126;&#12290; &#20027;&#35843;&#29992;&#30340;<code class="code">RETURN_TYPE</code> &#21487;&#20197;&#26159;&#20197;&#19979;&#20043;&#19968;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="code">int</code> &#34920;&#31034;&#20989;&#25968;&#36820;&#22238;&#20540;&#20026; INT.</li>
<li class="listitem"><code class="code">sphinx_int64_t</code> &#34920;&#31034;&#20989;&#25968;&#36820;&#22238;&#20540;&#20026; BIGINT.</li>
<li class="listitem"><code class="code">float</code> &#34920;&#31034;&#20989;&#25968;&#36820;&#22238;&#20540;&#20026; FLOAT.</li>
</ul></div>
<p>
</p><p>
&#20182;&#20204;&#30340;&#35843;&#29992;&#39034;&#24207;&#22914;&#19979;. <code class="code">myfunc_init()</code> &#22312;&#26597;&#35810;&#21021;&#22987;&#21270;&#26102;&#35843;&#29992;&#19968;&#27425;&#12290;&#23427;&#21487;&#20197;&#36820;&#22238;&#38750;&#38646;&#20540;&#34920;&#31034;&#22833;&#36133;&#65307;&#22312;&#27492;&#24773;&#20917;&#19979;&#26597;&#35810;&#23558;&#19981;&#20250;&#34987;&#25191;&#34892;&#65292;&#24182;&#21487;&#20197;&#36890;&#36807;<code class="code">error_message</code>&#32531;&#20914;&#21306;&#26469;&#36820;&#22238;&#38169;&#35823;&#20449;&#24687;&#12290;&#28982;&#21518;&#65292;<code class="code">myfunc()</code>&#20250;&#22312;&#27599;&#34892;&#22788;&#29702;&#20013;&#35843;&#29992;&#65292;<code class="code">myfunc_deinit()</code>&#21017;&#22312;&#26597;&#35810;&#32467;&#26463;&#26102;&#35843;&#29992;&#12290;<code class="code">myfunc()</code>&#21487;&#20197;&#36890;&#36807;&#20889;&#20837;&#38750;&#38646;&#20540;&#21040;<code class="code">error_flag</code>&#26469;&#34920;&#31034;&#38169;&#35823;&#65292;&#27492;&#26102;&#23427;&#23558;&#19981;&#20877;&#34987;&#24207;&#21015;&#20013;&#30340;&#34892;&#35843;&#29992;&#65292;&#32780;&#26159;&#29992;&#40664;&#35748;&#20540;0&#26469;&#21462;&#20195;&#12290;Sphinx&#21487;&#33021;&#20250;&#20063;&#21487;&#33021;&#19981;&#20250;&#36873;&#25321;&#25552;&#21069;&#32456;&#27490;&#27492;&#31867;&#26597;&#35810;&#65292;&#30446;&#21069;&#19981;&#20445;&#35777;&#19968;&#23450;&#20250;&#22914;&#20309;&#36873;&#25321;&#12290;
</p></div></div>
<div class="chapter" title="&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#21629;&#20196;&#34892;&#24037;&#20855;&#21442;&#32771;"><div class="titlepage"><div><div><h2 class="title"><a name="command-line-tools"></a>&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#21629;&#20196;&#34892;&#24037;&#20855;&#21442;&#32771;</h2></div></div></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="sect1"><a href="#ref-indexer">6.1. <code class="filename">indexer</code>&#65306;&#32034;&#24341;&#21629;&#20196;&#21442;&#32771;</a></span></dt>
<dt><span class="sect1"><a href="#ref-searchd">6.2. <code class="filename">searchd</code>&#65306;&#25628;&#32034;&#26381;&#21153;&#31471;&#21629;&#20196;&#21442;&#32771;</a></span></dt>
<dt><span class="sect1"><a href="#ref-search">6.3. <code class="filename">search</code>&#65306;&#21629;&#20196;&#34892;&#25628;&#32034;&#21629;&#20196;&#21442;&#32771;</a></span></dt>
<dt><span class="sect1"><a href="#ref-spelldump">6.4. <code class="filename">spelldump</code>&#65306;&#25340;&#20889;&#20449;&#24687;&#23548;&#20986;&#21629;&#20196;&#21442;&#32771;</a></span></dt>
<dt><span class="sect1"><a href="#ref-indextool">6.5. <code class="filename">indextool</code>&#65306;&#32034;&#24341;&#20449;&#24687;&#23548;&#20986;&#21629;&#20196;&#21442;&#32771;</a></span></dt>
</dl></div>
<p>&#23601;&#20687;&#20854;&#20182;&#22320;&#26041;&#24050;&#32463;&#25552;&#21040;&#30340;&#65292;Sphinx&#19981;&#26159;&#20010;&#21517;&#21483;&#8220;sphinx&#8221;&#30340;&#21333;&#29420;&#21487;&#25191;&#34892;&#31243;&#24207;&#65292;&#32780;&#26159;&#30001;&#22235;&#20010;&#29420;&#31435;&#30340;&#31243;&#24207;&#20849;&#21516;&#32452;&#25104;&#30340;&#12290;&#26412;&#33410;&#20171;&#32461;&#36825;&#20123;&#24037;&#20855;&#21644;&#20182;&#20204;&#30340;&#29992;&#27861;&#12290;</p><div class="sect1" title="6.1.&nbsp;indexer&#65306;&#32034;&#24341;&#21629;&#20196;&#21442;&#32771;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref-indexer"></a>6.1.&nbsp;<code class="filename">indexer</code>&#65306;&#32034;&#24341;&#21629;&#20196;&#21442;&#32771;</h2></div></div></div>
<p><code class="filename">indexer</code> &#26159;Sphinx&#30340;&#20004;&#20010;&#20851;&#38190;&#24037;&#20855;&#20043;&#19968;&#12290;&#19981;&#31649;&#26159;&#20174;&#21629;&#20196;&#34892;&#30452;&#25509;&#35843;&#29992;&#65292;&#36824;&#26159;&#20316;&#20026;&#19968;&#20010;&#36739;&#22823;&#30340;&#33050;&#26412;&#30340;&#19968;&#37096;&#20998;&#20351;&#29992;&#65292;<code class="filename">indexer</code>&#37117;&#21482;&#36127;&#36131;&#19968;&#20214;&#20107;&#24773;&#8212;&#8212;&#25910;&#38598;&#35201;&#34987;&#26816;&#32034;&#30340;&#25968;&#25454;&#12290;.</p><p><code class="filename">indexer</code>&#30340;&#35843;&#29992;&#35821;&#27861;&#22522;&#26412;&#19978;&#26159;&#36825;&#26679;&#65306;</p><pre class="programlisting">
indexer [OPTIONS] [indexname1 [indexname2 [...]]]
</pre><p>&#29992;&#25143;&#21487;&#20197;&#22312;<code class="filename">sphinx.conf</code>&#20013;&#35774;&#32622;&#22909;&#21487;&#33021;&#26377;&#21738;&#20123;&#32034;&#24341;&#65288;index&#65289;&#65288;&#36825;&#20123;&#32034;&#24341;&#21487;&#20197;&#22312;&#26202;&#20123;&#26102;&#20505;&#21035;&#25628;&#32034;&#65289;&#65292;&#22240;&#27492;&#22312;&#35843;&#29992;<code class="filename">indexer</code>&#30340;&#26102;&#20505;&#65292;&#26368;&#31616;&#21333;&#30340;&#24773;&#20917;&#19979;&#65292;&#21482;&#38656;&#35201;&#21578;&#35785;&#23427;&#20320;&#35201;&#24314;&#31435;&#21738;&#20010;&#65288;&#25110;&#32773;&#21738;&#20123;&#65289;&#32034;&#24341;&#23601;&#34892;&#20102;&#12290;</p><p>&#20551;&#35774; <code class="filename">sphinx.conf</code> &#21253;&#21547;&#20102;&#20004;&#20010;&#32034;&#24341;&#30340;&#20855;&#20307;&#35774;&#32622;&#65292; <code class="filename">mybigindex</code> &#21644; <code class="filename">mysmallindex</code>, &#65292;&#20320;&#21487;&#20197;&#36825;&#20040;&#35843;&#29992;&#65306;</p><pre class="programlisting">
$ indexer mybigindex
$ indexer mysmallindex mybigindex
</pre><p>&#22312;&#37197;&#32622;&#25991;&#20214;<code class="filename">sphinx.conf</code>&#37324;&#38754;&#65292;&#29992;&#25143;&#21487;&#20197;&#20026;&#20182;&#20204;&#30340;&#25968;&#25454;&#25351;&#23450;&#19968;&#20010;&#25110;&#22810;&#20010;&#32034;&#24341;&#12290;&#28982;&#21518;&#35843;&#29992;<code class="filename">indexer</code>&#26469;&#23545;&#20854;&#20013;&#19968;&#20010;&#29305;&#23450;&#30340;&#32034;&#24341;&#36827;&#34892;&#37325;&#26032;&#32534;&#21046;&#32034;&#24341;&#25805;&#20316;&#65292;&#25110;&#32773;&#26159;&#37325;&#26032;&#32534;&#21046;&#25152;&#26377;&#32034;&#24341;&#8212;&#8212;&#19981;&#38480;&#20110;&#26576;&#19968;&#20010;&#25110;&#21516;&#26102;&#20840;&#37096;&#65292;&#29992;&#25143;&#24635;&#26159;&#21487;&#20197;&#25351;&#23450;&#29616;&#26377;&#32034;&#24341;&#30340;&#19968;&#20010;&#32452;&#21512;&#12290;</p><p><code class="filename">indexer</code>&#30340;&#22823;&#37096;&#20998;&#36873;&#39033;&#37117;&#21487;&#20197;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#32473;&#20986;&#65292;&#28982;&#32780;&#26377;&#19968;&#37096;&#20998;&#36873;&#39033;&#36824;&#38656;&#35201;&#22312;&#21629;&#20196;&#34892;&#19978;&#25351;&#23450;&#65292;&#36825;&#20123;&#36873;&#39033;&#24433;&#21709;&#32534;&#21046;&#32034;&#24341;&#36825;&#19968;&#25805;&#20316;&#26159;&#22914;&#20309;&#36827;&#34892;&#30340;&#12290;&#36825;&#20123;&#36873;&#39033;&#21015;&#20030;&#22914;&#19979;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="option">--config &lt;file&gt;</code> (&#31616;&#20889;&#20026;<code class="option">-c &lt;file&gt;</code>) &#20351; <code class="filename">indexer</code> &#23558;&#25351;&#23450;&#30340;&#25991;&#20214;file&#20316;&#20026;&#37197;&#32622;&#25991;&#20214;&#12290; 
&#36890;&#24120;&#65292;<code class="filename">indexer</code>&#26159;&#20250;&#22312;&#23433;&#35013;&#30446;&#24405;&#65288;&#20363;&#22914;e.g. <code class="filename">/usr/local/sphinx/etc/sphinx.conf </code>&#65292;&#22914;&#26524;sphinx&#34987;&#23433;&#35013;&#22312; <code class="filename">/usr/local/sphinx</code>&#65289;&#20013;&#23547;&#25214;<code class="filename">sphinx.conf</code>&#65292;&#33509;&#25214;&#19981;&#21040;&#65292;&#21017;&#32487;&#32493;&#22312;&#29992;&#25143;&#22312;shell&#20013;&#35843;&#29992;<code class="filename">indexer</code>&#26102;&#25152;&#22312;&#30340;&#30446;&#24405;&#20013;&#23547;&#25214;&#12290; &#36825;&#20010;&#36873;&#39033;&#19968;&#33324;&#22312;&#20849;&#20139;sphinx&#23433;&#35013;&#30340;&#24773;&#20917;&#19979;&#20351;&#29992;&#65292;&#27604;&#22914;&#20108;&#36827;&#21046;&#25991;&#20214;&#23433;&#35013;&#22312;<code class="filename">/usr/local/sphinx</code>&#65292;&#32780;&#19981;&#21516;&#29992;&#25143;&#37117;&#26377;&#26435;&#23450;&#21046;&#33258;&#24049;&#30340;sphinx&#35774;&#32622;&#12290;&#25110;&#32773;&#22312;&#21516;&#19968;&#20010;&#26381;&#21153;&#22120;&#19978;&#36816;&#34892;&#22810;&#20010;&#23454;&#20363;&#30340;&#24773;&#20917;&#19979;&#20351;&#29992;&#12290;&#22312;&#19978;&#36848;&#20004;&#20013;&#24773;&#20917;&#20013;&#65292;&#29992;&#25143;&#21487;&#20197;&#21019;&#24314;&#33258;&#24049;&#30340;<code class="filename">sphinx.conf</code>&#25991;&#20214;&#65292;&#28982;&#21518;&#25226;&#23427;&#20570;&#20026;&#21442;&#25968;&#20256;&#32473;indexer&#12290;&#20363;&#22914;&#65306;
<pre class="programlisting">
$ indexer --config /home/myuser/sphinx.conf myindex
</pre></li>
<li class="listitem"><code class="option">--all</code>
&#20351;<code class="filename">indexer</code>&#23545;<code class="filename">sphinx.conf</code>&#25991;&#20214;&#20013;&#21015;&#20986;&#30340;&#25152;&#26377;&#32034;&#24341;&#36827;&#34892;&#37325;&#26032;&#32534;&#21046;&#32034;&#24341;&#65292;&#36825;&#26679;&#23601;&#19981;&#27604;&#19968;&#27425;&#21015;&#20986;&#27599;&#20010;&#32034;&#24341;&#30340;&#21517;&#23383;&#20102;&#12290;&#36825;&#20010;&#36873;&#39033;&#22312;&#37197;&#32622;&#25991;&#20214;&#36739;&#23567;&#30340;&#24773;&#20917;&#19979;&#65292;&#25110;&#32773;&#22312;&#31867;&#20284;&#22522;&#20110;<code class="filename">cron</code>&#30340;&#32500;&#25252;&#24037;&#20316;&#20013;&#24456;&#26377;&#29992;&#12290;&#22312;&#19978;&#36848;&#24773;&#20917;&#20013;&#65292;&#25972;&#20010;&#32034;&#24341;&#38598;&#27599;&#22825;&#25110;&#27599;&#21608;&#25110;&#21035;&#30340;&#20160;&#20040;&#21512;&#36866;&#30340;&#26102;&#38388;&#38388;&#38548;&#20013;&#23601;&#37325;&#26032;&#24314;&#31435;&#19968;&#27425;&#12290;&#29992;&#27861;&#31034;&#20363;&#65306;
<pre class="programlisting">
$ indexer --config /home/myuser/sphinx.conf --all
</pre></li>
<li class="listitem"><code class="option">--rotate</code> &#29992;&#20110;&#36718;&#25442;&#32034;&#24341;&#12290;&#23545;&#26032;&#30340;&#25991;&#26723;&#24314;&#31435;&#32034;&#24341;&#26102;&#20960;&#20046;&#32943;&#23450;&#37117;&#30830;&#20445;&#25628;&#32034;&#26381;&#21153;&#20173;&#28982;&#21487;&#29992;&#65292;&#38500;&#38750;&#20320;&#26377;&#20449;&#24515;&#22312;&#25628;&#32034;&#26381;&#21153;&#20572;&#27490;&#21516;&#26102;&#19981;&#32473;&#20320;&#30340;&#29992;&#25143;&#24102;&#26469;&#22256;&#25200;&#12290;<code class="option">--rotate</code>&#24314;&#31435;&#19968;&#20010;&#39069;&#22806;&#30340;&#32034;&#24341;&#65292;&#24182;&#21015;&#20110;&#21407;&#26377;&#32034;&#24341;&#65288;&#19982;&#21407;&#26377;&#32034;&#24341;&#22312;&#30456;&#21516;&#30446;&#24405;&#65292;&#31616;&#21333;&#22320;&#22312;&#21407;&#26377;&#32034;&#24341;&#25991;&#20214;&#21517;&#22522;&#30784;&#19978;&#21152;&#19968;&#20010;<code class="filename">.new</code>&#21518;&#32512;&#65289;&#12290;&#19968;&#26086;&#36825;&#20010;&#39069;&#22806;&#30340;&#32034;&#24341;&#24314;&#31435;&#23436;&#25104;&#65292;<code class="filename">indexer</code>&#32473;<code class="filename">searchd</code>&#21457;&#19968;&#20010;<code class="option">SIGHUP</code>&#20449;&#21495;&#20570;&#20026;&#36890;&#30693;&#12290;<code class="filename">searchd</code>&#20250;&#23581;&#35797;&#23558;&#32034;&#24341;&#37325;&#26032;&#21629;&#21517;&#65288;&#32473;&#21407;&#26377;&#32034;&#24341;&#21152;&#19978;<code class="filename">.old</code>&#21518;&#32512;&#65292;&#32780;&#25226;&#24102;&#26377;<code class="filename">.new</code>&#21518;&#32512;&#30340;&#26032;&#32034;&#24341;&#25913;&#20026;&#21407;&#21517;&#65292;&#20197;&#36798;&#26367;&#25442;&#20043;&#30446;&#30340;&#65289;&#65292;&#32487;&#32780;&#29992;&#26032;&#30340;&#25991;&#20214;&#37325;&#21551;&#26381;&#21153;&#12290;&#20381; <a class="link" href="#conf-seamless-rotate" title="11.4.12.&nbsp;seamless_rotate&#65306;&#26080;&#32541;&#36718;&#25442;">seamless_rotate</a> &#36873;&#39033;&#35774;&#23450;&#20043;&#19981;&#21516;&#65292;&#22312;&#26032;&#32034;&#24341;&#21487;&#29992;&#20043;&#21069;&#21487;&#33021;&#26377;&#19968;&#28857;&#23567;&#30340;&#24310;&#36831;&#12290;&#29992;&#27861;&#31034;&#20363;&#65306;
<pre class="programlisting">
$ indexer --rotate --all
</pre></li>
<li class="listitem"><code class="option">--quiet</code> &#20351;<code class="filename">indexer</code>&#19981;&#36755;&#20986;&#38500;&#38169;&#35823;&#65288;error&#65289;&#22806;&#30340;&#20219;&#20309;&#19996;&#35199;&#12290;&#36825;&#20010;&#36873;&#39033;&#36890;&#24120;&#29992;&#22312;<code class="filename">cron</code>&#23450;&#26102;&#20219;&#21153;&#30340;&#24773;&#22659;&#19979;&#25110;&#32773;&#33050;&#26412;&#20013;&#65292;&#36825;&#20123;&#24773;&#20917;&#19979;&#22823;&#37096;&#20998;&#36755;&#20986;&#26159;&#26080;&#20851;&#32039;&#35201;&#25110;&#23436;&#20840;&#27809;&#29992;&#30340;&#65292;&#38500;&#38750;&#26159;&#21457;&#29983;&#20102;&#26576;&#20123;&#31181;&#31867;&#30340;&#38169;&#35823;&#12290;&#29992;&#27861;&#31034;&#20363;&#65306;
<pre class="programlisting">
$ indexer --rotate --all --quiet
</pre></li>
<li class="listitem"><code class="option">--noprogress</code> &#19981;&#38543;&#26102;&#26174;&#31034;&#36827;&#24230;&#20449;&#24687;&#65292;&#32780;&#26159;&#20165;&#22312;&#32034;&#24341;&#32467;&#26463;&#26102;&#25253;&#21578;&#26368;&#32456;&#30340;&#29366;&#24577;&#32454;&#33410;&#65288;&#20363;&#22914;&#20026;&#21738;&#20123;&#25991;&#26723;&#24314;&#31435;&#20102;&#32034;&#24341;&#65292;&#24314;&#31435;&#32034;&#24341;&#30340;&#36895;&#24230;&#31561;&#65289;&#12290;&#24403;&#33050;&#26412;&#27809;&#26377;&#36816;&#34892;&#22312;&#19968;&#20010;&#25511;&#21046;&#21488;&#65288;console&#65292;&#25110;&#8220;tty&#8221;&#65289;&#26102;&#65292;&#36825;&#20010;&#36873;&#39033;&#26159;&#40664;&#35748;&#30340;&#12290;&#29992;&#27861;&#31034;&#20363;&#65306;
<pre class="programlisting">
$ indexer --rotate --all --noprogress
</pre></li>
<li class="listitem"><code class="option">--buildstops &lt;outputfile.text&gt; &lt;N&gt;</code> &#20687;&#24314;&#31435;&#32034;&#24341;&#19968;&#26679;&#25195;&#25551;&#32034;&#24341;&#23545;&#24212;&#30340;&#25968;&#25454;&#28304;&#65292;&#20135;&#29983;&#19968;&#20010;&#26368;&#32456;&#20250;&#34987;&#21152;&#20837;&#32034;&#24341;&#30340;&#35789;&#39033;&#30340;&#21015;&#34920;&#12290;&#25442;&#31181;&#35828;&#27861;&#65292;&#20135;&#29983;&#19968;&#20010;&#29992;&#36825;&#20010;&#32034;&#24341;&#21487;&#20197;&#26816;&#32034;&#30340;&#35789;&#39033;&#30340;&#21015;&#34920;&#12290;&#27880;&#24847;&#65292;&#36825;&#20010;&#36873;&#39033;&#20351;indexer&#24182;&#19981;&#30495;&#27491;&#26356;&#26032;&#25351;&#23450;&#30340;&#32034;&#24341;&#65292;&#32780;&#21482;&#26159;&#8220;&#20551;&#35013;&#8221;&#24314;&#22312;&#31435;&#32034;&#24341;&#20284;&#22320;&#22788;&#29702;&#19968;&#36941;&#25968;&#25454;&#65292;&#21253;&#25324;&#36816;&#34892;<code class="option">sql_query_pre</code>&#25110;&#32773;<code class="option">sql_query_post</code>&#36873;&#39033;&#25351;&#23450;&#30340;&#26597;&#35810;&#12290;<code class="filename">outputfile.txt</code>&#25991;&#20214;&#26368;&#32456;&#20250;&#21253;&#21547;&#19968;&#20010;&#35789;&#34920;&#65292;&#27599;&#34892;&#19968;&#20010;&#35789;&#65292;&#25353;&#35789;&#39057;&#25490;&#24207;&#65292;&#39640;&#39057;&#22312;&#21069;&#12290;&#21442;&#25968;<code class="filename">N</code>&#25351;&#23450;&#20102;&#21015;&#34920;&#20013;&#26368;&#22810;&#21487;&#20986;&#29616;&#30340;&#35789;&#39033;&#25968;&#30446;&#65292;&#22914;&#26524;N&#27604;&#32034;&#24341;&#20013;&#20840;&#37096;&#35789;&#39033;&#30340;&#25968;&#30446;&#36824;&#22823;&#65292;&#21017;&#36820;&#22238;&#30340;&#35789;&#39033;&#25968;&#23601;&#26159;&#20840;&#37096;&#35789;&#39033;&#25968;&#12290;&#23458;&#25143;&#31471;&#24212;&#29992;&#31243;&#24207;&#21033;&#29992;&#36825;&#31181;&#23383;&#20856;&#24335;&#30340;&#35789;&#34920;&#26469;&#25552;&#20379;&#8220;&#24744;&#26159;&#35201;&#25628;&#32034;&#12290;&#12290;&#12290;&#21527;&#65311;(Did you mean&#8230;)&#8221;&#30340;&#21151;&#33021;&#65292;&#36890;&#24120;&#36825;&#20010;&#36873;&#39033;&#19982;&#19979;&#38754;&#35201;&#35762;&#30340;<code class="option">--buildfreqs</code>&#36873;&#39033;&#19968;&#21516;&#20351;&#29992;&#12290;&#31034;&#20363;&#65306;
<pre class="programlisting">
$ indexer myindex --buildstops word_freq.txt 1000
</pre>
&#36825;&#26465;&#21629;&#20196;&#22312;&#24403;&#21069;&#30446;&#24405;&#20135;&#29983;&#19968;&#20010;<code class="filename">word_freq.txt</code>&#25991;&#20214;&#65292;&#20869;&#21547;myindex&#36825;&#20010;&#32034;&#24341;&#20013;&#26368;&#24120;&#29992;&#30340;1000&#20010;&#35789;&#65292;&#19988;&#26368;&#24120;&#29992;&#30340;&#25490;&#22312;&#26368;&#21069;&#38754;&#12290;&#27880;&#24847;&#65292;&#24403;&#25351;&#23450;&#20102;&#22810;&#20010;&#32034;&#24341;&#21517;&#25110;&#20351;&#29992;&#20102;<code class="option">--all</code>&#36873;&#39033;&#65288;&#30456;&#24403;&#20110;&#21015;&#20986;&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;&#25152;&#26377;&#32034;&#24341;&#21517;&#65289;&#26102;&#65292;&#36825;&#20010;&#36873;&#39033;&#23545;&#20854;&#20013;&#30340;&#26368;&#21518;&#19968;&#20010;&#32034;&#24341;&#36215;&#20316;&#29992;&#12290;
</li>
<li class="listitem"><code class="option">--buildfreqs</code> &#19982; <code class="option">--buildstops</code>&#19968;&#21516;&#20351;&#29992; (&#22914;&#26524;&#27809;&#26377;&#25351;&#23450; <code class="option">--buildstops</code> &#21017;<code class="option">--buildfreqs</code>&#20063;&#34987;&#24573;&#30053;). &#23427;&#32473;<code class="option">--buildstops</code>&#20135;&#29983;&#30340;&#35789;&#34920;&#30340;&#27599;&#39033;&#22686;&#21152;&#19968;&#20010;&#35745;&#25968;&#20449;&#24687;&#65292;&#21363;&#35813;&#35789;&#22312;&#32034;&#24341;&#20013;&#20849;&#20986;&#29616;&#20102;&#22810;&#23569;&#27425;&#65292;&#36825;&#22312;&#24314;&#31435;&#20572;&#29992;&#35789;&#65288;stop words&#65292;&#20986;&#29616;&#29305;&#21035;&#26222;&#36941;&#30340;&#35789;&#65289;&#34920;&#26102;&#21487;&#33021;&#26377;&#29992;&#12290;&#22312;&#24320;&#21457;&#8220;&#24744;&#26159;&#35201;&#25628;&#32034;&#12290;&#12290;&#12290;&#21527;&#65311;(Did you mean&#8230;)&#8221;&#30340;&#21151;&#33021;&#26102;&#36825;&#20010;&#36873;&#39033;&#20063;&#33021;&#24110;&#19978;&#24537;&#65292;&#22240;&#20026;&#26377;&#20102;&#23427;&#20320;&#23601;&#33021;&#30693;&#36947;&#19968;&#20010;&#35789;&#27604;&#21478;&#19968;&#20010;&#30456;&#36817;&#30340;&#35789;&#20986;&#29616;&#24471;&#26356;&#39057;&#32321;&#30340;&#31243;&#24230;&#12290;&#31034;&#20363;&#65306;
<pre class="programlisting">
$ indexer myindex --buildstops word_freq.txt 1000 --buildfreqs
</pre>
&#36825;&#20010;&#21629;&#20196;&#23558;&#20135;&#29983;&#19968;&#20010;&#31867;&#20284;&#20110;&#19978;&#19968;&#26465;&#21629;&#20196;&#30340;<code class="filename">word_freq.txt</code> &#65292;&#20294;&#19981;&#21516;&#22312;&#20110;&#65292;&#27599;&#20010;&#35789;&#30340;&#21518;&#38754;&#37117;&#20250;&#38468;&#21152;&#19968;&#20010;&#25968;&#23383;&#65292;&#25351;&#26126;&#22312;&#25351;&#23450;&#30340;&#32034;&#24341;&#20013;&#36825;&#20010;&#35789;&#20986;&#29616;&#20102;&#22810;&#23569;&#27425;&#12290;
</li>
<li class="listitem"><code class="option">--merge &lt;dst-index&gt; &lt;src-index&gt;</code> &#29992;&#20110;&#22312;&#29289;&#29702;&#19978;&#23558;&#22810;&#20010;&#32034;&#24341;&#21512;&#24182;&#65292;&#27604;&#26041;&#35828;&#20320;&#22312;&#20351;&#29992;&#8220;&#20027;&#32034;&#24341;&#65291;&#22686;&#37327;&#32034;&#24341;&#8221;&#27169;&#24335;&#65292;&#20027;&#32034;&#24341;&#24456;&#23569;&#25913;&#21464;&#65292;&#20294;&#22686;&#37327;&#32034;&#24341;&#24456;&#39057;&#32321;&#22320;&#37325;&#24314;&#65292;&#32780;<code class="option">--merge</code>&#36873;&#39033;&#20801;&#35768;&#23558;&#36825;&#20004;&#20010;&#32034;&#24341;&#21512;&#32780;&#20026;&#19968;&#12290;&#25805;&#20316;&#26159;&#20174;&#21491;&#21521;&#24038;&#36827;&#34892;&#30340;&#65292;&#21363;&#20808;&#32771;&#23519;<code class="filename">src-index</code>&#30340;&#20869;&#23481;&#65292;&#28982;&#21518;&#22312;&#29289;&#29702;&#19978;&#23558;&#20043;&#19982;<code class="filename">dst-index</code>&#21512;&#24182;&#65292;&#26368;&#21518;&#32467;&#26524;&#30041;&#22312;<code class="filename">dst-index</code>&#37324;&#12290;&#29992;&#20266;&#20195;&#30721;&#35828;&#23601;&#26159;<code class="code">dst-index += src-index</code>&#12290;&#31034;&#20363;&#65306;
<pre class="programlisting">
$ indexer --merge main delta --rotate
</pre>
&#19978;&#20363;&#20013;main&#26159;&#20027;&#32034;&#24341;&#65292;&#24456;&#23569;&#26356;&#21160;&#65292;delta&#26159;&#22686;&#37327;&#32034;&#24341;&#65292;&#39057;&#32321;&#26356;&#26032;&#12290;&#19978;&#36848;&#21629;&#20196;&#35843;&#29992;<code class="filename">indexer</code>&#23558;delta&#30340;&#20869;&#23481;&#21512;&#24182;&#21040;main&#37324;&#38754;&#24182;&#19988;&#23545;&#32034;&#24341;&#36827;&#34892;&#36718;&#25442;&#12290;
</li>
<li class="listitem"><code class="option">--merge-dst-range &lt;attr&gt; &lt;min&gt; &lt;max&gt;</code>
&#22312;&#21512;&#24182;&#32034;&#24341;&#30340;&#26102;&#20505;&#36816;&#34892;&#33539;&#22260;&#36807;&#28388;&#12290;&#20855;&#20307;&#22320;&#35828;&#65292;&#21521;&#30446;&#26631;&#32034;&#24341; (&#26159; <code class="option">--merge</code> &#30340;&#19968;&#20010;&#21442;&#25968;&#65292;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450; <code class="option">--merge</code>&#65292; &#21017;<code class="option">--merge-dst-range</code> &#20063;&#34987;&#24573;&#30053;)&#21512;&#24182;&#26102;&#65292;<code class="filename">indexer</code>&#20250;&#23545;&#23558;&#35201;&#21512;&#24182;&#36827;&#21435;&#30340;&#25991;&#26723;&#20570;&#19968;&#27425;&#36807;&#28388;&#65292;&#21482;&#26377;&#36890;&#36807;&#36807;&#28388;&#25165;&#33021;&#26368;&#32456;&#20986;&#29616;&#22312;&#30446;&#26631;&#32034;&#24341;&#20013;&#12290;&#20030;&#19968;&#20010;&#23454;&#29992;&#30340;&#20363;&#23376;&#65292;&#20551;&#35774;&#26576;&#20010;&#32034;&#24341;&#26377;&#19968;&#20010;&#8220;&#24050;&#21024;&#38500;&#65288;deleted&#65289;&#8221;&#23646;&#24615;&#65292;0&#20195;&#34920;&#8220;&#23578;&#26410;&#21024;&#38500;&#8221;&#12290;&#36825;&#26679;&#19968;&#20010;&#32034;&#24341;&#21487;&#20197;&#29992;&#22914;&#19979;&#21629;&#20196;&#36827;&#34892;&#21512;&#24182;&#65306;
<pre class="programlisting">
$ indexer --merge main delta --merge-dst-range deleted 0 0
</pre>
&#36825;&#26679;&#26631;&#35760;&#20026;&#24050;&#21024;&#38500;&#30340;&#25991;&#26723;&#65288;&#20540;&#20026;1&#65289;&#23601;&#19981;&#20250;&#20986;&#29616;&#22312;&#26032;&#29983;&#25104;&#30340;&#30446;&#26631;&#32034;&#24341;&#20013;&#20102;&#12290;&#36825;&#20010;&#36873;&#39033;&#21487;&#20197;&#22312;&#21629;&#20196;&#34892;&#19978;&#25351;&#23450;&#22810;&#27425;&#65292;&#20197;&#20415;&#25351;&#23450;&#22810;&#20010;&#30456;&#32487;&#30340;&#36807;&#28388;&#65292;&#36825;&#26679;&#19968;&#20010;&#25991;&#26723;&#35201;&#24819;&#21512;&#24182;&#21040;&#26368;&#32456;&#30340;&#30446;&#26631;&#32034;&#24341;&#20013;&#21435;&#65292;&#23601;&#24517;&#39035;&#20381;&#27425;&#36890;&#36807;&#20840;&#37096;&#36825;&#20123;&#36807;&#28388;&#12290;
</li>
<li class="listitem"><code class="option">--dump-rows &lt;FILE&gt;</code> &#29992;&#20110;&#20174;SQL&#25968;&#25454;&#28304;&#23548;&#20986;&#33719;&#21462;&#30340;&#25968;&#25454;&#21040;&#25351;&#23450;&#30340;&#25991;&#20214;&#65292;&#27599;&#34892;&#25968;&#25454;&#20351;&#29992;MySQL&#20860;&#23481;&#30340;&#26684;&#24335;&#12290;&#23548;&#20986;&#30340;&#25968;&#25454;&#29992;&#20110;&#23436;&#25972;&#30340;&#20877;&#29616;<code class="filename">indexer</code>&#25910;&#21040;&#30340;&#25968;&#25454;&#24182;&#24110;&#21161;&#37325;&#29616;&#32034;&#24341;&#26102;&#30340;&#38382;&#39064;&#12290;
</li>
<li class="listitem"><code class="option">--verbose</code> &#30830;&#20445;&#27599;&#26465;&#23548;&#33268;&#32034;&#24341;&#20986;&#29616;&#38382;&#39064;&#30340;&#34892;&#37117;&#20250;&#25253;&#21578;&#20986;&#26469; ( &#37325;&#22797;, &#20026;&#38646;, &#25110;&#32773;&#27809;&#26377;&#25991;&#26723;&#32534;&#21495;ID;
&#25110;&#32773;&#22806;&#37096;&#25991;&#20214;&#23383;&#27573;&#30340;Io&#38382;&#39064;; &#31561;&#31561;) . &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#35813;&#36873;&#39033;&#26159;&#20851;&#38381;&#30340;&#65292;&#20316;&#20026;&#26367;&#20195;&#30340;&#26159;&#25253;&#21578;&#38382;&#39064;&#25688;&#35201;&#12290;
</li>
<li class="listitem"><code class="option">--sighup-each</code> &#26377;&#21161;&#20110;&#37325;&#24314;&#22810;&#20010;&#36739;&#22823;&#30340;&#32034;&#24341;&#24182;&#22312;&#27599;&#20010;&#32034;&#24341;&#36718;&#25442;&#23436;&#25104;&#21518;&#39532;&#19978;&#29983;&#25928;&#21487;&#34987;<code class="filename">searchd</code>&#20351;&#29992;. &#20351;&#29992;
<code class="option">--sighup-each</code>, <code class="filename">indexer</code>
&#20250;&#22312;&#27599;&#20010;&#32034;&#24341;&#25104;&#21151;&#23436;&#25104;&#21508;&#39033;&#24037;&#20316;&#21518;&#32473;searchd&#21457;&#36865;SIGHUP&#20449;&#21495;&#12290; (&#40664;&#35748;&#20570;&#27861;&#26159;&#22312;&#20840;&#37096;&#32034;&#24341;&#24314;&#31435;&#21518;&#21457;&#36865;SIGHUP&#20449;&#21495;)
</li>
<li class="listitem"><p><code class="option">--print-queries</code> prints out
SQL queries that <code class="filename">indexer</code> sends to
the database, along with SQL connection and disconnection
events. That is useful to diagnose and fix problems with
SQL sources.
</p></li>
</ul></div>
<p>
</p></div>
<div class="sect1" title="6.2.&nbsp;searchd&#65306;&#25628;&#32034;&#26381;&#21153;&#31471;&#21629;&#20196;&#21442;&#32771;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref-searchd"></a>6.2.&nbsp;<code class="filename">searchd</code>&#65306;&#25628;&#32034;&#26381;&#21153;&#31471;&#21629;&#20196;&#21442;&#32771;</h2></div></div></div>
<p><code class="filename">searchd</code>&#20063;&#26159;sphinx&#30340;&#20004;&#20010;&#20851;&#38190;&#24037;&#20855;&#20043;&#19968;&#12290; <code class="filename">searchd</code>&#26159;&#31995;&#32479;&#23454;&#38469;&#19978;&#22788;&#29702;&#25628;&#32034;&#30340;&#32452;&#20214;&#65292;&#36816;&#34892;&#26102;&#23427;&#34920;&#29616;&#24471;&#23601;&#20687;&#19968;&#31181;&#26381;&#21153;&#65292;&#20182;&#19982;&#23458;&#25143;&#31471;&#24212;&#29992;&#31243;&#24207;&#35843;&#29992;&#30340;&#20116;&#33457;&#20843;&#38376;&#30340;API&#36890;&#35759;&#65292;&#36127;&#36131;&#25509;&#21463;&#26597;&#35810;&#12289;&#22788;&#29702;&#26597;&#35810;&#21644;&#36820;&#22238;&#25968;&#25454;&#38598;&#12290;</p><p>&#19981;&#21516;&#20110; <code class="filename">indexer</code>, <code class="filename">searchd</code> &#24182;&#19981;&#26159;&#35774;&#35745;&#29992;&#26469;&#22312;&#21629;&#20196;&#34892;&#25110;&#32773;&#19968;&#33324;&#30340;&#33050;&#26412;&#20013;&#35843;&#29992;&#30340;&#65292; &#30456;&#21453;&#65292;&#23427;&#25110;&#32773;&#20570;&#20026;&#19968;&#20010;&#23432;&#25252;&#31243;&#24207;&#65288;daemon&#65289;&#34987;init.d&#35843;&#29992;&#65288;&#22312;Unix/Linux&#31867;&#31995;&#32479;&#19978;&#65289;&#65292;&#25110;&#32773;&#20570;&#20026;&#19968;&#31181;&#26381;&#21153;&#65288;&#22312;Windows&#31867;&#31995;&#32479;&#19978;&#65289;&#65292;&#22240;&#27492;&#24182;&#19981;&#26159;&#25152;&#26377;&#30340;&#21629;&#20196;&#34892;&#36873;&#39033;&#37117;&#24635;&#26159;&#26377;&#25928;&#65292;&#36825;&#19982;&#26500;&#24314;&#26102;&#30340;&#36873;&#39033;&#26377;&#20851;&#12290;</p><p>&#20351;&#29992; <code class="filename">searchd</code> &#23601;&#20687;&#36825;&#20040;&#31616;&#21333;&#65306;</p><pre class="programlisting">
$ searchd [OPTIONS]
</pre><p>&#19981;&#31649; <code class="filename">searchd</code> &#26159;&#22914;&#20309;&#26500;&#24314;&#30340;&#65292;&#19979;&#21015;&#36873;&#39033;&#24635;&#26159;&#21487;&#29992;&#65306;</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="option">--help</code> (&#21487;&#20197;&#31616;&#20889;&#20026;<code class="option">-h</code> ) &#21015;&#20986;&#21487;&#20197;&#22312;&#20320;&#24403;&#21069;&#30340;<code class="filename">searchd</code>&#26500;&#24314;&#19978;&#35843;&#29992;&#30340;&#21442;&#25968;&#12290;.
</li>
<li class="listitem"><code class="option">--config &lt;file&gt;</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-c &lt;file&gt;</code>)
	&#20351; <code class="filename">searchd</code> &#20351;&#29992;&#25351;&#23450;&#30340;&#37197;&#32622;&#25991;&#20214;&#65292;&#19982;&#19978;&#36848;<code class="filename">indexer</code>&#30340;<code class="option">--config</code>&#24320;&#20851;&#30456;&#21516;&#12290;
</li>
<li class="listitem"><code class="option">--stop</code> &#29992;&#20110;&#24322;&#27493;&#20572;&#25481; <code class="filename">searchd</code>&#65292;&#20351;&#29992;<code class="filename">sphinx.conf</code>&#20013;&#25152;&#25351;&#23450;&#30340;PID&#25991;&#20214;&#65292;&#22240;&#27492;&#24744;&#21487;&#33021;&#36824;&#38656;&#35201;&#29992;<code class="option">--config</code>&#36873;&#39033;&#26469;&#30830;&#35748;<code class="filename">searchd</code>&#20351;&#29992;&#21738;&#20010;&#37197;&#32622;&#25991;&#20214;&#12290;&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#65292;&#35843;&#29992; <code class="option">--stop</code> &#20250;&#30830;&#20445;&#29992; <a class="link" href="#api-func-updateatttributes" title="8.7.2.&nbsp;UpdateAttributes &#65288;&#26356;&#26032;&#23646;&#24615;&#65289;"><code class="code">UpdateAttributes()</code></a> &#23545;&#32034;&#24341;&#36827;&#34892;&#30340;&#26356;&#21160;&#20250;&#21453;&#24212;&#21040;&#23454;&#38469;&#30340;&#32034;&#24341;&#25991;&#20214;&#20013;&#21435;&#12290;&#31034;&#20363;&#65306;
<pre class="programlisting">
$ searchd --config /home/myuser/sphinx.conf --stop
</pre></li>
<li class="listitem"><code class="option">--stopwait</code> &#29992;&#20110;&#21516;&#27493;&#20572;&#27490; <code class="filename">searchd</code>.
<code class="option">--stop</code> &#26412;&#36136;&#19978;&#26159;&#36890;&#30693;&#36816;&#34892;&#23454;&#20363;&#36864;&#20986; (&#36890;&#36807;&#21457;&#36865; SIGTERM&#20449;&#21495;)
&#28982;&#21518;&#31435;&#21051;&#36820;&#22238;. <code class="option">--stopwait</code> &#23558;&#20250;&#19968;&#30452;&#31561;&#24453;&#30452;&#21040; <code class="filename">searchd</code> &#23454;&#20363;&#30830;&#23454;&#30340;&#23436;&#25104;&#20102;&#20851;&#38381;(&#20363;&#22914;&#65292;&#20445;&#23384;&#25152;&#26377;&#22312;&#20869;&#23384;&#20013;&#30340;&#23646;&#24615;&#25913;&#21464;) &#24182;&#36864;&#20986;. &#31034;&#20363;&#65306;
<pre class="programlisting">
$ searchd --config /home/myuser/sphinx.conf --stopwait
</pre>
&#21487;&#33021;&#30340;&#36864;&#20986;&#20195;&#30721;&#22914;&#19979;&#65306;
	<div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">0 &#34920;&#31034;&#25104;&#21151;;</li>
<li class="listitem">1 &#34920;&#31034;&#36830;&#25509;&#21040;&#36816;&#34892;&#30340;searchd&#23432;&#25252;&#36827;&#31243;&#22833;&#36133;&#12290;;</li>
<li class="listitem">2 &#34920;&#31034;&#23432;&#25252;&#36827;&#31243;&#22312;&#20851;&#38381;&#26102;&#25253;&#21578;&#20102;&#38169;&#35823;;</li>
<li class="listitem">3 &#34920;&#31034;&#23432;&#25252;&#36827;&#31243;&#20851;&#38381;&#26102;&#23849;&#28291;.</li>
</ul></div></li>
<li class="listitem"><code class="option">--status</code> &#29992;&#26469;&#26597;&#35810;&#36816;&#34892;&#20013;&#30340;<code class="filename">searchd</code>&#23454;&#20363;&#30340;&#29366;&#24577;&#65292;&#65292;&#20351;&#29992;&#25351;&#23450;&#30340;&#65288;&#20063;&#21487;&#20197;&#19981;&#25351;&#23450;&#65292;&#20351;&#29992;&#40664;&#35748;&#65289;&#37197;&#32622;&#25991;&#20214;&#20013;&#25551;&#36848;&#30340;&#36830;&#25509;&#21442;&#25968;&#12290;&#23427;&#36890;&#36807;&#37197;&#32622;&#22909;&#30340;&#31532;&#19968;&#20010;UNIX&#22871;&#25509;&#23383;&#25110;TCP&#31471;&#21475;&#19982;&#36816;&#34892;&#20013;&#30340;&#23454;&#20363;&#36830;&#25509;&#12290;&#19968;&#26086;&#36830;&#25509;&#25104;&#21151;&#65292;&#23427;&#23601;&#26597;&#35810;&#19968;&#31995;&#21015;&#29366;&#24577;&#21644;&#24615;&#33021;&#35745;&#25968;&#22120;&#30340;&#20540;&#24182;&#25226;&#36825;&#20123;&#25968;&#25454;&#25171;&#21360;&#20986;&#26469;&#12290;&#22312;&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;&#21487;&#20197;&#29992;<a class="link" href="#api-func-status" title="8.7.5.&nbsp;Status &#65288;&#26597;&#35810;&#26381;&#21153;&#29366;&#24577;&#65289;">Status()</a> API&#35843;&#29992;&#26469;&#35775;&#38382;&#30456;&#21516;&#30340;&#36825;&#20123;&#35745;&#25968;&#22120;&#12290;&#31034;&#20363;&#65306;
<pre class="programlisting">
$ searchd --status
$ searchd --config /home/myuser/sphinx.conf --status
</pre></li>
<li class="listitem"><code class="option">--pidfile</code> &#29992;&#26469;&#26174;&#24335;&#25351;&#23450;&#19968;&#20010;PID&#25991;&#20214;&#12290;PID&#25991;&#20214;&#23384;&#20648;&#30528;&#20851;&#20110;<code class="filename">searchd</code>&#30340;&#36827;&#31243;&#20449;&#24687;&#65292;&#36825;&#20123;&#20449;&#24687;&#29992;&#20110;&#36827;&#31243;&#38388;&#36890;&#35759;&#65288;&#20363;&#22914;<code class="filename">indexer</code>&#38656;&#35201;&#30693;&#36947;&#36825;&#20010;PID&#20197;&#20415;&#22312;&#36718;&#25442;&#32034;&#24341;&#30340;&#26102;&#20505;&#19982;<code class="filename">searchd</code>&#36827;&#34892;&#36890;&#35759;&#65289;<code class="filename">searchd</code>&#22312;&#27491;&#24120;&#27169;&#24335;&#36816;&#34892;&#26102;&#20250;&#20351;&#29992;&#19968;&#20010;PID&#65288;&#21363;&#19981;&#26159;&#20351;&#29992;--console&#36873;&#39033;&#21551;&#21160;&#30340;&#65289;&#65292;&#20294;&#26377;&#21487;&#33021;&#23384;&#22312;<code class="filename">searchd</code>&#22312;&#25511;&#21046;&#21488;&#65288;<code class="option">--console</code>&#65289;&#27169;&#24335;&#36816;&#34892;&#65292;&#32780;&#21516;&#26102;&#27491;&#22312;&#32034;&#24341;&#27491;&#22312;&#36827;&#34892;&#26356;&#26032;&#21644;&#36718;&#25442;&#25805;&#20316;&#30340;&#24773;&#20917;&#65292;&#27492;&#26102;&#23601;&#38656;&#35201;&#19968;&#20010;PID&#25991;&#20214;&#12290;
<pre class="programlisting">
$ searchd --config /home/myuser/sphinx.conf --pidfile /home/myuser/sphinx.pid
</pre></li>
<li class="listitem"><code class="option">--console</code> is used to force <code class="filename">searchd</code>
&#29992;&#26469;&#24378;&#21046;<code class="filename">searchd</code>&#20197;&#25511;&#21046;&#21488;&#27169;&#24335;&#21551;&#21160;&#65307;&#20856;&#22411;&#24773;&#20917;&#19979;<code class="filename">searchd</code>&#20687;&#19968;&#20010;&#20256;&#32479;&#30340;&#26381;&#21153;&#22120;&#24212;&#29992;&#31243;&#24207;&#37027;&#26679;&#36816;&#34892;&#65292;&#23427;&#25226;&#20449;&#24687;&#36755;&#20986;&#21040;&#65288;<code class="filename">sphinx.conf</code>&#37197;&#32622;&#25991;&#20214;&#20013;&#25351;&#23450;&#30340;&#65289;&#26085;&#24535;&#25991;&#20214;&#20013;&#12290;&#20294;&#26377;&#20123;&#26102;&#20505;&#38656;&#35201;&#35843;&#35797;&#37197;&#32622;&#25991;&#20214;&#25110;&#32773;&#23432;&#25252;&#31243;&#24207;&#26412;&#36523;&#30340;&#38382;&#39064;&#65292;&#25110;&#32773;&#35786;&#26029;&#19968;&#20123;&#24456;&#38590;&#36319;&#36394;&#30340;&#38382;&#39064;&#65292;&#36825;&#26102;&#24378;&#21046;&#23427;&#25226;&#20449;&#24687;&#30452;&#25509;&#36755;&#20986;&#21040;&#35843;&#29992;&#20182;&#30340;&#25511;&#21046;&#21488;&#25110;&#32773;&#21629;&#20196;&#34892;&#19978;&#20250;&#20351;&#35843;&#35797;&#24037;&#20316;&#23481;&#26131;&#20123;&#12290;&#21516;&#26102;&#65292;&#20197;&#25511;&#21046;&#21488;&#27169;&#24335;&#36816;&#34892;&#36824;&#24847;&#21619;&#30528;&#36827;&#31243;&#19981;&#20250;fork&#65288;&#22240;&#27492;&#25628;&#32034;&#25805;&#20316;&#37117;&#26159;&#20018;&#34892;&#25191;&#34892;&#30340;&#65289;&#65292;&#20063;&#19981;&#20250;&#20889;&#26085;&#24535;&#25991;&#20214;&#12290;&#65288;&#35201;&#29305;&#21035;&#27880;&#24847;&#65292;<code class="filename">searchd</code>&#24182;&#19981;&#26159;&#34987;&#20027;&#35201;&#35774;&#35745;&#29992;&#26469;&#22312;&#25511;&#21046;&#21488;&#27169;&#24335;&#36816;&#34892;&#30340;&#65289;&#12290;&#21487;&#20197;&#36825;&#26679;&#35843;&#29992;<code class="filename">searchd</code>&#65306;
<pre class="programlisting">
$ searchd --config /home/myuser/sphinx.conf --console
</pre></li>
<li class="listitem"><code class="option">--logdebug</code> &#35753;&#39069;&#22806;&#30340;&#35843;&#35797;&#20449;&#24687;&#36755;&#20986;&#21040;&#23432;&#25252;&#36827;&#31243;&#26085;&#24535;&#20013;&#12290;&#20351;&#29992;&#30340;&#36739;&#23569;&#65292;&#29992;&#20110;&#24110;&#21161;&#35843;&#35797;&#38590;&#20197;&#37325;&#29616;&#30340;&#35831;&#27714;&#12290;
</li>
<li class="listitem"><code class="option">--iostats</code> &#24403;&#20351;&#29992;&#26085;&#24535;&#26102;&#65288;&#24517;&#39035;&#22312;<code class="filename">sphinx.conf</code>&#20013;&#21551;&#29992;<code class="option">query_log</code>&#36873;&#39033;&#65289;&#21551;&#29992;<code class="option">--iostats</code>&#20250;&#23545;&#27599;&#26465;&#26597;&#35810;&#36755;&#20986;&#20851;&#20110;&#26597;&#35810;&#36807;&#31243;&#20013;&#21457;&#29983;&#30340;&#36755;&#20837;&#36755;&#20986;&#25805;&#20316;&#30340;&#35814;&#32454;&#20449;&#24687;&#65292;&#20250;&#24102;&#26469;&#36731;&#24494;&#30340;&#24615;&#33021;&#20195;&#20215;&#65292;&#24182;&#19988;&#26174;&#28982;&#20250;&#23548;&#33268;&#26356;&#22823;&#30340;&#26085;&#24535;&#25991;&#20214;&#12290;&#26356;&#22810;&#32454;&#33410;&#35831;&#21442;&#32771; <a class="link" href="#query-log-format" title="5.9.&nbsp;&#25628;&#32034;&#26381;&#21153;(searchd) &#26597;&#35810;&#26085;&#24535;&#26684;&#24335;">query log format</a> &#19968;&#33410;&#12290;&#21487;&#20197;&#36825;&#26679;&#21551;&#21160;<code class="filename">searchd</code>&#65306;
<pre class="programlisting">
$ searchd --config /home/myuser/sphinx.conf --iostats
</pre></li>
<li class="listitem"><code class="option">--cpustats</code> &#20351;&#23454;&#38469;CPU&#26102;&#38388;&#25253;&#21578;&#65288;&#19981;&#20809;&#26159;&#23454;&#38469;&#24230;&#37327;&#26102;&#38388;&#65288;wall time&#65289;&#65289;&#20986;&#29616;&#22312;&#26597;&#35810;&#26085;&#24535;&#25991;&#20214;&#65288;&#27599;&#26465;&#26597;&#35810;&#36755;&#20986;&#19968;&#27425;&#65289;&#21644;&#29366;&#24577;&#25253;&#21578;&#65288;&#32047;&#21152;&#20043;&#21518;&#65289;&#20013;&#12290;&#36825;&#20010;&#36873;&#39033;&#20381;&#36182;clock_gettime()&#31995;&#32479;&#35843;&#29992;&#65292;&#22240;&#27492;&#21487;&#33021;&#22312;&#26576;&#20123;&#31995;&#32479;&#19978;&#19981;&#21487;&#29992;&#12290;&#21487;&#20197;&#36825;&#26679;&#21551;&#21160;<code class="filename">searchd</code>&#65306;
<pre class="programlisting">
$ searchd --config /home/myuser/sphinx.conf --cpustats
</pre></li>
<li class="listitem"><code class="option">--port portnumber</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-p</code>)
&#25351;&#23450;<code class="filename">searchd</code>&#30417;&#21548;&#30340;&#31471;&#21475;&#65292;&#36890;&#24120;&#29992;&#20110;&#35843;&#35797;&#12290;&#36825;&#20010;&#36873;&#39033;&#30340;&#40664;&#35748;&#20540;&#26159;9312&#65292;&#20294;&#26377;&#26102;&#29992;&#25143;&#38656;&#35201;&#23427;&#36816;&#34892;&#22312;&#20854;&#20182;&#31471;&#21475;&#19978;&#12290;&#22312;&#36825;&#20010;&#21629;&#20196;&#34892;&#36873;&#39033;&#20013;&#25351;&#23450;&#31471;&#21475;&#27604;&#37197;&#32622;&#25991;&#20214;&#20013;&#20570;&#30340;&#20219;&#20309;&#35774;&#32622;&#20248;&#20808;&#32423;&#37117;&#39640;&#12290;&#26377;&#25928;&#30340;&#31471;&#21475;&#33539;&#22260;&#26159;0&#21040;65535&#65292;&#20294;&#35201;&#20351;&#29992;&#20302;&#20110;1024&#30340;&#31471;&#21475;&#21495;&#21487;&#33021;&#38656;&#35201;&#26435;&#38480;&#36739;&#39640;&#30340;&#36134;&#25143;&#12290;&#20351;&#29992;&#31034;&#20363;&#65306;
<pre class="programlisting">
$ searchd --port 9313
</pre></li>
<li class="listitem"><p><code class="option">--listen ( address ":" port | port | path ) [ ":" protocol ]</code>
(or <code class="option">-l</code> for short) Works as <code class="option">--port</code>, but allow
you to specify not only the port, but full path, as IP address and port, or
Unix-domain socket path, that <code class="filename">searchd</code> will listen on.
Otherwords, you can specify either an IP address (or hostname) and port number, or
just a port number, or Unix socket path. If you specify port number
but not the address, searchd will listen on all network interfaces.
Unix path is identified by a leading slash. As the last param you
can also specify a protocol handler (listener) to be used for
connections on this socket. Supported protocol values are 'sphinx'
(Sphinx 0.9.x API protocol) and 'mysql41' (MySQL protocol used since
4.1 upto at least 5.1).</p></li>
<li class="listitem"><code class="option">--index &lt;index&gt;</code> (&#25110;&#32773;&#32553;&#20889;&#20026; <code class="option">-i
&lt;index&gt;</code>)  &#24378;&#21046;<code class="filename">searchd</code>&#21482;&#25552;&#20379;&#38024;&#23545;&#25351;&#23450;&#32034;&#24341;&#30340;&#25628;&#32034;&#26381;&#21153;&#12290;&#36319;&#19978;&#38754;&#30340;<code class="option">--port</code>&#30456;&#21516;&#65292;&#36825;&#20027;&#35201;&#26159;&#29992;&#20110;&#35843;&#35797;&#65292;&#22914;&#26524;&#26159;&#38271;&#26399;&#20351;&#29992;&#65292;&#21017;&#24212;&#35813;&#20889;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#12290;&#20351;&#29992;&#31034;&#20363;&#65306;
<pre class="programlisting">
$ searchd --index myindex
</pre></li>
<li class="listitem"><code class="option">--strip-path</code> &#29992;&#20110;&#21435;&#38500;&#32034;&#24341;&#20013;&#25152;&#26377;&#24341;&#29992;&#21040;&#30340;&#25991;&#20214;&#21517;&#20013;&#30340;&#36335;&#24452;&#21517; (stopwords, wordforms,
exceptions, &#31561;&#31561;). &#36825;&#26377;&#21161;&#20110;&#32487;&#32493;&#20351;&#29992;&#22312;&#20854;&#20182;&#21487;&#33021;&#36335;&#24452;&#24067;&#23616;&#19981;&#21516;&#30340;&#26426;&#22120;&#19978;&#24314;&#31435;&#30340;&#32034;&#24341;&#12290;
</li>
</ul></div>
<p><code class="filename">searchd</code>&#22312;Windows&#24179;&#21488;&#19978;&#26377;&#19968;&#20123;&#29305;&#26377;&#30340;&#36873;&#39033;&#65292;&#19982;&#23427;&#20570;&#20026;windows&#26381;&#21153;&#25152;&#20135;&#29983;&#30340;&#39069;&#22806;&#22788;&#29702;&#26377;&#20851;&#65292;&#36825;&#20123;&#36873;&#39033;&#21482;&#23384;&#22312;&#20110;Windows&#20108;&#36827;&#21046;&#29256;&#26412;&#12290;</p><p>&#27880;&#24847;&#65292;&#22312;Windows&#19978;searchd&#40664;&#35748;&#20197;<code class="option">--console</code>&#27169;&#24335;&#36816;&#34892;&#65292;&#38500;&#38750;&#29992;&#25143;&#23558;&#23427;&#23433;&#35013;&#25104;&#19968;&#20010;&#26381;&#21153;&#12290;</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="option">--install</code> installs <code class="filename">searchd</code> &#23558;<code class="filename">searchd</code>&#23433;&#35013;&#25104;&#19968;&#20010;&#24494;&#36719;&#31649;&#29702;&#25511;&#21046;&#21488;&#65288;Microsoft Management Console&#65292; &#25511;&#21046;&#38754;&#26495; / &#31649;&#29702;&#24037;&#20855; / &#26381;&#21153;&#65289;&#20013;&#30340;&#26381;&#21153;&#12290;&#22914;&#26524;&#19968;&#26465;&#21629;&#20196;&#25351;&#23450;&#20102;<code class="option">--install</code>&#65292;&#37027;&#20040;&#21516;&#26102;&#20351;&#29992;&#30340;&#20854;&#20182;&#25152;&#26377;&#36873;&#39033;&#65292;&#37117;&#20250;&#34987;&#20445;&#23384;&#19979;&#26469;&#65292;&#26381;&#21153;&#23433;&#35013;&#22909;&#21518;&#65292;&#27599;&#27425;&#21551;&#21160;&#37117;&#20250;&#35843;&#29992;&#36825;&#20123;&#21629;&#20196;&#12290;&#20363;&#22914;&#65292;&#35843;&#29992;<code class="filename">searchd</code>&#26102;&#65292;&#25105;&#20204;&#24456;&#21487;&#33021;&#24076;&#26395;&#29992;<code class="option">--config</code>&#25351;&#23450;&#35201;&#20351;&#29992;&#30340;&#37197;&#32622;&#25991;&#20214;&#65292;&#37027;&#20040;&#22312;&#20351;&#29992;<code class="option">--install</code>&#30340;&#21516;&#26102;&#20063;&#35201;&#21152;&#20837;&#36825;&#20010;&#36873;&#39033;&#12290;&#19968;&#26086;&#35843;&#29992;&#20102;&#36825;&#20010;&#36873;&#39033;&#65292;&#29992;&#25143;&#23601;&#21487;&#20197;&#22312;&#25511;&#21046;&#38754;&#26495;&#20013;&#30340;&#31649;&#29702;&#25511;&#21046;&#21488;&#20013;&#23545;searchd&#36827;&#34892;&#21551;&#21160;&#12289;&#20572;&#27490;&#31561;&#25805;&#20316;&#65292;&#22240;&#27492;&#19968;&#20999;&#21487;&#20197;&#24320;&#22987;&#12289;&#20572;&#27490;&#21644;&#37325;&#21551;&#26381;&#21153;&#30340;&#26041;&#27861;&#23545;<code class="filename">searchd</code>&#20063;&#37117;&#26377;&#25928;&#12290;&#31034;&#20363;&#65306;
<pre class="programlisting">
C:\WINDOWS\system32&gt; C:\Sphinx\bin\searchd.exe --install
   --config C:\Sphinx\sphinx.conf
</pre>
&#22914;&#26524;&#27599;&#27425;&#21551;&#21160;<code class="filename">searchd</code>&#20320;&#37117;&#24076;&#26395;&#24471;&#21040;I/O stat&#20449;&#24687;&#65292;&#37027;&#23601;&#24212;&#35813;&#25226;&#36825;&#20010;&#36873;&#39033;&#20063;&#29992;&#22312;&#35843;&#29992;<code class="option">--install</code>&#30340;&#21629;&#20196;&#34892;&#37324;&#65306;
<pre class="programlisting">
C:\WINDOWS\system32&gt; C:\Sphinx\bin\searchd.exe --install
   --config C:\Sphinx\sphinx.conf --iostats
</pre></li>
<li class="listitem"><code class="option">--delete</code> &#22312;&#24494;&#36719;&#31649;&#29702;&#25511;&#21046;&#21488;&#65288;Microsoft Management Console&#65289;&#21644;&#20854;&#20182;&#26381;&#21153;&#27880;&#20876;&#30340;&#22320;&#26041;&#21024;&#38500;searchd&#65292;&#24403;&#28982;&#20043;&#21069;&#35201;&#24050;&#32463;&#36890;&#36807;<code class="option">--install</code>&#23433;&#35013;&#36807;<code class="filename">searchd</code>&#26381;&#21153;&#12290;&#27880;&#24847;&#65292;&#36825;&#20010;&#36873;&#39033;&#26082;&#19981;&#21024;&#38500;&#36719;&#20214;&#26412;&#36523;&#65292;&#20063;&#19981;&#21024;&#38500;&#20219;&#20309;&#32034;&#24341;&#25991;&#20214;&#12290;&#35843;&#29992;&#36825;&#20010;&#36873;&#39033;&#20043;&#21518;&#21482;&#26159;&#20351;&#36719;&#20214;&#25552;&#20379;&#30340;&#26381;&#21153;&#19981;&#33021;&#20174;windows&#30340;&#26381;&#21153;&#31995;&#32479;&#20013;&#35843;&#29992;&#65292;&#20063;&#19981;&#33021;&#22312;&#26426;&#22120;&#37325;&#21551;&#21518;&#33258;&#21160;&#21551;&#21160;&#20102;&#12290;&#22914;&#26524;&#35843;&#29992;&#26102;<code class="filename">searchd</code>&#27491;&#22312;&#20570;&#20026;&#26381;&#21153;&#36816;&#34892;&#20013;&#65292;&#37027;&#20040;&#29616;&#26377;&#30340;&#31034;&#20363;&#24182;&#19981;&#20250;&#34987;&#32467;&#26463;&#65288;&#19968;&#30452;&#20250;&#36816;&#34892;&#21040;&#26426;&#22120;&#37325;&#21551;&#25110;&#35843;&#29992;<code class="option">--stop</code>&#65289;&#12290;&#22914;&#26524;&#26381;&#21153;&#23433;&#35013;&#26102;&#65288;&#29992;<code class="option">--servicename</code>&#65289;&#25351;&#23450;&#20102;&#33258;&#23450;&#20041;&#30340;&#21517;&#23383;&#65292;&#37027;&#22312;&#35843;&#29992;&#27492;&#36873;&#39033;&#21368;&#36733;&#26381;&#21153;&#26102;&#37324;&#20063;&#38656;&#35201;&#29992;<code class="option">--servicename</code>&#25351;&#23450;&#30456;&#21516;&#30340;&#21517;&#23383;&#12290;&#31034;&#20363;&#65306;
<pre class="programlisting">
C:\WINDOWS\system32&gt; C:\Sphinx\bin\searchd.exe --delete
</pre></li>
<li class="listitem"><code class="option">--servicename &lt;name&gt;</code> &#22312;&#23433;&#35013;&#25110;&#21368;&#36733;&#26381;&#21153;&#26102;&#25351;&#23450;&#26381;&#21153;&#30340;&#21517;&#23383;&#65292;&#36825;&#20010;&#21517;&#23383;&#20250;&#20986;&#29616;&#22312;&#31649;&#29702;&#25511;&#21046;&#21488;&#20013;&#12290;&#26377;&#19968;&#20010;&#40664;&#35748;&#30340;&#21517;&#23383;<code class="filename">searchd</code>&#65292;&#20294;&#33509;&#23433;&#35013;&#26381;&#21153;&#30340;&#31995;&#32479;&#21487;&#33021;&#26377;&#22810;&#20010;&#31649;&#29702;&#21592;&#30331;&#24405;&#65292;&#25110;&#21516;&#26102;&#36816;&#34892;&#22810;&#20010;<code class="filename">searchd</code>&#23454;&#20363;&#65292;&#37027;&#20040;&#36215;&#19968;&#20010;&#25551;&#36848;&#24615;&#24378;&#30340;&#21517;&#23383;&#23558;&#26159;&#20010;&#22909;&#22909;&#20027;&#24847;&#12290;&#27880;&#24847;&#65292;&#21482;&#26377;&#22312;&#19982;<code class="option">--install</code>&#25110;&#32773;<code class="option">--delete</code>&#21516;&#26102;&#20351;&#29992;&#30340;&#26102;&#20505;<code class="option">--servicename</code>&#25165;&#26377;&#25928;&#65292;&#21542;&#21017;&#36825;&#20010;&#36873;&#39033;&#20160;&#20040;&#37117;&#19981;&#20570;&#12290;&#31034;&#20363;&#65306;
<pre class="programlisting">
C:\WINDOWS\system32&gt; C:\Sphinx\bin\searchd.exe --install
   --config C:\Sphinx\sphinx.conf --servicename SphinxSearch
</pre></li>
<li class="listitem"><code class="option">--ntservice</code> &#22312;Windows&#24179;&#21488;&#65292;&#31649;&#29702;&#25511;&#21046;&#21488;&#23558;<code class="filename">searchd</code>&#20570;&#20026;&#26381;&#21153;&#35843;&#29992;&#26102;&#23558;&#36825;&#20010;&#36873;&#39033;&#20256;&#36882;&#32473;&#23427;&#12290;&#36890;&#24120;&#27809;&#26377;&#24517;&#35201;&#30452;&#25509;&#35843;&#29992;&#36825;&#20010;&#24320;&#20851;&#65292;&#23427;&#26159;&#20026;Windows&#31995;&#32479;&#20934;&#22791;&#30340;&#65292;&#24403;&#26381;&#21153;&#21551;&#21160;&#26102;&#65292;&#31995;&#32479;&#25226;&#36825;&#20010;&#21442;&#25968;&#20256;&#36882;&#32473;<code class="filename">searchd</code>&#12290;&#28982;&#32780;&#29702;&#35770;&#19978;&#65292;&#20320;&#20063;&#21487;&#20197;&#29992;&#36825;&#20010;&#24320;&#20851;&#20174;&#21629;&#20196;&#34892;&#23558;<code class="filename">searchd</code>&#21551;&#21160;&#25104;&#26222;&#36890;&#26381;&#21153;&#27169;&#24335;&#65288;&#19982;<code class="option">--console</code>&#20195;&#34920;&#30340;&#25511;&#21046;&#21488;&#27169;&#24335;&#30456;&#23545;&#65289;
</li>
</ul></div>
<p>
&#26368;&#21518;&#20294;&#24182;&#38750;&#26368;&#19981;&#37325;&#35201;&#30340;&#65292;&#31867;&#20284;&#20854;&#20182;&#30340;&#23432;&#25252;&#36827;&#31243;&#65288;daemon&#65289;&#65292;<code class="filename">searchd</code>&#25903;&#25345;&#22810;&#31181;&#20449;&#21495;&#12290;
</p><div class="variablelist"><dl><dt><span class="term">SIGTERM</span></dt>
<dd>&#36827;&#34892;&#19968;&#27425;&#24179;&#28369;&#30340;&#37325;&#21551;&#12290;&#26032;&#30340;&#35831;&#27714;&#19981;&#20250;&#34987;&#25509;&#21463;&#65307;&#20294;&#26159;&#24050;&#32463;&#24320;&#22987;&#30340;&#35831;&#27714;&#19981;&#20250;&#34987;&#24378;&#34892;&#20013;&#26029;&#12290;</dd><dt><span class="term">SIGHUP</span></dt>
<dd>&#21551;&#21160;&#32034;&#24341;&#36718;&#25442;&#12290;&#21462;&#20915;&#20110;
	<a class="link" href="#conf-seamless-rotate" title="11.4.12.&nbsp;seamless_rotate&#65306;&#26080;&#32541;&#36718;&#25442;">seamless_rotate</a> &#30340;&#35774;&#32622;&#65292;&#26032;&#30340;&#35831;&#27714;&#21487;&#33021;&#20250;&#22312;&#30701;&#26399;&#20869;&#38519;&#20837;&#20572;&#39039;&#65307;&#23458;&#25143;&#31471;&#23558;&#25509;&#25910;&#21040;&#20020;&#26102;&#38169;&#35823;&#12290;</dd><dt><span class="term">SIGUSR1</span></dt>
<dd>&#24378;&#21046;&#37325;&#26032;&#25171;&#24320;searchd&#26085;&#24535;&#21644;&#26597;&#35810;&#26085;&#24535;&#65292;&#20351;&#24471;&#26085;&#24535;&#36718;&#25442;&#21487;&#20197;&#36827;&#34892;&#12290;</dd></dl></div>
<p>
</p></div>
<div class="sect1" title="6.3.&nbsp;search&#65306;&#21629;&#20196;&#34892;&#25628;&#32034;&#21629;&#20196;&#21442;&#32771;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref-search"></a>6.3.&nbsp;<code class="filename">search</code>&#65306;&#21629;&#20196;&#34892;&#25628;&#32034;&#21629;&#20196;&#21442;&#32771;</h2></div></div></div>
<p><code class="filename">search</code> &#26159;Sphinx&#20013;&#30340;&#19968;&#20010;&#36741;&#21161;&#24037;&#20855;&#12290;<code class="filename">searchd</code>&#36127;&#36131;&#26381;&#21153;&#22120;&#31867;&#29615;&#22659;&#20013;&#30340;&#25628;&#32034;&#65292;&#32780;<code class="filename">search</code>&#19987;&#27880;&#20110;&#22312;&#21629;&#20196;&#34892;&#19978;&#23545;&#32034;&#24341;&#36827;&#34892;&#24555;&#36895;&#27979;&#35797;&#65292;&#32780;&#19981;&#38656;&#35201;&#26500;&#24314;&#19968;&#20010;&#22797;&#26434;&#30340;&#26550;&#26500;&#26469;&#22788;&#29702;&#21040;&#26381;&#21153;&#22120;&#31471;&#30340;&#36830;&#25509;&#21644;&#22788;&#29702;&#26381;&#21153;&#22120;&#36820;&#22238;&#30340;&#21709;&#24212;&#12290;</p><p>&#27880;&#24847;&#65306;<code class="filename">search</code>&#24182;&#19981;&#26159;&#35774;&#35745;&#29992;&#26469;&#20570;&#20026;&#23458;&#25143;&#31471;&#24212;&#29992;&#31243;&#24207;&#30340;&#19968;&#37096;&#20998;&#12290;&#25105;&#20204;&#24378;&#28872;&#24314;&#35758;&#29992;&#25143;&#19981;&#35201;&#38024;&#23545;<code class="filename">search</code>&#32534;&#20889;&#25509;&#21475;&#65292;&#30456;&#21453;&#65292;&#24212;&#35813;&#38024;&#23545;<code class="filename">searchd</code>&#12290;Sphinx&#25552;&#20379;&#30340;&#20219;&#20309;&#23458;&#25143;&#31471;API&#20063;&#37117;&#19981;&#25903;&#25345;&#36825;&#31181;&#29992;&#27861;&#12290;&#65288;&#20219;&#20309;&#26102;&#20505;<code class="filename">search</code>&#24635;&#26159;&#27599;&#27425;&#37117;&#37325;&#26032;&#35843;&#20837;&#32034;&#24341;&#65292;&#32780;<code class="filename">searchd</code>&#20250;&#25226;&#32034;&#24341;&#32531;&#20914;&#22312;&#20869;&#23384;&#20013;&#20197;&#21033;&#24615;&#33021;&#65289;&#12290;</p><p>&#28548;&#28165;&#20102;&#36825;&#20123;&#25105;&#20204;&#23601;&#21487;&#20197;&#32487;&#32493;&#20102;&#12290;&#24456;&#22810;&#36890;&#36807;API&#26500;&#36896;&#30340;&#26597;&#35810;&#20063;&#21487;&#20197;&#29992;<code class="filename">search</code>&#26469;&#20570;&#21040;&#65292;&#28982;&#32780;&#23545;&#20110;&#38750;&#24120;&#22797;&#26434;&#30340;&#26597;&#35810;&#65292;&#21487;&#33021;&#36824;&#26159;&#29992;&#20010;&#23567;&#33050;&#26412;&#21644;&#23545;&#24212;&#30340;API&#35843;&#29992;&#26469;&#23454;&#29616;&#27604;&#36739;&#31616;&#21333;&#12290;&#38500;&#27492;&#20043;&#22806;&#65292;&#21487;&#33021;&#26377;&#20123;&#26032;&#30340;&#29305;&#24615;&#20808;&#22312;<code class="filename">searchd</code>&#31995;&#32479;&#20013;&#23454;&#29616;&#20102;&#32780;&#23578;&#26410;&#24341;&#20837;&#21040;<code class="filename">search</code>&#20013;&#12290;</p><p><code class="filename">search</code> &#30340;&#35843;&#29992;&#35821;&#27861;&#22914;&#19979;&#65306;</p><pre class="programlisting">
search [OPTIONS] word1 [word2 [word3 [...]]]
</pre><p>&#35843;&#29992;<code class="filename">search</code>&#24182;&#19981;&#35201;&#27714;<code class="filename">searchd</code>&#27491;&#22312;&#36816;&#34892;&#65292;&#21482;&#38656;&#36816;&#34892;<code class="filename">search</code>&#30340;&#36134;&#25143;&#23545;&#37197;&#32622;&#25991;&#20214;&#21644;&#32034;&#24341;&#25991;&#20214;&#21450;&#20854;&#25152;&#22312;&#36335;&#24452;&#26377;&#35835;&#26435;&#38480;&#21363;&#21487;&#12290;</p><p>&#40664;&#35748;&#34892;&#20026;&#26159;&#23545;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#35774;&#32622;&#30340;&#20840;&#37096;&#32034;&#24341;&#30340;&#20840;&#37096;&#23383;&#27573;&#25628;&#32034;word1&#65288;AND word2 AND word3&#8230;.&#65289;&#12290;&#22914;&#26524;&#29992;API&#35843;&#29992;&#26469;&#26500;&#24314;&#36825;&#20010;&#25628;&#32034;&#65292;&#37027;&#30456;&#24403;&#20110;&#21521;<code class="code">SetMatchMode</code>&#20256;&#36882;&#21442;&#25968;<code class="option">SPH_MATCH_ALL</code>&#65292;&#28982;&#21518;&#22312;&#35843;&#29992;<code class="code">Query</code>&#30340;&#26102;&#20505;&#25351;&#23450;&#35201;&#26597;&#35810;&#30340;&#32034;&#24341;&#26159;<code class="option">*</code>&#12290;</p><p><code class="filename">search</code>&#26377;&#24456;&#22810;&#36873;&#39033;&#12290;&#39318;&#20808;&#26159;&#36890;&#29992;&#30340;&#36873;&#39033;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="option">--config &lt;file&gt;</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-c 
&lt;file&gt;</code>) &#20351;<code class="filename">search</code>&#20351;&#29992;&#25351;&#23450;&#30340;&#37197;&#32622;&#25991;&#20214;&#65292;&#36825;&#19982;&#19978;&#36848;<code class="filename">indexer</code>&#30340;&#23545;&#24212;&#36873;&#39033;&#30456;&#21516;&#12290;</li>
<li class="listitem"><code class="option">--index &lt;index&gt;</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-i 
&lt;index&gt;</code>) &#20351;<code class="filename">search</code>&#20165;&#25628;&#32034;&#25351;&#23450;&#30340;&#32034;&#24341;&#12290;&#36890;&#24120;&#23427;&#20250;&#23581;&#35797;&#25628;&#32034;<code class="filename">sphinx.conf</code>&#20013;&#21015;&#20986;&#30340;&#20840;&#37096;&#29289;&#29702;&#32034;&#24341;&#65292;&#19981;&#21253;&#25324;&#20998;&#24067;&#24335;&#32034;&#24341;&#12290;</li>
<li class="listitem"><code class="option">--stdin</code>&#20351;<code class="filename">search</code>&#25509;&#21463;&#26631;&#20934;&#36755;&#20837;&#65288;STDIN&#65289;&#19978;&#20256;&#20837;&#30340;&#26597;&#35810;&#65292;&#32780;&#19981;&#26159;&#21629;&#20196;&#34892;&#19978;&#32473;&#20986;&#30340;&#26597;&#35810;&#12290;&#26377;&#26102;&#20320;&#35201;&#29992;&#33050;&#26412;&#36890;&#36807;&#31649;&#36947;&#32473;search&#20256;&#20837;&#26597;&#35810;&#65292;&#36825;&#27491;&#26159;&#36825;&#20010;&#36873;&#39033;&#30340;&#29992;&#27494;&#20043;&#22320;&#12290;</li>
</ul></div>
<p>
</p><p>&#35774;&#32622;&#21305;&#37197;&#26041;&#24335;&#30340;&#36873;&#39033;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="option">--any</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-a</code>) &#26356;&#25913;&#21305;&#37197;&#27169;&#24335;&#65292;&#21305;&#37197;&#25351;&#23450;&#30340;&#20219;&#24847;&#19968;&#20010;&#35789;&#65288;word1 OR word2 OR word3&#65289;&#65292;&#36825;&#23545;&#24212;API&#35843;&#29992;&#20013;&#21521;<code class="code">SetMatchMode</code>&#20256;&#36882;&#21442;&#25968;<code class="option">SPH_MATCH_ANY</code>&#12290;</li>
<li class="listitem"><code class="option">--phrase</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-p</code>) 
&#26356;&#25913;&#21305;&#37197;&#27169;&#24335;&#65292;&#23558;&#25351;&#23450;&#30340;&#20840;&#37096;&#35789;&#20570;&#20026;&#19968;&#20010;&#35789;&#32452;&#65288;&#19981;&#21253;&#25324;&#26631;&#28857;&#31526;&#21495;&#65289;&#26500;&#25104;&#26597;&#35810;&#65292;&#36825;&#23545;&#24212;API&#35843;&#29992;&#20013;&#21521;<code class="code">SetMatchMode</code>&#20256;&#36882;&#21442;&#25968;<code class="option">SPH_MATCH_PHRASE</code>&#12290;</li>
<li class="listitem"><code class="option">--boolean</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-b</code>) 
&#23558;&#21305;&#37197;&#27169;&#24335;&#35774;&#20026; <a class="link" href="#boolean-syntax" title="5.2.&nbsp;&#24067;&#23572;&#26597;&#35810;&#35821;&#27861;">Boolean matching</a>&#12290;&#27880;&#24847;&#22914;&#26524;&#22312;&#21629;&#20196;&#34892;&#19978;&#20351;&#29992;&#24067;&#23572;&#35821;&#27861;&#65292;&#21487;&#33021;&#38656;&#35201;&#23545;&#26576;&#20123;&#31526;&#21495;&#65288;&#29992;&#21453;&#26012;&#32447;&#8220;\&#8221;&#65289;&#21152;&#20197;&#36716;&#20041;&#65292;&#20197;&#36991;&#20813;&#22806;&#22771;&#31243;&#24207;&#65288;shell&#65289;&#25110;&#21629;&#20196;&#34892;&#22788;&#29702;&#22120;&#23545;&#36825;&#20123;&#31526;&#21495;&#20570;&#29305;&#27530;&#29702;&#35299;&#65292;&#20363;&#22914;&#65292;&#22312;Unix/Linux&#31995;&#32479;&#19978;&#24517;&#39035;&#36716;&#20041;&#8220;&amp;&#8221;&#20197;&#38450;&#27490;<code class="filename">search</code>&#34987;fork&#25104;&#19968;&#20010;&#21518;&#21488;&#36827;&#31243;&#65292;&#23613;&#31649;&#36825;&#20010;&#38382;&#39064;&#20063;&#21487;&#20197;&#20687;&#19979;&#25991;&#19968;&#26679;&#36890;&#36807;&#20351;&#29992;<code class="option">--stdin</code>&#36873;&#39033;&#26469;&#35299;&#20915;&#12290;&#36825;&#20010;&#36873;&#39033;&#23545;&#24212;API&#35843;&#29992;&#20013;&#21521;<code class="code">SetMatchMode</code>&#20256;&#36882;&#21442;&#25968;<code class="option">SPH_MATCH_BOOLEAN</code>&#12290;</li>
<li class="listitem"><code class="option">--ext</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-e</code>) &#23558;&#21305;&#37197;&#27169;&#24335;&#35774;&#20026;<a class="link" href="#extended-syntax" title="5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;">Extended matching</a>&#12290;&#36825;&#23545;&#24212;&#19982;API&#35843;&#29992;&#20013;&#21521;<code class="code">SetMatchMode</code>&#20256;&#36882;&#21442;&#25968;<code class="option">SPH_MATCH_EXTENDED</code>&#12290;&#35201;&#27880;&#24847;&#30340;&#26159;&#22240;&#20026;&#24050;&#32463;&#26377;&#20102;&#26356;&#22909;&#30340;&#25193;&#23637;&#21305;&#37197;&#27169;&#24335;&#29256;&#26412;2&#65292;&#25152;&#20197;&#24182;&#19981;&#40723;&#21169;&#20351;&#29992;&#36825;&#20010;&#36873;&#39033;&#65292;&#35265;&#19979;&#19968;&#26465;&#35828;&#26126;&#12290;</li>
<li class="listitem"><code class="option">--ext2</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-e2</code>) &#23558;&#21305;&#37197;&#27169;&#24335;&#35774;&#20026; <a class="link" href="#extended-syntax" title="5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;">&#25193;&#23637;&#27604;&#37197;, &#29256;&#26412; 2</a>&#12290;&#36825;&#20010;&#36873;&#39033;&#23545;&#24212;&#22312;API&#35843;&#29992;&#20013;&#21521;<code class="code">SetMatchMode</code>&#20256;&#36882;&#21442;&#25968;<code class="option">SPH_MATCH_EXTENDED2</code>&#12290;&#35201;&#27880;&#24847;&#36825;&#20010;&#36873;&#39033;&#30456;&#27604;&#32769;&#30340;&#25193;&#23637;&#21305;&#37197;&#27169;&#24335;&#26356;&#26377;&#25928;&#20063;&#25552;&#20379;&#26356;&#22810;&#30340;&#29305;&#24615;&#65292;&#22240;&#27492;&#25512;&#33616;&#20351;&#29992;&#36825;&#20010;&#26032;&#29256;&#30340;&#36873;&#39033;&#12290;</li>
<li class="listitem"><code class="option">--filter &lt;attr&gt; &lt;v&gt;</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-f 
&lt;attr&gt; &lt;v&gt;</code>) &#23545;&#32467;&#26524;&#36827;&#34892;&#36807;&#28388;&#65292;&#21482;&#26377;&#25351;&#23450;&#30340;&#23646;&#24615;attr&#21305;&#37197;&#25351;&#23450;&#30340;&#20540;v&#26102;&#25165;&#33021;&#36890;&#36807;&#36807;&#28388;&#12290;&#20363;&#22914;<code class="option">--filter deleted 0</code> &#21482;&#21305;&#37197;&#37027;&#20123;&#26377;deleted&#23646;&#24615;&#65292;&#24182;&#19988;&#20854;&#20540;&#26159;0&#30340;&#25991;&#26723;&#12290;&#20063;&#21487;&#20197;&#22312;&#21629;&#20196;&#34892;&#19978;&#22810;&#27425;&#32473;&#20986;<code class="option">--filter</code>&#20197;&#20415;&#25351;&#23450;&#22810;&#37325;&#36807;&#28388;&#65292;&#20294;&#26159;&#22914;&#26524;&#37325;&#22797;&#23450;&#20041;&#38024;&#23545;&#21516;&#19968;&#20010;&#23646;&#24615;&#30340;&#36807;&#28388;&#22120;&#65292;&#37027;&#20040;&#31532;&#20108;&#27425;&#25351;&#23450;&#30340;&#36807;&#28388;&#26465;&#20214;&#20250;&#35206;&#30422;&#31532;&#19968;&#27425;&#30340;&#12290;</li>
</ul></div>
<p>
</p><p>&#29992;&#20110;&#22788;&#29702;&#25628;&#32034;&#32467;&#26524;&#30340;&#36873;&#39033;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="option">--limit &lt;count&gt;</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-l 
count</code>) &#38480;&#21046;&#36820;&#22238;&#30340;&#26368;&#22810;&#21305;&#37197;&#32467;&#26524;&#25968;&#12290;&#22914;&#26524;&#25351;&#23450;&#20102;&#20998;&#32452;&#65288;group&#65289;&#36873;&#39033;&#65292;&#21017;&#34920;&#31034;&#30340;&#26159;&#36820;&#22238;&#30340;&#26368;&#22810;&#21305;&#37197;&#32452;&#25968;&#12290;&#40664;&#35748;&#20540;&#26159;20&#20010;&#32467;&#26524;&#65288;&#19982;API&#30456;&#21516;&#65289;</li>
<li class="listitem"><code class="option">--offset &lt;count&gt;</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-o 
&lt;count&gt;</code>) &#20174;&#31532;count&#20010;&#32467;&#26524;&#24320;&#22987;&#36820;&#22238;&#65292;&#29992;&#20110;&#32473;&#25628;&#32034;&#32467;&#26524;&#20998;&#39029;&#12290;&#22914;&#26524;&#24819;&#35201;&#27599;&#39029;20&#20010;&#32467;&#26524;&#65292;&#37027;&#20040;&#31532;&#20108;&#39029;&#23601;&#20174;&#20559;&#31227;&#37327;20&#24320;&#22987;&#65292;&#31532;&#19977;&#39029;&#20174;&#20559;&#31227;&#37327;40&#24320;&#22987;&#65292;&#20197;&#27492;&#31867;&#25512;&#12290;</li>
<li class="listitem"><code class="option">--group &lt;attr&gt;</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-g 
&lt;attr&gt;</code>) &#25628;&#32034;&#32467;&#26524;&#25353;&#29031;&#25351;&#23450;&#30340;&#23646;&#24615;attr&#36827;&#34892;&#20998;&#32452;&#12290;&#31867;&#20284;SQL&#20013;&#30340;GROUP BY&#23376;&#21477;&#65292;&#36825;&#20250;&#23558;attr&#23646;&#24615;&#20540;&#19968;&#33268;&#30340;&#32467;&#26524;&#32467;&#21512;&#22312;&#19968;&#36215;&#65292;&#36820;&#22238;&#30340;&#32467;&#26524;&#38598;&#20013;&#30340;&#27599;&#26465;&#37117;&#26159;&#19968;&#32452;&#20013;&#26368;&#22909;&#30340;&#37027;&#26465;&#32467;&#26524;&#12290;&#22914;&#26524;&#27809;&#26377;&#29305;&#21035;&#25351;&#23450;&#65292;&#37027;&#8220;&#26368;&#22909;&#8221;&#25351;&#30340;&#26159;&#30456;&#20851;&#24230;&#26368;&#22823;&#30340;&#12290;</li>
<li class="listitem"><code class="option">--groupsort &lt;expr&gt;</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-gs 
&lt;expr&gt;</code>) &#20351;&#25628;&#32034;&#32467;&#26524;&#26681;&#25454;<code class="option">-group</code>&#20998;&#32452;&#21518;&#65292;&#20877;&#29992;&#34920;&#36798;&#24335;&lt;expr&gt;&#30340;&#20540;&#20915;&#23450;&#20998;&#32452;&#30340;&#39034;&#24207;&#12290;&#27880;&#24847;&#65292;&#36825;&#20010;&#36873;&#39033;&#25351;&#23450;&#30340;&#19981;&#26159;&#21508;&#32452;&#20869;&#37096;&#21738;&#26465;&#32467;&#26524;&#26159;&#26368;&#22909;&#30340;&#65292;&#32780;&#26159;&#20998;&#32452;&#26412;&#36523;&#36820;&#22238;&#30340;&#39034;&#24207;&#12290;</li>
<li class="listitem"><code class="option">--sortby &lt;clause&gt;</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-s 
&lt;clause&gt;</code>) &#25351;&#23450;&#32467;&#26524;&#25353;&#29031;&lt;clause&gt;&#20013;&#25351;&#23450;&#30340;&#39034;&#24207;&#25490;&#24207;&#12290;&#36825;&#20351;&#29992;&#25143;&#21487;&#20197;&#25511;&#21046;&#25628;&#32034;&#32467;&#26524;&#23637;&#29616;&#26102;&#30340;&#39034;&#24207;&#65292;&#21363;&#26681;&#25454;&#19981;&#21516;&#30340;&#21015;&#25490;&#24207;&#12290;&#20363;&#22914;&#65292;<code class="option">--sortby "@weight DESC entrytime DESC"</code> &#30340;&#24847;&#24605;&#26159;&#23558;&#32467;&#26524;&#39318;&#20808;&#25353;&#26435;&#20540;&#65288;&#30456;&#20851;&#24230;&#65289;&#25490;&#24207;&#65292;&#22914;&#26524;&#26377;&#20004;&#26465;&#25110;&#20197;&#19978;&#32467;&#26524;&#30340;&#30456;&#20851;&#24230;&#30456;&#21516;&#65292;&#21017;&#20182;&#20204;&#30340;&#39034;&#24207;&#30001;&#26102;&#38388;&#20540;entrytime&#20915;&#23450;&#65292;&#26102;&#38388;&#26368;&#36817;&#65288;&#20540;&#26368;&#22823;&#65289;&#30340;&#25490;&#22312;&#21069;&#38754;&#12290;&#36890;&#24120;&#38656;&#35201;&#23558;&#36825;&#20123;&#39033;&#30446;&#25918;&#22312;&#24341;&#21495;&#37324;(<code class="option">--sortby "@weight DESC"</code>)&#25110;&#32773;&#29992;&#36887;&#21495;&#38548;&#24320;(<code class="option">--sortby @weight,DESC</code>)&#65292;&#20197;&#36991;&#20813;&#23427;&#20204;&#34987;&#20998;&#24320;&#22788;&#29702;&#12290;&#21478;&#22806;&#65292;&#19982;&#36890;&#24120;&#30340;&#25490;&#24207;&#27169;&#24335;&#30456;&#21516;&#65292;&#22914;&#26524;&#25351;&#23450;&#20102;<code class="option">--group</code>(&#20998;&#32452;)&#65292;&#36825;&#20010;&#36873;&#39033;&#23601;&#24433;&#21709;&#20998;&#32452;&#20869;&#37096;&#30340;&#32467;&#26524;&#22914;&#20309;&#25490;&#24207;&#12290;</li>
<li class="listitem"><code class="option">--sortexpr expr</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-S expr</code>) &#25628;&#32034;&#32467;&#26524;&#23637;&#29616;&#30340;&#39034;&#24207;&#30001;&#25351;&#23450;&#30340;&#31639;&#26415;&#34920;&#36798;&#24335;expr&#20915;&#23450;&#12290;&#20363;&#22914;&#65306; <code class="option">--sortexpr "@weight + ( user_karma + ln(pageviews) )*0.1"</code>&#65288;&#20877;&#27425;&#25552;&#31034;&#65292;&#35201;&#29992;&#24341;&#21495;&#26469;&#36991;&#20813;shell&#23545;&#26143;&#21495;*&#20570;&#29305;&#27530;&#22788;&#29702;&#65289;&#12290;&#25193;&#23637;&#25490;&#24207;&#27169;&#24335;&#22312;<a class="link" href="#sorting-modes" title="5.6.&nbsp;&#25490;&#24207;&#27169;&#24335;">&#25490;&#24207;&#27169;&#24335;</a> &#19968;&#31456;&#19979;&#30340;<code class="option">SPH_SORT_EXTENDED</code>&#26465;&#30446;&#19979;&#20855;&#20307;&#35752;&#35770;&#12290;</li>
<li class="listitem"><code class="option">--sort=date</code> &#25628;&#32034;&#32467;&#26524;&#25353;&#26085;&#26399;&#38477;&#24207;&#65288;&#26085;&#26399;&#26368;&#26032;&#30340;&#22312;&#21069;&#65289;&#25490;&#21015;&#12290;&#35201;&#27714;&#32034;&#24341;&#20013;&#26377;&#19968;&#20010;&#23646;&#24615;&#34987;&#25351;&#23450;&#20026;&#26102;&#38388;&#25139;&#12290;</li>
<li class="listitem"><code class="option">--rsort=date</code> &#29305;&#21035;&#25351;&#23450;&#32467;&#26524;&#21319;&#24207;&#25490;&#21015;&#65288;&#26085;&#26399;&#20013;&#36739;&#32769;&#30340;&#22312;&#21069;&#65289;&#12290;&#35201;&#27714;&#32034;&#24341;&#20013;&#26377;&#19968;&#20010;&#23646;&#24615;&#34987;&#25351;&#23450;&#20026;&#26102;&#38388;&#25139;&#12290;</li>
<li class="listitem"><code class="option">--sort=ts</code> &#25628;&#32034;&#32467;&#26524;&#25353;&#26102;&#38388;&#25139;&#20998;&#25104;&#32452;&#12290;&#20808;&#36820;&#22238;&#26102;&#38388;&#25139;&#22312;&#26368;&#36817;&#19968;&#23567;&#26102;&#20869;&#30340;&#36825;&#32452;&#32467;&#26524;&#65292;&#22312;&#32452;&#20869;&#37096;&#25353;&#30456;&#20851;&#24230;&#25490;&#24207;&#12290;&#20854;&#21518;&#36820;&#22238;&#26102;&#38388;&#25139;&#20026;&#26368;&#36817;&#19968;&#22825;&#20043;&#20869;&#30340;&#32467;&#26524;&#65292;&#20063;&#25353;&#30456;&#20851;&#24230;&#25490;&#24207;&#12290;&#20877;&#20043;&#21518;&#26159;&#26368;&#36817;&#19968;&#21608;&#30340;&#65292;&#26368;&#21518;&#26159;&#26368;&#36817;&#19968;&#20010;&#26376;&#30340;&#12290;&#22312;<a class="link" href="#sorting-modes" title="5.6.&nbsp;&#25490;&#24207;&#27169;&#24335;">&#25490;&#24207;&#27169;&#24335;</a> &#19968;&#31456;&#30340;<code class="option">SPH_SORT_TIME_SEGMENTS</code> &#26465;&#30446;&#19979;&#23545;&#27492;&#26377;&#26356;&#35814;&#32454;&#30340;&#35752;&#35770;&#12290;</li>
</ul></div>
<p>
</p><p>&#20854;&#20182;&#36873;&#39033;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="option">--noinfo</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-q</code>) 
&#20351;<code class="filename">search</code>&#19981;&#22312;SQL&#25968;&#25454;&#24211;&#20013;&#26597;&#35810;&#25991;&#26723;&#20449;&#24687;&#65288;Document Info&#65289;&#12290;&#20855;&#20307;&#22320;&#35828;&#65292;&#20026;&#20102;&#35843;&#35797;<code class="filename">search</code>&#21644;MySQL&#20849;&#21516;&#20351;&#29992;&#26102;&#20986;&#29616;&#30340;&#38382;&#39064;&#65292;&#20320;&#21487;&#20197;&#22312;&#20351;&#29992;&#36825;&#20010;&#36873;&#39033;&#30340;&#21516;&#26102;&#25552;&#20379;&#19968;&#20010;&#26681;&#25454;&#25991;&#26723;ID&#25628;&#32034;&#25972;&#20010;&#25991;&#31456;&#20840;&#25991;&#30340;&#26597;&#35810;&#12290;&#32454;&#33410;&#21487;&#21442;&#32771;<a class="link" href="#conf-sql-query-info" title="11.1.34.&nbsp;sql_query_info&#65306;&#21629;&#20196;&#34892;&#20449;&#24687;&#33719;&#21462;&#26597;&#35810;">sql_query_info</a>&#25351;&#20196;&#12290;</li>
</ul></div>
<p>
</p></div>
<div class="sect1" title="6.4.&nbsp;spelldump&#65306;&#25340;&#20889;&#20449;&#24687;&#23548;&#20986;&#21629;&#20196;&#21442;&#32771;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref-spelldump"></a>6.4.&nbsp;<code class="filename">spelldump</code>&#65306;&#25340;&#20889;&#20449;&#24687;&#23548;&#20986;&#21629;&#20196;&#21442;&#32771;</h2></div></div></div>
<p><code class="filename">spelldump</code> &#26159;Sphinx&#30340;&#19968;&#20010;&#36741;&#21161;&#31243;&#24207;&#12290;</p><p>&#29992;&#20110;&#20174;<code class="filename">ispell</code>&#25110;&#32773;<code class="filename">MySpell</code>&#26684;&#24335;&#30340;&#23383;&#20856;&#25991;&#20214;&#20013;&#21487;&#29992;&#26469;&#36741;&#21161;&#24314;&#31435;&#35789;&#24418;&#21015;&#34920;&#65288;<em class="glossterm">wordforms</em>&#65289;&#30340;&#20869;&#23481;&#8212;&#8212;&#35789;&#30340;&#20840;&#37096;&#21487;&#33021;&#21464;&#21270;&#37117;&#39044;&#20808;&#26500;&#36896;&#22909;&#12290;</p><p>&#19968;&#33324;&#29992;&#27861;&#22914;&#19979;&#65306;</p><pre class="programlisting">
spelldump [options] &lt;dictionary&gt; &lt;affix&gt; [result] [locale-name]
</pre><p>&#20004;&#20010;&#20027;&#35201;&#21442;&#25968;&#26159;&#35789;&#20856;&#30340;&#20027;&#25991;&#20214;&#65288;<code class="filename">[language-prefix].dict</code>&#65289;&#21644;&#35789;&#32512;&#25991;&#20214;&#65288;<code class="filename">[language-prefix].aff</code>&#65289;&#65307;&#36890;&#24120;&#36825;&#20004;&#31181;&#25991;&#20214;&#34987;&#21629;&#21517;&#20026;[&#35821;&#35328;&#31616;&#20889;].dict&#21644;[&#35821;&#35328;&#31616;&#20889;].aff&#65292;&#22823;&#22810;&#25968;&#24120;&#35265;&#30340;Linux&#21457;&#34892;&#29256;&#20013;&#37117;&#26377;&#36825;&#20123;&#25991;&#20214;&#65292;&#32593;&#19978;&#20063;&#21040;&#22788;&#25214;&#24471;&#21040;&#12290;</p><p><code class="option">[result]</code> &#25351;&#23450;&#30340;&#26159;&#23383;&#20856;&#25968;&#25454;&#30340;&#36755;&#20986;&#20301;&#32622;&#65292;&#32780;<code class="option">[locale-name]</code>&#25351;&#23450;&#20102;&#20855;&#20307;&#20351;&#29992;&#30340;&#21306;&#22495;&#35774;&#32622;(locale)&#12290;</p><p>&#36824;&#26377;&#19968;&#20010;<code class="option">-c [file]</code>&#36873;&#39033;&#65292;&#29992;&#26469;&#25351;&#23450;&#19968;&#20010;&#21253;&#21547;&#22823;&#23567;&#20889;&#36716;&#25442;&#26041;&#38754;&#32454;&#33410;&#30340;&#25991;&#20214;&#12290;</p><p>&#29992;&#27861;&#31034;&#20363;&#65306;</p><pre class="programlisting">
spelldump en.dict en.aff
spelldump ru.dict ru.aff ru.txt ru_RU.CP1251
spelldump ru.dict ru.aff ru.txt .1251
</pre><p>&#32467;&#26524;&#25991;&#20214;&#20250;&#21253;&#21547;&#23383;&#20856;&#20013;&#21253;&#21547;&#30340;&#20840;&#37096;&#35789;&#65292;&#23383;&#20856;&#24207;&#25490;&#21015;&#65292;wordforms&#25991;&#20214;&#26684;&#24335;&#12290;&#21487;&#20197;&#26681;&#25454;&#20855;&#20307;&#30340;&#20351;&#29992;&#29615;&#22659;&#23450;&#21046;&#36825;&#20123;&#25991;&#20214;&#12290;&#32467;&#26524;&#25991;&#20214;&#30340;&#19968;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">
zone &gt; zone
zoned &gt; zoned
zoning &gt; zoning
</pre></div>
<div class="sect1" title="6.5.&nbsp;indextool&#65306;&#32034;&#24341;&#20449;&#24687;&#23548;&#20986;&#21629;&#20196;&#21442;&#32771;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref-indextool"></a>6.5.&nbsp;<code class="filename">indextool</code>&#65306;&#32034;&#24341;&#20449;&#24687;&#23548;&#20986;&#21629;&#20196;&#21442;&#32771;</h2></div></div></div>
<p>
<code class="filename">indextool</code>&#26159;&#29256;&#26412;0.9.9-rc2&#20013;&#24341;&#20837;&#30340;&#36741;&#21161;&#24037;&#20855;&#12290;&#29992;&#20110;&#36755;&#20986;&#20851;&#20110;&#29289;&#29702;&#32034;&#24341;&#30340;&#22810;&#31181;&#35843;&#35797;&#20449;&#24687;&#12290;&#65288;&#26410;&#26469;&#36824;&#35745;&#21010;&#21152;&#20837;&#32034;&#24341;&#39564;&#35777;&#31561;&#21151;&#33021;&#65292;&#22240;&#27492;&#36215;&#21517;&#36739;indextool&#32780;&#19981;&#26159;indexdump&#65289;&#12290;
&#22522;&#26412;&#29992;&#27861;&#22914;&#19979;&#65306;
</p><pre class="programlisting">
indextool &lt;command&gt; [options]
</pre><p>
&#21807;&#19968;&#19968;&#20010;&#25152;&#26377;&#21629;&#20196;&#37117;&#26377;&#30340;&#36873;&#39033;&#26159;<code class="option">--config</code>&#65292;&#29992;&#20110;&#25351;&#23450;&#37197;&#32622;&#25991;&#20214;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="option">--config &lt;file&gt;</code> (&#21487;&#31616;&#20889;&#20026;<code class="option">-c &lt;file&gt;</code> )
&#35206;&#30422;&#40664;&#35748;&#30340;&#37197;&#32622;&#25991;&#20214;&#21517;&#12290;
</li>
</ul></div>
<p>
</p><p>
&#20854;&#20182;&#21487;&#29992;&#30340;&#21629;&#20196;&#22914;&#19979;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="option">--dumpheader FILENAME.sph</code> &#22312;&#19981;&#28041;&#21450;&#20219;&#20309;&#20854;&#20182;&#32034;&#24341;&#25991;&#20214;&#29978;&#33267;&#37197;&#32622;&#25991;&#20214;&#30340;&#21069;&#25552;&#19979;&#65292;&#24555;&#36895;&#36755;&#20986;&#32034;&#24341;&#22836;&#25991;&#20214;&#30340;&#20869;&#23481;&#65292;&#21253;&#25324;&#32034;&#24341;&#30340;&#20840;&#37096;&#35774;&#32622;&#65292;&#23588;&#20854;&#26159;&#23436;&#25972;&#30340;&#23646;&#24615;&#21015;&#34920;&#12289;&#23383;&#27573;&#21015;&#34920;&#12290;&#22312;&#29256;&#26412;0.9.9-rc2&#20043;&#21069;&#65292;&#36825;&#20010;&#21629;&#20196;&#26159;&#30001;search&#24037;&#20855;&#25552;&#20379;&#30340;&#12290;
CLI search utility.
</li>
<li class="listitem"><code class="option">--dumpconfig FILENAME.sph</code> &#20174;&#32473;&#23450;&#30340;&#32034;&#24341;&#22836;&#25991;&#20214;&#23548;&#20986;<code class="filename">sphinx.conf</code>&#25991;&#20214;&#26684;&#24335;&#20860;&#23481;&#65288;&#22522;&#26412;&#19978;&#65289;&#30340;&#32034;&#24341;&#37197;&#32622;&#20449;&#24687;&#12290;&#29256;&#26412;2.0.1-beta&#26032;&#22686;&#12290;
</li>
<li class="listitem"><code class="option">--dumpheader INDEXNAME</code> &#36755;&#20986;&#32473;&#23450;&#32034;&#24341;&#21517;&#30340;&#32034;&#24341;&#22836;&#20869;&#23481;&#65292;&#32034;&#24341;&#22836;&#25991;&#20214;&#30340;&#36335;&#24452;&#26159;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#26597;&#24471;&#30340;&#12290;
</li>
<li class="listitem"><code class="option">--dumpdocids INDEXNAME</code> &#36755;&#20986;&#32473;&#23450;&#32034;&#24341;&#21517;&#28041;&#21450;&#30340;&#25991;&#26723;ID&#12290;&#25968;&#25454;&#26159;&#20174;&#23646;&#24615;&#25991;&#20214;(.spa)&#20013;&#25277;&#21462;&#30340;&#65292;&#22240;&#27492;&#35201;&#27714;doc_info=extern&#27491;&#24120;&#24037;&#20316;&#12290; 
</li>
<li class="listitem"><code class="option">--dumphitlist INDEXNAME KEYWORD</code> &#36755;&#20986;&#25351;&#23450;&#20851;&#38190;&#23383;KEYWORD&#22312;&#25191;&#34892;&#32034;&#24341;&#20013;&#30340;&#30340;&#20840;&#37096;&#20986;&#29616;&#12290; 
</li>
<li class="listitem"><code class="option">--dumphitlist INDEXNAME --wordid ID</code> &#36755;&#20986;&#25351;&#23450;&#20851;&#38190;&#23383;KEYWORD&#22312;&#25191;&#34892;&#32034;&#24341;&#20013;&#30340;&#30340;&#20840;&#37096;&#20986;&#29616;&#65292;&#20294;&#26159;&#20851;&#38190;&#23383;&#20351;&#29992;&#29305;&#23450;&#30340;&#20869;&#37096;&#25968;&#23383;&#32534;&#21495;&#12290;
</li>
<li class="listitem"><code class="option">--htmlstrip INDEXNAME</code> &#20351;&#29992;&#25351;&#23450;&#30340;&#32034;&#24341;&#20013;&#30340;HTML&#21093;&#31163;&#22120;&#35774;&#32622;&#26469;&#36807;&#28388;&#26631;&#20934;&#36755;&#20837;&#24182;&#25171;&#21360;&#36807;&#28388;&#32467;&#26524;&#21040;&#26631;&#20934;&#36755;&#20986;&#12290;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#37197;&#32622;&#20449;&#24687;&#20174;sphinx.conf&#20013;&#33719;&#24471;&#65292;&#32780;&#19981;&#26159;&#20174;&#32034;&#24341;&#22836;&#25991;&#20214;&#20013;&#33719;&#24471;&#12290;
</li>
<li class="listitem"><code class="option">--check INDEXNAME</code> &#26816;&#26597;&#21487;&#33021;&#30001;&#20110;<code class="filename">indexer</code>&#30340;bug&#25110;&#32773;&#30828;&#20214;&#38382;&#39064;&#23548;&#33268;&#30340;&#32034;&#24341;&#25968;&#25454;&#19968;&#33268;&#24615;&#38169;&#35823;&#12290;
</li>
<li class="listitem"><code class="option">--strip-path</code> &#29992;&#20110;&#21435;&#38500;&#32034;&#24341;&#20013;&#25152;&#26377;&#24341;&#29992;&#21040;&#30340;&#25991;&#20214;&#21517;&#20013;&#30340;&#36335;&#24452;&#21517; (stopwords, wordforms,
exceptions, &#31561;&#31561;). &#36825;&#26377;&#21161;&#20110;&#32487;&#32493;&#20351;&#29992;&#22312;&#20854;&#20182;&#21487;&#33021;&#36335;&#24452;&#24067;&#23616;&#19981;&#21516;&#30340;&#26426;&#22120;&#19978;&#24314;&#31435;&#30340;&#32034;&#24341;&#12290;
</li>
</ul></div></div></div>
<div class="chapter" title="&#31532;&nbsp;7&nbsp;&#31456;&nbsp;SphinxQL &#25351;&#21335;"><div class="titlepage"><div><div><h2 class="title"><a name="sphinxql-reference"></a>&#31532;&nbsp;7&nbsp;&#31456;&nbsp;SphinxQL &#25351;&#21335;</h2></div></div></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="sect1"><a href="#sphinxql-select">7.1. SELECT&#65288;&#25628;&#32034;&#26597;&#35810;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-show-meta">7.2. SHOW META&#65288;&#26174;&#31034;&#26597;&#35810;&#29366;&#24577;&#20449;&#24687;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-show-warnings">7.3. SHOW WARNINGS&#65288;&#26174;&#31034;&#26597;&#35810;&#35686;&#21578;&#20449;&#24687;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-show-status">7.4. SHOW STATUS&#65288;&#26174;&#31034;&#26381;&#21153;&#31471;&#29366;&#24577;&#20449;&#24687;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-insert">7.5. INSERT &#21644; REPLACE&#65288;&#25968;&#25454;&#25554;&#20837;&#21644;&#26367;&#25442;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-delete">7.6. DELETE&#65288;&#25968;&#25454;&#21024;&#38500;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-set">7.7. SET&#65288;&#35774;&#32622;&#26381;&#21153;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-commit">7.8. BEGIN, COMMIT, &#20197;&#21450; ROLLBACK&#65288;&#20107;&#21153;&#22788;&#29702;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-call-snippets">7.9. CALL SNIPPETS&#65288;&#25688;&#35201;&#29983;&#25104;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-call-keywords">7.10. CALL KEYWORDS&#65288;&#20851;&#38190;&#35789;&#29983;&#25104;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-show-tables">7.11. SHOW TABLES&#65288;&#26174;&#31034;&#24403;&#21069;&#25552;&#20379;&#25628;&#32034;&#26381;&#21153;&#30340;&#32034;&#24341;&#21015;&#34920;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-describe">7.12. DESCRIBE&#65288;&#26174;&#31034;&#25351;&#23450;&#25628;&#32034;&#26381;&#21153;&#32034;&#24341;&#30340;&#23383;&#27573;&#20449;&#24687;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-create-function">7.13. CREATE FUNCTION&#65288;&#28155;&#21152;&#33258;&#23450;&#20041;&#20989;&#25968;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-drop-function">7.14. DROP FUNCTION&#65288;&#21024;&#38500;&#33258;&#23450;&#20041;&#20989;&#25968;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-show-variables">7.15. SHOW VARIABLES&#65288;&#26174;&#31034;&#26381;&#21153;&#22120;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-show-variables">7.16. SHOW COLLATION&#65288;&#26174;&#31034;&#23383;&#31526;&#38598;&#26657;&#23545;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-update">7.17. UPDATE&#65288;&#25968;&#25454;&#26356;&#26032;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-multi-queries">7.18. &#22810;&#32467;&#26524;&#38598;&#26597;&#35810;&#65288;&#25209;&#37327;&#26597;&#35810;&#65289;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-comment-syntax">7.19. COMMIT&#65288;&#27880;&#37322;&#65289;&#35821;&#27861;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-reserved-keywords">7.20. SphinxQL &#20445;&#30041;&#20851;&#38190;&#23383;&#21015;&#34920;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxql-upgrading-magics">7.21. SphinxQL &#21319;&#32423;&#22791;&#27880;, version 2.0.1-beta</a></span></dt>
</dl></div>
<p>
SphinxQL&#26159;&#26377;&#25105;&#20204;&#33258;&#24049;&#29305;&#33394;&#30340;SQL&#23376;&#38598;&#65292;&#36890;&#36807;&#20351;&#29992;&#26631;&#20934;&#30340;SQL&#35821;&#21477;&#24182;&#21152;&#19978;Sphinx&#29305;&#23450;&#30340;&#25193;&#23637;&#65292;&#23558;&#25628;&#32034;&#39547;&#23432;&#36827;&#31243;&#30340;&#21151;&#33021;&#23545;&#22806;&#25552;&#20379;&#12290;&#25152;&#26377;&#36890;&#36807;SphinxAPI&#25552;&#20379;&#30340;&#21151;&#33021;&#37117;&#21487;&#20197;&#36890;&#36807;SphinxQL&#35775;&#38382;&#65292;&#19981;&#36807;&#21453;&#36807;&#26469;&#21017;&#19981;&#34892;&#65292;&#20363;&#22914;&#23545;RT&#32034;&#24341;&#30340;&#20889;&#25805;&#20316;&#21482;&#33021;&#36890;&#36807;SPhinxQL&#12290;&#26412;&#31456;&#30340;&#25991;&#26723;&#21015;&#20986;&#20102;&#25152;&#25903;&#25345;&#30340;SphinxQL&#35821;&#21477;&#30340;&#35821;&#27861;&#12290;
</p><div class="sect1" title="7.1.&nbsp;SELECT&#65288;&#25628;&#32034;&#26597;&#35810;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-select"></a>7.1.&nbsp;SELECT&#65288;&#25628;&#32034;&#26597;&#35810;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
SELECT
    select_expr [, select_expr ...]
    FROM index [, index2 ...]
    [WHERE where_condition]
    [GROUP BY {col_name | expr_alias}]
    [ORDER BY {col_name | expr_alias} {ASC | DESC} [, ...]]
    [WITHIN GROUP ORDER BY {col_name | expr_alias} {ASC | DESC}]
    [LIMIT offset, row_count]
    [OPTION opt_name = opt_value [, ...]]
</pre><p>
<span class="bold"><strong>SELECT</strong></span> &#35821;&#21477;&#22312;&#29256;&#26412;0.9.9-rc2&#24341;&#20837;&#12290;	&#20854;&#35821;&#27861;&#22522;&#20110;&#36890;&#24120;&#30340;SQL&#65292;&#20294;&#26159;&#21152;&#20837;&#20102;&#19968;&#20123;Sphinx&#29305;&#23450;&#30340;&#25193;&#23637;&#65292;&#24182;&#30465;&#30053;&#20102;&#19968;&#20123;&#21151;&#33021;&#65288;&#20363;&#22914;&#65288;&#30446;&#21069;&#65289;&#19981;&#25903;&#25345;&#22810;&#34920;&#32852;&#21512;(JOIN)&#65289;&#12290;&#29305;&#21035;&#30340;&#65292;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Column list clause. Column names, arbitrary expressions,
and star ('*') are all allowed (ie.
<code class="code">SELECT @id, group_id*123+456 AS expr1 FROM test1</code>
will work). Unlike in regular SQL, all computed expressions must be aliased
with a valid identifier. Starting with version 2.0.1-beta, <code class="code">AS</code>
is optional. Special names such as @id and @weight should currently
be used with leading at-sign. This at-sign requirement will be lifted in
the future.
</li>
<li class="listitem">FROM clause. FROM clause should contain the list of indexes
to search through. Unlike in regular SQL, comma means enumeration of
full-text indexes as in <a class="link" href="#api-func-query" title="8.6.1.&nbsp;Query &#65288;&#26597;&#35810;&#65289;">Query()</a>
API call rather than JOIN.
</li>
<li class="listitem">WHERE clause. This clause will map both to fulltext query
and filters. Comparison operators (=, !=, &lt;, &gt;, &lt;=, &gt;=), IN,
AND, NOT, and BETWEEN are all supported and map directly to filters.
OR is not supported yet but will be in the future. MATCH('query')
is supported and maps to fulltext query. Query will be interpreted
according to <a class="link" href="#extended-syntax" title="5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;">full-text query language rules</a>.
There must be at most one MATCH() in the clause. Starting with version
2.0.1-beta, <code class="code">{col_name | expr_alias} [NOT] IN @uservar</code>
condition syntax is supported. (Refer to <a class="xref" href="#sphinxql-set" title="7.7.&nbsp;SET&#65288;&#35774;&#32622;&#26381;&#21153;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;">&#31532;&nbsp;7.7&nbsp;&#33410; &#8220;SET&#65288;&#35774;&#32622;&#26381;&#21153;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;&#8221;</a>
for a discussion of global user variables.)
</li>
<li class="listitem">GROUP BY clause. Currently only supports grouping by a single
column. The column however can be a computed expression:
<pre class="programlisting">
SELECT *, group_id*1000+article_type AS gkey FROM example GROUP BY gkey
</pre>
Aggregate functions (AVG(), MIN(), MAX(), SUM()) in column list
clause are supported. Arguments to aggregate functions can be either
plain attributes or arbitrary expressions. COUNT(*) is implicitly
supported as using GROUP BY will add @count column to result set.
Explicit support might be added in the future. COUNT(DISTINCT attr)
is supported. Currently there can be at most one COUNT(DISTINCT)
per query and an argument needs to be an attribute. Both current
restrictions on COUNT(DISTINCT) might be lifted in the future.
<pre class="programlisting">
SELECT *, AVG(price) AS avgprice, COUNT(DISTINCT storeid)
FROM products
WHERE MATCH('ipod')
GROUP BY vendorid
</pre>
Starting with 2.0.1-beta, GROUP BY on a string attribute is supported,
with respect for current collation (&#21442;&#35265; <a class="xref" href="#collations" title="5.12.&nbsp;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;">&#31532;&nbsp;5.12&nbsp;&#33410; &#8220;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;&#8221;</a>).
</li>
<li class="listitem">WITHIN GROUP ORDER BY clause. This is a Sphinx specific
extension that lets you control how the best row within a group
will to be selected. The syntax matches that of regular ORDER BY
clause:
<pre class="programlisting">
SELECT *, INTERVAL(posted,NOW()-7*86400,NOW()-86400) AS timeseg
FROM example WHERE MATCH('my search query')
GROUP BY siteid
WITHIN GROUP ORDER BY @weight DESC
ORDER BY timeseg DESC, @weight DESC
</pre>
Starting with 2.0.1-beta, WITHIN GROUP ORDER BY on a string attribute is supported,
with respect for current collation (&#21442;&#35265; <a class="xref" href="#collations" title="5.12.&nbsp;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;">&#31532;&nbsp;5.12&nbsp;&#33410; &#8220;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;&#8221;</a>).
</li>
<li class="listitem">ORDER BY clause. Unlike in regular SQL, only column names
(not expressions) are allowed and explicit ASC and DESC are required.
The columns however can be computed expressions:
<pre class="programlisting">
SELECT *, @weight*10+docboost AS skey FROM example ORDER BY skey
</pre>
Starting with 2.0.1-beta, ORDER BY on a string attribute is supported,
with respect for current collation (&#21442;&#35265; <a class="xref" href="#collations" title="5.12.&nbsp;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;">&#31532;&nbsp;5.12&nbsp;&#33410; &#8220;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;&#8221;</a>).
</li>
<li class="listitem">LIMIT clause. Both LIMIT N and LIMIT M,N forms are supported.
Unlike in regular SQL (but like in Sphinx API), an implicit LIMIT 0,20
is present by default.
</li>
<li class="listitem">OPTION clause. This is a Sphinx specific extension that
lets you control a number of per-query options. The syntax is:
<pre class="programlisting">
OPTION &lt;optionname&gt;=&lt;value&gt; [ , ... ]
</pre>
Supported options and respectively allowed values are:
<div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">'ranker' - any of 'proximity_bm25', 'bm25', 'none', 'wordcount', 'proximity', 'matchany', or 'fieldmask'</li>
<li class="listitem">'max_matches' - integer (per-query max matches value)</li>
<li class="listitem">'cutoff' - integer (max found matches threshold)</li>
<li class="listitem">'max_query_time' - integer (max search time threshold, msec)</li>
<li class="listitem">'retry_count' - integer (distributed retries count)</li>
<li class="listitem">'retry_delay' - integer (distributed retry delay, msec)</li>
<li class="listitem">'field_weights' - a named integer list (per-field user weights for ranking)</li>
<li class="listitem">'index_weights' - a named integer list (per-index user weights for ranking)</li>
<li class="listitem">'reverse_scan' - 0 or 1, lets you control the order in which full-scan query processes the rows</li>
</ul></div>

Example:
<pre class="programlisting">
SELECT * FROM test WHERE MATCH('@title hello @body world')
OPTION ranker=bm25, max_matches=3000,
    field_weights=(title=10, body=3)
</pre></li>
</ul></div>
<p>
</p></div>
<div class="sect1" title="7.2.&nbsp;SHOW META&#65288;&#26174;&#31034;&#26597;&#35810;&#29366;&#24577;&#20449;&#24687;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-show-meta"></a>7.2.&nbsp;SHOW META&#65288;&#26174;&#31034;&#26597;&#35810;&#29366;&#24577;&#20449;&#24687;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
SHOW META
</pre><p><span class="bold"><strong>SHOW META</strong></span> shows additional meta-information about the latest
query such as query time and keyword statistics:
</p><pre class="programlisting">
mysql&gt; SELECT * FROM test1 WHERE MATCH('test|one|two');
+------+--------+----------+------------+
| id   | weight | group_id | date_added |
+------+--------+----------+------------+
|    1 |   3563 |      456 | 1231721236 |
|    2 |   2563 |      123 | 1231721236 |
|    4 |   1480 |        2 | 1231721236 |
+------+--------+----------+------------+
3 rows in set (0.01 sec)

mysql&gt; SHOW META;
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| total         | 3     |
| total_found   | 3     |
| time          | 0.005 |
| keyword[0]    | test  |
| docs[0]       | 3     |
| hits[0]       | 5     |
| keyword[1]    | one   |
| docs[1]       | 1     |
| hits[1]       | 2     |
| keyword[2]    | two   |
| docs[2]       | 1     |
| hits[2]       | 2     |
+---------------+-------+
12 rows in set (0.00 sec)
</pre><p>
</p></div>
<div class="sect1" title="7.3.&nbsp;SHOW WARNINGS&#65288;&#26174;&#31034;&#26597;&#35810;&#35686;&#21578;&#20449;&#24687;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-show-warnings"></a>7.3.&nbsp;SHOW WARNINGS&#65288;&#26174;&#31034;&#26597;&#35810;&#35686;&#21578;&#20449;&#24687;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
SHOW WARNINGS
</pre><p><span class="bold"><strong>SHOW WARNINGS</strong></span> statement, introduced in version 0.9.9-rc2,
can be used to retrieve the warning
produced by the latest query. The error message will be returned along with
the query itself:
</p><pre class="programlisting">
mysql&gt; SELECT * FROM test1 WHERE MATCH('@@title hello') \G
ERROR 1064 (42000): index test1: syntax error, unexpected TOK_FIELDLIMIT
near '@title hello'

mysql&gt; SELECT * FROM test1 WHERE MATCH('@title -hello') \G
ERROR 1064 (42000): index test1: query is non-computable (single NOT operator)

mysql&gt; SELECT * FROM test1 WHERE MATCH('"test doc"/3') \G
*************************** 1. row ***************************
        id: 4
    weight: 2500
  group_id: 2
date_added: 1231721236
1 row in set, 1 warning (0.00 sec)

mysql&gt; SHOW WARNINGS \G
*************************** 1. row ***************************
  Level: warning
   Code: 1000
Message: quorum threshold too high (words=2, thresh=3); replacing quorum operator
         with AND operator
1 row in set (0.00 sec)
</pre><p>
</p></div>
<div class="sect1" title="7.4.&nbsp;SHOW STATUS&#65288;&#26174;&#31034;&#26381;&#21153;&#31471;&#29366;&#24577;&#20449;&#24687;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-show-status"></a>7.4.&nbsp;SHOW STATUS&#65288;&#26174;&#31034;&#26381;&#21153;&#31471;&#29366;&#24577;&#20449;&#24687;&#65289;&#35821;&#27861;</h2></div></div></div>
<p><span class="bold"><strong>SHOW STATUS</strong></span>, introduced in version 0.9.9-rc2,
displays a number of useful performance counters. IO and CPU
counters will only be available if searchd was started with --iostats and --cpustats
switches respectively.
</p><pre class="programlisting">
mysql&gt; SHOW STATUS;
+--------------------+-------+
| Variable_name      | Value |
+--------------------+-------+
| uptime             | 216   |
| connections        | 3     |
| maxed_out          | 0     |
| command_search     | 0     |
| command_excerpt    | 0     |
| command_update     | 0     |
| command_keywords   | 0     |
| command_persist    | 0     |
| command_status     | 0     |
| agent_connect      | 0     |
| agent_retry        | 0     |
| queries            | 10    |
| dist_queries       | 0     |
| query_wall         | 0.075 |
| query_cpu          | OFF   |
| dist_wall          | 0.000 |
| dist_local         | 0.000 |
| dist_wait          | 0.000 |
| query_reads        | OFF   |
| query_readkb       | OFF   |
| query_readtime     | OFF   |
| avg_query_wall     | 0.007 |
| avg_query_cpu      | OFF   |
| avg_dist_wall      | 0.000 |
| avg_dist_local     | 0.000 |
| avg_dist_wait      | 0.000 |
| avg_query_reads    | OFF   |
| avg_query_readkb   | OFF   |
| avg_query_readtime | OFF   |
+--------------------+-------+
29 rows in set (0.00 sec)
</pre><p>
</p></div>
<div class="sect1" title="7.5.&nbsp;INSERT &#21644; REPLACE&#65288;&#25968;&#25454;&#25554;&#20837;&#21644;&#26367;&#25442;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-insert"></a>7.5.&nbsp;INSERT &#21644; REPLACE&#65288;&#25968;&#25454;&#25554;&#20837;&#21644;&#26367;&#25442;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
{INSERT | REPLACE} INTO index [(column, ...)]
	VALUES (value, ...)
	[, (...)]
</pre><p>
INSERT statement, introduced in version 1.10-beta, is only supported for RT indexes.
It inserts new rows (documents) into an existing index, with the provided column values.
</p><p>
ID column must be present in all cases. Rows with duplicate IDs will <span class="bold"><strong>not</strong></span>
be overwritten by INSERT; use REPLACE to do that.
</p><p>
<code class="option">index</code> is the name of RT index into which the new row(s)
should be inserted. The optional column names list lets you only explicitly specify
values for some of the columns present in the index. All the other columns will be
filled with their default values (0 for scalar types, empty string for text types).
</p><p>
Expressions are not currently supported in INSERT and values should be explicitly
specified.
</p><p>
Multiple rows can be inserted using a single INSERT statement by providing
several comma-separated, parens-enclosed lists of rows values.
</p></div>
<div class="sect1" title="7.6.&nbsp;DELETE&#65288;&#25968;&#25454;&#21024;&#38500;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-delete"></a>7.6.&nbsp;DELETE&#65288;&#25968;&#25454;&#21024;&#38500;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
DELETE FROM index WHERE {id = value | id IN (val1 [, val2 [, ...]])}
</pre><p>
DELETE statement, introduced in version 1.10-beta, is only supported for RT indexes.
It deletes existing rows (documents) from an existing index based on ID.
</p><p>
<code class="option">index</code> is the name of RT index from which the row should be deleted.
<code class="option">value</code> is the row ID to be deleted. Support for batch
<code class="code">id IN (2,3,5)</code> syntax was added in version 2.0.1-beta.
</p><p>
Additional types of WHERE conditions (such as conditions on attributes, etc)
are planned, but not supported yet as of 1.10-beta.
</p></div>
<div class="sect1" title="7.7.&nbsp;SET&#65288;&#35774;&#32622;&#26381;&#21153;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-set"></a>7.7.&nbsp;SET&#65288;&#35774;&#32622;&#26381;&#21153;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
SET [GLOBAL] server_variable_name = value
SET GLOBAL @user_variable_name = (int_val1 [, int_val2, ...])
</pre><p>
SET statement, introduced in version 1.10-beta, modifies a server variable value.
The variable names are case-insensitive. No variable value changes survive
server restart. There are the following classes of the variables:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">per-session server variable (1.10-beta and above)</li>
<li class="listitem">global server variable (2.0.1-beta and above)</li>
<li class="listitem">global user variable (2.0.1-beta and above)</li>
</ol></div>
<p>
</p><p>
Global user variables are shared between concurrent sessions. Currently,
the only supported value type is the list of BIGINTs, and these variables
can only be used along with IN() for filtering purpose. The intended usage
scenario is uploading huge lists of values to <code class="filename">searchd</code>
(once) and reusing them (many times) later, saving on network overheads.
Example:
</p><pre class="programlisting">
// in session 1
mysql&gt; SET GLOBAL @myfilter=(2,3,5,7,11,13);
Query OK, 0 rows affected (0.00 sec)

// later in session 2
mysql&gt; SELECT * FROM test1 WHERE group_id IN @myfilter;
+------+--------+----------+------------+-----------------+------+
| id   | weight | group_id | date_added | title           | tag  |
+------+--------+----------+------------+-----------------+------+
|    3 |      1 |        2 | 1299338153 | another doc     | 15   |
|    4 |      1 |        2 | 1299338153 | doc number four | 7,40 |
+------+--------+----------+------------+-----------------+------+
2 rows in set (0.02 sec)
</pre><p>
</p><p>
Per-session and global server variables affect certain server settings in the respective scope.
Known per-session server variables are:
</p><div class="variablelist"><dl><dt><span class="term"><code class="code">AUTOCOMMIT = {0 | 1}</code></span></dt>
<dd>
Whether any data modification statement should be implicitly
wrapped by BEGIN and COMMIT.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</dd><dt><span class="term"><code class="code">COLLATION_CONNECTION = collation_name</code></span></dt>
<dd>
Selects the collation to be used for ORDER BY or GROUP BY on string
values in the subsequent queries. Refer to <a class="xref" href="#collations" title="5.12.&nbsp;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;">&#31532;&nbsp;5.12&nbsp;&#33410; &#8220;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;&#8221;</a>
for a list of known collation names.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</dd><dt><span class="term"><code class="code">CHARACTER_SET_RESULTS = charset_name</code></span></dt>
<dd>
Does nothing; a placeholder to support frameworks, clients, and
connectors that attempt to automatically enforce a charset when
connecting to a Sphinx server.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</dd></dl></div>
<p>
</p><p>
Known global server variables are:
</p><div class="variablelist"><dl><dt><span class="term"><code class="code">QUERY_LOG_FORMAT = {plain | sphinxql}</code></span></dt>
<dd>
Changes the current log format.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</dd><dt><span class="term"><code class="code">LOG_LEVEL = {info | debug | debugv | debugvv}</code></span></dt>
<dd>
Changes the current log verboseness level.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</dd></dl></div>
<p>
</p><p>
Examples:
</p><pre class="programlisting">
mysql&gt; SET autocommit=0;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; SET GLOBAL query_log_format=sphinxql;
Query OK, 0 rows affected (0.00 sec)
</pre><p>
</p></div>
<div class="sect1" title="7.8.&nbsp;BEGIN, COMMIT, &#20197;&#21450; ROLLBACK&#65288;&#20107;&#21153;&#22788;&#29702;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-commit"></a>7.8.&nbsp;BEGIN, COMMIT, &#20197;&#21450; ROLLBACK&#65288;&#20107;&#21153;&#22788;&#29702;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
START TRANSACTION | BEGIN
COMMIT
ROLLBACK
SET AUTOCOMMIT = {0 | 1}
</pre><p>
BEGIN, COMMIT, and ROLLBACK statements were &#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
BEGIN statement (or its START TRANSACTION alias) forcibly commits pending
transaction, if any, and begins a new one. COMMIT statement commits the current
transaction, making all its changes permanent. ROLLBACK statement rolls back the
current transaction, canceling all its changes. SET AUTOCOMMIT controls the
autocommit mode in the active session.
</p><p>
AUTOCOMMIT is set to 1 by default, meaning that every statement that perfoms
any changes on any index is implicitly wrapped in BEGIN and COMMIT.
</p><p>
Transactions are limited to a single RT index, and also limited in size.
They are atomic, consistent, overly isolated, and durable. Overly isolated
means that the changes are not only invisible to the concurrent transactions
but even to the current session itself.
</p></div>
<div class="sect1" title="7.9.&nbsp;CALL SNIPPETS&#65288;&#25688;&#35201;&#29983;&#25104;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-call-snippets"></a>7.9.&nbsp;CALL SNIPPETS&#65288;&#25688;&#35201;&#29983;&#25104;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
CALL SNIPPETS(data, index, query[, opt_value AS opt_name[, ...]])
</pre><p>
CALL SNIPPETS statement, introduced in version 1.10-beta, builds a snippet
from provided data and query, using specified index settings.
</p><p>
<code class="option">data</code> is the source data string to extract a snippet from.
<code class="option">index</code> is the name of the index from which to take the text
processing settings. <code class="option">query</code> is the full-text query to build
snippets for. Additional options are documented in
<a class="xref" href="#api-func-buildexcerpts" title="8.7.1.&nbsp;BuildExcerpts &#65288;&#20135;&#29983;&#25991;&#26412;&#25688;&#35201;&#21644;&#39640;&#20142;&#65289;">&#31532;&nbsp;8.7.1&nbsp;&#33410; &#8220;BuildExcerpts &#65288;&#20135;&#29983;&#25991;&#26412;&#25688;&#35201;&#21644;&#39640;&#20142;&#65289;&#8221;</a>. Usage example:
</p><pre class="programlisting">
CALL SNIPPETS('this is my document text', 'test1', 'hello world',
    5 AS around, 200 AS limit)
</pre></div>
<div class="sect1" title="7.10.&nbsp;CALL KEYWORDS&#65288;&#20851;&#38190;&#35789;&#29983;&#25104;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-call-keywords"></a>7.10.&nbsp;CALL KEYWORDS&#65288;&#20851;&#38190;&#35789;&#29983;&#25104;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
CALL KEYWORDS(text, index, [hits])
</pre><p>
CALL KEYWORDS statement, introduced in version 1.10-beta, splits text
into particular keywords. It returns tokenized and normalized forms
of the keywords, and, optionally, keyword statistics.
</p><p>
<code class="option">text</code> is the text to break down to keywords.
<code class="option">index</code> is the name of the index from which to take the text
processing settings. <code class="option">hits</code> is an optional boolean parameter
that specifies whether to return document and hit occurrence statistics.
</p></div>
<div class="sect1" title="7.11.&nbsp;SHOW TABLES&#65288;&#26174;&#31034;&#24403;&#21069;&#25552;&#20379;&#25628;&#32034;&#26381;&#21153;&#30340;&#32034;&#24341;&#21015;&#34920;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-show-tables"></a>7.11.&nbsp;SHOW TABLES&#65288;&#26174;&#31034;&#24403;&#21069;&#25552;&#20379;&#25628;&#32034;&#26381;&#21153;&#30340;&#32034;&#24341;&#21015;&#34920;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
SHOW TABLES
</pre><p>
SHOW TABLES statement, introduced in version 2.0.1-beta, enumerates
all currently active indexes along with their types. As of 2.0.1-beta,
existing index types are <code class="option">local</code>, <code class="option">distributed</code>,
and <code class="option">rt</code> respectively.
Example:
</p><pre class="programlisting">
mysql&gt; SHOW TABLES;
+-------+-------------+
| Index | Type        |
+-------+-------------+
| dist1 | distributed |
| rt    | rt          |
| test1 | local       |
| test2 | local       |
+-------+-------------+
4 rows in set (0.00 sec)
</pre><p>
</p></div>
<div class="sect1" title="7.12.&nbsp;DESCRIBE&#65288;&#26174;&#31034;&#25351;&#23450;&#25628;&#32034;&#26381;&#21153;&#32034;&#24341;&#30340;&#23383;&#27573;&#20449;&#24687;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-describe"></a>7.12.&nbsp;DESCRIBE&#65288;&#26174;&#31034;&#25351;&#23450;&#25628;&#32034;&#26381;&#21153;&#32034;&#24341;&#30340;&#23383;&#27573;&#20449;&#24687;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
{DESC | DESCRIBE} index
</pre><p>
DESCRIBE statement, introduced in version 2.0.1-beta, lists
index columns and their associated types. Columns are document ID,
full-text fields, and attributes. The order matches that in which
fields and attributes are expected by INSERT and REPLACE statements.
As of 2.0.1-beta, column types are <code class="option">field</code>,
<code class="option">integer</code>, <code class="option">timestamp</code>,
<code class="option">ordinal</code>, <code class="option">bool</code>,
<code class="option">float</code>, <code class="option">bigint</code>,
<code class="option">string</code>, and <code class="option">mva</code>.
ID column will be typed either <code class="option">integer</code>
or <code class="option">bigint</code> based on whether the binaries
were built with 32-bit or 64-bit document ID support.
Example:
</p><pre class="programlisting">
mysql&gt; DESC rt;
+---------+---------+
| Field   | Type    |
+---------+---------+
| id      | integer |
| title   | field   |
| content | field   |
| gid     | integer |
+---------+---------+
4 rows in set (0.00 sec)
</pre></div>
<div class="sect1" title="7.13.&nbsp;CREATE FUNCTION&#65288;&#28155;&#21152;&#33258;&#23450;&#20041;&#20989;&#25968;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-create-function"></a>7.13.&nbsp;CREATE FUNCTION&#65288;&#28155;&#21152;&#33258;&#23450;&#20041;&#20989;&#25968;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
CREATE FUNCTION udf_name
	RETURNS {INT | BIGINT | FLOAT}
	SONAME 'udf_lib_file'
</pre><p>
CREATE FUNCTION statement, introduced in version 2.0.1-beta,
installs a <a class="link" href="#udf" title="5.13.&nbsp;&#29992;&#25143;&#33258;&#23450;&#20041;&#20989;&#25968; (UDF)">user-defined function (UDF)</a>
with the given name and type from the given library file.
The library file must reside in a trusted
<a class="link" href="#conf-plugin-dir" title="11.4.35.&nbsp;plugin_dir&#65306;&#25554;&#20214;&#30446;&#24405;">plugin_dir</a> directory.
On success, the function is available for use in all subsequent
queries that the server receives. Example:
</p><pre class="programlisting">
mysql&gt; CREATE FUNCTION avgmva RETURNS INT SONAME 'udfexample.dll';
Query OK, 0 rows affected (0.03 sec)

mysql&gt; SELECT *, AVGMVA(tag) AS q from test1;
+------+--------+---------+-----------+
| id   | weight | tag     | q         |
+------+--------+---------+-----------+
|    1 |      1 | 1,3,5,7 | 4.000000  |
|    2 |      1 | 2,4,6   | 4.000000  |
|    3 |      1 | 15      | 15.000000 |
|    4 |      1 | 7,40    | 23.500000 |
+------+--------+---------+-----------+
</pre></div>
<div class="sect1" title="7.14.&nbsp;DROP FUNCTION&#65288;&#21024;&#38500;&#33258;&#23450;&#20041;&#20989;&#25968;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-drop-function"></a>7.14.&nbsp;DROP FUNCTION&#65288;&#21024;&#38500;&#33258;&#23450;&#20041;&#20989;&#25968;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
DROP FUNCTION udf_name
</pre><p>
DROP FUNCTION statement, introduced in version 2.0.1-beta,
deinstalls a <a class="link" href="#udf" title="5.13.&nbsp;&#29992;&#25143;&#33258;&#23450;&#20041;&#20989;&#25968; (UDF)">user-defined function (UDF)</a>
with the given name. On success, the function is no longer available
for use in subsequent queries. Pending concurrent queries will not be
affected and the library unload, if necessary, will be postponed
until those queries complete. Example:
</p><pre class="programlisting">
mysql&gt; DROP FUNCTION avgmva;
Query OK, 0 rows affected (0.00 sec)
</pre></div>
<div class="sect1" title="7.15.&nbsp;SHOW VARIABLES&#65288;&#26174;&#31034;&#26381;&#21153;&#22120;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-show-variables"></a>7.15.&nbsp;SHOW VARIABLES&#65288;&#26174;&#31034;&#26381;&#21153;&#22120;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
SHOW VARIABLES
</pre><p>
Added in version 2.0.1-beta, this is currently a placeholder 
query that does nothing and reports success. That is in order
to keep compatibility with frameworks and connectors that
automatically execute this statement.
</p><pre class="programlisting">
mysql&gt; SHOW VARIABLES;
Query OK, 0 rows affected (0.00 sec)
</pre></div>
<div class="sect1" title="7.16.&nbsp;SHOW COLLATION&#65288;&#26174;&#31034;&#23383;&#31526;&#38598;&#26657;&#23545;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-show-variables"></a>7.16.&nbsp;SHOW COLLATION&#65288;&#26174;&#31034;&#23383;&#31526;&#38598;&#26657;&#23545;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
SHOW COLLATION
</pre><p>
Added in version 2.0.1-beta, this is currently a placeholder 
query that does nothing and reports success. That is in order
to keep compatibility with frameworks and connectors that
automatically execute this statement.
</p><pre class="programlisting">
mysql&gt; SHOW COLLATION;
Query OK, 0 rows affected (0.00 sec)
</pre></div>
<div class="sect1" title="7.17.&nbsp;UPDATE&#65288;&#25968;&#25454;&#26356;&#26032;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-update"></a>7.17.&nbsp;UPDATE&#65288;&#25968;&#25454;&#26356;&#26032;&#65289;&#35821;&#27861;</h2></div></div></div>
<pre class="programlisting">
UPDATE index SET col1 = newval1 [, ...] WHERE ID = docid
</pre><p>
UPDATE statement was added in version 2.0.1-beta. It can currently
update 32-bit integer attributes only. Multiple attributes and values
can be specified. Both RT and disk indexes are supported.
Updates on other attribute types are also planned.
</p><pre class="programlisting">
mysql&gt; UPDATE myindex SET enabled=0 WHERE id=123;
Query OK, 1 rows affected (0.00 sec)
</pre></div>
<div class="sect1" title="7.18.&nbsp;&#22810;&#32467;&#26524;&#38598;&#26597;&#35810;&#65288;&#25209;&#37327;&#26597;&#35810;&#65289;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-multi-queries"></a>7.18.&nbsp;&#22810;&#32467;&#26524;&#38598;&#26597;&#35810;&#65288;&#25209;&#37327;&#26597;&#35810;&#65289;</h2></div></div></div>
<p>
Starting version 2.0.1-beta, SphinxQL supports multi-statement
queries, or batches. Possible inter-statement optimizations described
in <a class="xref" href="#multi-queries" title="5.11.&nbsp;&#25209;&#37327;&#26597;&#35810;">&#31532;&nbsp;5.11&nbsp;&#33410; &#8220;&#25209;&#37327;&#26597;&#35810;&#8221;</a> do apply to SphinxQL just as well.
The batched queries should be separated by a semicolon. Your MySQL
client library needs to support MySQL multi-query mechanism and
multiple result set. For instance, mysqli interface in PHP
and DBI/DBD libraries in Perl are known to work.
</p><p>
Here's a PHP sample showing how to utilize mysqli interface
with Sphinx.
</p><pre class="programlisting">
&lt;?php

$link = mysqli_connect ( "127.0.0.1", "root", "", "", 9306 );
if ( mysqli_connect_errno() )
    die ( "connect failed: " . mysqli_connect_error() );

$batch = "SELECT * FROM test1 ORDER BY group_id ASC;";
$batch .= "SELECT * FROM test1 ORDER BY group_id DESC";

if ( !mysqli_multi_query ( $link, $batch ) )
    die ( "query failed" );

do
{
    // fetch and print result set
    if ( $result = mysqli_store_result($link) )
    {
        while ( $row = mysqli_fetch_row($result) )
            printf ( "id=%s\n", $row[0] );
        mysqli_free_result($result);
    }

    // print divider
    if ( mysqli_more_results($link) )
        printf ( "------\n" );

} while ( mysqli_next_result($link) );
</pre><p>
Its output with the sample <code class="code">test1</code> index included
with Sphinx is as follows.
</p><pre class="programlisting">
$ php test_multi.php
id=1
id=2
id=3
id=4
------
id=3
id=4
id=1
id=2
</pre><p>
</p><p>
The following statements can currently be used in a batch:
SELECT, SHOW WARNINGS, SHOW STATUS, and SHOW META. Arbitrary
sequence of these statements are allowed. The results sets
returned should match those that would be returned if the
batched queries were sent one by one.
</p></div>
<div class="sect1" title="7.19.&nbsp;COMMIT&#65288;&#27880;&#37322;&#65289;&#35821;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-comment-syntax"></a>7.19.&nbsp;COMMIT&#65288;&#27880;&#37322;&#65289;&#35821;&#27861;</h2></div></div></div>
<p>
Since version 2.0.1-beta, SphinxQL supports C-style comment syntax.
Everything from an opening <code class="code">/*</code> sequence to a closing
<code class="code">*/</code> sequence is ignored. Comments can span multiple lines,
can not nest, and should not get logged. MySQL specific
<code class="code">/*! ... */</code> comments are also currently ignored.
(As the comments support was rather added for better compatibility
with <code class="filename">mysqldump</code> produced dumps, rather than
improving generaly query interoperability between Sphinx and MySQL.)
</p><pre class="programlisting">
SELECT /*! SQL_CALC_FOUND_ROWS */ col1 FROM table1 WHERE ...
</pre><p>
</p></div>
<div class="sect1" title="7.20.&nbsp;SphinxQL &#20445;&#30041;&#20851;&#38190;&#23383;&#21015;&#34920;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-reserved-keywords"></a>7.20.&nbsp;SphinxQL &#20445;&#30041;&#20851;&#38190;&#23383;&#21015;&#34920;</h2></div></div></div>
<p>A complete alphabetical list of keywords that are currently reserved
in SphinxQL syntax (and therefore can not be used as identifiers).
</p><pre class="programlisting">
AND
AS
ASC
AVG
BEGIN
BETWEEN
BY
CALL
COLLATION
COMMIT
COUNT
DELETE
DESC
DESCRIBE
DISTINCT
FALSE
FROM
GLOBAL
GROUP
ID
IN
INSERT
INTO
LIMIT
MATCH
MAX
META
MIN
NOT
NULL
OPTION
OR
ORDER
REPLACE
ROLLBACK
SELECT
SET
SHOW
START
STATUS
SUM
TABLES
TRANSACTION
TRUE
UPDATE
VALUES
VARIABLES
WARNINGS
WEIGHT
WHERE
WITHIN
</pre></div>
<div class="sect1" title="7.21.&nbsp;SphinxQL &#21319;&#32423;&#22791;&#27880;, version 2.0.1-beta"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxql-upgrading-magics"></a>7.21.&nbsp;SphinxQL &#21319;&#32423;&#22791;&#27880;, version 2.0.1-beta</h2></div></div></div>
<p>
This section only applies to existing applications that
use SphinxQL versions prior to 2.0.1-beta.
</p><p>
In previous versions, SphinxQL just wrapped around SphinxAPI
and inherited its magic columns and column set quirks. Essentially,
SphinxQL queries could return (slightly) different columns and
in a (slightly) different order than it was explicitly requested
in the query. Namely, <code class="code">weight</code> magic column (which is not
a real column in any index) was added at all times, and GROUP BY
related <code class="code">@count</code>, <code class="code">@group</code>, and <code class="code">@distinct</code>
magic columns were conditionally added when grouping. Also, the order
of columns (attributes) in the result set was actually taken from the
index rather than the query. (So if you asked for columns C, B, A
in your query but they were in the A, B, C order in the index,
they would have been returned in the A, B, C order.)
</p><p>
In version 2.0.1-beta, we fixed that. SphinxQL is now more
SQL compliant (and will be further brought in as much compliance
with standard SQL syntax as possible). That is not yet a breaking
change, because <code class="filename">searchd</code> now supports
<a class="link" href="#conf-compat-sphinxql-magics" title="11.4.40.&nbsp;compat_sphinxql_magics"><code class="code">compat_sphinxql_magics</code></a>
directive that flips between the old "compatibility" mode and the new
"compliance" mode. However, the compatibility mode support is going
to be removed in future, so it's strongly advised to update SphinxQL
applications and switch to the compliance mode.
</p><p>
The important changes are as follows:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
<span class="bold"><strong><code class="code">@ID</code> magic name is deprecated in favor of
<code class="code">ID</code>.</strong></span> Document ID is considered an attribute.
</p></li>
<li class="listitem"><p>
<span class="bold"><strong><code class="code">WEIGHT</code> is no longer implicitly returned</strong></span>,
because it is not actually a column (an index attribute),
but rather an internal function computed per each row (a match).
You have to explicitly ask for it, using the <code class="code">WEIGHT()</code>
function. (The requirement to alias the result will be lifted
in the next release.)
</p><pre class="programlisting">
SELECT id, WEIGHT() w FROM myindex WHERE MATCH('test')
</pre><p>
</p></li>
<li class="listitem"><p>
<span class="bold"><strong>You can now use quoted reserved keywords as aliases.</strong></span>
The quote character is backtick ("`", ASCII code 96 decimal,
60 hex). One particularly useful example would be returning
<code class="code">weight</code> column like the old mode:
</p><pre class="programlisting">
SELECT id, WEIGHT() `weight` FROM myindex WHERE MATCH('test')
</pre><p>
</p></li>
<li class="listitem"><p>
The column order is now different and should now match the
one expliclitly defined in the query. So if you are accessing
columns based on their position in the result set rather than
the name (for instance, by using <code class="code">mysql_fetch_row()</code>
rather than <code class="code">mysql_fetch_assoc()</code> in PHP),
<span class="bold"><strong>check and fix the order of columns in your queries.</strong></span>
</p></li>
<li class="listitem"><p>
<code class="code">SELECT *</code> return the columns in index order,
as it used to, including the ID column. However,
<span class="bold"><strong><code class="code">SELECT *</code> does not automatically return WEIGHT().</strong></span>
To update such queries in case you access columns by names,
simply add it to the query:
</p><pre class="programlisting">
SELECT *, WEIGHT() `weight` FROM myindex WHERE MATCH('test')
</pre><p>
Otherwise, i.e., in case you rely on column order, select
ID, weight, and then other columns:
</p><pre class="programlisting">
SELECT id, *, WEIGHT() `weight` FROM myindex WHERE MATCH('test')
</pre><p>
</p></li>
<li class="listitem"><p>
<span class="bold"><strong>Magic <code class="code">@count</code> and <code class="code">@distinct</code>
attributes are no longer implicitly returned</strong></span>. You now
have to explicitly ask for them when using GROUP BY.
(Also note that you currently have to alias them;
that requirement will be lifted in the future.)
</p><pre class="programlisting">
SELECT gid, COUNT(*) q FROM myindex WHERE MATCH('test')
GROUP BY gid ORDER BY q DESC
</pre><p>
</p></li>
</ul></div>
<p>
</p></div></div>
<div class="chapter" title="&#31532;&nbsp;8&nbsp;&#31456;&nbsp;API&#21442;&#32771;"><div class="titlepage"><div><div><h2 class="title"><a name="api-reference"></a>&#31532;&nbsp;8&nbsp;&#31456;&nbsp;API&#21442;&#32771;</h2></div></div></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="sect1"><a href="#api-funcgroup-general">8.1. &#36890;&#29992;API&#26041;&#27861;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-getlasterror">8.1.1. GetLastError &#65288;&#38169;&#35823;&#20449;&#24687;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-getlastwarning">8.1.2. GetLastWarning &#65288;&#21578;&#35686;&#20449;&#24687;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setserver">8.1.3. SetServer (&#35774;&#32622;&#25628;&#32034;&#26381;&#21153;)</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setretries">8.1.4. SetRetries (&#35774;&#32622;&#22833;&#36133;&#37325;&#35797;)</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setconnecttimeout">8.1.5. SetConnectTimeout &#65288;&#35774;&#32622;&#36229;&#26102;&#26102;&#38388;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setarrayresult">8.1.6. SetArrayResult &#65288;&#35774;&#32622;&#32467;&#26524;&#36820;&#22238;&#26684;&#24335;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-isconnecterror">8.1.7. IsConnectError &#65288;&#26816;&#26597;&#38142;&#25509;&#38169;&#35823;&#65289;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-general-query-settings">8.2. &#36890;&#29992;&#25628;&#32034;&#35774;&#32622;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-setlimits">8.2.1. SetLimits &#65288;&#35774;&#32622;&#32467;&#26524;&#38598;&#20559;&#31227;&#37327;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setmaxquerytime">8.2.2. SetMaxQueryTime &#65288;&#35774;&#32622;&#26368;&#22823;&#25628;&#32034;&#26102;&#38388;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setoverride">8.2.3. SetOverride &#65288;&#35774;&#32622;&#20020;&#26102;&#23646;&#24615;&#20540;&#35206;&#30422;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setselect">8.2.4. SetSelect (&#35774;&#32622;&#36820;&#22238;&#20449;&#24687;&#30340;&#20869;&#23481;)</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-fulltext-query-settings">8.3. &#20840;&#25991;&#25628;&#32034;&#35774;&#32622;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-setmatchmode">8.3.1. SetMatchMode &#65288;&#35774;&#32622;&#21305;&#37197;&#27169;&#24335;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setrankingmode">8.3.2. SetRankingMode &#65288;&#35774;&#32622;&#35780;&#20998;&#27169;&#24335;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setsortmode">8.3.3. SetSortMode &#65288;&#35774;&#32622;&#25490;&#24207;&#27169;&#24335;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setweights">8.3.4. SetWeights &#65288;&#35774;&#32622;&#26435;&#37325;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setfieldweights">8.3.5. SetFieldWeights &#65288;&#35774;&#32622;&#23383;&#27573;&#26435;&#37325;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setindexweights">8.3.6. SetIndexWeights &#65288;&#35774;&#32622;&#32034;&#24341;&#26435;&#37325;&#65289;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-filtering">8.4. &#32467;&#26524;&#38598;&#36807;&#28388;&#35774;&#32622;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-setidrange">8.4.1. SetIDRange &#65288;&#35774;&#32622;&#26597;&#35810;ID&#33539;&#22260;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setfilter">8.4.2. SetFilter &#65288;&#35774;&#32622;&#23646;&#24615;&#36807;&#28388;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setfilterrange">8.4.3. SetFilterRange &#65288;&#35774;&#32622;&#23646;&#24615;&#33539;&#22260;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setfilterfloatrange">8.4.4. SetFilterFloatRange &#65288;&#35774;&#32622;&#28014;&#28857;&#25968;&#33539;&#22260;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setgeoanchor">8.4.5. SetGeoAnchor &#65288;&#35774;&#32622;&#22320;&#34920;&#36317;&#31163;&#38170;&#28857;&#65289;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-groupby">8.5. &#20998;&#32452;&#35774;&#32622;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-setgroupby">8.5.1. SetGroupBy &#65288;&#35774;&#32622;&#20998;&#32452;&#30340;&#23646;&#24615;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-setgroupdistinct">8.5.2. SetGroupDistinct &#65288;&#35774;&#32622;&#20998;&#32452;&#35745;&#31639;&#19981;&#21516;&#20540;&#30340;&#23646;&#24615;&#65289;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-querying">8.6. &#25628;&#32034;&#25968;&#25454;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-query">8.6.1. Query &#65288;&#26597;&#35810;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-addquery">8.6.2. AddQuery &#65288;&#22686;&#21152;&#25209;&#37327;&#26597;&#35810;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-runqueries">8.6.3. RunQueries &#65288;&#25191;&#34892;&#25209;&#37327;&#26597;&#35810;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-resetfilters">8.6.4. ResetFilters &#65288;&#28165;&#38500;&#24403;&#21069;&#35774;&#32622;&#30340;&#36807;&#28388;&#22120;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-resetgroupby">8.6.5. ResetGroupBy &#65288;&#28165;&#38500;&#29616;&#26377;&#30340;&#20998;&#32452;&#35774;&#32622;&#65289;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-additional-functionality">8.7. &#38468;&#21152;&#26041;&#27861;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-buildexcerpts">8.7.1. BuildExcerpts &#65288;&#20135;&#29983;&#25991;&#26412;&#25688;&#35201;&#21644;&#39640;&#20142;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-updateatttributes">8.7.2. UpdateAttributes &#65288;&#26356;&#26032;&#23646;&#24615;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-buildkeywords">8.7.3. BuildKeywords &#65288;&#33719;&#21462;&#20998;&#35789;&#32467;&#26524;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-escapestring">8.7.4. EscapeString &#65288;&#36716;&#20041;&#29305;&#27530;&#23383;&#31526;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-status">8.7.5. Status &#65288;&#26597;&#35810;&#26381;&#21153;&#29366;&#24577;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#api-func-flushattributes">8.7.6. FlushAttributes &#65288;&#24378;&#21046;&#26356;&#26032;&#23646;&#24615;&#21040;&#30913;&#30424;&#65289;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#api-funcgroup-pconn">8.8. &#25345;&#20037;&#36830;&#25509;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#api-func-open">8.8.1. Open (&#25171;&#24320;&#36830;&#25509;)</a></span></dt>
<dt><span class="sect2"><a href="#api-func-close">8.8.2. Close &#65288;&#20851;&#38381;&#36830;&#25509;&#65289;</a></span></dt>
</dl></dd></dl></div>
<p>
Sphnix&#26377;&#20960;&#31181;&#19981;&#21516;&#32534;&#31243;&#35821;&#35328;&#30340;&#21407;&#29983;searchd&#23458;&#25143;&#31471;API&#30340;&#23454;&#29616;&#12290;&#22312;&#26412;&#25991;&#23436;&#25104;&#20043;&#26102;&#65292;&#25105;&#20204;&#23545;&#25105;&#20204;&#33258;&#24049;&#24320;&#21457;&#30340;PHP&#65292;Python&#21644;java&#23458;&#25143;&#31471;&#23454;&#29616;&#25552;&#20379;&#23448;&#26041;&#25903;&#25345;&#12290;&#27492;&#22806;&#65292;&#20063;&#26377;&#19968;&#20123;&#38024;&#23545;Perl&#65292;Ruby&#21644;C++&#30340;&#31532;&#19977;&#26041;&#20813;&#36153;&#12289;&#24320;&#28304;API&#23454;&#29616;&#12290;
</p><p>
API&#30340;&#21442;&#32771;&#23454;&#29616;&#26159;&#29992;PHP&#20889;&#25104;&#30340;&#65292;&#22240;&#20026;&#65288;&#25105;&#20204;&#30456;&#20449;&#65289;&#36739;&#20043;&#20854;&#20182;&#35821;&#35328;&#65292;Sphinx&#22312;PHP&#20013;&#24212;&#29992;&#26368;&#24191;&#27867;&#12290;&#22240;&#27492;&#36825;&#20221;&#21442;&#32771;&#25991;&#26723;&#22522;&#20110;PHP API&#30340;&#21442;&#32771;&#65292;&#32780;&#19988;&#36825;&#33410;&#20013;&#30340;&#25152;&#26377;&#30340;&#20195;&#30721;&#26679;&#20363;&#37117;&#29992;PHP&#32473;&#20986;&#12290;
</p><p>
&#24403;&#28982;&#65292;&#20854;&#20182;&#25152;&#26377;API&#37117;&#25552;&#20379;&#30456;&#21516;&#30340;&#26041;&#27861;&#65292;&#20063;&#20351;&#29992;&#23436;&#20840;&#30456;&#21516;&#30340;&#32593;&#32476;&#21327;&#35758;&#12290;&#22240;&#27492;&#36825;&#20221;&#25991;&#26723;&#23545;&#20182;&#20204;&#21516;&#26679;&#36866;&#29992;&#12290;&#22312;&#26041;&#27861;&#21629;&#21517;&#20064;&#24815;&#26041;&#38754;&#25110;&#32773;&#20855;&#20307;&#25968;&#25454;&#32467;&#26500;&#30340;&#20351;&#29992;&#19978;&#21487;&#33021;&#20250;&#26377;&#23567;&#30340;&#24046;&#21035;&#12290;&#20294;&#19981;&#21516;&#35821;&#35328;&#30340;API&#25552;&#20379;&#30340;&#21151;&#33021;&#19978;&#32477;&#19981;&#20250;&#26377;&#24046;&#24322;&#12290;
</p><div class="sect1" title="8.1.&nbsp;&#36890;&#29992;API&#26041;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="api-funcgroup-general"></a>8.1.&nbsp;&#36890;&#29992;API&#26041;&#27861;</h2></div></div></div>
<div class="sect2" title="8.1.1.&nbsp;GetLastError &#65288;&#38169;&#35823;&#20449;&#24687;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-getlasterror"></a>8.1.1.&nbsp;GetLastError &#65288;&#38169;&#35823;&#20449;&#24687;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function GetLastError()</p><p>
&#20197;&#21487;&#35835;&#24418;&#24335;&#36820;&#22238;&#26368;&#36817;&#30340;&#38169;&#35823;&#25551;&#36848;&#20449;&#24687;&#12290;&#22914;&#26524;&#21069;&#19968;&#27425;API&#35843;&#29992;&#27809;&#26377;&#38169;&#35823;&#65292;&#36820;&#22238;&#31354;&#23383;&#31526;&#20018;&#12290;
</p><p>
&#20219;&#20309;&#20854;&#20182;&#20989;&#25968;&#65288;&#22914; <a class="link" href="#api-func-query" title="8.6.1.&nbsp;Query &#65288;&#26597;&#35810;&#65289;">Query()</a>&#65289;&#22833;&#36133;&#21518;&#65288;&#20989;&#25968;&#22833;&#36133;&#19968;&#33324;&#36820;&#22238;false&#65289;&#65292;&#37117;&#24212;&#35813;&#35843;&#29992;&#36825;&#20010;&#20989;&#25968;&#65292;&#23427;&#23558;&#36820;&#22238;&#38169;&#35823;&#30340;&#25551;&#36848;&#12290;
</p><p>
&#27492;&#20989;&#25968;&#26412;&#36523;&#24182;<span class="emphasis"><em>&#19981;</em></span>&#37325;&#32622;&#23545;&#38169;&#35823;&#25551;&#36848;&#65292;&#22240;&#27492;&#22914;&#26377;&#24517;&#35201;&#65292;&#21487;&#20197;&#22810;&#27425;&#35843;&#29992;&#12290;
</p></div>
<div class="sect2" title="8.1.2.&nbsp;GetLastWarning &#65288;&#21578;&#35686;&#20449;&#24687;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-getlastwarning"></a>8.1.2.&nbsp;GetLastWarning &#65288;&#21578;&#35686;&#20449;&#24687;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function GetLastWarning ()</p><p>
&#20197;&#21487;&#35835;&#26684;&#24335;&#36820;&#22238;&#26368;&#36817;&#30340;&#35686;&#21578;&#25551;&#36848;&#20449;&#24687;&#12290;&#22914;&#26524;&#21069;&#19968;&#27425;API&#35843;&#29992;&#27809;&#26377;&#35686;&#21578;&#65292;&#36820;&#22238;&#31354;&#23383;&#31526;&#20018;&#12290;
</p><p>
&#24744;&#24212;&#35813;&#35843;&#29992;&#36825;&#20010;&#20989;&#25968;&#26469;&#30830;&#35748;&#24744;&#30340;&#35831;&#27714;&#65288;&#22914; <a class="link" href="#api-func-query" title="8.6.1.&nbsp;Query &#65288;&#26597;&#35810;&#65289;">Query()</a>&#65289;&#26159;&#21542;&#34429;&#28982;&#23436;&#25104;&#20102;&#20294;&#20135;&#29983;&#20102;&#35686;&#21578;&#12290;&#20363;&#22914;&#65292;&#21363;&#20351;&#20960;&#20010;&#36828;&#31243;&#20195;&#29702;&#36229;&#26102;&#20102;&#65292;&#23545;&#20998;&#24067;&#24335;&#32034;&#24341;&#30340;&#25628;&#32034;&#26597;&#35810;&#20063;&#21487;&#33021;&#25104;&#21151;&#23436;&#25104;&#12290;&#36825;&#26102;&#20250;&#20135;&#29983;&#19968;&#20010;&#35686;&#21578;&#20449;&#24687;&#12290;
</p><p>
&#27492;&#20989;&#25968;&#26412;&#36523;<span class="emphasis"><em>&#19981;</em></span>&#20250;&#37325;&#32622;&#35686;&#21578;&#20449;&#24687;&#65292;&#22240;&#27492;&#22914;&#26377;&#24517;&#35201;&#65292;&#21487;&#20197;&#22810;&#27425;&#35843;&#29992;&#12290;
</p></div>
<div class="sect2" title="8.1.3.&nbsp;SetServer (&#35774;&#32622;&#25628;&#32034;&#26381;&#21153;)"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setserver"></a>8.1.3.&nbsp;SetServer (&#35774;&#32622;&#25628;&#32034;&#26381;&#21153;)</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetServer ( $host, $port )</p><p>
&#35774;&#32622;<code class="filename">searchd</code>&#30340;&#20027;&#26426;&#21517;&#21644;TCP&#31471;&#21475;&#12290;&#27492;&#21518;&#30340;&#25152;&#26377;&#35831;&#27714;&#37117;&#20351;&#29992;&#26032;&#30340;&#20027;&#26426;&#21644;&#31471;&#21475;&#35774;&#32622;&#12290;&#40664;&#35748;&#30340;&#20027;&#26426;&#21644;&#31471;&#21475;&#20998;&#21035;&#26159;&#8220;localhost&#8221;&#21644;9312&#12290;
</p></div>
<div class="sect2" title="8.1.4.&nbsp;SetRetries (&#35774;&#32622;&#22833;&#36133;&#37325;&#35797;)"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setretries"></a>8.1.4.&nbsp;SetRetries (&#35774;&#32622;&#22833;&#36133;&#37325;&#35797;)</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetRetries ( $count, $delay=0 )</p><p>
&#35774;&#32622;&#20998;&#24067;&#24335;&#25628;&#32034;&#37325;&#35797;&#30340;&#27425;&#25968;&#21644;&#24310;&#36831;&#26102;&#38388;&#12290;
</p><p>
&#23545;&#20110;&#26242;&#26102;&#30340;&#22833;&#36133;&#65292;<code class="filename">searchd</code>&#23545;&#27599;&#20010;&#20195;&#29702;&#37325;&#35797;&#33267;&#22810;<code class="code">$count</code>&#27425;&#12290;<code class="code">$delay</code>&#26159;&#20004;&#27425;&#37325;&#35797;&#20043;&#38388;&#24310;&#36831;&#30340;&#26102;&#38388;&#65292;&#20197;&#27627;&#31186;&#20026;&#21333;&#20301;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#37325;&#35797;&#26159;&#31105;&#27490;&#30340;&#12290;&#27880;&#24847;&#65292;&#36825;&#20010;&#35843;&#29992;<span class="bold"><strong>&#19981;&#20250;</strong></span>&#20351;API&#26412;&#36523;&#23545;&#26242;&#26102;&#22833;&#36133;&#36827;&#34892;&#37325;&#35797;&#65292;&#23427;&#21482;&#26159;&#35753;<code class="filename">searchd</code>&#36825;&#26679;&#20570;&#12290;&#30446;&#21069;&#26242;&#26102;&#22833;&#36133;&#21253;&#25324;connect()&#35843;&#29992;&#30340;&#21508;&#31181;&#22833;&#36133;&#21644;&#36828;&#31243;&#20195;&#29702;&#36229;&#36807;&#26368;&#22823;&#36830;&#25509;&#25968;&#65288;&#36807;&#20110;&#32321;&#24537;&#65289;&#30340;&#24773;&#20917;&#12290;
</p></div>
<div class="sect2" title="8.1.5.&nbsp;SetConnectTimeout &#65288;&#35774;&#32622;&#36229;&#26102;&#26102;&#38388;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setconnecttimeout"></a>8.1.5.&nbsp;SetConnectTimeout &#65288;&#35774;&#32622;&#36229;&#26102;&#26102;&#38388;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetConnectTimeout ( $timeout )</p><p>
&#35774;&#32622;&#36830;&#25509;&#36229;&#26102;&#26102;&#38388;&#65292;&#22312;&#19982;&#26381;&#21153;&#22120;&#36830;&#25509;&#26102;&#65292;&#22914;&#26524;&#36229;&#36807;&#36825;&#20010;&#26102;&#38388;&#27809;&#26377;&#36830;&#19978;&#23601;&#25918;&#24323;&#12290;
</p><p>&#26377;&#26102;&#20505;&#26381;&#21153;&#22120;&#22312;&#21709;&#24212;&#19978;&#20250;&#26377;&#25152;&#24310;&#36831;&#65292;&#36825;&#26377;&#21487;&#33021;&#30001;&#20110;&#32593;&#32476;&#30340;&#24310;&#26102;&#65292;&#20063;&#26377;&#21487;&#33021;&#26159;&#22240;&#20026;&#26381;&#21153;&#22120;&#26410;&#22788;&#29702;&#23436;&#30340;&#26597;&#35810;&#22826;&#22810;&#65292;&#22534;&#31215;&#25152;&#33268;&#12290;&#19981;&#31649;&#26159;&#20160;&#20040;&#24773;&#20917;&#65292;&#26377;&#20102;&#36825;&#20010;&#36873;&#39033;&#65292;&#23601;&#32473;&#23458;&#25143;&#31471;&#24212;&#29992;&#31243;&#24207;&#25552;&#20379;&#20102;&#19968;&#23450;&#30340;&#25511;&#21046;&#26435;&#65292;&#35753;&#23427;&#21487;&#20197;&#20915;&#23450;&#24403;<code class="filename">searchd</code>&#19981;&#21487;&#29992;&#30340;&#26102;&#20505;&#22914;&#20309;&#22788;&#29702;&#65292;&#32780;&#19988;&#21487;&#20197;&#36991;&#20813;&#33050;&#26412;&#30001;&#20110;&#36229;&#36807;&#36816;&#34892;&#38480;&#21046;&#32780;&#36816;&#34892;&#22833;&#36133;&#65288;&#23588;&#20854;&#26159;&#22312;PHP&#37324;&#65289;
</p><p>&#24403;&#36830;&#25509;&#22833;&#36133;&#30340;&#32780;&#26102;&#20505;&#65292;&#20250;&#23558;&#21512;&#36866;&#30340;&#38169;&#35823;&#30721;&#36820;&#22238;&#32473;&#24212;&#29992;&#31243;&#24207;&#65292;&#20197;&#20415;&#22312;&#24212;&#29992;&#31243;&#24207;&#32423;&#21035;&#36827;&#34892;&#38169;&#35823;&#22788;&#29702;&#21644;&#36890;&#30693;&#29992;&#25143;&#12290;
</p></div>
<div class="sect2" title="8.1.6.&nbsp;SetArrayResult &#65288;&#35774;&#32622;&#32467;&#26524;&#36820;&#22238;&#26684;&#24335;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setarrayresult"></a>8.1.6.&nbsp;SetArrayResult &#65288;&#35774;&#32622;&#32467;&#26524;&#36820;&#22238;&#26684;&#24335;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetArrayResult ( $arrayresult )</p><p>
PHP&#19987;&#29992;&#12290;&#25511;&#21046;&#25628;&#32034;&#32467;&#26524;&#38598;&#30340;&#36820;&#22238;&#26684;&#24335;&#65288;&#21305;&#37197;&#39033;&#25353;&#25968;&#32452;&#36820;&#22238;&#36824;&#26159;&#25353;hash&#36820;&#22238;&#65289;
</p><p>
<code class="code">$arrayresult</code> &#21442;&#25968;&#24212;&#20026;&#24067;&#23572;&#22411;&#12290;&#22914;&#26524;<code class="code">$arrayresult</code>&#20026;<code class="code">false</code>&#65288;&#40664;&#35748;&#65289;&#65292;&#21305;&#37197;&#39033;&#20197;PHP hash&#26684;&#24335;&#36820;&#22238;&#65292;&#25991;&#26723;ID&#20026;&#38190;&#65292;&#20854;&#20182;&#20449;&#24687;&#65288;&#26435;&#37325;&#12289;&#23646;&#24615;&#65289;&#20026;&#20540;&#12290;&#22914;&#26524;<code class="code">$arrayresult</code>&#20026;<code class="code">true</code>&#65292;&#21305;&#37197;&#39033;&#20197;&#26222;&#36890;&#25968;&#32452;&#36820;&#22238;&#65292;&#21253;&#25324;&#21305;&#37197;&#39033;&#30340;&#20840;&#37096;&#20449;&#24687;&#65288;&#21253;&#21547;&#25991;&#26723;ID&#65289;&#12290;
</p><p>
&#36825;&#20010;&#35843;&#29992;&#26159;&#23545;MVA&#23646;&#24615;&#24341;&#20837;&#20998;&#32452;&#25903;&#25345;&#26102;&#21516;&#26102;&#24341;&#20837;&#30340;&#12290;&#23545;MVA&#20998;&#32452;&#30340;&#32467;&#26524;&#21487;&#33021;&#21253;&#21547;&#37325;&#22797;&#30340;&#25991;&#26723;ID&#12290;&#22240;&#27492;&#38656;&#35201;&#23558;&#20182;&#20204;&#25353;&#26222;&#36890;&#25968;&#32452;&#36820;&#22238;&#65292;&#22240;&#20026;hash&#23545;&#27599;&#20010;&#25991;&#26723;ID&#20165;&#33021;&#20445;&#23384;&#19968;&#20010;&#35760;&#24405;&#12290;
</p></div>
<div class="sect2" title="8.1.7.&nbsp;IsConnectError &#65288;&#26816;&#26597;&#38142;&#25509;&#38169;&#35823;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-isconnecterror"></a>8.1.7.&nbsp;IsConnectError &#65288;&#26816;&#26597;&#38142;&#25509;&#38169;&#35823;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function IsConnectError ()</p><p>
&#26816;&#26597;&#19978;&#19968;&#20010;&#38169;&#35823;&#26159;API&#23618;&#38754;&#30340;&#32593;&#32476;&#38169;&#35823;&#36824;&#26159;searchd&#36820;&#22238;&#30340;&#36828;&#31243;&#38169;&#35823;&#12290;&#22914;&#26524;&#26159;&#19978;&#19968;&#27425;&#36830;&#25509;searchd&#30340;&#23581;&#35797;&#22312;API&#23618;&#38754;&#22833;&#36133;&#20102;&#65292;&#36820;&#22238;&#30495;&#65292;&#21542;&#21017;&#36820;&#22238;&#20551;&#65288;&#38169;&#35823;&#21457;&#29983;&#22312;&#36828;&#31243;&#65292;&#25110;&#32773;&#26681;&#26412;&#27809;&#26377;&#23581;&#35797;&#36830;&#25509;&#65289;&#12290;
&#36825;&#26159;&#22312;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#30340;&#12290;
</p></div></div>
<div class="sect1" title="8.2.&nbsp;&#36890;&#29992;&#25628;&#32034;&#35774;&#32622;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="api-funcgroup-general-query-settings"></a>8.2.&nbsp;&#36890;&#29992;&#25628;&#32034;&#35774;&#32622;</h2></div></div></div>
<div class="sect2" title="8.2.1.&nbsp;SetLimits &#65288;&#35774;&#32622;&#32467;&#26524;&#38598;&#20559;&#31227;&#37327;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setlimits"></a>8.2.1.&nbsp;SetLimits &#65288;&#35774;&#32622;&#32467;&#26524;&#38598;&#20559;&#31227;&#37327;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetLimits ( $offset, $limit, $max_matches=0, $cutoff=0 )</p><p>
&#32473;&#26381;&#21153;&#22120;&#31471;&#32467;&#26524;&#38598;&#35774;&#32622;&#19968;&#20010;&#20559;&#31227;&#37327;&#65288;<code class="code">$offset</code>&#65289;&#21644;&#20174;&#37027;&#20010;&#20559;&#31227;&#37327;&#36215;&#21521;&#23458;&#25143;&#31471;&#36820;&#22238;&#30340;&#21305;&#37197;&#39033;&#25968;&#30446;&#38480;&#21046;&#65288;<code class="code">$limit</code>&#65289;&#12290;&#24182;&#19988;&#21487;&#20197;&#22312;&#26381;&#21153;&#22120;&#31471;&#35774;&#23450;&#24403;&#21069;&#26597;&#35810;&#30340;&#32467;&#26524;&#38598;&#22823;&#23567;&#65288;<code class="code">$max_matches</code>&#65289;&#65292;&#21478;&#26377;&#19968;&#20010;&#38408;&#20540;&#65288;<code class="code">$cutoff</code>&#65289;&#65292;&#24403;&#25214;&#21040;&#30340;&#21305;&#37197;&#39033;&#36798;&#21040;&#36825;&#20010;&#38400;&#20540;&#26102;&#23601;&#20572;&#27490;&#25628;&#32034;&#12290;&#20840;&#37096;&#36825;&#20123;&#21442;&#25968;&#37117;&#24517;&#39035;&#26159;&#38750;&#36127;&#25972;&#25968;&#12290;
</p><p>
&#21069;&#20004;&#20010;&#21442;&#25968;&#30340;&#34892;&#20026;&#19982;MySQL LIMIT&#23376;&#21477;&#20013;&#21442;&#25968;&#30340;&#34892;&#20026;&#30456;&#21516;&#12290;&#20182;&#20204;&#20196;<code class="filename">searchd</code>&#20174;&#32534;&#21495;&#20026;<code class="code">$offset</code>&#30340;&#21305;&#37197;&#39033;&#24320;&#22987;&#36820;&#22238;&#26368;&#22810;<code class="code">$limit</code>&#20010;&#21305;&#37197;&#39033;&#12290;&#20559;&#31227;&#37327;(<code class="code">$offset</code>)&#21644;&#32467;&#26524;&#25968;&#38480;&#21046;(<code class="code">$limit</code>)&#30340;&#40664;&#35748;&#20540;&#20998;&#21035;&#26159;0&#21644;20&#65292;&#21363;&#36820;&#22238;&#21069;20&#20010;&#21305;&#37197;&#39033;&#12290;
</p><p>
<code class="code">max_matches</code>&#36825;&#20010;&#35774;&#32622;&#25511;&#21046;&#25628;&#32034;&#36807;&#31243;&#20013;<code class="filename">searchd</code>&#22312;&#20869;&#23384;&#20013;&#25152;&#20445;&#25345;&#30340;&#21305;&#37197;&#39033;&#25968;&#30446;&#12290;&#19968;&#33324;&#26469;&#35828;&#65292;&#21363;&#20351;&#35774;&#32622;&#20102;<code class="code">max_matches</code>&#20026;1&#65292;<span class="bold"><strong>&#20840;&#37096;</strong></span>&#30340;&#21305;&#37197;&#25991;&#26723;&#20063;&#37117;&#20250;&#34987;&#22788;&#29702;&#12289;&#35780;&#20998;&#12289;&#36807;&#28388;&#21644;&#25490;&#24207;&#12290;&#20294;&#26159;&#20219;&#19968;&#26102;&#21051;&#21482;&#26377;&#26368;&#20248;&#30340;N&#20010;&#25991;&#26723;&#20250;&#34987;&#23384;&#20648;&#22312;&#20869;&#23384;&#20013;&#65292;&#36825;&#26159;&#20026;&#20102;&#24615;&#33021;&#21644;&#20869;&#23384;&#20351;&#29992;&#26041;&#38754;&#30340;&#21407;&#22240;&#65292;&#36825;&#20010;&#35774;&#32622;&#27491;&#26159;&#25511;&#21046;&#36825;&#20010;N&#30340;&#22823;&#23567;&#12290;&#27880;&#24847;&#65292;<code class="code">max_matches</code>&#22312;<span class="bold"><strong>&#20004;&#20010;</strong></span>&#22320;&#26041;&#35774;&#32622;&#12290;&#38024;&#23545;&#21333;&#20010;&#26597;&#35810;&#30340;&#38480;&#21046;&#30001;&#36825;&#20010;API&#35843;&#29992;&#25351;&#23450;&#12290;&#20294;&#36824;&#26377;&#19968;&#20010;&#38024;&#23545;&#25972;&#20010;&#26381;&#21153;&#22120;&#30340;&#38480;&#21046;&#65292;&#37027;&#26159;&#30001;&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;<code class="code">max_matches</code>&#35774;&#32622;&#25511;&#21046;&#30340;&#12290;&#20026;&#38450;&#27490;&#28389;&#29992;&#20869;&#23384;&#65292;&#26381;&#21153;&#22120;&#19981;&#20801;&#35768;&#21333;&#20010;&#26597;&#35810;&#30340;&#38480;&#21046;&#39640;&#20110;&#26381;&#21153;&#22120;&#30340;&#38480;&#21046;&#12290;
</p><p>
&#22312;&#23458;&#25143;&#31471;&#19981;&#21487;&#33021;&#25910;&#21040;&#36229;&#36807;<code class="code">max_matches</code>&#20010;&#21305;&#37197;&#39033;&#12290;&#40664;&#35748;&#30340;&#38480;&#21046;&#26159;1000&#65292;&#24744;&#24212;&#35813;&#19981;&#20250;&#36935;&#21040;&#38656;&#35201;&#35774;&#32622;&#24471;&#26356;&#39640;&#30340;&#24773;&#20917;&#12290;1000&#20010;&#35760;&#24405;&#36275;&#22815;&#21521;&#26368;&#32456;&#29992;&#25143;&#23637;&#31034;&#20102;&#12290;&#22914;&#26524;&#24744;&#26159;&#24819;&#23558;&#32467;&#26524;&#20256;&#36755;&#32473;&#24212;&#29992;&#31243;&#24207;&#20197;&#20415;&#20570;&#36827;&#19968;&#27493;&#25490;&#24207;&#25110;&#36807;&#28388;&#65292;&#37027;&#20040;&#35831;&#27880;&#24847;&#65292;&#22312;Sphinx&#31471;&#23436;&#25104;&#25928;&#29575;&#35201;<span class="bold"><strong>&#39640;</strong></span>&#24471;&#22810;&#12290;
</p><p>
<code class="code">$cutoff</code>&#35774;&#32622;&#26159;&#20026;&#39640;&#32423;&#24615;&#33021;&#20248;&#21270;&#32780;&#25552;&#20379;&#30340;&#12290;&#23427;&#21578;&#35785;<code class="filename">searchd</code> &#22312;&#25214;&#21040;&#24182;&#22788;&#29702;<code class="code">$cutoff</code>&#20010;&#21305;&#37197;&#21518;&#23601;&#24378;&#21046;&#20572;&#27490;&#12290;
</p></div>
<div class="sect2" title="8.2.2.&nbsp;SetMaxQueryTime &#65288;&#35774;&#32622;&#26368;&#22823;&#25628;&#32034;&#26102;&#38388;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setmaxquerytime"></a>8.2.2.&nbsp;SetMaxQueryTime &#65288;&#35774;&#32622;&#26368;&#22823;&#25628;&#32034;&#26102;&#38388;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetMaxQueryTime ( $max_query_time )</p><p>
&#35774;&#32622;&#26368;&#22823;&#25628;&#32034;&#26102;&#38388;&#65292;&#20197;&#27627;&#31186;&#20026;&#21333;&#20301;&#12290;&#21442;&#25968;&#24517;&#39035;&#26159;&#38750;&#36127;&#25972;&#25968;&#12290;&#40664;&#35748;&#20540;&#20026;0&#65292;&#24847;&#24605;&#26159;&#19981;&#20570;&#38480;&#21046;&#12290;
</p><p>&#36825;&#20010;&#35774;&#32622;&#19982;<a class="link" href="#api-func-setlimits" title="8.2.1.&nbsp;SetLimits &#65288;&#35774;&#32622;&#32467;&#26524;&#38598;&#20559;&#31227;&#37327;&#65289;">SetLimits()</a>&#20013;&#30340;<code class="code">$cutoff</code>&#30456;&#20284;&#65292;&#19981;&#36807;&#36825;&#20010;&#35774;&#32622;&#38480;&#21046;&#30340;&#26159;&#26597;&#35810;&#26102;&#38388;&#65292;&#32780;&#19981;&#26159;&#22788;&#29702;&#30340;&#21305;&#37197;&#25968;&#30446;&#12290;&#19968;&#26086;&#22788;&#29702;&#26102;&#38388;&#24050;&#32463;&#22826;&#20037;&#65292;&#26412;&#22320;&#25628;&#32034;&#26597;&#35810;&#20250;&#34987;&#20572;&#27490;&#12290;&#27880;&#24847;&#65292;&#22914;&#26524;&#19968;&#20010;&#25628;&#32034;&#26597;&#35810;&#20102;&#22810;&#20010;&#26412;&#22320;&#32034;&#24341;&#65292;&#37027;&#36825;&#20010;&#38480;&#21046;&#29420;&#31435;&#22320;&#20316;&#29992;&#20110;&#36825;&#20960;&#20010;&#32034;&#24341;&#12290;
</p></div>
<div class="sect2" title="8.2.3.&nbsp;SetOverride &#65288;&#35774;&#32622;&#20020;&#26102;&#23646;&#24615;&#20540;&#35206;&#30422;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setoverride"></a>8.2.3.&nbsp;SetOverride &#65288;&#35774;&#32622;&#20020;&#26102;&#23646;&#24615;&#20540;&#35206;&#30422;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetOverride ( $attrname, $attrtype, $values )</p><p>
&#35774;&#32622;&#19968;&#20010;&#20020;&#26102;&#30340;&#65288;&#21482;&#23545;&#21333;&#20010;&#26597;&#35810;&#26377;&#25928;&#65289;&#38024;&#23545;&#19981;&#21516;&#25991;&#26723;&#30340;&#23646;&#24615;&#20540;&#35206;&#30422;&#12290;&#21482;&#25903;&#25345;&#26631;&#37327;&#23646;&#24615;&#12290;$value&#26159;&#19968;&#20010;&#21704;&#24076;&#34920;&#65292;&#20182;&#30340;&#38190;&#26159;&#35201;&#35206;&#30422;&#23646;&#24615;&#30340;&#25991;&#26723;ID&#65292;&#20043;&#26159;&#23545;&#24212;&#35813;&#25991;&#26723;ID&#30340;&#35201;&#35206;&#30422;&#30340;&#20540;&#12290;
&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#23646;&#24615;&#35206;&#30422;&#29305;&#24615;&#20351;&#29992;&#25143;&#21487;&#20197;&#38024;&#23545;&#19968;&#27425;&#26597;&#35810;&#8220;&#20020;&#26102;&#24615;&#22320;&#8221;&#20462;&#25913;&#19968;&#20123;&#25991;&#26723;&#30340;&#20540;&#65292;&#19981;&#24433;&#21709;&#20854;&#20182;&#26597;&#35810;&#12290;&#36825;&#20010;&#20989;&#25968;&#21487;&#20197;&#29992;&#26469;&#36827;&#34892;&#25968;&#25454;&#20010;&#24615;&#21270;&#12290;&#20363;&#22914;&#65292;&#20551;&#35774;&#27491;&#22312;&#23454;&#29616;&#19968;&#20010;&#20010;&#24615;&#21270;&#25628;&#32034;&#20989;&#25968;&#65292;&#29992;&#26469;&#23558;&#26379;&#21451;&#25512;&#33616;&#30340;&#24086;&#23376;&#25490;&#22312;&#21069;&#38754;&#65292;&#36825;&#31867;&#25968;&#25454;&#19981;&#20165;&#26159;&#21160;&#24577;&#30340;&#65292;&#32780;&#19988;&#26159;&#20010;&#24615;&#21270;&#30340;&#65292;&#22240;&#27492;&#19981;&#33021;&#31616;&#21333;&#22320;&#25226;&#36825;&#31181;&#25968;&#25454;&#25918;&#20837;&#32034;&#24341;&#65292;&#22240;&#20026;&#19981;&#33021;&#24433;&#21709;&#20854;&#20182;&#29992;&#25143;&#30340;&#25628;&#32034;&#12290;&#32780;&#35206;&#30422;&#26426;&#21046;&#26159;&#38024;&#23545;&#21333;&#20010;&#26597;&#35810;&#30340;&#65292;&#19981;&#20250;&#24433;&#21709;&#20854;&#20182;&#20154;&#12290;&#22240;&#27492;&#21487;&#20197;&#65292;&#27604;&#22914;&#35828;&#65292;&#32473;&#27599;&#20010;&#25991;&#26723;&#35774;&#32622;&#19968;&#20010;&#8220;friends_weight&#8221;&#23646;&#24615;&#65292;&#40664;&#35748;&#20540;&#26159;0&#65292;&#28982;&#21518;&#20020;&#26102;&#23558;&#25991;&#26723;123&#65292;456&#65292;789&#65288;&#24403;&#21069;&#29992;&#25143;&#30340;&#26379;&#21451;&#25512;&#33616;&#30340;&#65289;&#30340;&#36825;&#20010;&#23646;&#24615;&#35774;&#32622;&#20026;1&#65292;&#26368;&#21518;&#29992;&#36825;&#20010;&#20540;&#36827;&#34892;&#30456;&#20851;&#24230;&#35745;&#31639;&#12290;
</p></div>
<div class="sect2" title="8.2.4.&nbsp;SetSelect (&#35774;&#32622;&#36820;&#22238;&#20449;&#24687;&#30340;&#20869;&#23481;)"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setselect"></a>8.2.4.&nbsp;SetSelect (&#35774;&#32622;&#36820;&#22238;&#20449;&#24687;&#30340;&#20869;&#23481;)</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetSelect ( $clause )</p><p>
&#35774;&#32622;select&#23376;&#21477;&#65292;&#21015;&#20986;&#20855;&#20307;&#35201;&#21462;&#20986;&#30340;&#23646;&#24615;&#20197;&#21450;&#35201;&#35745;&#31639;&#24182;&#21462;&#20986;&#30340;<a class="link" href="#sort-expr" title="5.6.&nbsp;SPH_SORT_EXPR &#27169;&#24335;">expressions</a>&#12290;&#23376;&#21477;&#30340;&#35821;&#27861;&#27169;&#20223;&#20102;SQL&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;</p><p>
SetSelect()&#20110;&#26631;&#20934;SQL&#26597;&#35810;&#20013;SELECT&#21644;FROM&#20043;&#38388;&#30340;&#37096;&#20998;&#38750;&#24120;&#30456;&#36817;&#12290;&#23427;&#20801;&#35768;&#20320;&#25351;&#23450;&#35201;&#21462;&#20986;&#21738;&#20123;&#23646;&#24615;&#65288;&#21015;&#65289;&#65292;&#20197;&#21450;&#22312;&#36825;&#20123;&#21015;&#19978;&#35201;&#35745;&#31639;&#21644;&#21462;&#20986;&#21738;&#20123;&#34920;&#36798;&#24335;&#12290;&#19982;SQL&#35821;&#35328;&#30340;&#21306;&#21035;&#26159;&#65292;&#34920;&#36798;&#24335;&#24517;&#39035;&#29992;&#20851;&#38190;&#23383;AS&#32473;&#27599;&#20010;&#34920;&#36798;&#24335;&#21462;&#19968;&#20010;&#21035;&#21517;&#65292;&#21035;&#21517;&#24517;&#39035;&#26159;&#26377;&#25928;&#30340;&#26631;&#35782;&#31526;&#65288;&#30001;&#23383;&#27597;&#21644;&#25968;&#23383;&#32452;&#25104;&#65289;&#12290;&#22312;SQL&#37324;&#38754;&#21487;&#20197;&#36825;&#26679;&#20570;&#65292;&#20294;&#26159;&#19981;&#26159;&#24378;&#21046;&#30340;&#12290;Sphinx<span class="bold"><strong>&#24378;&#21046;</strong></span>&#24517;&#39035;&#26377;&#21035;&#21517;&#65292;&#20197;&#20415;&#35745;&#31639;&#32467;&#26524;&#24635;&#26159;&#21487;&#20197;&#20197;&#19968;&#20010;&#8220;&#27491;&#24120;&#8221;&#30340;&#21517;&#23383;&#22312;&#32467;&#26524;&#38598;&#20013;&#36820;&#22238;&#65292;&#25110;&#32773;&#22312;&#20854;&#20182;&#23376;&#21477;&#20013;&#24341;&#29992;&#65292;&#31561;&#31561;&#12290;
</p><p>
&#20854;&#20182;&#26041;&#38754;&#22522;&#26412;&#19978;&#31561;&#21516;&#20110;SQL&#12290;&#25903;&#25345;&#26143;&#21495;&#65288;&#8220;*&#8221;&#65289;&#65292;&#25903;&#25345;&#20989;&#25968;&#65292;&#25903;&#25345;&#20219;&#24847;&#25968;&#30446;&#30340;&#34920;&#36798;&#24335;&#12290;&#35745;&#31639;&#20986;&#30340;&#34920;&#36798;&#24335;&#21487;&#20197;&#29992;&#20110;&#25490;&#24207;&#12289;&#36807;&#28388;&#21644;&#20998;&#32452;&#65292;&#36825;&#19982;&#20854;&#20182;&#24120;&#35268;&#23646;&#24615;&#30456;&#21516;&#12290;
</p><p>
&#20174;&#29256;&#26412;0.9.9-rc2&#24320;&#22987;&#65292;&#20801;&#35768;&#20351;&#29992;GROUP BY&#30340;&#26102;&#20505;&#20351;&#29992;&#32858;&#38598;&#20989;&#25968;&#65288;AVG(), MIN(), MAX(), SUM()&#65289;&#12290;
</p><p>
&#34920;&#36798;&#24335;&#25490;&#24207;&#65288;<a class="xref" href="#sort-expr" title="5.6.&nbsp;SPH_SORT_EXPR &#27169;&#24335;">&#31532;&nbsp;5.6&nbsp;&#33410; &#8220;SPH_SORT_EXPR &#27169;&#24335;&#8221;</a>&#65289;&#21644;&#22320;&#29702;&#36317;&#31163;&#35745;&#31639;&#20989;&#25968;&#65288;<a class="xref" href="#api-func-setgeoanchor" title="8.4.5.&nbsp;SetGeoAnchor &#65288;&#35774;&#32622;&#22320;&#34920;&#36317;&#31163;&#38170;&#28857;&#65289;">&#31532;&nbsp;8.4.5&nbsp;&#33410; &#8220;SetGeoAnchor &#65288;&#35774;&#32622;&#22320;&#34920;&#36317;&#31163;&#38170;&#28857;&#65289;&#8221;</a>&#65289;&#29616;&#22312;&#30340;&#20869;&#37096;&#23454;&#29616;&#23601;&#26159;&#36825;&#31181;&#34920;&#36798;&#24335;&#35745;&#31639;&#26426;&#21046;&#65292;&#20998;&#21035;&#20351;&#29992;&#8220;&#39764;&#27861;&#21517;&#23383;&#8221;&#8220;@expr&#8221;&#21644;&#8220;@geodist&#8221;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
$cl-&gt;SetSelect ( "*, @weight+(user_karma+ln(pageviews))*0.1 AS myweight" );
$cl-&gt;SetSelect ( "exp_years, salary_gbp*{$gbp_usd_rate} AS salary_usd,
   IF(age&gt;40,1,0) AS over40" );
$cl-&gt;SetSelect ( "*, AVG(price) AS avgprice" );
</pre></div></div>
<div class="sect1" title="8.3.&nbsp;&#20840;&#25991;&#25628;&#32034;&#35774;&#32622;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="api-funcgroup-fulltext-query-settings"></a>8.3.&nbsp;&#20840;&#25991;&#25628;&#32034;&#35774;&#32622;</h2></div></div></div>
<div class="sect2" title="8.3.1.&nbsp;SetMatchMode &#65288;&#35774;&#32622;&#21305;&#37197;&#27169;&#24335;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setmatchmode"></a>8.3.1.&nbsp;SetMatchMode &#65288;&#35774;&#32622;&#21305;&#37197;&#27169;&#24335;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetMatchMode ( $mode )</p><p>
&#35774;&#32622;&#20840;&#25991;&#26597;&#35810;&#30340;&#21305;&#37197;&#27169;&#24335;&#65292;&#35265;<a class="xref" href="#matching-modes" title="5.1.&nbsp;&#21305;&#37197;&#27169;&#24335;">&#31532;&nbsp;5.1&nbsp;&#33410; &#8220;&#21305;&#37197;&#27169;&#24335;&#8221;</a>&#20013;&#30340;&#25551;&#36848;&#12290;&#21442;&#25968;&#24517;&#39035;&#26159;&#19968;&#20010;&#19982;&#26576;&#20010;&#24050;&#30693;&#27169;&#24335;&#23545;&#24212;&#30340;&#24120;&#25968;&#12290;
</p><p>
<span class="bold"><strong>&#35686;&#21578;&#65306;</strong></span> &#65288;&#20165;PHP&#65289;&#26597;&#35810;&#27169;&#24335;&#24120;&#37327;<span class="bold"><strong>&#19981;&#33021;</strong></span>&#21253;&#21547;&#22312;&#24341;&#21495;&#20013;&#65292;&#37027;&#32473;&#20986;&#30340;&#26159;&#19968;&#20010;&#23383;&#31526;&#20018;&#32780;&#19981;&#26159;&#19968;&#20010;&#24120;&#37327;&#65306;
</p><pre class="programlisting">
$cl-&gt;SetMatchMode ( "SPH_MATCH_ANY" ); // INCORRECT! will not work as expected
$cl-&gt;SetMatchMode ( SPH_MATCH_ANY ); // correct, works OK
</pre><p>
</p></div>
<div class="sect2" title="8.3.2.&nbsp;SetRankingMode &#65288;&#35774;&#32622;&#35780;&#20998;&#27169;&#24335;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setrankingmode"></a>8.3.2.&nbsp;SetRankingMode &#65288;&#35774;&#32622;&#35780;&#20998;&#27169;&#24335;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetRankingMode ( $ranker )</p><p>
&#35774;&#32622;&#35780;&#20998;&#27169;&#24335;&#12290;&#30446;&#21069;&#21482;&#22312;SPH_MATCH_EXTENDED2&#36825;&#20010;&#21305;&#37197;&#27169;&#24335;&#20013;&#25552;&#20379;&#12290;&#21442;&#25968;&#24517;&#39035;&#26159;&#19982;&#26576;&#20010;&#24050;&#30693;&#27169;&#24335;&#23545;&#24212;&#30340;&#24120;&#25968;&#12290;
</p><p>
Sphinx&#40664;&#35748;&#35745;&#31639;&#20004;&#20010;&#23545;&#26368;&#32456;&#21305;&#37197;&#26435;&#37325;&#26377;&#29992;&#30340;&#22240;&#23376;&#12290;&#20027;&#35201;&#26159;&#26597;&#35810;&#35789;&#32452;&#19982;&#25991;&#26723;&#25991;&#26412;&#30340;&#30456;&#20284;&#24230;&#12290;&#20854;&#27425;&#26159;&#31216;&#20043;&#20026;BM25&#30340;&#32479;&#35745;&#20989;&#25968;&#65292;&#35813;&#20989;&#25968;&#20540;&#26681;&#25454;&#20851;&#38190;&#23383;&#25991;&#26723;&#20013;&#30340;&#39057;&#29575;&#65288;&#39640;&#39057;&#23548;&#33268;&#39640;&#26435;&#37325;&#65289;&#21644;&#22312;&#25972;&#20010;&#32034;&#24341;&#20013;&#30340;&#39057;&#29575;&#65288;&#20302;&#39057;&#23548;&#33268;&#39640;&#26435;&#37325;&#65289;&#22312;0&#21644;1&#20043;&#38388;&#21462;&#20540;&#12290;
</p><p>
&#28982;&#32780;&#65292;&#26377;&#26102;&#21487;&#33021;&#38656;&#35201;&#25442;&#19968;&#31181;&#35745;&#31639;&#26435;&#37325;&#30340;&#26041;&#27861;&#8212;&#8212;&#25110;&#32773;&#21487;&#33021;&#20026;&#20102;&#25552;&#39640;&#24615;&#33021;&#32780;&#26681;&#26412;&#19981;&#35745;&#31639;&#26435;&#20540;&#65292;&#32467;&#26524;&#38598;&#29992;&#20854;&#20182;&#21150;&#27861;&#25490;&#24207;&#12290;&#36825;&#20010;&#30446;&#30340;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;&#21512;&#36866;&#30340;&#30456;&#20851;&#24230;&#35745;&#31639;&#27169;&#24335;&#26469;&#36798;&#21040;&#12290;
</p><p>
&#24050;&#32463;&#23454;&#29616;&#30340;&#27169;&#24335;&#21253;&#25324;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
SPH_RANK_PROXIMITY_BM25, &#40664;&#35748;&#27169;&#24335;&#65292;&#21516;&#26102;&#20351;&#29992;&#35789;&#32452;&#35780;&#20998;&#21644;BM25&#35780;&#20998;&#65292;&#24182;&#19988;&#23558;&#20108;&#32773;&#32467;&#21512;&#12290;
</li>
<li class="listitem">
SPH_RANK_BM25, &#32479;&#35745;&#30456;&#20851;&#24230;&#35745;&#31639;&#27169;&#24335;&#65292;&#20165;&#20351;&#29992;BM25&#35780;&#20998;&#35745;&#31639;&#65288;&#19982;&#22823;&#22810;&#25968;&#20840;&#25991;&#26816;&#32034;&#24341;&#25806;&#30456;&#21516;&#65289;&#12290;&#36825;&#20010;&#27169;&#24335;&#27604;&#36739;&#24555;&#65292;&#20294;&#26159;&#21487;&#33021;&#20351;&#21253;&#21547;&#22810;&#20010;&#35789;&#30340;&#26597;&#35810;&#30340;&#32467;&#26524;&#36136;&#37327;&#19979;&#38477;&#12290;
</li>
<li class="listitem">
SPH_RANK_NONE, &#31105;&#29992;&#35780;&#20998;&#30340;&#27169;&#24335;&#65292;&#36825;&#26159;&#26368;&#24555;&#30340;&#27169;&#24335;&#12290;&#23454;&#38469;&#19978;&#36825;&#31181;&#27169;&#24335;&#19982;&#24067;&#23572;&#25628;&#32034;&#30456;&#21516;&#12290;&#25152;&#26377;&#30340;&#21305;&#37197;&#39033;&#37117;&#34987;&#36171;&#20104;&#26435;&#37325;1&#12290;
</li>
<li class="listitem">SPH_RANK_WORDCOUNT, &#26681;&#25454;&#20851;&#38190;&#35789;&#20986;&#29616;&#27425;&#25968;&#25490;&#24207;&#12290;&#36825;&#20010;&#25490;&#24207;&#22120;&#35745;&#31639;&#27599;&#20010;&#23383;&#27573;&#20013;&#20851;&#38190;&#23383;&#30340;&#20986;&#29616;&#27425;&#25968;&#65292;&#28982;&#21518;&#25226;&#35745;&#25968;&#19982;&#23383;&#27573;&#30340;&#26435;&#37325;&#30456;&#20056;&#65292;&#26368;&#21518;&#23558;&#31215;&#27714;&#21644;&#65292;&#20316;&#20026;&#26368;&#32456;&#32467;&#26524;&#12290;
</li>
<li class="listitem">
SPH_RANK_PROXIMITY, &#29256;&#26412;0.9.9-rc1&#26032;&#22686;&#65292;&#23558;&#21407;&#22987;&#30340;&#35789;&#32452;&#30456;&#20284;&#24230;&#20316;&#20026;&#32467;&#26524;&#36820;&#22238;&#12290;&#22312;&#20869;&#37096;&#65292;&#36825;&#20010;&#27169;&#24335;&#34987;&#29992;&#26469;&#27169;&#25311;SPH_MATCH_ALL&#30340;&#26597;&#35810;&#12290;
</li>
<li class="listitem">
SPH_RANK_MATCHANY, &#29256;&#26412;0.9.9-rc1&#26032;&#22686;&#65292;&#36820;&#22238;&#20043;&#21069;&#22312;SPH_MATCH_ANY&#20013;&#35745;&#31639;&#30340;&#20301;&#27425;&#65292;&#22312;&#20869;&#37096;&#36825;&#20010;&#27169;&#24335;&#29992;&#20110;&#27169;&#25311;SPH_MATCH_ANY&#30340;&#26597;&#35810;&#12290;
</li>
<li class="listitem">
SPH_RANK_FIELDMASK, &#29256;&#26412;0.9.9-rc2&#26032;&#22686;&#65292;&#36820;&#22238;&#19968;&#20010;32&#20301;&#25513;&#30721;&#65292;&#20854;&#20013;&#31532;N&#20301;&#23545;&#24212;&#31532;N&#20010;&#20840;&#25991;&#23383;&#27573;&#65292;&#20174;0&#24320;&#22987;&#35745;&#25968;&#65292;&#22914;&#26524;&#26576;&#20010;&#23383;&#27573;&#20013;&#20986;&#29616;&#20102;&#28385;&#36275;&#26597;&#35810;&#30340;&#20851;&#38190;&#35789;&#65292;&#21017;&#23545;&#24212;&#30340;&#26631;&#24535;&#20301;&#34987;&#32622;1&#12290;
</li>
<li class="listitem">
SPH_RANK_SPH04, &#29256;&#26412;1.10-beta&#26032;&#22686;, &#22522;&#26412;&#21151;&#33021;&#32473;&#20104;&#40664;&#35748;&#30340;
SPH_RANK_PROXIMITY_BM25 &#35780;&#20998;, &#20294;&#26159;&#24403;&#20182;&#20204;&#22312;&#19968;&#27573;&#25991;&#26412;&#30340;&#26368;&#24320;&#22987;&#25110;&#32773;&#26368;&#21518;&#21305;&#37197;&#26102;&#20316;&#20102;&#36827;&#19968;&#27493;&#22788;&#29702;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#24403;&#19968;&#20010;&#23383;&#27573;&#20005;&#26684;&#21305;&#37197;&#26597;&#35810;&#26102;&#65292;&#30456;&#23545;&#20110;&#19968;&#20010;&#21253;&#21547;&#26597;&#35810;&#32780;&#38750;&#23436;&#20840;&#30456;&#21516;&#30340;&#23383;&#27573;&#65292;SPH04&#20250;&#32473;&#20104;&#26356;&#39640;&#30340;&#35780;&#20998;&#12290;&#65288;&#20363;&#22914;&#65292;&#24403;&#26597;&#35810;&#20026;"Hyde Park"&#26102;&#65292;&#19968;&#31687;&#21517;&#31216;&#20026;"Hyde Park"&#30340;&#25991;&#26723;&#21462;&#24471;&#30340;&#35780;&#20998;&#23558;&#39640;&#20110;&#19968;&#31687;&#21517;&#31216;&#20026; "Hyde Park, London" &#25110;&#32773; "The Hyde Park Cafe"&#30340;&#25991;&#26723;&#12290;&#65289;
</li>
</ul></div>
<p>
</p></div>
<div class="sect2" title="8.3.3.&nbsp;SetSortMode &#65288;&#35774;&#32622;&#25490;&#24207;&#27169;&#24335;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setsortmode"></a>8.3.3.&nbsp;SetSortMode &#65288;&#35774;&#32622;&#25490;&#24207;&#27169;&#24335;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetSortMode ( $mode, $sortby="" )</p><p>
&#35774;&#32622;&#21305;&#37197;&#39033;&#30340;&#25490;&#24207;&#27169;&#24335;&#65292;&#35265;<a class="xref" href="#sorting-modes" title="5.6.&nbsp;&#25490;&#24207;&#27169;&#24335;">&#31532;&nbsp;5.6&nbsp;&#33410; &#8220;&#25490;&#24207;&#27169;&#24335;&#8221;</a>&#20013;&#30340;&#25551;&#36848;&#12290;&#21442;&#25968;&#24517;&#39035;&#20026;&#19982;&#26576;&#20010;&#24050;&#30693;&#27169;&#24335;&#23545;&#24212;&#30340;&#24120;&#25968;&#12290;
</p><p>
<span class="bold"><strong>&#35686;&#21578;&#65306;</strong></span> &#65288;&#20165;PHP&#65289;&#26597;&#35810;&#27169;&#24335;&#24120;&#37327;<span class="bold"><strong>&#19981;&#33021;</strong></span>&#21253;&#21547;&#22312;&#24341;&#21495;&#20013;&#65292;&#37027;&#32473;&#20986;&#30340;&#26159;&#19968;&#20010;&#23383;&#31526;&#20018;&#32780;&#19981;&#26159;&#19968;&#20010;&#24120;&#37327;&#65306;
</p><pre class="programlisting">
$cl-&gt;SetSortMode ( "SPH_SORT_ATTR_DESC" ); // INCORRECT! will not work as expected
$cl-&gt;SetSortMode ( SPH_SORT_ATTR_ASC ); // correct, works OK
</pre><p>
</p></div>
<div class="sect2" title="8.3.4.&nbsp;SetWeights &#65288;&#35774;&#32622;&#26435;&#37325;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setweights"></a>8.3.4.&nbsp;SetWeights &#65288;&#35774;&#32622;&#26435;&#37325;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetWeights ( $weights )</p><p>
&#25353;&#22312;&#32034;&#24341;&#20013;&#20986;&#29616;&#30340;&#20808;&#21518;&#39034;&#24207;&#32473;&#23383;&#27573;&#35774;&#32622;&#26435;&#37325;&#12290;
<span class="bold"><strong>&#19981;&#25512;&#33616;</strong></span>&#20351;&#29992;, &#24314;&#35758;&#20351;&#29992; <a class="link" href="#api-func-setfieldweights" title="8.3.5.&nbsp;SetFieldWeights &#65288;&#35774;&#32622;&#23383;&#27573;&#26435;&#37325;&#65289;">SetFieldWeights()</a>&#12290;
</p></div>
<div class="sect2" title="8.3.5.&nbsp;SetFieldWeights &#65288;&#35774;&#32622;&#23383;&#27573;&#26435;&#37325;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setfieldweights"></a>8.3.5.&nbsp;SetFieldWeights &#65288;&#35774;&#32622;&#23383;&#27573;&#26435;&#37325;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetFieldWeights ( $weights )</p><p>
&#25353;&#23383;&#27573;&#21517;&#31216;&#35774;&#32622;&#23383;&#27573;&#30340;&#26435;&#20540;&#12290;&#21442;&#25968;&#24517;&#39035;&#26159;&#19968;&#20010;hash&#65288;&#20851;&#32852;&#25968;&#32452;&#65289;&#65292;&#35813;hash&#23558;&#20195;&#34920;&#23383;&#27573;&#21517;&#23383;&#30340;&#23383;&#31526;&#20018;&#26144;&#23556;&#21040;&#19968;&#20010;&#25972;&#22411;&#30340;&#26435;&#20540;&#19978;&#12290;
</p><p>
&#23383;&#27573;&#26435;&#37325;&#24433;&#21709;&#21305;&#37197;&#39033;&#30340;&#35780;&#32423;&#12290;<a class="xref" href="#weighting" title="5.4.&nbsp;&#26435;&#20540;&#35745;&#31639;">&#31532;&nbsp;5.4&nbsp;&#33410; &#8220;&#26435;&#20540;&#35745;&#31639;&#8221;</a> &#35299;&#37322;&#20102;&#35789;&#32452;&#30456;&#20284;&#24230;&#22914;&#20309;&#24433;&#21709;&#35780;&#32423;&#12290;&#36825;&#20010;&#35843;&#29992;&#29992;&#20110;&#32473;&#19981;&#21516;&#30340;&#20840;&#25991;&#25968;&#25454;&#23383;&#27573;&#25351;&#23450;&#19981;&#21516;&#20110;&#40664;&#35748;&#20540;&#30340;&#26435;&#20540;&#12290;
</p><p>
&#32473;&#23450;&#30340;&#26435;&#37325;&#24517;&#39035;&#26159;&#27491;&#30340;32&#20301;&#25972;&#25968;&#12290;&#26368;&#32456;&#30340;&#26435;&#37325;&#20063;&#26159;&#20010;32&#20301;&#30340;&#25972;&#25968;&#12290;&#40664;&#35748;&#26435;&#37325;&#20026;1&#12290;&#26410;&#30693;&#30340;&#23646;&#24615;&#21517;&#20250;&#34987;&#24573;&#30053;&#12290;
</p><p>
&#30446;&#21069;&#23545;&#26435;&#37325;&#27809;&#26377;&#24378;&#21046;&#30340;&#26368;&#22823;&#38480;&#21046;&#12290;&#20294;&#24744;&#35201;&#28165;&#26970;&#65292;&#35774;&#23450;&#36807;&#39640;&#30340;&#26435;&#20540;&#21487;&#33021;&#20250;&#23548;&#33268;&#20986;&#29616;32&#20301;&#25972;&#25968;&#30340;&#28322;&#20986;&#38382;&#39064;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#35774;&#23450;&#26435;&#20540;&#20026;10000000&#24182;&#22312;&#25193;&#23637;&#27169;&#24335;&#20013;&#36827;&#34892;&#25628;&#32034;&#65292;&#37027;&#20040;&#26368;&#22823;&#21487;&#33021;&#30340;&#26435;&#20540;&#20026;10M&#65288;&#24744;&#35774;&#30340;&#20540;&#65289;&#20056;&#20197;1000&#65288;BM25&#30340;&#20869;&#37096;&#27604;&#20363;&#31995;&#25968;&#65292;&#21442;&#35265;<a class="xref" href="#weighting" title="5.4.&nbsp;&#26435;&#20540;&#35745;&#31639;">&#31532;&nbsp;5.4&nbsp;&#33410; &#8220;&#26435;&#20540;&#35745;&#31639;&#8221;</a>, &#8220;&#26435;&#20540;&#35745;&#31639;&#8221;&#65289;&#20877;&#20056;&#20197;1&#25110;&#26356;&#22810;&#65288;&#35789;&#32452;&#30456;&#20284;&#24230;&#35780;&#32423;&#65289;&#12290;&#19978;&#36848;&#32467;&#26524;&#26368;&#23569;&#26159;100&#20159;&#65292;&#36825;&#22312;32&#20301;&#25972;&#25968;&#37324;&#38754;&#27809;&#27861;&#23384;&#20648;&#65292;&#23558;&#23548;&#33268;&#24847;&#24819;&#19981;&#21040;&#30340;&#32467;&#26524;&#12290;
</p></div>
<div class="sect2" title="8.3.6.&nbsp;SetIndexWeights &#65288;&#35774;&#32622;&#32034;&#24341;&#26435;&#37325;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setindexweights"></a>8.3.6.&nbsp;SetIndexWeights &#65288;&#35774;&#32622;&#32034;&#24341;&#26435;&#37325;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetIndexWeights ( $weights )</p><p>
&#35774;&#32622;&#32034;&#24341;&#30340;&#26435;&#37325;&#65292;&#24182;&#21551;&#29992;&#19981;&#21516;&#32034;&#24341;&#20013;&#21305;&#37197;&#32467;&#26524;&#26435;&#37325;&#30340;&#21152;&#26435;&#21644;&#12290;&#21442;&#25968;&#24517;&#39035;&#20026;&#22312;&#20195;&#34920;&#32034;&#24341;&#21517;&#30340;&#23383;&#31526;&#20018;&#19982;&#25972;&#22411;&#26435;&#20540;&#20043;&#38388;&#24314;&#31435;&#26144;&#23556;&#20851;&#31995;&#30340;hash&#65288;&#20851;&#32852;&#25968;&#32452;&#65289;&#12290;&#40664;&#35748;&#20540;&#26159;&#31354;&#25968;&#32452;&#65292;&#24847;&#24605;&#26159;&#20851;&#38381;&#24102;&#26435;&#21152;&#21644;&#12290;
</p><p>
&#24403;&#22312;&#19981;&#21516;&#30340;&#26412;&#22320;&#32034;&#24341;&#20013;&#37117;&#21305;&#37197;&#21040;&#30456;&#21516;&#30340;&#25991;&#26723;ID&#26102;&#65292;Sphinx&#40664;&#35748;&#36873;&#25321;&#26597;&#35810;&#20013;&#25351;&#23450;&#30340;&#26368;&#21518;&#19968;&#20010;&#32034;&#24341;&#12290;&#36825;&#26159;&#20026;&#20102;&#25903;&#25345;&#37096;&#20998;&#37325;&#21472;&#30340;&#20998;&#21306;&#32034;&#24341;&#12290;
</p><p>
&#28982;&#32780;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#32034;&#24341;&#24182;&#19981;&#20165;&#20165;&#26159;&#34987;&#20998;&#21306;&#20102;&#65292;&#24744;&#21487;&#33021;&#24819;&#23558;&#19981;&#21516;&#32034;&#24341;&#20013;&#30340;&#26435;&#20540;&#21152;&#22312;&#19968;&#36215;&#65292;&#32780;&#19981;&#26159;&#31616;&#21333;&#22320;&#36873;&#25321;&#20854;&#20013;&#30340;&#19968;&#20010;&#12290;<code class="code">SetIndexWeights()</code>&#20801;&#35768;&#24744;&#36825;&#20040;&#20570;&#12290;&#24403;&#24320;&#21551;&#20102;&#21152;&#21644;&#21151;&#33021;&#21518;&#65292;&#26368;&#21518;&#30340;&#21305;&#37197;&#26435;&#20540;&#26159;&#21508;&#20010;&#32034;&#24341;&#20013;&#30340;&#26435;&#20540;&#30340;&#21152;&#26435;&#21512;&#65292;&#21508;&#32034;&#24341;&#30340;&#26435;&#30001;&#26412;&#35843;&#29992;&#25351;&#23450;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#22914;&#26524;&#25991;&#26723;123&#22312;&#32034;&#24341;A&#34987;&#25214;&#21040;&#65292;&#26435;&#20540;&#26159;2&#65292;&#22312;B&#20013;&#20063;&#21487;&#25214;&#21040;&#65292;&#26435;&#20540;&#26159;3&#65292;&#32780;&#19988;&#24744;&#35843;&#29992;&#20102;<code class="code">SetIndexWeights ( array ( "A"=&gt;100, "B"=&gt;10 ) )</code>&#65292;&#37027;&#20040;&#25991;&#26723;123&#26368;&#32456;&#36820;&#22238;&#32473;&#23458;&#25143;&#31471;&#30340;&#26435;&#20540;&#20026;2*100+3*10 = 230&#12290;
</p></div></div>
<div class="sect1" title="8.4.&nbsp;&#32467;&#26524;&#38598;&#36807;&#28388;&#35774;&#32622;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="api-funcgroup-filtering"></a>8.4.&nbsp;&#32467;&#26524;&#38598;&#36807;&#28388;&#35774;&#32622;</h2></div></div></div>
<div class="sect2" title="8.4.1.&nbsp;SetIDRange &#65288;&#35774;&#32622;&#26597;&#35810;ID&#33539;&#22260;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setidrange"></a>8.4.1.&nbsp;SetIDRange &#65288;&#35774;&#32622;&#26597;&#35810;ID&#33539;&#22260;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetIDRange ( $min, $max )</p><p>
&#35774;&#32622;&#25509;&#21463;&#30340;&#25991;&#26723;ID&#33539;&#22260;&#12290;&#21442;&#25968;&#24517;&#39035;&#26159;&#25972;&#25968;&#12290;&#40664;&#35748;&#26159;0&#21644;0&#65292;&#24847;&#24605;&#26159;&#19981;&#38480;&#21046;&#33539;&#22260;&#12290;
</p><p>
&#27492;&#35843;&#29992;&#25191;&#34892;&#21518;&#65292;&#21482;&#26377;ID&#22312;<code class="code">$min</code>&#21644;<code class="code">$max</code>&#65288;&#21253;&#25324;<code class="code">$min</code>&#21644;<code class="code">$max</code>&#65289;&#20043;&#38388;&#30340;&#25991;&#26723;&#20250;&#34987;&#21305;&#37197;&#12290;
</p></div>
<div class="sect2" title="8.4.2.&nbsp;SetFilter &#65288;&#35774;&#32622;&#23646;&#24615;&#36807;&#28388;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setfilter"></a>8.4.2.&nbsp;SetFilter &#65288;&#35774;&#32622;&#23646;&#24615;&#36807;&#28388;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetFilter ( $attribute, $values, $exclude=false )</p><p>
&#22686;&#21152;&#25972;&#25968;&#20540;&#36807;&#28388;&#22120;&#12290;
</p><p>
&#27492;&#35843;&#29992;&#22312;&#24050;&#26377;&#30340;&#36807;&#28388;&#22120;&#21015;&#34920;&#20013;&#28155;&#21152;&#26032;&#30340;&#36807;&#28388;&#22120;&#12290;<code class="code">$attribute</code>&#26159;&#23646;&#24615;&#21517;&#12290;<code class="code">$values</code>&#26159;&#25972;&#25968;&#25968;&#32452;&#12290;<code class="code">$exclude</code>&#26159;&#24067;&#23572;&#20540;&#65292;&#23427;&#25511;&#21046;&#26159;&#25509;&#21463;&#21305;&#37197;&#30340;&#25991;&#26723;&#65288;&#40664;&#35748;&#27169;&#24335;&#65292;&#21363;<code class="code">$exclude</code>&#20026;false&#26102;&#65289;&#36824;&#26159;&#25298;&#32477;&#23427;&#20204;&#12290;
</p><p>
&#21482;&#26377;&#24403;&#32034;&#24341;&#20013;<code class="code">$attribute</code>&#21015;&#30340;&#20540;&#19982;<code class="code">$values</code>&#20013;&#30340;&#20219;&#19968;&#20540;&#21305;&#37197;&#26102;&#25991;&#26723;&#25165;&#20250;&#34987;&#21305;&#37197;&#65288;&#25110;&#32773;&#25298;&#32477;&#65292;&#22914;&#26524;<code class="code">$exclude</code>&#20540;&#20026;true&#65289;
</p></div>
<div class="sect2" title="8.4.3.&nbsp;SetFilterRange &#65288;&#35774;&#32622;&#23646;&#24615;&#33539;&#22260;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setfilterrange"></a>8.4.3.&nbsp;SetFilterRange &#65288;&#35774;&#32622;&#23646;&#24615;&#33539;&#22260;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetFilterRange ( $attribute, $min, $max, $exclude=false )</p><p>
&#28155;&#21152;&#26032;&#30340;&#25972;&#25968;&#33539;&#22260;&#36807;&#28388;&#22120;&#12290;
</p><p>
&#27492;&#35843;&#29992;&#22312;&#24050;&#26377;&#30340;&#36807;&#28388;&#22120;&#21015;&#34920;&#20013;&#28155;&#21152;&#26032;&#30340;&#36807;&#28388;&#22120;&#12290;<code class="code">$attribute</code>&#26159;&#23646;&#24615;&#21517;, <code class="code">$min</code> &#12289;<code class="code">$max</code>&#23450;&#20041;&#20102;&#19968;&#20010;&#25972;&#25968;&#38381;&#21306;&#38388;&#65292;<code class="code">$exclude</code>&#24067;&#23572;&#20540;&#65292;&#23427;&#25511;&#21046;&#26159;&#25509;&#21463;&#21305;&#37197;&#30340;&#25991;&#26723;&#65288;&#40664;&#35748;&#27169;&#24335;&#65292;&#21363;<code class="code">$exclude</code>&#20026;false&#26102;&#65289;&#36824;&#26159;&#25298;&#32477;&#23427;&#20204;&#12290;
</p><p>
&#21482;&#26377;&#24403;&#32034;&#24341;&#20013;<code class="code">$attribute</code>&#21015;&#30340;&#20540;&#33853;&#22312;<code class="code">$min</code> &#21644; <code class="code">$max</code>&#20043;&#38388;&#65288;&#21253;&#25324;<code class="code">$min</code> &#21644; <code class="code">$max</code>&#65289;&#65292;&#25991;&#26723;&#25165;&#20250;&#34987;&#21305;&#37197;&#65288;&#25110;&#32773;&#25298;&#32477;&#65292;&#22914;&#26524;<code class="code">$exclude</code>&#20540;&#20026;true&#65289;&#12290;
</p></div>
<div class="sect2" title="8.4.4.&nbsp;SetFilterFloatRange &#65288;&#35774;&#32622;&#28014;&#28857;&#25968;&#33539;&#22260;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setfilterfloatrange"></a>8.4.4.&nbsp;SetFilterFloatRange &#65288;&#35774;&#32622;&#28014;&#28857;&#25968;&#33539;&#22260;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetFilterFloatRange ( $attribute, $min, $max, $exclude=false )</p><p>
&#22686;&#21152;&#26032;&#30340;&#28014;&#28857;&#25968;&#33539;&#22260;&#36807;&#28388;&#22120;&#12290;
</p><p>
&#27492;&#35843;&#29992;&#22312;&#24050;&#26377;&#30340;&#36807;&#28388;&#22120;&#21015;&#34920;&#20013;&#28155;&#21152;&#26032;&#30340;&#36807;&#28388;&#22120;&#12290;<code class="code">$attribute</code>&#26159;&#23646;&#24615;&#21517;, <code class="code">$min</code> &#12289;<code class="code">$max</code>&#23450;&#20041;&#20102;&#19968;&#20010;&#28014;&#28857;&#25968;&#38381;&#21306;&#38388;&#65292;<code class="code">$exclude</code>&#24517;&#39035;&#26159;&#24067;&#23572;&#20540;&#65292;&#23427;&#25511;&#21046;&#26159;&#25509;&#21463;&#21305;&#37197;&#30340;&#25991;&#26723;&#65288;&#40664;&#35748;&#27169;&#24335;&#65292;&#21363;<code class="code">$exclude</code>&#20026;false&#26102;&#65289;&#36824;&#26159;&#25298;&#32477;&#23427;&#20204;&#12290;
</p><p>
&#21482;&#26377;&#24403;&#32034;&#24341;&#20013;<code class="code">$attribute</code>&#21015;&#30340;&#20540;&#33853;&#22312;<code class="code">$min</code> &#21644; <code class="code">$max</code>&#20043;&#38388;&#65288;&#21253;&#25324;<code class="code">$min</code> &#21644; <code class="code">$max</code>&#65289;&#65292;&#25991;&#26723;&#25165;&#20250;&#34987;&#21305;&#37197;&#65288;&#25110;&#32773;&#25298;&#32477;&#65292;&#22914;&#26524;<code class="code">$exclude</code>&#20540;&#20026;true&#65289;&#12290;
</p></div>
<div class="sect2" title="8.4.5.&nbsp;SetGeoAnchor &#65288;&#35774;&#32622;&#22320;&#34920;&#36317;&#31163;&#38170;&#28857;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setgeoanchor"></a>8.4.5.&nbsp;SetGeoAnchor &#65288;&#35774;&#32622;&#22320;&#34920;&#36317;&#31163;&#38170;&#28857;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetGeoAnchor ( $attrlat, $attrlong, $lat, $long )</p><p>
&#20026;&#22320;&#29702;&#36317;&#31163;&#35745;&#31639;&#35774;&#32622;&#38170;&#28857;&#65292;&#24182;&#19988;&#20801;&#35768;&#20351;&#29992;&#23427;&#20204;&#12290;
</p><p>
<code class="code">$attrlat</code> &#21644; <code class="code">$attrlong</code>&#26159;&#23383;&#31526;&#20018;&#65292;&#20998;&#21035;&#25351;&#23450;&#20102;&#23545;&#24212;&#32463;&#24230;&#21644;&#32428;&#24230;&#30340;&#23646;&#24615;&#21517;&#31216;&#12290;<code class="code">$lat</code> &#21644; <code class="code">$long</code>&#26159;&#28014;&#28857;&#20540;&#65292;&#25351;&#23450;&#20102;&#38170;&#28857;&#30340;&#32463;&#24230;&#21644;&#32428;&#24230;&#20540;&#65292;&#20197;&#35282;&#24230;&#20026;&#21333;&#20301;&#12290;
</p><p>
&#19968;&#26086;&#35774;&#32622;&#20102;&#38170;&#28857;&#65292;&#24744;&#23601;&#21487;&#20197;&#22312;&#24744;&#30340;&#36807;&#28388;&#22120;&#21644;/&#25110;&#25490;&#24207;&#34920;&#36798;&#24335;&#20013;&#20351;&#29992;<code class="code">"@geodist"</code>&#29305;&#27530;&#23646;&#24615;&#12290;Sphinx&#23558;&#22312;&#27599;&#19968;&#27425;&#20840;&#25991;&#26816;&#32034;&#20013;&#35745;&#31639;&#32473;&#23450;&#32463;&#32428;&#24230;&#19982;&#38170;&#28857;&#20043;&#21069;&#30340;&#22320;&#34920;&#36317;&#31163;&#65292;&#24182;&#25226;&#27492;&#36317;&#31163;&#38468;&#21152;&#21040;&#21305;&#37197;&#32467;&#26524;&#19978;&#21435;&#12290;<code class="code">SetGeoAnchor</code>&#21644;&#32034;&#24341;&#23646;&#24615;&#25968;&#25454;&#20013;&#30340;&#32463;&#32428;&#24230;&#20540;&#37117;&#26159;&#35282;&#24230;&#12290;&#32780;&#32467;&#26524;&#20250;&#20197;&#31859;&#20026;&#21333;&#20301;&#36820;&#22238;&#65292;&#22240;&#27492;&#22320;&#34920;&#36317;&#31163;1000.0&#20195;&#34920;1&#21315;&#31859;&#12290;&#19968;&#33521;&#37324;&#22823;&#32422;&#26159;1609.344&#31859;&#12290;
</p></div></div>
<div class="sect1" title="8.5.&nbsp;&#20998;&#32452;&#35774;&#32622;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="api-funcgroup-groupby"></a>8.5.&nbsp;&#20998;&#32452;&#35774;&#32622;</h2></div></div></div>
<div class="sect2" title="8.5.1.&nbsp;SetGroupBy &#65288;&#35774;&#32622;&#20998;&#32452;&#30340;&#23646;&#24615;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setgroupby"></a>8.5.1.&nbsp;SetGroupBy &#65288;&#35774;&#32622;&#20998;&#32452;&#30340;&#23646;&#24615;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetGroupBy ( $attribute, $func, $groupsort="@group desc" )</p><p>
&#35774;&#32622;&#36827;&#34892;&#20998;&#32452;&#30340;&#23646;&#24615;&#12289;&#20989;&#25968;&#21644;&#32452;&#38388;&#25490;&#24207;&#27169;&#24335;&#65292;&#24182;&#21551;&#29992;&#20998;&#32452;&#65288;&#21442;&#32771;<a class="xref" href="#clustering" title="5.7.&nbsp;&#32467;&#26524;&#20998;&#32452;&#65288;&#32858;&#31867;&#65289;">&#31532;&nbsp;5.7&nbsp;&#33410; &#8220;&#32467;&#26524;&#20998;&#32452;&#65288;&#32858;&#31867;&#65289;&#8221;</a>&#20013;&#30340;&#25551;&#36848;&#65289;&#12290;
</p><p>
<code class="code">$attribute</code>&#26159;&#23383;&#31526;&#20018;&#65292;&#20026;&#36827;&#34892;&#20998;&#32452;&#30340;&#23646;&#24615;&#21517;&#12290;<code class="code">$func</code>&#20026;&#24120;&#25968;&#65292;&#23427;&#25351;&#23450;&#20869;&#24314;&#20989;&#25968;&#65292;&#35813;&#20989;&#25968;&#20197;&#21069;&#38754;&#25152;&#36848;&#30340;&#20998;&#32452;&#23646;&#24615;&#30340;&#20540;&#20026;&#36755;&#20837;&#65292;&#30446;&#21069;&#30340;&#21487;&#36873;&#30340;&#20540;&#20026;&#65306;
SPH_GROUPBY_DAY&#12289;SPH_GROUPBY_WEEK&#12289; SPH_GROUPBY_MONTH&#12289; SPH_GROUPBY_YEAR&#12289;SPH_GROUPBY_ATTR &#12290;
<code class="code">$groupsort</code> &#26159;&#25511;&#21046;&#20998;&#32452;&#22914;&#20309;&#25490;&#24207;&#30340;&#23376;&#21477;&#12290;&#20854;&#35821;&#27861;&#19982;<a class="xref" href="#sort-extended" title="5.6.&nbsp;SPH_SORT_EXTENDED mode">&#31532;&nbsp;5.6&nbsp;&#33410; &#8220;SPH_SORT_EXTENDED mode&#8221;</a>&#20013;&#25551;&#36848;&#30340;&#30456;&#20284;&#12290;
</p><p>
&#20998;&#32452;&#19982;SQL&#20013;&#30340;GROUP BY&#23376;&#21477;&#26412;&#36136;&#19978;&#30456;&#21516;&#12290;&#27492;&#20989;&#25968;&#35843;&#29992;&#20135;&#29983;&#30340;&#32467;&#26524;&#19982;&#19979;&#38754;&#20266;&#20195;&#30721;&#20135;&#29983;&#30340;&#32467;&#26524;&#30456;&#21516;&#12290;
</p><pre class="programlisting">
SELECT ... GROUP BY $func($attribute) ORDER BY $groupsort
</pre><p>
&#27880;&#24847;&#65292;&#24433;&#21709;&#26368;&#32456;&#32467;&#26524;&#38598;&#20013;&#21305;&#37197;&#39033;&#39034;&#24207;&#30340;&#26159;<code class="code">$groupsort</code>&#12290;&#25490;&#24207;&#27169;&#24335;&#65288;&#35265;<a class="xref" href="#api-func-setsortmode" title="8.3.3.&nbsp;SetSortMode &#65288;&#35774;&#32622;&#25490;&#24207;&#27169;&#24335;&#65289;">&#31532;&nbsp;8.3.3&nbsp;&#33410; &#8220;SetSortMode &#65288;&#35774;&#32622;&#25490;&#24207;&#27169;&#24335;&#65289;&#8221;</a>&#65289;&#24433;&#21709;&#27599;&#20010;&#20998;&#32452;<span class="emphasis"><em>&#20869;</em></span>&#30340;&#39034;&#24207;&#65292;&#21363;&#27599;&#32452;&#20869;&#21738;&#20123;&#21305;&#37197;&#39033;&#34987;&#35270;&#20026;&#26368;&#20339;&#21305;&#37197;&#12290;&#27604;&#22914;&#65292;&#32452;&#20043;&#38388;&#21487;&#20197;&#26681;&#25454;&#27599;&#32452;&#20013;&#30340;&#21305;&#37197;&#39033;&#25968;&#37327;&#25490;&#24207;&#30340;&#21516;&#26102;&#27599;&#32452;&#32452;&#20869;&#21448;&#26681;&#25454;&#30456;&#20851;&#24230;&#25490;&#24207;&#12290;
</p><p>
&#20174;&#29256;&#26412; 0.9.9-rc2 &#24320;&#22987;, &#32858;&#21512;&#20989;&#25968; (AVG(), MIN(),
MAX(), SUM()) &#21487;&#20197;&#22312;GROUP BY&#26102;&#34987; <a class="link" href="#api-func-setselect" title="8.2.4.&nbsp;SetSelect (&#35774;&#32622;&#36820;&#22238;&#20449;&#24687;&#30340;&#20869;&#23481;)">SetSelect()</a> API &#35843;&#29992;&#12290;
</p><p>
&#20174;&#29256;&#26412;2.0.1-beta&#24320;&#22987;, &#25903;&#25345;&#25353;&#29031;&#23383;&#31526;&#20018;&#23646;&#24615;&#20998;&#32452;&#65288;&#26681;&#25454;&#20854;&#24403;&#21069;&#23383;&#31526;&#38598;&#26657;&#23545;&#65289;&#12290;
</p></div>
<div class="sect2" title="8.5.2.&nbsp;SetGroupDistinct &#65288;&#35774;&#32622;&#20998;&#32452;&#35745;&#31639;&#19981;&#21516;&#20540;&#30340;&#23646;&#24615;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-setgroupdistinct"></a>8.5.2.&nbsp;SetGroupDistinct &#65288;&#35774;&#32622;&#20998;&#32452;&#35745;&#31639;&#19981;&#21516;&#20540;&#30340;&#23646;&#24615;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function SetGroupDistinct ( $attribute )</p><p>
&#35774;&#32622;&#20998;&#32452;&#20013;&#38656;&#35201;&#35745;&#31639;&#19981;&#21516;&#21462;&#20540;&#25968;&#30446;&#30340;&#23646;&#24615;&#21517;&#12290;&#21482;&#22312;&#20998;&#32452;&#26597;&#35810;&#20013;&#26377;&#25928;&#12290;
</p><p>
<code class="code">$attribute</code>&#26159;&#21253;&#21547;&#23646;&#24615;&#21517;&#30340;&#23383;&#31526;&#20018;&#12290;&#27599;&#20010;&#32452;&#30340;&#36825;&#20010;&#23646;&#24615;&#30340;&#21462;&#20540;&#37117;&#20250;&#34987;&#20648;&#23384;&#36215;&#26469;&#65288;&#21482;&#35201;&#20869;&#23384;&#20801;&#35768;&#65289;&#65292;&#20854;&#21518;&#27492;&#23646;&#24615;&#22312;&#27492;&#32452;&#20013;&#19981;&#21516;&#20540;&#30340;&#24635;&#25968;&#20250;&#34987;&#35745;&#31639;&#20986;&#26469;&#24182;&#36820;&#22238;&#32473;&#23458;&#25143;&#31471;&#12290;&#36825;&#20010;&#29305;&#24615;&#19982;&#26631;&#20934;SQL&#20013;&#30340;<code class="code">COUNT(DISTINCT)</code>&#23376;&#21477;&#31867;&#20284;&#12290;&#22240;&#27492;&#22914;&#19979;Sphinx&#35843;&#29992;
</p><pre class="programlisting">
$cl-&gt;SetGroupBy ( "category", SPH_GROUPBY_ATTR, "@count desc" );
$cl-&gt;SetGroupDistinct ( "vendor" );
</pre><p>
&#31561;&#20215;&#20110;&#22914;&#19979;&#30340;SQL&#35821;&#21477;&#65306;
</p><pre class="programlisting">
SELECT id, weight, all-attributes,
	COUNT(DISTINCT vendor) AS @distinct,
	COUNT(*) AS @count
FROM products
GROUP BY category
ORDER BY @count DESC
</pre><p>
&#22312;&#19978;&#36848;&#31034;&#20363;&#20266;&#20195;&#30721;&#20013;&#65292;<code class="code">SetGroupDistinct()</code>&#35843;&#29992;&#21482;&#19982;<code class="code">COUNT(DISINCT vendor)</code>&#23545;&#24212;&#12290;<code class="code">GROUP BY</code>&#65292;<code class="code">ORDER By</code>&#21644;<code class="code">COUNT(*)</code>&#23376;&#21477;&#21017;&#19982;<code class="code">SetGroupBY()</code>&#35843;&#29992;&#31561;&#20215;&#12290;&#20004;&#20010;&#26597;&#35810;&#37117;&#20250;&#22312;&#27599;&#31867;&#20013;&#36820;&#22238;&#19968;&#20010;&#21305;&#37197;&#30340;&#34892;&#12290;&#38500;&#20102;&#32034;&#24341;&#20013;&#30340;&#23646;&#24615;&#65292;&#21305;&#37197;&#39033;&#36824;&#21487;&#20197;&#21253;&#21547;&#27599;&#31867;&#30340;&#21305;&#37197;&#39033;&#35745;&#25968;&#21644;&#27599;&#31867;&#20013;&#19981;&#21516;&#26469;&#28304; ID&#30340;&#35745;&#25968;&#12290;
</p></div></div>
<div class="sect1" title="8.6.&nbsp;&#25628;&#32034;&#25968;&#25454;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="api-funcgroup-querying"></a>8.6.&nbsp;&#25628;&#32034;&#25968;&#25454;</h2></div></div></div>
<div class="sect2" title="8.6.1.&nbsp;Query &#65288;&#26597;&#35810;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-query"></a>8.6.1.&nbsp;Query &#65288;&#26597;&#35810;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function Query ( $query, $index="*", $comment="" )</p><p>
&#36830;&#25509;&#21040;<code class="filename">searchd</code>&#26381;&#21153;&#22120;&#65292;&#26681;&#25454;&#26381;&#21153;&#22120;&#30340;&#24403;&#21069;&#35774;&#32622;&#25191;&#34892;&#32473;&#23450;&#30340;&#26597;&#35810;&#65292;&#21462;&#24471;&#24182;&#36820;&#22238;&#32467;&#26524;&#38598;&#12290;
</p><p>
<code class="code">$query</code>&#26159;&#26597;&#35810;&#23383;&#20018;&#65292;<code class="code">$index</code>&#26159;&#21253;&#21547;&#19968;&#20010;&#25110;&#22810;&#20010;&#32034;&#24341;&#21517;&#30340;&#23383;&#31526;&#20018;&#12290;&#19968;&#26086;&#21457;&#29983;&#19968;&#33324;&#38169;&#35823;&#65292;&#21017;&#36820;&#22238;&#20551;&#24182;&#35774;&#32622;<code class="code">GetLastError()</code>&#20449;&#24687;&#12290;&#33509;&#25104;&#21151;&#21017;&#36820;&#22238;&#25628;&#32034;&#30340;&#32467;&#26524;&#38598;&#12290;
&#27492;&#22806;, <code class="code">$comment</code> &#23558;&#34987;&#21457;&#36865;&#21040;&#26597;&#35810;&#26085;&#24535;&#20013;&#25628;&#32034;&#37096;&#20998;&#30340;&#21069;&#38754;&#65292;&#36825;&#23545;&#20110;&#35843;&#35797;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;&#30446;&#21069;&#65292;&#27880;&#37322;&#30340;&#38271;&#24230;&#38480;&#21046;&#20026;128&#20010;&#23383;&#31526;&#20197;&#20869;&#12290;
</p><p>
<code class="code">$index</code>&#30340;&#40664;&#35748;&#20540;&#26159;<code class="code">"*"</code>&#65292;&#24847;&#24605;&#26159;&#23545;&#20840;&#37096;&#26412;&#22320;&#32034;&#24341;&#20570;&#26597;&#35810;&#12290;&#32034;&#24341;&#21517;&#20013;&#20801;&#35768;&#30340;&#23383;&#31526;&#21253;&#25324;&#25289;&#19969;&#23383;&#27597;&#65288;a-z&#65289;&#65292;&#25968;&#23383;&#65288;0-9&#65289;&#65292;&#20943;&#21495;&#65288;-&#65289;&#21644;&#19979;&#21010;&#32447;&#65288;_&#65289;&#65292;&#20854;&#20182;&#23383;&#31526;&#22343;&#35270;&#20026;&#20998;&#38548;&#31526;&#12290;&#22240;&#27492;&#65292;&#19979;&#38754;&#30340;&#31034;&#20363;&#35843;&#29992;&#37117;&#26159;&#26377;&#25928;&#30340;&#65292;&#32780;&#19988;&#20250;&#25628;&#32034;&#30456;&#21516;&#30340;&#20004;&#20010;&#32034;&#24341;&#65306;
</p><pre class="programlisting">
$cl-&gt;Query ( "test query", "main delta" );
$cl-&gt;Query ( "test query", "main;delta" );
$cl-&gt;Query ( "test query", "main, delta" );
</pre><p>
&#32473;&#20986;&#22810;&#20010;&#32034;&#24341;&#26102;&#32034;&#24341;&#30340;&#39034;&#24207;&#26159;&#26377;&#24847;&#20041;&#30340;&#12290;&#22914;&#26524;&#21516;&#19968;&#20010;&#25991;&#26723;ID&#30340;&#25991;&#26723;&#22312;&#22810;&#20010;&#32034;&#24341;&#20013;&#25214;&#21040;&#65292;&#37027;&#20040;&#26435;&#20540;&#21644;&#23646;&#24615;&#20540;&#20250;&#21462;&#26368;&#21518;&#19968;&#20010;&#32034;&#24341;&#20013;&#25152;&#23384;&#20648;&#30340;&#20316;&#20026;&#35813;&#25991;&#26723;ID&#30340;&#26435;&#20540;&#21644;&#23646;&#24615;&#20540;&#65292;&#29992;&#20110;&#25490;&#24207;&#12289;&#36807;&#28388;&#65292;&#24182;&#36820;&#22238;&#32473;&#23458;&#25143;&#31471;&#65288;&#38500;&#38750;&#29992;<a class="link" href="#api-func-setindexweights" title="8.3.6.&nbsp;SetIndexWeights &#65288;&#35774;&#32622;&#32034;&#24341;&#26435;&#37325;&#65289;">SetIndexWeights()</a>&#26174;&#24335;&#25913;&#21464;&#40664;&#35748;&#34892;&#20026;&#65289;&#12290;&#22240;&#27492;&#22312;&#19978;&#36848;&#31034;&#20363;&#20013;&#65292;&#32034;&#24341;&#8220;delta&#8221;&#20013;&#30340;&#21305;&#37197;&#39033;&#24635;&#26159;&#27604;&#32034;&#24341;&#8220;main&#8221;&#20013;&#30340;&#26356;&#20248;&#20808;&#12290;
</p><p>
&#22914;&#26524;&#25628;&#32034;&#25104;&#21151;&#65292;<code class="code">Query()</code>&#36820;&#22238;&#30340;&#32467;&#26524;&#38598;&#21253;&#21547;&#25214;&#21040;&#30340;&#20840;&#37096;&#21305;&#37197;&#39033;&#20013;&#30340;&#19968;&#37096;&#20998;&#65288;&#26681;&#25454;<a class="link" href="#api-func-setlimits" title="8.2.1.&nbsp;SetLimits &#65288;&#35774;&#32622;&#32467;&#26524;&#38598;&#20559;&#31227;&#37327;&#65289;">SetLimits()</a>&#20043;&#35774;&#23450;&#65289;&#21644;&#19982;&#26597;&#35810;&#30456;&#20851;&#30340;&#32479;&#35745;&#25968;&#25454;&#12290;&#32467;&#26524;&#38598;&#26159;hash&#65288;&#20165;PHP&#65292;&#20854;&#20182;&#35821;&#35328;&#30340;API&#21487;&#33021;&#20351;&#29992;&#20854;&#20182;&#25968;&#25454;&#32467;&#26500;&#65289;
&#65292;&#21253;&#21547;&#22914;&#19979;&#38190;&#21644;&#20540;&#65306;
</p><div class="variablelist"><dl><dt><span class="term">"matches":</span></dt>
<dd>&#26159;&#19968;&#20010;hash&#34920;&#65292;&#23384;&#20648;&#25991;&#26723;ID&#20197;&#21450;&#20854;&#23545;&#24212;&#30340;&#21478;&#19968;&#20010;&#21253;&#21547;&#25991;&#26723;&#26435;&#37325;&#21644;&#23646;&#24615;&#20540;&#30340;hash&#34920;&#65288;&#25110;&#32773;&#65292;&#22914;&#26524;&#21551;&#29992;&#20102;<a class="link" href="#api-func-setarrayresult" title="8.1.6.&nbsp;SetArrayResult &#65288;&#35774;&#32622;&#32467;&#26524;&#36820;&#22238;&#26684;&#24335;&#65289;">SetArrayResult()</a>&#21017;&#36820;&#22238;&#25968;&#32452;&#65289;&#12290;
	</dd><dt><span class="term">"total":</span></dt>
<dd>&#26412;&#26597;&#35810;&#22312;<span class="emphasis"><em>&#25628;&#32034;&#26381;&#21153;&#22120;</em></span>&#26816;&#32034;&#25152;&#24471;&#30340;&#21305;&#37197;&#25991;&#26723;&#24635;&#25968;&#65288;&#21363;&#26381;&#21153;&#22120;&#31471;&#32467;&#26524;&#38598;&#30340;&#22823;&#23567;&#65289;&#12290;&#36825;&#26159;&#22312;&#24403;&#21069;&#35774;&#32622;&#19979;&#65292;&#29992;&#24403;&#21069;&#26597;&#35810;&#21487;&#20197;&#20174;&#26381;&#21153;&#22120;&#31471;&#33719;&#24471;&#30340;&#25628;&#32034;&#32467;&#26524;&#65288;&#21305;&#37197;&#25991;&#26723;&#65289;&#25968;&#30446;&#30340;&#19978;&#38480;&#12290;&#20854;&#26368;&#22823;&#38480;&#21046;&#20540;&#30001;<a class="link" href="#api-func-setarrayresult" title="8.1.6.&nbsp;SetArrayResult &#65288;&#35774;&#32622;&#32467;&#26524;&#36820;&#22238;&#26684;&#24335;&#65289;">SetLimits()</a>&#35774;&#23450;&#12290;
	</dd><dt><span class="term">"total_found":</span></dt>
<dd>&#65288;&#25628;&#32034;&#26381;&#21153;&#22120;&#19978;&#25214;&#21040;&#21644;&#22788;&#29702;&#20102;&#30340;&#65289;&#32034;&#24341;&#20013;&#21305;&#37197;&#25991;&#26723;&#30340;&#24635;&#25968;&#12290;&#20854;&#19982;total&#30340;&#24046;&#21035;&#22312;&#20110;&#65306;total&#34920;&#31034;&#23458;&#25143;&#31471;&#23454;&#38469;&#21487;&#20197;&#35835;&#21462;&#30340;&#32467;&#26524;&#25968;&#30446;&#65292;&#32780;total_found&#20165;&#34920;&#31034;&#26381;&#21153;&#22120;&#31471;&#23384;&#22312;&#22810;&#23569;&#21305;&#37197;&#30340;&#25991;&#26723;&#65288;&#27704;&#36828;&#19981;&#20250;&#27604;total&#23567;&#65289;&#12290;</dd><dt><span class="term">"words":</span></dt>
<dd>hash&#34920;&#65292;&#23427;&#23558;&#26597;&#35810;&#20851;&#38190;&#23383;&#65288;&#20851;&#38190;&#23383;&#24050;&#32463;&#36807;&#22823;&#23567;&#20889;&#36716;&#25442;&#65292;&#21462;&#35789;&#24178;&#21644;&#20854;&#20182;&#22788;&#29702;&#65289;&#26144;&#23556;&#21040;&#19968;&#20010;&#21253;&#21547;&#20851;&#20110;&#20851;&#38190;&#23383;&#30340;&#32479;&#35745;&#25968;&#25454;&#65288;&#8220;docs&#8221;&#8212;&#8212;&#22312;&#22810;&#23569;&#25991;&#26723;&#20013;&#20986;&#29616;&#65292;&#8220;hits&#8221;&#8212;&#8212;&#20849;&#20986;&#29616;&#20102;&#22810;&#23569;&#27425;&#65289;&#30340;&#23567;hash&#34920;&#19978;&#12290;</dd><dt><span class="term">"error":</span></dt>
<dd><code class="filename">searchd</code> &#25253;&#21578;&#30340;&#38169;&#35823;&#20449;&#24687;&#65288;&#20154;&#24615;&#21270;&#21487;&#35835;&#30340;&#23383;&#31526;&#20018;&#65289;&#12290;&#33509;&#26080;&#38169;&#35823;&#21017;&#20026;&#31354;&#23383;&#31526;&#20018;&#12290;</dd><dt><span class="term">"warning":</span></dt>
<dd><code class="filename">searchd</code>&#25253;&#21578;&#30340;&#35686;&#21578;&#20449;&#24687;&#65288;&#20154;&#31867;&#21487;&#35835;&#23383;&#31526;&#20018;&#65289;&#12290;&#33509;&#26080;&#35686;&#21578;&#21017;&#20026;&#31354;&#20018;&#12290;</dd></dl></div>
<p>
</p><p>
&#38656;&#35201;&#25351;&#20986;&#30340;&#26159; <code class="code">Query()</code> &#32034;&#25191;&#34892;&#30340;&#25805;&#20316;&#65292;&#19982;&#27809;&#26377;&#20013;&#38388;&#27493;&#39588;&#30340; <code class="code">AddQuery()</code>&#21644; <code class="code">RunQueries()</code> &#30456;&#21516; &#65307; &#23427;&#31867;&#20284;&#19968;&#27425;&#21333;&#29420;&#30340;<code class="code">AddQuery()</code>&#35843;&#29992;&#65292;&#32039;&#36319;&#19968;&#27425;&#30456;&#24212;&#30340;<code class="code">RunQueries()</code>&#35843;&#29992;&#65292;&#28982;&#21518;&#36820;&#22238;&#21305;&#37197;&#30340;&#31532;&#19968;&#20010;&#25968;&#32452;&#20803;&#32032; &#65288;&#20174;&#31532;&#19968;&#27425;&#65292;&#20063;&#26159;&#20165;&#26377;&#30340;&#19968;&#27425;&#26597;&#35810;&#36820;&#22238;&#65289;&#12290;
</p></div>
<div class="sect2" title="8.6.2.&nbsp;AddQuery &#65288;&#22686;&#21152;&#25209;&#37327;&#26597;&#35810;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-addquery"></a>8.6.2.&nbsp;AddQuery &#65288;&#22686;&#21152;&#25209;&#37327;&#26597;&#35810;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function AddQuery ( $query, $index="*", $comment="" )</p><p>
&#21521;&#25209;&#37327;&#26597;&#35810;&#22686;&#21152;&#19968;&#20010;&#26597;&#35810;&#12290;<code class="code">$query</code>&#20026;&#26597;&#35810;&#20018;&#12290;<code class="code">$index</code>&#20026;&#21253;&#21547;&#19968;&#20010;&#25110;&#22810;&#20010;&#32034;&#24341;&#21517;&#30340;&#23383;&#31526;&#20018;&#12290;
&#27492;&#22806;, &#22914;&#26524;&#25552;&#20379;&#20102;<code class="code">$comment</code>&#65292;&#23427; &#23558;&#34987;&#21457;&#36865;&#21040;&#26597;&#35810;&#26085;&#24535;&#20013;&#25628;&#32034;&#37096;&#20998;&#30340;&#21069;&#38754;&#65292;&#36825;&#23545;&#20110;&#35843;&#35797;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;&#30446;&#21069;&#65292;&#27880;&#37322;&#30340;&#38271;&#24230;&#38480;&#21046;&#20026;128&#20010;&#23383;&#31526;&#20197;&#20869;&#12290;&#36820;&#22238;<a class="link" href="#api-func-runqueries" title="8.6.3.&nbsp;RunQueries &#65288;&#25191;&#34892;&#25209;&#37327;&#26597;&#35810;&#65289;">RunQueries()</a>&#36820;&#22238;&#30340;&#25968;&#32452;&#20013;&#30340;&#19968;&#20010;&#19979;&#26631;&#12290;
</p><p>
&#25209;&#37327;&#26597;&#35810;&#65288;&#25110;&#22810;&#26597;&#35810;&#65289;&#20351;<code class="filename">searchd</code>&#33021;&#22815;&#36827;&#34892;&#21487;&#33021;&#30340;&#20869;&#37096;&#20248;&#21270;&#65292;&#24182;&#19988;&#26080;&#35770;&#22312;&#20219;&#20309;&#24773;&#20917;&#19979;&#37117;&#20250;&#20943;&#23569;&#32593;&#32476;&#36830;&#25509;&#21644;&#36827;&#31243;&#21019;&#24314;&#26041;&#38754;&#30340;&#24320;&#38144;&#12290;&#30456;&#23545;&#20110;&#21333;&#29420;&#30340;&#26597;&#35810;&#65292;&#25209;&#37327;&#26597;&#35810;&#19981;&#20250;&#24341;&#20837;&#20219;&#20309;&#39069;&#22806;&#30340;&#24320;&#38144;&#12290;&#22240;&#27492;&#24403;&#24744;&#30340;Web&#39029;&#36816;&#34892;&#20960;&#20010;&#19981;&#21516;&#30340;&#26597;&#35810;&#26102;&#65292;&#19968;&#23450;&#35201;&#32771;&#34385;&#20351;&#29992;&#25209;&#37327;&#26597;&#35810;&#12290;
</p><p>
&#20363;&#22914;&#65292;&#22810;&#27425;&#36816;&#34892;&#21516;&#19968;&#20010;&#20840;&#25991;&#26597;&#35810;&#65292;&#20294;&#20351;&#29992;&#19981;&#21516;&#30340;&#25490;&#24207;&#25110;&#20998;&#32452;&#35774;&#32622;&#65292;&#36825;&#20250;&#20351;<code class="filename">searchd</code>&#20165;&#36816;&#34892;&#19968;&#27425;&#24320;&#38144;&#26114;&#36149;&#30340;&#20840;&#25991;&#26816;&#32034;&#21644;&#30456;&#20851;&#24230;&#35745;&#31639;&#65292;&#28982;&#21518;&#22312;&#27492;&#22522;&#30784;&#19978;&#20135;&#29983;&#22810;&#20010;&#20998;&#32452;&#32467;&#26524;&#12290;
</p><p>
&#26377;&#26102;&#24744;&#19981;&#20165;&#38656;&#35201;&#31616;&#21333;&#22320;&#26174;&#31034;&#25628;&#32034;&#32467;&#26524;&#65292;&#32780;&#19988;&#35201;&#26174;&#31034;&#19968;&#20123;&#19982;&#31867;&#21035;&#30456;&#20851;&#30340;&#35745;&#25968;&#20449;&#24687;&#65292;&#20363;&#22914;&#25353;&#21046;&#36896;&#21830;&#20998;&#32452;&#21518;&#30340;&#20135;&#21697;&#25968;&#30446;&#65292;&#27492;&#26102;&#25209;&#37327;&#26597;&#35810;&#20250;&#33410;&#32422;&#22823;&#37327;&#30340;&#24320;&#38144;&#12290;&#33509;&#26080;&#25209;&#37327;&#26597;&#35810;&#65292;&#24744;&#20250;&#24517;&#39035;&#23558;&#36825;&#20123;&#26412;&#36136;&#19978;&#20960;&#20046;&#30456;&#21516;&#30340;&#26597;&#35810;&#36816;&#34892;&#22810;&#27425;&#24182;&#21462;&#22238;&#30456;&#21516;&#30340;&#21305;&#37197;&#39033;&#65292;&#26368;&#21518;&#20135;&#29983;&#19981;&#21516;&#30340;&#32467;&#26524;&#38598;&#12290;&#33509;&#20351;&#29992;&#25209;&#37327;&#26597;&#35810;&#65292;&#24744;&#21482;&#39035;&#23558;&#36825;&#20123;&#26597;&#35810;&#31616;&#21333;&#22320;&#32452;&#25104;&#19968;&#20010;&#25209;&#37327;&#26597;&#35810;&#65292;Sphinx&#20250;&#22312;&#20869;&#37096;&#20248;&#21270;&#25481;&#36825;&#20123;&#20887;&#20313;&#30340;&#20840;&#25991;&#25628;&#32034;&#12290;
</p><p>
<code class="code">AddQuery()</code>&#22312;&#20869;&#37096;&#23384;&#20648;&#20840;&#37096;&#24403;&#21069;&#35774;&#32622;&#29366;&#24577;&#20197;&#21450;&#26597;&#35810;&#65292;&#24744;&#20063;&#21487;&#22312;&#21518;&#32493;&#30340;<code class="code">AddQuery()</code>&#35843;&#29992;&#20013;&#25913;&#21464;&#35774;&#32622;&#12290;&#26089;&#20808;&#21152;&#20837;&#30340;&#26597;&#35810;&#19981;&#20250;&#34987;&#24433;&#21709;&#65292;&#23454;&#38469;&#19978;&#27809;&#26377;&#20219;&#20309;&#21150;&#27861;&#21487;&#20197;&#25913;&#21464;&#23427;&#20204;&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;&#31034;&#20363;&#65306;
</p><pre class="programlisting">
$cl-&gt;SetSortMode ( SPH_SORT_RELEVANCE );
$cl-&gt;AddQuery ( "hello world", "documents" );

$cl-&gt;SetSortMode ( SPH_SORT_ATTR_DESC, "price" );
$cl-&gt;AddQuery ( "ipod", "products" );

$cl-&gt;AddQuery ( "harry potter", "books" );

$results = $cl-&gt;RunQueries ();
</pre><p>
&#29992;&#19978;&#36848;&#20195;&#30721;&#65292;&#31532;&#19968;&#20010;&#26597;&#35810;&#20250;&#22312;&#8220;documents&#8221;&#32034;&#24341;&#19978;&#26597;&#35810;&#8220;hello world&#8221;&#24182;&#23558;&#32467;&#26524;&#25353;&#30456;&#20851;&#24230;&#25490;&#24207;&#65292;&#31532;&#20108;&#20010;&#26597;&#35810;&#20250;&#22312;&#8220;products&#8221;&#32034;&#24341;&#19978;&#26597;&#35810;&#8220;ipod&#8221;&#24182;&#23558;&#32467;&#26524;&#25353;&#20215;&#26684;&#25490;&#24207;&#65292;&#31532;&#19977;&#20010;&#26597;&#35810;&#22312;&#8220;books&#8221;&#32034;&#24341;&#19978;&#25628;&#32034;&#8220;harry potter&#8221;&#65292;&#32467;&#26524;&#20173;&#25353;&#20215;&#26684;&#25490;&#24207;&#12290;&#27880;&#24847;&#65292;&#31532;&#20108;&#20010;<code class="code">SetSortMode()</code>&#35843;&#29992;&#24182;&#19981;&#20250;&#24433;&#21709;&#31532;&#19968;&#20010;&#26597;&#35810;&#65288;&#22240;&#20026;&#23427;&#24050;&#32463;&#34987;&#28155;&#21152;&#20102;&#65289;&#65292;&#20294;&#21518;&#38754;&#30340;&#20004;&#20010;&#26597;&#35810;&#37117;&#20250;&#21463;&#24433;&#21709;&#12290;
</p><p>
&#27492;&#22806;&#65292;&#22312;<code class="code">AddQuery()</code>&#20043;&#21069;&#35774;&#32622;&#30340;&#20219;&#20309;&#36807;&#28388;&#65292;&#37117;&#20250;&#34987;&#21518;&#32493;&#26597;&#35810;&#32487;&#32493;&#20351;&#29992;&#12290;&#22240;&#27492;&#65292;&#22914;&#26524;&#22312;&#31532;&#19968;&#20010;&#26597;&#35810;&#21069;&#20351;&#29992;<code class="code">SetFilter()</code>&#65292;&#21017;&#36890;&#36807;<code class="code">AddQuery()</code>&#25191;&#34892;&#30340;&#31532;&#20108;&#20010;&#26597;&#35810;&#65288;&#20197;&#21450;&#38543;&#21518;&#30340;&#25209;&#37327;&#26597;&#35810;&#65289;&#37117;&#20250;&#24212;&#29992;&#21516;&#26679;&#30340;&#36807;&#28388;&#65292;&#38500;&#38750;&#20320;&#20808;&#35843;&#29992;<code class="code">ResetFilters()</code>&#26469;&#28165;&#38500;&#36807;&#28388;&#35268;&#21017;&#12290;&#21516;&#26102;&#65292;&#20320;&#36824;&#21487;&#20197;&#38543;&#26102;&#21152;&#20837;&#26032;&#30340;&#36807;&#28388;&#35268;&#21017;</p><p><code class="code">AddQuery()</code>&#24182;&#19981;&#20462;&#25913;&#24403;&#21069;&#29366;&#24577;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#24050;&#26377;&#30340;&#20840;&#37096;&#25490;&#24207;&#12289;&#36807;&#28388;&#21644;&#20998;&#32452;&#35774;&#32622;&#37117;&#19981;&#20250;&#22240;&#36825;&#20010;&#35843;&#29992;&#32780;&#21457;&#29983;&#25913;&#21464;&#65292;&#22240;&#27492;&#21518;&#32493;&#30340;&#26597;&#35810;&#24456;&#23481;&#26131;&#22320;&#22797;&#29992;&#29616;&#26377;&#35774;&#32622;&#12290;
</p><p>
<code class="code">AddQuery()</code>&#36820;&#22238;<code class="code">RunQueries()</code>&#32467;&#26524;&#36820;&#22238;&#30340;&#25968;&#32452;&#20013;&#30340;&#19968;&#20010;&#19979;&#26631;&#12290;&#23427;&#26159;&#19968;&#20010;&#20174;0&#24320;&#22987;&#30340;&#36882;&#22686;&#25972;&#25968;&#65292;&#21363;&#65292;&#31532;&#19968;&#27425;&#35843;&#29992;&#36820;&#22238;0&#65292;&#31532;&#20108;&#27425;&#36820;&#22238;1&#65292;&#20197;&#27492;&#31867;&#25512;&#12290;&#36825;&#20010;&#26041;&#20415;&#30340;&#29305;&#24615;&#20351;&#20320;&#22312;&#38656;&#35201;&#36825;&#20123;&#19979;&#26631;&#30340;&#26102;&#20505;&#19981;&#29992;&#25163;&#24037;&#35760;&#24405;&#23427;&#20204;&#12290;
</p></div>
<div class="sect2" title="8.6.3.&nbsp;RunQueries &#65288;&#25191;&#34892;&#25209;&#37327;&#26597;&#35810;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-runqueries"></a>8.6.3.&nbsp;RunQueries &#65288;&#25191;&#34892;&#25209;&#37327;&#26597;&#35810;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function RunQueries ()</p><p>
&#36830;&#25509;&#21040;searchd&#65292;&#36816;&#34892;&#30001;<code class="code">AddQuery()</code>&#28155;&#21152;&#30340;&#20840;&#37096;&#26597;&#35810;&#65292;&#33719;&#21462;&#24182;&#36820;&#22238;&#23427;&#20204;&#30340;&#32467;&#26524;&#38598;&#12290;&#33509;&#21457;&#29983;&#19968;&#33324;&#38169;&#35823;&#65288;&#20363;&#22914;&#32593;&#32476;I/O&#22833;&#36133;&#65289;&#21017;&#36820;&#22238;&#20551;&#24182;&#35774;&#32622;<code class="code">GetLastError()</code>&#20449;&#24687;&#12290;&#33509;&#25104;&#21151;&#21017;&#36820;&#22238;&#32467;&#26524;&#38598;&#30340;&#31616;&#21333;&#25968;&#32452;&#12290;
</p><p>
&#35813;&#25968;&#32452;&#20013;&#30340;&#27599;&#19968;&#20010;&#32467;&#26524;&#38598;&#37117;&#36319;<a class="link" href="#api-func-query" title="8.6.1.&nbsp;Query &#65288;&#26597;&#35810;&#65289;"><code class="code">Query()</code></a>&#36820;&#22238;&#30340;&#32467;&#26524;&#38598;&#23436;&#20840;&#30456;&#21516;&#12290;
</p><p>
&#27880;&#24847;&#65292;&#25209;&#37327;&#26597;&#35810;&#35831;&#27714;&#33258;&#36523;&#20960;&#20046;&#24635;&#26159;&#25104;&#21151;&#8212;&#8212;&#38500;&#38750;&#26377;&#32593;&#32476;&#38169;&#35823;&#12289;&#27491;&#22312;&#36827;&#34892;&#32034;&#24341;&#36718;&#25442;&#65292;&#25110;&#32773;&#20854;&#20182;&#23548;&#33268;&#25972;&#20010;&#26597;&#35810;&#26080;&#27861;&#34987;&#22788;&#29702;&#30340;&#22240;&#32032;&#12290;
</p><p>
&#28982;&#32780;&#20854;&#20013;&#30340;&#21333;&#20010;&#30340;&#26597;&#35810;&#24456;&#21487;&#33021;&#22833;&#36133;&#12290;&#27492;&#26102;&#19982;&#20043;&#23545;&#24212;&#30340;&#32467;&#26524;&#38598;&#21482;&#21253;&#21547;&#19968;&#20010;&#38750;&#31354;&#30340;<code class="code">"error"</code>&#20449;&#24687;&#65292;&#32780;&#27809;&#26377;&#20851;&#20110;&#21305;&#37197;&#25110;&#26597;&#35810;&#30340;&#32479;&#35745;&#20449;&#24687;&#12290;&#22312;&#26497;&#31471;&#24773;&#20917;&#19979;&#65292;&#25209;&#37327;&#26597;&#35810;&#20013;&#30340;&#25152;&#26377;&#21333;&#20010;&#26597;&#35810;&#21487;&#33021;&#37117;&#22833;&#36133;&#12290;&#20294;&#36825;&#20173;&#28982;&#19981;&#20250;&#23548;&#33268;&#25253;&#21578;&#19968;&#33324;&#38169;&#35823;&#65292;&#22240;&#20026;API&#24050;&#32463;&#25104;&#21151;&#22320;&#36830;&#25509;&#21040;<code class="filename">searchd</code>&#65292;&#25552;&#20132;&#20102;&#25209;&#37327;&#26597;&#35810;&#24182;&#24471;&#21040;&#36820;&#22238;&#32467;&#26524;&#8212;&#8212;&#20294;&#27599;&#20010;&#32467;&#26524;&#38598;&#37117;&#21482;&#21253;&#21547;&#29305;&#23450;&#30340;&#38169;&#35823;&#20449;&#24687;&#12290;
</p></div>
<div class="sect2" title="8.6.4.&nbsp;ResetFilters &#65288;&#28165;&#38500;&#24403;&#21069;&#35774;&#32622;&#30340;&#36807;&#28388;&#22120;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-resetfilters"></a>8.6.4.&nbsp;ResetFilters &#65288;&#28165;&#38500;&#24403;&#21069;&#35774;&#32622;&#30340;&#36807;&#28388;&#22120;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function ResetFilters ()</p><p>
&#28165;&#38500;&#24403;&#21069;&#35774;&#32622;&#30340;&#36807;&#28388;&#22120;&#12290;
</p><p>
&#36890;&#24120;&#27492;&#35843;&#29992;&#22312;&#20351;&#29992;&#25209;&#37327;&#26597;&#35810;&#30340;&#26102;&#20505;&#20250;&#29992;&#21040;&#12290;&#24744;&#21487;&#33021;&#38656;&#35201;&#20026;&#25209;&#37327;&#26597;&#35810;&#20013;&#30340;&#19981;&#21516;&#26597;&#35810;&#25552;&#20379;&#19981;&#21516;&#30340;&#36807;&#28388;&#22120;&#65292;&#20026;&#36798;&#21040;&#36825;&#20010;&#30446;&#30340;&#65292;&#24744;&#38656;&#35201;&#35843;&#29992;<code class="code">ResetFilters()</code>&#28982;&#21518;&#29992;&#20854;&#20182;&#35843;&#29992;&#22686;&#21152;&#26032;&#30340;&#36807;&#28388;&#22120;&#12290;
</p></div>
<div class="sect2" title="8.6.5.&nbsp;ResetGroupBy &#65288;&#28165;&#38500;&#29616;&#26377;&#30340;&#20998;&#32452;&#35774;&#32622;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-resetgroupby"></a>8.6.5.&nbsp;ResetGroupBy &#65288;&#28165;&#38500;&#29616;&#26377;&#30340;&#20998;&#32452;&#35774;&#32622;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function ResetGroupBy ()</p><p>
&#28165;&#38500;&#29616;&#26377;&#30340;&#20840;&#37096;&#20998;&#32452;&#35774;&#32622;&#65292;&#24182;&#21462;&#28040;&#20998;&#32452;&#35774;&#23450;&#12290;
</p><p>
&#36890;&#24120;&#27492;&#35843;&#29992;&#22312;&#20351;&#29992;&#25209;&#37327;&#26597;&#35810;&#30340;&#26102;&#20505;&#20250;&#29992;&#21040;&#12290;&#21333;&#29420;&#30340;&#20998;&#32452;&#35774;&#32622;&#21487;&#20197;&#29992;<code class="code">SetGroupBy()</code>&#21644;<code class="code">SetGroupDistinct()</code>&#26469;&#25913;&#21464;&#65292;&#20294;&#23427;&#20204;&#19981;&#33021;&#20851;&#38381;&#20998;&#32452;&#12290;<code class="code">ResetGroupBy()</code>&#23558;&#20043;&#21069;&#30340;&#20998;&#32452;&#35774;&#32622;&#24443;&#24213;&#37325;&#32622;&#24182;&#22312;&#24403;&#21069;&#29366;&#24577;&#19979;&#20851;&#38381;&#20998;&#32452;&#27169;&#24335;&#65292;&#22240;&#27492;&#21518;&#32493;&#30340;<code class="code">AddQuery()</code>&#21487;&#20197;&#36827;&#34892;&#26080;&#20998;&#32452;&#30340;&#25628;&#32034;&#12290;
</p></div></div>
<div class="sect1" title="8.7.&nbsp;&#38468;&#21152;&#26041;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="api-funcgroup-additional-functionality"></a>8.7.&nbsp;&#38468;&#21152;&#26041;&#27861;</h2></div></div></div>
<div class="sect2" title="8.7.1.&nbsp;BuildExcerpts &#65288;&#20135;&#29983;&#25991;&#26412;&#25688;&#35201;&#21644;&#39640;&#20142;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-buildexcerpts"></a>8.7.1.&nbsp;BuildExcerpts &#65288;&#20135;&#29983;&#25991;&#26412;&#25688;&#35201;&#21644;&#39640;&#20142;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function BuildExcerpts ( $docs, $index, $words, $opts=array() )</p><p>
&#35813;&#20989;&#25968;&#29992;&#26469;&#20135;&#29983;&#25991;&#26723;&#29255;&#27573;&#65288;&#25688;&#35201;&#65289;&#12290;&#36830;&#25509;&#21040;<code class="filename">searchd</code>&#65292;&#35201;&#27714;&#23427;&#20174;&#25351;&#23450;&#25991;&#26723;&#20013;&#20135;&#29983;&#29255;&#27573;&#65288;&#25688;&#35201;&#65289;&#65292;&#24182;&#36820;&#22238;&#32467;&#26524;&#12290;
</p><p>
<code class="code">$docs</code>&#20026;&#21253;&#21547;&#21508;&#25991;&#26723;&#20869;&#23481;&#30340;&#25968;&#32452;&#12290;<code class="code">$index</code>&#20026;&#21253;&#21547;&#32034;&#24341;&#21517;&#23383;&#30340;&#23383;&#31526;&#20018;&#12290;&#32473;&#23450;&#32034;&#24341;&#30340;&#19981;&#21516;&#35774;&#32622;&#65288;&#20363;&#22914;&#23383;&#31526;&#38598;&#12289;&#24418;&#24577;&#23398;&#12289;&#35789;&#24418;&#31561;&#26041;&#38754;&#30340;&#35774;&#32622;&#65289;&#20250;&#34987;&#20351;&#29992;&#12290;<code class="code">$words</code>&#20026;&#21253;&#21547;&#38656;&#35201;&#39640;&#20142;&#30340;&#20851;&#38190;&#23383;&#30340;&#23383;&#31526;&#20018;&#12290;&#23427;&#20204;&#20250;&#25353;&#32034;&#24341;&#30340;&#35774;&#32622;&#34987;&#22788;&#29702;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#33521;&#35821;&#21462;&#35789;&#24178;&#65288;stemming&#65289;&#22312;&#32034;&#24341;&#20013;&#34987;&#35774;&#32622;&#20026;&#20801;&#35768;&#65292;&#37027;&#20040;&#21363;&#20351;&#20851;&#38190;&#35789;&#26159;&#8220;shoe&#8221;&#65292;&#8220;shoes&#8221;&#36825;&#20010;&#35789;&#20063;&#20250;&#34987;&#39640;&#20142;&#12290;&#20174;&#29256;&#26412;0.9.9-rc1&#24320;&#22987;&#65292;&#20851;&#38190;&#23383;&#21487;&#20197;&#21253;&#21547;&#36890;&#37197;&#31526;&#65292;&#19982;&#26597;&#35810;&#25903;&#25345;&#30340;<a class="link" href="#conf-enable-star" title="11.2.22.&nbsp;enable_star&#65306;&#26143;&#21495;&#35821;&#27861;">star-syntax</a>&#31867;&#20284;&#12290;<code class="code">$opts</code>&#20026;&#21253;&#21547;&#20854;&#20182;&#21487;&#36873;&#30340;&#39640;&#20142;&#21442;&#25968;&#30340;hash&#34920;&#65306;
</p><div class="variablelist"><dl><dt><span class="term">"before_match":</span></dt>
<dd>&#22312;&#21305;&#37197;&#30340;&#20851;&#38190;&#23383;&#21069;&#38754;&#25554;&#20837;&#30340;&#23383;&#31526;&#20018;&#12290;&#20174;&#29256;&#26412; 1.10-beta&#24320;&#22987;&#65292;&#21487;&#20197;&#22312;&#35813;&#23383;&#31526;&#20018;&#20013;&#20351;&#29992;%PASSAGE_ID%&#23439;&#12290;&#35813;&#23439;&#20250;&#34987;&#26367;&#25442;&#20026;&#24403;&#21069;&#29255;&#27573;&#30340;&#36882;&#22686;&#20540;&#12290;&#36882;&#22686;&#20540;&#30340;&#36215;&#22987;&#20540;&#40664;&#35748;&#20026;1&#65292;&#20294;&#26159;&#21487;&#20197;&#36890;&#36807;"start_passage_id"&#35774;&#32622;&#35206;&#30422;&#12290;&#22312;&#22810;&#25991;&#26723;&#20013;&#35843;&#29992;&#26102;&#65292;%PASSAGE_ID%&#20250;&#22312;&#27599;&#31687;&#25991;&#26723;&#20013;&#37325;&#26032;&#24320;&#22987;&#12290;&#40664;&#35748;&#20026;"&lt;b&gt;"&#12290;</dd><dt><span class="term">"after_match":</span></dt>
<dd>&#22312;&#21305;&#37197;&#30340;&#20851;&#38190;&#23383;&#21518;&#38754;&#25554;&#20837;&#30340;&#23383;&#31526;&#20018;&#12290;&#20174;&#29256;&#26412;1.10-beta&#24320;&#22987;&#65292;&#21487;&#20197;&#22312;&#35813;&#23383;&#31526;&#20018;&#20013;&#20351;&#29992;%PASSAGE_ID%&#23439;&#12290;&#40664;&#35748;&#20026; "&lt;/b&gt;"&#12290;</dd><dt><span class="term">"chunk_separator":</span></dt>
<dd>&#22312;&#25688;&#35201;&#22359;&#65288;&#27573;&#33853;&#65289;&#20043;&#38388;&#25554;&#20837;&#30340;&#23383;&#31526;&#20018;&#12290;&#40664;&#35748;&#20026;"&nbsp;...&nbsp;".</dd><dt><span class="term">"limit":</span></dt>
<dd>&#25688;&#35201;&#26368;&#22810;&#21253;&#21547;&#30340;&#31526;&#21495;&#65288;&#30721;&#28857;&#65289;&#25968;&#12290;&#25972;&#25968;&#65292;&#40664;&#35748;&#20026;256&#12290;</dd><dt><span class="term">"around":</span></dt>
<dd>&#27599;&#20010;&#20851;&#38190;&#35789;&#22359;&#24038;&#21491;&#36873;&#21462;&#30340;&#35789;&#30340;&#25968;&#30446;&#12290;&#25972;&#25968;&#65292;&#40664;&#35748;&#20026; 5.</dd><dt><span class="term">"exact_phrase":</span></dt>
<dd>&#26159;&#21542;&#20165;&#39640;&#20142;&#31934;&#30830;&#21305;&#37197;&#30340;&#25972;&#20010;&#26597;&#35810;&#35789;&#32452;&#65292;&#32780;&#19981;&#26159;&#21333;&#29420;&#30340;&#20851;&#38190;&#35789;&#12290;&#24067;&#23572;&#20540;&#65292;&#40664;&#35748;&#20026;false.</dd><dt><span class="term">"single_passage":</span></dt>
<dd>&#26159;&#21542;&#20165;&#25277;&#21462;&#26368;&#20339;&#30340;&#19968;&#20010;&#21306;&#22359;&#12290;&#24067;&#23572;&#20540;&#65292;&#40664;&#35748;&#20026;false.</dd><dt><span class="term">"use_boundaries":</span></dt>
<dd>&#26159;&#21542;&#36328;&#36234;&#30001;<a class="link" href="#conf-phrase-boundary" title="11.2.25.&nbsp;phrase_boundary&#65306;&#35789;&#32452;&#36793;&#30028;&#31526;&#21015;&#34920;">phrase_boundary</a>&#36873;&#39033;&#35774;&#32622;&#30340;&#35789;&#32452;&#36793;&#30028;&#31526;&#12290;&#24067;&#23572;&#22411;&#65292;&#40664;&#35748;&#20026;false.
	</dd><dt><span class="term">"weight_order":</span></dt>
<dd>&#23545;&#20110;&#25277;&#21462;&#20986;&#30340;&#27573;&#33853;&#65292;&#35201;&#20040;&#26681;&#25454;&#30456;&#20851;&#24230;&#25490;&#24207;&#65288;&#26435;&#37325;&#19979;&#38477;&#65289;&#65292;&#35201;&#20040;&#26681;&#25454;&#20986;&#29616;&#22312;&#25991;&#26723;&#20013;&#30340;&#39034;&#24207;&#65288;&#20301;&#32622;&#36882;&#22686;&#65289;&#12290;&#24067;&#23572;&#22411;&#65292;&#40664;&#35748;&#26159;false.</dd><dt><span class="term">"query_mode":</span></dt>
<dd>&#29256;&#26412;1.10-beta&#26032;&#22686;&#12290;&#35774;&#32622;&#23558;$words&#24403;&#20316;
	<a class="link" href="#extended-syntax" title="5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;">&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;</a>&#30340;&#26597;&#35810;&#22788;&#29702;&#65292;&#36824;&#26159;&#24403;&#20570;&#26222;&#36890;&#30340;&#25991;&#26412;&#23383;&#31526;&#20018;&#22788;&#29702;&#65288;&#40664;&#35748;&#34892;&#20026;&#65289;&#12290;&#20363;&#22914;&#65292;&#22312;&#26597;&#35810;&#27169;&#24335;&#26102;&#65292;("one two" | "three four")&#20165;&#39640;&#20142;&#21644;&#21253;&#21547;&#27599;&#20010;&#29255;&#27573;&#20013;&#20986;&#29616;"one two" &#25110; "three four" &#30340;&#22320;&#26041;&#21450;&#30456;&#37051;&#30340;&#37096;&#20998;&#12290;&#32780;&#22312;&#40664;&#35748;&#27169;&#24335;&#26102;&#65292; &#27599;&#20010;&#21333;&#29420;&#20986;&#29616;"one", "two", "three", &#25110; "four"&#30340;&#22320;&#26041;&#37117;&#20250;&#39640;&#20142;&#12290;&#24067;&#23572;&#22411;&#65292;&#40664;&#35748;&#26159;false&#12290;
	</dd><dt><span class="term">"force_all_words":</span></dt>
<dd>&#29256;&#26412;1.10-beta&#26032;&#22686;. &#24573;&#30053;&#25688;&#35201;&#30340;&#38271;&#24230;&#38480;&#21046;&#30452;&#33267;&#21253;&#21547;&#25152;&#26377;&#30340;&#35789;&#27719;&#12290;&#24067;&#23572;&#22411;&#65292;&#40664;&#35748;&#20026;false.
	</dd><dt><span class="term">"limit_passages":</span></dt>
<dd>&#29256;&#26412;1.10-beta&#26032;&#22686;. &#38480;&#21046;&#25688;&#35201;&#20013;&#21487;&#20197;&#21253;&#21547;&#30340;&#26368;&#22823;&#21306;&#22359;&#25968;&#12290;&#25972;&#25968;&#20540;&#65292;&#40664;&#35748;&#20026; 0 (&#19981;&#38480;&#21046;).
	</dd><dt><span class="term">"limit_words":</span></dt>
<dd>&#29256;&#26412;1.10-beta&#26032;&#22686;. &#38480;&#21046;&#25688;&#35201;&#20013;&#21487;&#20197;&#21253;&#21547;&#30340;&#26368;&#22823;&#35789;&#27719;&#25968;&#12290;&#25972;&#25968;&#20540;&#65292;&#40664;&#35748;&#20026; 0 (&#19981;&#38480;&#21046;).
	</dd><dt><span class="term">"start_passage_id":</span></dt>
<dd>&#29256;&#26412;1.10-beta&#26032;&#22686;. &#35774;&#32622;
	%PASSAGE_ID% &#23439;&#30340;&#36215;&#22987;&#20540; (&#22312;<code class="option">before_match</code>,
	<code class="option">after_match</code> &#23383;&#31526;&#20018;&#20013;&#26816;&#26597;&#21644;&#24212;&#29992;). &#25972;&#25968;&#20540;&#65292;&#40664;&#35748;&#20026;1.
	</dd><dt><span class="term">"load_files":</span></dt>
<dd>&#29256;&#26412;1.10-beta&#26032;&#22686;. &#35774;&#32622;&#26159;&#21542;&#23558;$docs&#20316;&#20026;&#25688;&#35201;&#25277;&#21462;&#26469;&#28304;&#30340;&#25968;&#25454;&#65288;&#40664;&#35748;&#34892;&#20026;&#65289;&#65292;&#25110;&#32773;&#23558;&#20854;&#24403;&#20570;&#25991;&#20214;&#21517;&#12290;&#20174;&#29256;&#26412;2.0.1-beta&#24320;&#22987;&#65292;&#22914;&#26524;&#35813;&#26631;&#24535;&#21551;&#29992;&#65292;&#27599;&#20010;&#35831;&#27714;&#23558;&#21019;&#24314;&#26368;&#22810;<a class="link" href="#conf-dist-threads" title="11.4.29.&nbsp;dist_threads&#65306;&#24182;&#21457;&#26597;&#35810;&#32447;&#31243;&#25968;">dist_threads</a>&#20010;&#24037;&#20316;&#32447;&#31243;&#36827;&#34892;&#24182;&#21457;&#22788;&#29702;&#12290;&#24067;&#23572;&#22411;&#65292;&#40664;&#35748;&#20026;false.
	</dd><dt><span class="term">"html_strip_mode":</span></dt>
<dd>&#29256;&#26412;1.10-beta&#26032;&#22686;. HTML&#26631;&#31614;&#21093;&#31163;&#27169;&#24335;&#35774;&#32622;&#12290;&#40664;&#35748;&#20026;"index"&#65292;&#34920;&#31034;&#20351;&#29992;index&#30340;&#35774;&#32622;&#12290;&#21487;&#20197;&#20351;&#29992;&#30340;&#20854;&#20182;&#20540;&#20026;"none"&#21644;"strip"&#65292;&#29992;&#20110;&#24378;&#21046;&#36339;&#36807;&#25110;&#32773;&#24212;&#29992;&#21093;&#31163;&#65292;&#32780;&#19981;&#31649;&#32034;&#24341;&#22914;&#20309;&#35774;&#32622;&#30340;&#12290;&#36824;&#21487;&#20197;&#20351;&#29992;"retain"&#65292;&#34920;&#31034;&#20445;&#30041;HTMK&#26631;&#31614;&#24182;&#38450;&#27490;&#39640;&#20142;&#26102;&#25171;&#26029;&#26631;&#31614;&#12290;"retain"&#27169;&#24335;&#20165;&#29992;&#20110;&#38656;&#35201;&#39640;&#20142;&#25972;&#31687;&#25991;&#26723;&#65292;&#24182;&#19988;&#19981;&#33021;&#35774;&#32622;&#38480;&#21046;&#29255;&#27573;&#30340;&#22823;&#23567;&#12290;&#23383;&#31526;&#22411;&#65292;&#21487;&#29992;&#20540;&#20026;"none"&#65292;"strip"&#65292;"index"&#25110;&#32773;"retain"&#12290;
	</dd><dt><span class="term">"allow_empty":</span></dt>
<dd>&#29256;&#26412;1.10-beta&#26032;&#22686;. &#20801;&#35768;&#26080;&#27861;&#20135;&#29983;&#25688;&#35201;&#26102;&#23558;&#31354;&#23383;&#31526;&#20018;&#20316;&#20026;&#39640;&#20142;&#32467;&#26524;&#36820;&#22238;
	(&#27809;&#26377;&#20851;&#38190;&#23383;&#21305;&#37197;&#25110;&#32773;&#19981;&#31526;&#21512;&#29255;&#27573;&#38480;&#21046;&#12290;). &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#21407;&#22987;&#25991;&#26412;&#30340;&#24320;&#22836;&#20250;&#34987;&#36820;&#22238;&#32780;&#19981;&#26159;&#31354;&#23383;&#31526;&#20018;&#12290;&#24067;&#23572;&#22411;&#65292;&#40664;&#35748;&#20026;false.
	</dd><dt><span class="term">"passage_boundary":</span></dt>
<dd>&#29256;&#26412;2.0.1-beta&#26032;&#22686;. &#30830;&#20445;&#21306;&#22359;&#19981;&#36328;&#36234;&#21477;&#23376;&#65292;&#27573;&#33853;&#25110;&#32773;zone&#21306;&#22495;&#65288;&#20165;&#24403;&#27599;&#20010;&#32034;&#24341;&#30340;&#35774;&#32622;&#21551;&#29992;&#26102;&#26377;&#25928;&#65289;&#12290;&#23383;&#31526;&#22411;&#65292;&#21487;&#29992;&#20540;&#20026; "sentence", "paragraph", &#25110;&#32773; "zone".
	</dd><dt><span class="term">"emit_zones":</span></dt>
<dd>&#29256;&#26412;2.0.1-beta&#26032;&#22686;. &#22312;&#27599;&#20010;&#21306;&#22359;&#21069;&#20351;&#29992;&#21306;&#22495;&#23545;&#24212;&#30340;HTML&#26631;&#31614;&#26469;&#23553;&#38381;&#21306;&#22495;&#12290;&#24067;&#23572;&#22411;&#65292;&#39764;&#40664;&#35748;&#20026;false&#12290;
	</dd></dl></div>
<p>
</p><p>
&#25688;&#35201;&#25552;&#21462;&#31639;&#27861;&#20542;&#21521;&#20110;&#25552;&#21462;&#26356;&#22909;&#30340;&#29255;&#27573;&#65288;&#19982;&#20851;&#38190;&#35789;&#23436;&#20840;&#21305;&#37197;&#65289;&#65292;&#28982;&#21518;&#26159;&#19981;&#22312;&#25688;&#35201;&#20013;&#20294;&#26159;&#21253;&#21547;&#20102;&#20851;&#38190;&#35789;&#30340;&#29255;&#27573;&#12290;
&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#23427;&#20250;&#23581;&#35797;&#39640;&#20142;&#26597;&#35810;&#30340;&#26368;&#20339;&#21305;&#37197;&#65292;&#24182;&#19988;&#22312;&#38480;&#21046;&#26465;&#20214;&#19979;&#23613;&#21487;&#33021;&#30340;&#39640;&#20142;&#26597;&#35810;&#20013;&#30340;&#25152;&#26377;&#20851;&#38190;&#35789;&#12290;
&#22914;&#26524;&#25991;&#26723;&#27809;&#26377;&#21305;&#37197;&#26597;&#35810;&#65292;&#40664;&#35748;&#24773;&#20917;&#19979;&#23558;&#26681;&#25454;&#38480;&#21046;&#26465;&#20214;&#36820;&#22238;&#25991;&#26723;&#30340;&#22836;&#37096;&#12290;&#20174;&#29256;&#26412;1.10-beta&#24320;&#22987;&#65292;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;allow_empty&#23646;&#24615;&#20301;true&#20197;&#36820;&#22238;&#31354;&#30340;&#29255;&#27573;&#26469;&#26367;&#20195;&#40664;&#35748;&#26041;&#24335;&#12290;
</p><p>
&#22833;&#36133;&#26102;&#36820;&#22238;false&#12290;&#25104;&#21151;&#26102;&#36820;&#22238;&#21253;&#21547;&#26377;&#29255;&#27573;&#65288;&#25688;&#35201;&#65289;&#23383;&#31526;&#20018;&#30340;&#25968;&#32452;&#12290;
</p></div>
<div class="sect2" title="8.7.2.&nbsp;UpdateAttributes &#65288;&#26356;&#26032;&#23646;&#24615;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-updateatttributes"></a>8.7.2.&nbsp;UpdateAttributes &#65288;&#26356;&#26032;&#23646;&#24615;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function UpdateAttributes ( $index, $attrs, $values )</p><p>
&#31435;&#21363;&#26356;&#26032;&#25351;&#23450;&#25991;&#26723;&#30340;&#25351;&#23450;&#23646;&#24615;&#20540;&#12290;&#25104;&#21151;&#21017;&#36820;&#22238;&#23454;&#38469;&#34987;&#26356;&#26032;&#30340;&#25991;&#26723;&#25968;&#30446;&#65288;0&#25110;&#26356;&#22810;&#65289;&#65292;&#22833;&#36133;&#21017;&#36820;&#22238;-1&#12290;
</p><p>
<code class="code">$index</code> &#20026;&#24453;&#26356;&#26032;&#30340;&#65288;&#19968;&#20010;&#25110;&#22810;&#20010;&#65289;&#32034;&#24341;&#21517;&#12290;$attrs&#20026;&#23646;&#24615;&#21517;&#23383;&#31526;&#20018;&#30340;&#25968;&#32452;&#65292;&#20854;&#25152;&#21015;&#30340;&#23646;&#24615;&#20250;&#34987;&#26356;&#26032;&#12290;<code class="code">$attrs</code>&#20026;hash&#34920;&#65292;<code class="code">$values</code>&#34920;&#30340;&#38190;&#20026;&#25991;&#26723;ID&#65292;<code class="code">$values</code>&#34920;&#30340;&#20540;&#20026;&#26032;&#30340;&#23646;&#24615;&#20540;&#30340;&#31616;&#21333;&#25968;&#32452;&#12290;
</p><p>
<code class="code">$index</code> &#26082;&#21487;&#20197;&#26159;&#19968;&#20010;&#21333;&#29420;&#30340;&#32034;&#24341;&#21517;&#65292;&#20063;&#21487;&#20197;&#26159;&#19968;&#20010;&#32034;&#24341;&#21517;&#30340;&#21015;&#34920;&#65292;&#23601;&#20687;<code class="code">Query()</code>&#30340;&#21442;&#25968;&#12290;&#19982;<code class="code">Query()</code>&#19981;&#21516;&#30340;&#26159;&#19981;&#20801;&#35768;&#36890;&#37197;&#31526;&#65292;&#20840;&#37096;&#24453;&#26356;&#26032;&#30340;&#32034;&#24341;&#24517;&#39035;&#26126;&#30830;&#25351;&#20986;&#12290;&#32034;&#24341;&#21517;&#21015;&#34920;&#21487;&#20197;&#21253;&#21547;&#20998;&#24067;&#24335;&#32034;&#24341;&#12290;&#23545;&#20998;&#24067;&#24335;&#32034;&#24341;&#65292;&#26356;&#26032;&#20250;&#21516;&#27493;&#21040;&#20840;&#37096;&#20195;&#29702;&#19978;&#12290;
</p><p>
&#21482;&#26377;&#22312;<code class="code">docinfo=extern</code>&#36825;&#20010;&#23384;&#20648;&#31574;&#30053;&#19979;&#25165;&#21487;&#20197;&#36816;&#34892;&#26356;&#26032;&#12290;&#26356;&#26032;&#38750;&#24120;&#24555;&#65292;&#22240;&#20026;&#25805;&#20316;&#23436;&#20840;&#22312;&#20869;&#23384;&#20013;&#36827;&#34892;&#65292;&#20294;&#23427;&#20204;&#20063;&#21487;&#20197;&#21464;&#25104;&#25345;&#20037;&#30340;&#65292;&#26356;&#26032;&#20250;&#22312;<code class="filename">searchd</code>&#24178;&#20928;&#20851;&#38381;&#26102;&#65288;&#25910;&#21040;SIGTERM&#20449;&#21495;&#26102;&#65289;&#34987;&#20889;&#20837;&#30913;&#30424;&#12290;&#22312;&#39069;&#22806;&#38480;&#21046;&#26465;&#20214;&#19979;&#65292;MVA&#23646;&#24615;&#20063;&#21487;&#20197;&#34987;&#26356;&#26032;&#65292;&#21442;&#35265;<a class="link" href="#conf-mva-updates-pool" title="11.4.18.&nbsp;mva_updates_pool&#65306;MVA&#26356;&#26032;&#20849;&#20139;&#20869;&#23384;">mva_updates_pool</a>&#35814;&#32454;&#20102;&#35299;&#12290;
</p><p>
&#20351;&#29992;&#31034;&#20363;&#65306;
</p><pre class="programlisting">
$cl-&gt;UpdateAttributes ( "test1", array("group_id"), array(1=&gt;array(456)) );
$cl-&gt;UpdateAttributes ( "products", array ( "price", "amount_in_stock" ),
	array ( 1001=&gt;array(123,5), 1002=&gt;array(37,11), 1003=&gt;(25,129) ) );
</pre><p>
&#31532;&#19968;&#26465;&#31034;&#20363;&#35821;&#21477;&#20250;&#26356;&#26032;&#32034;&#24341;&#8220;test1&#8221;&#20013;&#30340;&#25991;&#26723;1&#65292;&#35774;&#32622;&#8220;group_id&#8221;&#20026;456.&#31532;&#20108;&#26465;&#31034;&#20363;&#35821;&#21477;&#21017;&#26356;&#26032;&#32034;&#24341;&#8220;products&#8221;&#20013;&#30340;&#25991;&#26723;1001&#65292;1002&#21644;1003&#12290;&#25991;&#26723;1001&#30340;&#8220;price&#8221;&#20250;&#34987;&#26356;&#26032;&#20026;123&#65292;&#8220;amount_in_stock&#8221;&#20250;&#34987;&#26356;&#26032;&#20026;5&#65307;&#25991;&#26723;1002&#65292;&#8220;price&#8221;&#21464;&#20026;37&#32780;&#8220;amount_in_storage&#8221;&#21464;&#20026;11&#65292;&#31561;&#31561;&#12290;
</p></div>
<div class="sect2" title="8.7.3.&nbsp;BuildKeywords &#65288;&#33719;&#21462;&#20998;&#35789;&#32467;&#26524;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-buildkeywords"></a>8.7.3.&nbsp;BuildKeywords &#65288;&#33719;&#21462;&#20998;&#35789;&#32467;&#26524;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function BuildKeywords ( $query, $index, $hits )</p><p>
&#26681;&#25454;&#25351;&#23450;&#32034;&#24341;&#30340;&#31526;&#21495;&#21270;&#65288;tokenizer&#65289;&#26041;&#24335;&#30340;&#35774;&#32622;&#65292;&#20174;&#26597;&#35810;&#20013;&#25277;&#21462;&#20851;&#38190;&#35789;&#65292;&#20063;&#21487;&#20197;&#21516;&#26102;&#36820;&#22238;&#27599;&#20010;&#20851;&#38190;&#35789;&#20986;&#29616;&#27425;&#25968;&#30340;&#32479;&#35745;&#20449;&#24687;&#12290;&#36820;&#22238;&#19968;&#20010;&#25968;&#32452;&#65292;&#20854;&#20803;&#32032;&#26159;&#19968;&#20123;&#23383;&#20856;&#65292;&#27599;&#20010;&#23383;&#20856;&#21253;&#21547;&#19968;&#20010;&#20851;&#38190;&#23383;&#30340;&#20449;&#24687;&#12290;
</p><p>
<code class="code">$query</code> &#26159;&#25277;&#21462;&#20851;&#38190;&#23383;&#30340;&#30446;&#26631;&#12290;<code class="code">$index</code>&#26159;&#26576;&#20010;&#32034;&#24341;&#30340;&#21517;&#23383;&#65292;&#31995;&#32479;&#20250;&#20351;&#29992;&#36825;&#20010;&#32034;&#24341;&#30340;&#31526;&#21495;&#21270;&#65288;tokenizer&#65289;&#35774;&#32622;&#65292;&#20851;&#38190;&#35789;&#20986;&#29616;&#27425;&#25968;&#30340;&#32479;&#35745;&#20449;&#24687;&#20063;&#20174;&#36825;&#20010;&#32034;&#24341;&#20013;&#24471;&#20986;&#12290;<code class="code">$hits</code>&#26159;&#19968;&#20010;&#24067;&#23572;&#20540;&#65292;&#23427;&#25351;&#23450;&#20102;&#26159;&#21542;&#38656;&#35201;&#36820;&#22238;&#20851;&#38190;&#35789;&#20986;&#29616;&#27492;&#22788;&#30340;&#20449;&#24687;&#12290;
</p><p>
&#20351;&#29992;&#31034;&#20363;&#65306;
</p><pre class="programlisting">
$keywords = $cl-&gt;BuildKeywords ( "this.is.my query", "test1", false );
</pre></div>
<div class="sect2" title="8.7.4.&nbsp;EscapeString &#65288;&#36716;&#20041;&#29305;&#27530;&#23383;&#31526;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-escapestring"></a>8.7.4.&nbsp;EscapeString &#65288;&#36716;&#20041;&#29305;&#27530;&#23383;&#31526;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function EscapeString ( $string )</p><p>
&#26597;&#35810;&#35821;&#35328;&#20998;&#26512;&#22120;&#23558;&#26576;&#20123;&#23383;&#31526;&#29702;&#35299;&#25104;&#29305;&#27530;&#25805;&#20316;&#31526;&#65292;&#36825;&#20010;&#20989;&#25968;&#23545;&#23383;&#31526;&#20018;&#20013;&#30340;&#37027;&#20123;&#26377;&#29305;&#27530;&#24847;&#20041;&#30340;&#23383;&#31526;&#36827;&#34892;&#36716;&#20041;&#12290;&#36820;&#22238;&#36716;&#20041;&#21518;&#30340;&#23383;&#31526;&#20018;&#12290;
</p><p>
<code class="code">$string</code> &#26159;&#24453;&#36716;&#20041;&#30340;&#23383;&#31526;&#20018;&#12290;
</p><p>
&#34920;&#38754;&#19978;&#30475;&#36825;&#20010;&#20989;&#25968;&#26159;&#22810;&#20313;&#30340;&#65292;&#22240;&#20026;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#22312;&#21487;&#33021;&#35843;&#29992;&#36825;&#20010;&#20989;&#25968;&#30340;&#31243;&#24207;&#37324;&#23454;&#29616;&#36825;&#20010;&#36716;&#20041;&#21151;&#33021;&#12290;&#28982;&#32780;&#36825;&#20123;&#29305;&#27530;&#23383;&#31526;&#30340;&#38598;&#21512;&#21487;&#33021;&#38543;&#30528;&#26102;&#38388;&#32780;&#25913;&#21464;&#65292;&#22240;&#27492;&#29702;&#24212;&#25552;&#20379;&#19968;&#20010;API&#35843;&#29992;&#26469;&#23436;&#25104;&#36825;&#20010;&#21151;&#33021;&#65292;&#24182;&#20445;&#35777;&#20219;&#20309;&#26102;&#20505;&#37117;&#21487;&#20197;&#27491;&#30830;&#22320;&#36716;&#20041;&#20840;&#37096;&#29305;&#27530;&#23383;&#31526;&#12290;
</p><p>
&#20351;&#29992;&#31034;&#20363;&#65306;
</p><pre class="programlisting">
$escaped = $cl-&gt;EscapeString ( "escaping-sample@query/string" );
</pre></div>
<div class="sect2" title="8.7.5.&nbsp;Status &#65288;&#26597;&#35810;&#26381;&#21153;&#29366;&#24577;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-status"></a>8.7.5.&nbsp;Status &#65288;&#26597;&#35810;&#26381;&#21153;&#29366;&#24577;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function Status ()</p><p>
&#26597;&#35810;searchd&#30340;&#29366;&#24577;&#65292;&#36820;&#22238;&#19968;&#20010;&#25968;&#32452;&#65292;&#25968;&#32452;&#20803;&#32032;&#26159;&#30001;&#29366;&#24577;&#21464;&#37327;&#21517;&#21644;&#20540;&#30340;&#38190;&#20540;&#23545;&#26500;&#25104;&#12290;
</p><p>
&#20351;&#29992;&#31034;&#20363;&#65306;
</p><pre class="programlisting">
$status = $cl-&gt;Status ();
foreach ( $status as $row )
	print join ( ": ", $row ) . "\n";
</pre></div>
<div class="sect2" title="8.7.6.&nbsp;FlushAttributes &#65288;&#24378;&#21046;&#26356;&#26032;&#23646;&#24615;&#21040;&#30913;&#30424;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-flushattributes"></a>8.7.6.&nbsp;FlushAttributes &#65288;&#24378;&#21046;&#26356;&#26032;&#23646;&#24615;&#21040;&#30913;&#30424;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function FlushAttributes ()</p><p>
&#24378;&#21046; <code class="filename">searchd</code> &#21047;&#26032;&#31561;&#24453;&#26356;&#26032;&#30340;&#23646;&#24615;&#21040;&#30913;&#30424;&#65292;&#24182;&#38459;&#22622;&#35775;&#38382;&#30452;&#21040;&#23436;&#25104;&#12290;
&#25104;&#21151;&#26102;&#36820;&#22238;&#19968;&#20010;&#38750;&#36127;&#30340;&#20869;&#37096;&#21047;&#26032;&#26631;&#35760;&#20540;&#12290;&#38169;&#35823;&#26102;&#36820;&#22238;-1&#65292;&#24182;&#35774;&#32622;&#38169;&#35823;&#20449;&#24687;&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290; 
</p><p>
&#20351;&#29992;<a class="link" href="#api-func-updateatttributes" title="8.7.2.&nbsp;UpdateAttributes &#65288;&#26356;&#26032;&#23646;&#24615;&#65289;">UpdateAttributes()</a>API&#35843;&#29992;&#26356;&#26032;&#30340;&#23646;&#24615;&#20540;&#23558;&#19968;&#30452;&#20445;&#23384;&#22312;&#20869;&#23384;&#20013;&#65292;&#30452;&#21040;&#19968;&#27425;&#36825;&#26679;&#30340;&#21047;&#26032;&#65288;&#23558;&#24403;&#21069;&#25152;&#26377;&#21487;&#33021;&#38656;&#35201;&#26356;&#26032;&#30340;&#23646;&#24615;&#20540;&#20889;&#22238;&#21040;&#30913;&#30424;&#65289;&#12290;FlushAttributes()&#35843;&#29992;&#23558;&#24378;&#21046;&#25191;&#34892;&#19968;&#27425;&#26356;&#26032;&#12290;
&#35843;&#29992;&#21518;&#23558;&#20250;&#38459;&#22622;&#35775;&#38382;&#30452;&#21040;<code class="filename">searchd</code>&#23558;&#25968;&#25454;&#20840;&#37096;&#20889;&#20837;&#21040;&#30913;&#30424;&#65292;&#36825;&#20010;&#36807;&#31243;&#21487;&#33021;&#20250;&#38656;&#35201;&#25968;&#31186;&#25110;&#32773;&#25968;&#20998;&#38047;&#65292;&#36825;&#21462;&#20915;&#20110;&#25152;&#26377;&#24453;&#26356;&#26032;&#25968;&#25454;&#30340;&#22823;&#23567;&#65288;.spa&#25991;&#20214;&#30340;&#22823;&#23567;&#65289;&#12290;&#25152;&#26377;&#24403;&#21069;&#34987;&#26356;&#26032;&#30340;&#32034;&#24341;&#37117;&#20250;&#34987;&#21047;&#26032;&#12290;
</p><p>
&#21047;&#26032;&#26631;&#35760;&#20165;&#20165;&#26159;&#19968;&#20010;&#19981;&#26029;&#22686;&#38271;&#30340;&#19981;&#23450;&#25968;&#20540;&#65292;&#24182;&#27809;&#26377;&#23454;&#38469;&#24847;&#20041;&#12290;&#23427;&#19968;&#23450;&#26159;&#19968;&#20010;&#38750;&#36127;&#20540;&#65292;&#24182;&#19988;&#38543;&#30528;&#26102;&#38388;&#32780;&#22686;&#38271;&#65292;&#20294;&#26159;&#24182;&#19981;&#19968;&#23450;&#26159;&#36830;&#32493;&#22686;&#38271;&#65307;&#20363;&#22914;&#65292;&#20004;&#20010;&#35843;&#29992;&#20998;&#21035;&#36820;&#22238;10&#21644;1000&#65292;&#20182;&#20204;&#37117;&#26159;&#26377;&#25928;&#30340;&#36820;&#22238;&#20540;&#12290;&#22914;&#26524;&#20004;&#20010;FlushAttributes()&#35843;&#29992;&#36820;&#22238;&#30456;&#21516;&#30340;&#26631;&#35760;&#20540;&#65292;&#23601;&#24847;&#21619;&#30528;&#27809;&#26377;&#22312;&#20182;&#20204;&#20004;&#32773;&#20043;&#38388;&#20219;&#20309;&#23454;&#38469;&#30340;&#23646;&#24615;&#26356;&#26032;&#65292;&#33521;&#38604;&#24403;&#21069;&#30340;&#21047;&#26032;&#29366;&#24577;&#23558;&#20445;&#25345;&#19981;&#21464;&#65288;&#25152;&#26377;&#32034;&#24341;&#65289;&#12290;
</p><p>
&#20351;&#29992;&#31034;&#20363;&#65306;
</p><pre class="programlisting">
$status = $cl-&gt;FlushAttributes ();
if ( $status&lt;0 )
	print "ERROR: " . $cl-&gt;GetLastError(); 
</pre></div></div>
<div class="sect1" title="8.8.&nbsp;&#25345;&#20037;&#36830;&#25509;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="api-funcgroup-pconn"></a>8.8.&nbsp;&#25345;&#20037;&#36830;&#25509;</h2></div></div></div>
<p>
&#8220;&#25345;&#20037;&#36830;&#25509;&#8221;&#29305;&#24615;&#20801;&#35768;&#21033;&#29992;&#19968;&#20010;&#21333;&#29420;&#30340;&#32593;&#32476;&#36830;&#25509;&#26469;&#36816;&#34892;&#26412;&#26469;&#38656;&#35201;&#22810;&#20010;&#36830;&#25509;&#30340;&#22810;&#20010;&#21629;&#20196;&#12290;
</p><div class="sect2" title="8.8.1.&nbsp;Open (&#25171;&#24320;&#36830;&#25509;)"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-open"></a>8.8.1.&nbsp;Open (&#25171;&#24320;&#36830;&#25509;)</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function Open ()</p><p>
&#25171;&#24320;&#21040;&#26381;&#21153;&#22120;&#30340;&#25345;&#20037;&#36830;&#25509;&#12290;
</p></div>
<div class="sect2" title="8.8.2.&nbsp;Close &#65288;&#20851;&#38381;&#36830;&#25509;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="api-func-close"></a>8.8.2.&nbsp;Close &#65288;&#20851;&#38381;&#36830;&#25509;&#65289;</h3></div></div></div>
<p><span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function Close ()</p><p>
&#20851;&#38381;&#20808;&#21069;&#25171;&#24320;&#30340;&#25345;&#20037;&#36830;&#25509;&#12290;
</p></div></div></div>
<div class="chapter" title="&#31532;&nbsp;9&nbsp;&#31456;&nbsp;MySQL &#23384;&#20648;&#24341;&#25806; (SphinxSE)"><div class="titlepage"><div><div><h2 class="title"><a name="sphinxse"></a>&#31532;&nbsp;9&nbsp;&#31456;&nbsp;MySQL &#23384;&#20648;&#24341;&#25806; (SphinxSE)</h2></div></div></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="sect1"><a href="#sphinxse-overview">9.1. SphinxSE &#27010;&#35272;</a></span></dt>
<dt><span class="sect1"><a href="#sphinxse-installing">9.2. &#23433;&#35013; SphinxSE</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#sphinxse-mysql50">9.2.1. &#32534;&#35793;&#25903;&#25345;SphinxSE&#30340;MySQL 5.0.x</a></span></dt>
<dt><span class="sect2"><a href="#sphinxse-mysql51">9.2.2. &#32534;&#35793;&#25903;&#25345;SphinxSE&#30340;MySQL 5.1.x</a></span></dt>
<dt><span class="sect2"><a href="#sphinxse-checking">9.2.3. &#26816;&#26597;SphinxSE&#23433;&#35013;&#19982;&#21542;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#sphinxse-using">9.3. &#20351;&#29992; SphinxSE</a></span></dt>
<dt><span class="sect1"><a href="#sphinxse-snippets">9.4. &#36890;&#36807; MySQL &#29983;&#25104;&#29255;&#27573; (&#25688;&#35201;)</a></span></dt>
</dl></div>
<div class="sect1" title="9.1.&nbsp;SphinxSE &#27010;&#35272;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxse-overview"></a>9.1.&nbsp;SphinxSE &#27010;&#35272;</h2></div></div></div>
<p>
SphinxSE&#26159;&#19968;&#20010;&#21487;&#20197;&#32534;&#35793;&#36827;MySQL 5.x&#29256;&#26412;&#30340;MySQL&#23384;&#20648;&#24341;&#25806;&#65292;&#23427;&#21033;&#29992;&#20102;&#35813;&#29256;&#26412;MySQL&#30340;&#25554;&#20214;&#24335;&#20307;&#31995;&#32467;&#26500;&#12290;SphinxSE&#19981;&#33021;&#29992;&#20110;MySQL 4.x&#31995;&#21015;&#65292;&#23427;&#38656;&#35201;MySQL 5.0.22&#25110;&#26356;&#39640;&#29256;&#26412;&#65307;&#25110;MySQL 5.1.12&#25110;&#26356;&#39640;&#29256;&#26412;&#65307;&#25110;MySQL 5.5.8&#25110;&#26356;&#39640;&#29256;&#26412;
</p><p>
&#23613;&#31649;&#34987;&#31216;&#20316;&#8220;&#23384;&#20648;&#24341;&#25806;&#8221;&#65292;SphinxSE&#33258;&#36523;&#20854;&#23454;&#24182;<span class="emphasis"><em>&#19981;</em></span>&#23384;&#20648;&#20219;&#20309;&#25968;&#25454;&#12290;&#23427;&#20854;&#23454;&#26159;&#19968;&#20010;&#20801;&#35768;MySQL&#26381;&#21153;&#22120;&#19982;<code class="filename">searchd</code>&#20132;&#20114;&#24182;&#33719;&#21462;&#25628;&#32034;&#32467;&#26524;&#30340;&#23884;&#20837;&#24335;&#23458;&#25143;&#31471;&#12290;&#25152;&#26377;&#30340;&#32034;&#24341;&#21644;&#25628;&#32034;&#37117;&#21457;&#29983;&#22312;MySQL&#20043;&#22806;&#12290;
</p><p>
&#26174;&#28982;&#65292;SphinxSE&#30340;&#36866;&#29992;&#20110;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#20351;&#23558;MySQL FTS &#24212;&#29992;&#31243;&#24207;&#31227;&#26893;&#21040;Sphinx&#65307;</li>
<li class="listitem">&#20351;&#27809;&#26377;Sphinx API&#30340;&#37027;&#20123;&#35821;&#35328;&#20063;&#21487;&#20197;&#20351;&#29992;Sphinx&#65307;</li>
<li class="listitem">&#24403;&#38656;&#35201;&#22312;MySQL&#31471;&#23545;Sphinx&#32467;&#26524;&#38598;&#20570;&#39069;&#22806;&#22788;&#29702;&#65288;&#20363;&#22914;&#23545;&#21407;&#22987;&#25991;&#26723;&#34920;&#20570;JOIN&#65292;MySQL&#31471;&#30340;&#39069;&#22806;&#36807;&#28388;&#31561;&#31561;&#65289;&#26102;&#25552;&#20379;&#20248;&#21270;&#12290;</li>
</ul></div>
<p>
</p></div>
<div class="sect1" title="9.2.&nbsp;&#23433;&#35013; SphinxSE"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxse-installing"></a>9.2.&nbsp;&#23433;&#35013; SphinxSE</h2></div></div></div>
<p>
&#20320;&#38656;&#35201;&#33719;&#24471;MySQL&#30340;&#28304;&#20195;&#30721;&#65292;&#28982;&#21518;&#37325;&#26032;&#32534;&#35793;MySQL&#12290;MySQL&#30340;&#28304;&#20195;&#30721; (mysql-5.x.yy.tar.gz) &#21487;&#22312;
<a class="ulink" href="http://dev.mysql.com" target="_top">dev.mysql.com</a> &#32593;&#31449;&#33719;&#24471;.
</p><p>
&#38024;&#23545;&#26576;&#20123;&#29256;&#26412;&#30340;MySQL&#65292;Sphinx &#32593;&#31449;&#25552;&#20379;&#20102;&#21253;&#21547;&#25903;&#25345;SphinxSE&#30340;&#25171;&#36807;&#34917;&#19969;tarball&#21387;&#32553;&#21253;&#12290;&#23558;&#36825;&#20123;&#25991;&#20214;&#35299;&#21387;&#20986;&#26469;&#26367;&#25442;&#21407;&#22987;&#25991;&#20214;&#65292;&#23601;&#21487;&#20197;&#37197;&#32622;(configure)&#12289;&#26500;&#24314;(build)&#20197;&#29983;&#25104;&#24102;&#26377;&#20869;&#24314;Shpinx&#25903;&#25345;&#30340;MySQL&#20102;&#12290;
</p><p>
&#22914;&#26524;&#32593;&#31449;&#19978;&#27809;&#26377;&#23545;&#24212;&#29256;&#26412;&#30340;tarball&#65292;&#25110;&#32773;&#30001;&#20110;&#26576;&#31181;&#21407;&#22240;&#26080;&#27861;&#24037;&#20316;&#65292;&#37027;&#24744;&#21487;&#33021;&#38656;&#35201;&#25163;&#24037;&#20934;&#22791;&#36825;&#20123;&#25991;&#20214;&#12290;&#24744;&#38656;&#35201;&#19968;&#20221;&#23433;&#35013;&#22909;&#30340;GUN Autotools&#26694;&#26550;&#65288;autoconf&#65292;automake&#21644;libtool&#65289;&#26469;&#23436;&#25104;&#36825;&#39033;&#20219;&#21153;&#12290;
</p><div class="sect2" title="9.2.1.&nbsp;&#32534;&#35793;&#25903;&#25345;SphinxSE&#30340;MySQL 5.0.x"><div class="titlepage"><div><div><h3 class="title"><a name="sphinxse-mysql50"></a>9.2.1.&nbsp;&#32534;&#35793;&#25903;&#25345;SphinxSE&#30340;MySQL 5.0.x</h3></div></div></div>
<p>
&#22914;&#26524;&#20351;&#29992;&#25105;&#20204;&#20107;&#20808;&#20570;&#22909;&#30340;&#25171;&#36807;&#34917;&#19969;&#30340;tarball&#65292;&#37027;&#35831;&#36339;&#36807;&#27493;&#39588;1-3&#12290;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#23558; <code class="filename">sphinx.5.0.yy.diff</code> &#34917;&#19969;&#25991;&#20214;&#22797;&#21046;&#21040;MySQL&#28304;&#30721;&#30446;&#24405;&#24182;&#36816;&#34892;
</p><pre class="programlisting">
patch -p1 &lt; sphinx.5.0.yy.diff
</pre><p>
&#22914;&#26524;&#27809;&#26377;&#19982;&#24744;&#30340;MySQL&#29256;&#26412;&#23436;&#20840;&#21305;&#37197;&#30340;.diff&#25991;&#20214;&#65292;&#35831;&#23581;&#35797;&#19968;&#20010;&#26368;&#25509;&#36817;&#29256;&#26412;&#30340;.diff&#25991;&#20214;&#12290;&#30830;&#20445;&#34917;&#19969;&#39034;&#21033;&#24212;&#29992;&#65292;&#27809;&#26377;rejects&#12290;
</p></li>
<li class="listitem">&#22312;MySQL&#28304;&#30721;&#30446;&#24405;&#20013;&#36816;&#34892;
<pre class="programlisting">
sh BUILD/autorun.sh
</pre></li>
<li class="listitem">&#22312;MySQL&#28304;&#30721;&#30446;&#24405;&#20013;&#24314;&#31435;<code class="filename">sql/sphinx</code>&#30446;&#24405;&#65292;&#24182;&#25226;Sphinx&#28304;&#30721;&#30446;&#24405;&#20013;<code class="filename">mysqlse</code>&#30446;&#24405;&#19979;&#30340;&#20840;&#37096;&#25991;&#20214;&#25335;&#36125;&#21040;&#36825;&#20010;&#30446;&#24405;&#12290;&#31034;&#20363;&#65306;
<pre class="programlisting">
cp -R /root/builds/sphinx-0.9.7/mysqlse/* /root/builds/mysql-5.0.24/sql/sphinx
</pre></li>
<li class="listitem">
&#37197;&#32622;&#65288;configure&#65289;MySQL&#65292;&#21551;&#29992;Sphinx&#24341;&#25806;&#65306;
<pre class="programlisting">
./configure --with-sphinx-storage-engine
</pre></li>
<li class="listitem">
&#26500;&#24314;&#65288;build&#65289;&#24182;&#23433;&#35013;MySQL&#65306;
<pre class="programlisting">
make
make install
</pre></li>
</ol></div></div>
<div class="sect2" title="9.2.2.&nbsp;&#32534;&#35793;&#25903;&#25345;SphinxSE&#30340;MySQL 5.1.x"><div class="titlepage"><div><div><h3 class="title"><a name="sphinxse-mysql51"></a>9.2.2.&nbsp;&#32534;&#35793;&#25903;&#25345;SphinxSE&#30340;MySQL 5.1.x</h3></div></div></div>
<p>
&#22914;&#26524;&#20351;&#29992;&#25105;&#20204;&#20107;&#20808;&#20570;&#22909;&#30340;&#25171;&#36807;&#34917;&#19969;&#30340;tarball&#65292;&#37027;&#35831;&#36339;&#36807;&#27493;&#39588;1-2&#12290;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">&#22312;MySQL&#28304;&#30721;&#30446;&#24405;&#20013;&#24314;&#31435;<code class="filename">storage/sphinx</code>&#30446;&#24405;&#65292;&#24182;&#23558;Sphinx&#28304;&#30721;&#30446;&#24405;&#20013;&#30340;<code class="filename">mysqlse</code>&#30446;&#24405;&#19979;&#30340;&#20840;&#37096;&#25991;&#20214;&#25335;&#36125;&#21040;&#36825;&#20010;&#30446;&#24405;&#12290;&#31034;&#20363;&#65306;
<pre class="programlisting">
cp -R /root/builds/sphinx-0.9.7/mysqlse/* /root/builds/mysql-5.1.14/storage/sphinx
</pre></li>
<li class="listitem">&#22312;MySQL&#28304;&#30721;&#30446;&#24405;&#36816;&#34892;
<pre class="programlisting">
sh BUILD/autorun.sh
</pre></li>
<li class="listitem">
&#37197;&#32622;&#65288;configure&#65289;MySQL&#65292;&#21551;&#29992;Sphinx&#24341;&#25806;
<pre class="programlisting">
./configure --with-plugins=sphinx
</pre></li>
<li class="listitem">
&#26500;&#24314;&#65288;build&#65289;&#24182;&#23433;&#35013;MySQL
<pre class="programlisting">
make
make install
</pre></li>
</ol></div></div>
<div class="sect2" title="9.2.3.&nbsp;&#26816;&#26597;SphinxSE&#23433;&#35013;&#19982;&#21542;"><div class="titlepage"><div><div><h3 class="title"><a name="sphinxse-checking"></a>9.2.3.&nbsp;&#26816;&#26597;SphinxSE&#23433;&#35013;&#19982;&#21542;</h3></div></div></div>

&#20026;&#20102;&#26816;&#26597;SphinxSE&#26159;&#21542;&#25104;&#21151;&#22320;&#32534;&#20837;&#20102;MySQL&#65292;&#21551;&#21160;&#26032;&#32534;&#35793;&#20986;&#30340;MySQL&#26381;&#21153;&#22120;&#65292;&#36816;&#34892;mysql&#23458;&#25143;&#31471;&#65292;&#25191;&#34892;<code class="code">SHOW ENGINES</code>&#26597;&#35810;&#65292;&#36825;&#20250;&#26174;&#31034;&#19968;&#20010;&#20840;&#37096;&#21487;&#29992;&#24341;&#25806;&#30340;&#21015;&#34920;&#12290;Sphinx&#24212;&#35813;&#20986;&#29616;&#22312;&#36825;&#20010;&#21015;&#34920;&#20013;&#65292;&#32780;&#19988;&#22312;&#8220;Support&#8221;&#21015;&#19978;&#26174;&#31034;&#8220;YES&#8221;&#65306;

<pre class="programlisting">
mysql&gt; show engines;
+------------+----------+-------------------------------------------------------------+
| Engine     | Support  | Comment                                                     |
+------------+----------+-------------------------------------------------------------+
| MyISAM     | DEFAULT  | Default engine as of MySQL 3.23 with great performance      |
  ...
| SPHINX     | YES      | Sphinx storage engine                                       |
  ...
+------------+----------+-------------------------------------------------------------+
13 rows in set (0.00 sec)
</pre></div></div>
<div class="sect1" title="9.3.&nbsp;&#20351;&#29992; SphinxSE"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxse-using"></a>9.3.&nbsp;&#20351;&#29992; SphinxSE</h2></div></div></div>
<p>
&#35201;&#36890;&#36807;SphinxSE&#25628;&#32034;&#65292;&#24744;&#38656;&#35201;&#24314;&#31435;&#29305;&#27530;&#30340;ENGINE=SPHINX&#30340;&#8220;&#25628;&#32034;&#34920;&#8221;&#65288;&#20013;&#38388;&#34920;&#65292;&#27809;&#26377;&#23454;&#38469;&#25968;&#25454;&#65292;&#26597;&#35810;&#26102;&#20174;<code class="filename">searchd</code>&#33719;&#21462;&#25968;&#25454;&#36820;&#22238;&#32473;MySQL&#65289;&#65292;&#28982;&#21518;&#20351;&#29992;SELECT&#35821;&#21477;&#20174;&#20013;&#26816;&#32034;&#65292;&#25226;&#20840;&#25991;&#26597;&#35810;&#25918;&#22312;WHERE&#23376;&#21477;&#20013;&#12290;
</p><p>
&#35753;&#25105;&#20204;&#20174;&#19968;&#20010;create&#35821;&#21477;&#21644;&#25628;&#32034;&#26597;&#35810;&#30340;&#20363;&#23376;&#24320;&#22987;&#65306;
</p><pre class="programlisting">
CREATE TABLE t1
(
    id          INTEGER UNSIGNED NOT NULL,
    weight      INTEGER NOT NULL,
    query       VARCHAR(3072) NOT NULL,
    group_id    INTEGER,
    INDEX(query)
) ENGINE=SPHINX CONNECTION="sphinx://localhost:9312/test";

SELECT * FROM t1 WHERE query='test it;mode=any';
</pre><p>
</p><p>
&#25628;&#32034;&#34920;&#21069;&#19977;&#21015;&#65288;&#23383;&#27573;&#65289;&#30340;&#31867;&#22411;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#26159;<code class="code">INTEGER UNSINGED</code>&#65288;&#25110;&#32773; <code class="code">BIGINT</code>&#65289;&#65292;<code class="code">INTEGER</code>&#65288;&#25110;&#32773; <code class="code">BIGINT</code>&#65289;&#21644;<code class="code">VARCHAR</code>&#65288;&#25110;&#32773; <code class="code">TEXT</code>&#65289;&#65292;&#36825;&#19977;&#21015;&#20998;&#21035;&#23545;&#24212;&#25991;&#26723;ID&#65292;&#21305;&#37197;&#26435;&#20540;&#21644;&#25628;&#32034;&#26597;&#35810;&#12290;&#36825;&#21069;&#19977;&#20010;&#21015;&#30340;&#26144;&#23556;&#20851;&#31995;&#26159;&#22266;&#23450;&#30340;&#65292;&#20320;<span class="emphasis"><em>&#19981;&#33021;</em></span>&#24573;&#30053;&#36825;&#19977;&#21015;&#20013;&#30340;&#20219;&#20309;&#19968;&#20010;&#65292;&#25110;&#32773;&#31227;&#21160;&#20854;&#20301;&#32622;&#65292;&#25110;&#32773;&#25913;&#21464;&#20854;&#31867;&#22411;&#12290;&#25628;&#32034;&#26597;&#35810;&#21015;&#24517;&#39035;&#34987;&#32034;&#24341;&#65292;&#20854;&#20182;&#21015;&#24517;&#39035;&#26080;&#32034;&#24341;&#12290;&#21015;&#30340;&#21517;&#23383;&#20250;&#34987;&#24573;&#30053;&#65292;&#25152;&#20197;&#21487;&#20197;&#20219;&#24847;&#21629;&#21517;&#12290;
</p><p>
&#38500;&#27492;&#20043;&#22806;&#65292;&#20854;&#20182;&#21015;&#65288;&#23383;&#27573;&#65289;&#30340;&#31867;&#22411;&#24517;&#39035;&#26159;<code class="code">INTEGER</code>&#12289;<code class="code">TIMESTAMP</code>&#12289;<code class="code">BIGINT</code>&#12289;<code class="code">VARCHAR</code>&#25110;&#32773;<code class="code">FLOAT</code>&#20043;&#19968;&#12290;&#23427;&#20204;&#24517;&#39035;&#19982;Sphinx&#32467;&#26524;&#38598;&#20013;&#25552;&#20379;&#30340;&#23646;&#24615;&#25353;&#21517;&#31216;&#32465;&#23450;&#65292;&#21363;&#23427;&#20204;&#30340;&#21517;&#23383;&#24517;&#39035;&#19982;<code class="filename">sphinx.conf</code>&#20013;&#25351;&#23450;&#30340;&#23646;&#24615;&#21517;&#19968;&#19968;&#23545;&#24212;&#12290;&#22914;&#26524;Sphinx&#25628;&#32034;&#32467;&#26524;&#20013;&#27809;&#26377;&#26576;&#20010;&#23646;&#24615;&#21517;&#65292;&#35813;&#21015;&#30340;&#20540;&#23601;&#20026;<code class="code">NULL</code>.
</p><p>
&#29305;&#27530;&#30340;&#20869;&#37096;&#8220;&#34394;&#25311;&#8221;&#23646;&#24615;&#21517;&#20063;&#21487;&#20197;&#19982;SphinxSE&#21015;&#32465;&#23450;&#12290;&#20294;&#29305;&#27530;&#31526;&#21495;<code class="code">@</code>&#29992;<code class="code">_sph_</code>&#20195;&#26367;&#12290;&#20363;&#22914;&#65292;&#35201;&#21462;&#24471;<code class="code">@group</code>&#21644;<code class="code">@count</code>&#25110;&#32773;<code class="code">@distinct</code>&#20869;&#37096;&#23646;&#24615;&#65292;&#21015;&#21517;&#24212;&#20998;&#21035;&#20351;&#29992;<code class="code">_sph_group</code>&#12289;<code class="code">_sph_count</code>&#25110;&#32773;<code class="code">_sph_distinct</code>&#12290;
</p><p>
&#21487;&#20197;&#20351;&#29992;&#23383;&#31526;&#20018;&#21442;&#25968;<code class="code">CONNECTION</code>&#26469;&#25351;&#23450;&#29992;&#36825;&#20010;&#34920;&#25628;&#32034;&#26102;&#30340;&#40664;&#35748;&#25628;&#32034;&#20027;&#26426;&#12289;&#31471;&#21475;&#21495;&#21644;&#32034;&#24341;&#12290;&#22914;&#26524;<code class="code">CREATE TABLE</code>&#20013;&#27809;&#26377;&#20351;&#29992;&#36830;&#25509;&#65288;connection&#65289;&#20018;&#65292;&#37027;&#20040;&#40664;&#35748;&#20351;&#29992;&#32034;&#24341;&#21517;&#8220;*&#8221;&#65288;&#25628;&#32034;&#25152;&#26377;&#32034;&#24341;&#65289;&#21644;localhost:9312&#12290;&#36830;&#25509;&#20018;&#30340;&#35821;&#27861;&#22914;&#19979;&#65306;
</p><pre class="programlisting">
CONNECTION="sphinx://HOST:PORT/INDEXNAME"
</pre><p>
&#40664;&#35748;&#30340;&#36830;&#25509;&#20018;&#20063;&#21487;&#20197;&#38656;&#35201;&#26102;&#25913;&#21464;&#65306;
</p><pre class="programlisting">
ALTER TABLE t1 CONNECTION="sphinx://NEWHOST:NEWPORT/NEWINDEXNAME";
</pre><p>
&#20063;&#21487;&#20197;&#22312;&#26597;&#35810;&#20013;&#35206;&#30422;&#20840;&#37096;&#36825;&#20123;&#36873;&#39033;&#12290;
</p><p>
&#22914;&#20363;&#23376;&#25152;&#31034;&#65292;&#26597;&#35810;&#25991;&#26412;&#21644;&#25628;&#32034;&#36873;&#39033;&#37117;&#24212;&#25918;&#22312;WHERE&#23376;&#21477;&#20013;&#23545;query&#21015;&#30340;&#38480;&#21046;&#20013;&#65288;&#21363;&#31532;&#19977;&#21015;&#65289;&#65292;&#36873;&#39033;&#20043;&#38388;&#29992;&#20998;&#21495;&#20998;&#38548;&#65292;&#36873;&#39033;&#21517;&#19982;&#36873;&#39033;&#20540;&#29992;&#31561;&#21495;&#38548;&#24320;&#12290;&#21487;&#20197;&#25351;&#23450;&#20219;&#24847;&#25968;&#30446;&#30340;&#36873;&#39033;&#12290;&#21487;&#29992;&#30340;&#36873;&#39033;&#22914;&#19979;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">query - &#26597;&#35810;&#25991;&#26412;&#65307;</li>
<li class="listitem">mode - &#21305;&#37197;&#27169;&#24335;.&#24517;&#39035;&#26159; "all", "any", "phrase",
	"boolean", &#25110;&#32773; "extended", &#25110;&#32773; "extended2" &#20043;&#19968;&#12290;&#40664;&#35748;&#20026; "all"&#65307;</li>
<li class="listitem">sort - &#21305;&#37197;&#39033;&#25490;&#24207;&#27169;&#24335; &#24517;&#39035;&#26159; "relevance", "attr_desc",
"attr_asc", "time_segments", &#25110;&#32773; "extended" &#20043;&#19968;&#12290;&#38500;&#20102;&#8220;relevance&#8221;&#27169;&#24335;&#65292;&#20854;&#20182;&#27169;&#24335;&#20013;&#36824;&#24517;&#39035;&#22312;&#19968;&#20010;&#20882;&#21495;&#21518;&#38468;&#19978;&#23646;&#24615;&#21517;&#65288;&#25110;&#8220;extended&#8221;&#27169;&#24335;&#20013;&#30340;&#25490;&#24207;&#23376;&#21477;&#65289;&#65306;
<pre class="programlisting">
... WHERE query='test;sort=attr_asc:group_id';
... WHERE query='test;sort=extended:@weight desc, group_id asc';
</pre></li>
<li class="listitem">offset - &#32467;&#26524;&#38598;&#20013;&#30340;&#20559;&#31227;&#37327;&#65292;&#40664;&#35748;&#26159;0;</li>
<li class="listitem">limit - &#20174;&#32467;&#26524;&#38598;&#20013;&#33719;&#21462;&#30340;&#21305;&#37197;&#39033;&#25968;&#30446;&#65292;&#40664;&#35748;&#20026;20;</li>
<li class="listitem">index - &#24453;&#25628;&#32034;&#30340;&#32034;&#24341;&#65306;
<pre class="programlisting">
... WHERE query='test;index=test1;';
... WHERE query='test;index=test1,test2,test3;';
</pre></li>
<li class="listitem">minid, maxid - &#21305;&#37197;&#25991;&#26723;ID&#30340;&#26368;&#23567;&#20540;&#21644;&#26368;&#22823;&#20540;&#65307;</li>
<li class="listitem">weights - &#36887;&#21495;&#20998;&#38548;&#30340;&#21015;&#34920;&#65292;&#25351;&#23450;Sphinx&#20840;&#25991;&#25968;&#25454;&#23383;&#27573;&#30340;&#26435;&#20540;&#65306;
<pre class="programlisting">
... WHERE query='test;weights=1,2,3;';
</pre></li>
<li class="listitem">filter, !filter - &#36887;&#21495;&#20998;&#38548;&#30340;&#21015;&#34920;&#65292;&#25351;&#23450;&#19968;&#20010;&#23646;&#24615;&#21517;&#21644;&#19968;&#31995;&#21015;&#21487;&#21305;&#37197;&#30340;&#23646;&#24615;&#20540;&#65306;
<pre class="programlisting">
# only include groups 1, 5 and 19
... WHERE query='test;filter=group_id,1,5,19;';

# exclude groups 3 and 11
... WHERE query='test;!filter=group_id,3,11;';
</pre></li>
<li class="listitem">range, !range - &#36887;&#21495;&#20998;&#38548;&#30340;&#21015;&#34920;&#65292;&#25351;&#23450;&#19968;&#20010;&#23646;&#24615;&#21517;&#21644;&#35813;&#23646;&#24615;&#21487;&#21305;&#37197;&#30340;&#26368;&#23567;&#20540;&#21644;&#26368;&#22823;&#20540;&#65306;
<pre class="programlisting">
# include groups from 3 to 7, inclusive
... WHERE query='test;range=group_id,3,7;';

# exclude groups from 5 to 25
... WHERE query='test;!range=group_id,5,25;';
</pre></li>
<li class="listitem">maxmatches - &#27492;&#26597;&#35810;&#26368;&#22823;&#21305;&#37197;&#30340;&#25968;&#37327;, &#19982;<a class="link" href="#api-func-setlimits" title="8.2.1.&nbsp;SetLimits &#65288;&#35774;&#32622;&#32467;&#26524;&#38598;&#20559;&#31227;&#37327;&#65289;">SetLimits()</a> API &#35843;&#29992;&#30340;max_matches&#21442;&#25968;&#31867;&#20284;&#65306;
<pre class="programlisting">
... WHERE query='test;maxmatches=2000;';
</pre></li>
<li class="listitem">cutoff - &#27492;&#26597;&#35810;&#26368;&#22823;&#20801;&#35768;&#30340;&#21305;&#37197;&#25968;, &#19982;
<a class="link" href="#api-func-setlimits" title="8.2.1.&nbsp;SetLimits &#65288;&#35774;&#32622;&#32467;&#26524;&#38598;&#20559;&#31227;&#37327;&#65289;">SetLimits()</a> API &#35843;&#29992;&#30340;&#21442;&#25968;cutoff&#31867;&#20284;&#65306;
<pre class="programlisting">
... WHERE query='test;cutoff=10000;';
</pre></li>
<li class="listitem">maxquerytme - &#27492;&#26597;&#35810;&#26368;&#22823;&#20801;&#35768;&#30340;&#26597;&#35810;&#26102;&#38388; (&#21333;&#20301;&#20026;&#27627;&#31186;), &#22914;&#21516;
<a class="link" href="#api-func-setmaxquerytime" title="8.2.2.&nbsp;SetMaxQueryTime &#65288;&#35774;&#32622;&#26368;&#22823;&#25628;&#32034;&#26102;&#38388;&#65289;">SetMaxQueryTime()</a> API &#35843;&#29992;&#65306;
<pre class="programlisting">
... WHERE query='test;maxquerytime=1000;';
</pre></li>
<li class="listitem">groupby - &#20998;&#32452;&#65288;group-by&#65289;&#20989;&#25968;&#21644;&#23646;&#24615;, &#23545;&#24212;
<a class="link" href="#api-func-setgroupby" title="8.5.1.&nbsp;SetGroupBy &#65288;&#35774;&#32622;&#20998;&#32452;&#30340;&#23646;&#24615;&#65289;">SetGroupBy()</a> API &#35843;&#29992;:
<pre class="programlisting">
... WHERE query='test;groupby=day:published_ts;';
... WHERE query='test;groupby=attr:group_id;';
</pre></li>
<li class="listitem">groupsort - &#20998;&#32452;&#65288;group-by&#65289;&#25490;&#24207;&#23376;&#21477;:
<pre class="programlisting">
... WHERE query='test;groupsort=@count desc;';
</pre></li>
<li class="listitem">distinct - &#20998;&#32452;&#65288;group-by&#65289;&#26102;&#29992;&#20110;&#35745;&#31639;COUNT(DISTINCT) &#30340;&#23646;&#24615;&#21517;&#31216;&#65292;&#22914;&#21516;
<a class="link" href="#api-func-setgroupdistinct" title="8.5.2.&nbsp;SetGroupDistinct &#65288;&#35774;&#32622;&#20998;&#32452;&#35745;&#31639;&#19981;&#21516;&#20540;&#30340;&#23646;&#24615;&#65289;">SetGroupDistinct()</a> API &#35843;&#29992;&#65306;
<pre class="programlisting">
... WHERE query='test;groupby=attr:country_id;distinct=site_id';
</pre></li>
<li class="listitem">indexweights - &#36887;&#21495;&#20998;&#38548;&#30340;&#21015;&#34920;&#65292;&#25351;&#23450;&#19968;&#31995;&#21015;&#32034;&#24341;&#21517;&#21644;&#25628;&#32034;&#26102;&#36825;&#20123;&#32034;&#24341;&#23545;&#24212;&#30340;&#26435;&#20540;&#65306;
<pre class="programlisting">
... WHERE query='test;indexweights=idx_exact,2,idx_stemmed,1;';
</pre></li>
<li class="listitem">comment - &#29992;&#20110;&#26597;&#35810;&#26085;&#24535;&#26631;&#35760;&#26412;&#27425;&#26597;&#35810;&#30340;&#23383;&#31526;&#20018;
(&#23545;&#24212;<a class="link" href="#api-func-query" title="8.6.1.&nbsp;Query &#65288;&#26597;&#35810;&#65289;">Query()</a> API &#35843;&#29992;&#30340;$comment&#21442;&#25968;):
<pre class="programlisting">
... WHERE query='test;comment=marker001;';
</pre></li>
<li class="listitem">select - &#29992;&#20110;&#35745;&#31639;&#30340;&#34920;&#36798;&#24335;
(&#23545;&#24212; <a class="link" href="#api-func-setselect" title="8.2.4.&nbsp;SetSelect (&#35774;&#32622;&#36820;&#22238;&#20449;&#24687;&#30340;&#20869;&#23481;)">SetSelect()</a> API &#35843;&#29992;):
<pre class="programlisting">
... WHERE query='test;select=2*a+3*b as myexpr;';
</pre></li>
<li class="listitem">host, port - &#20998;&#21035;&#34920;&#31034;&#26412;&#22320;&#25110;&#32773;&#36828;&#31471; <code class="filename">searchd</code> &#20027;&#26426;&#21517;&#31216;&#21644; TCP &#31471;&#21475;:
<pre class="programlisting">
... WHERE query='test;host=sphinx-test.loc;port=7312;';
</pre></li>
<li class="listitem">ranker - &#24403;&#21305;&#37197;&#27169;&#24335;&#65288;&#26597;&#35810;&#35821;&#27861;&#65289;&#20026;extended&#26102;&#29992;&#20110;&#35780;&#20998;&#27169;&#24335;
, &#23545;&#24212; <a class="link" href="#api-func-setrankingmode" title="8.3.2.&nbsp;SetRankingMode &#65288;&#35774;&#32622;&#35780;&#20998;&#27169;&#24335;&#65289;">SetRankingMode()</a> API &#35843;&#29992;.
&#21487;&#29992;&#20540;&#21253;&#25324; "proximity_bm25", "bm25", "none", "wordcount", "proximity",
"matchany", &#21644; "fieldmask".
<pre class="programlisting">
... WHERE query='testrmode=extended2;anker=bm25;';
</pre></li>
<li class="listitem">geoanchor - &#22320;&#29702;&#22352;&#26631;&#38170;&#28857;&#65292;&#23545;&#24212;
<a class="link" href="#api-func-setgeoanchor" title="8.4.5.&nbsp;SetGeoAnchor &#65288;&#35774;&#32622;&#22320;&#34920;&#36317;&#31163;&#38170;&#28857;&#65289;">SetGeoAnchor()</a> API &#35843;&#29992;.
&#21442;&#25968;&#26377;&#22235;&#20010;&#20998;&#21035;&#26159;&#32500;&#24230;&#19982;&#32463;&#24230;&#23646;&#24615;&#30340;&#21517;&#31216;&#20197;&#21450;&#23450;&#20301;&#28857;&#30340;&#22352;&#26631;&#65306;
<pre class="programlisting">
... WHERE query='test;geoanchor=latattr,lonattr,0.123,0.456';
</pre></li>
</ul></div>
<p>
</p><p>
&#19968;&#20010;<span class="bold"><strong>&#38750;&#24120;&#37325;&#35201;</strong></span>&#30340;&#27880;&#24847;&#20107;&#39033;&#65306;&#35753;Sphinx&#26469;&#23545;&#32467;&#26524;&#38598;&#25191;&#34892;&#25490;&#24207;&#12289;&#36807;&#28388;&#21644;&#20999;&#29255;&#65288;slice&#65289;&#35201;&#27604;&#25552;&#39640;&#26368;&#22823;&#21305;&#37197;&#39033;&#25968;&#37327;&#28982;&#21518;&#22312;MySQL&#31471;&#29992;WHERE&#12289;ORDER BY&#21644;LIMIT&#23376;&#21477;&#23436;&#25104;&#23545;&#24212;&#30340;&#21151;&#33021;&#26469;&#24471;&#39640;&#25928;&#24471;<span class="bold"><strong>&#22810;</strong></span>&#12290;&#36825;&#26377;&#20004;&#26041;&#38754;&#30340;&#21407;&#22240;&#12290;&#39318;&#20808;&#65292;Sphinx&#23545;&#36825;&#20123;&#25805;&#20316;&#20570;&#20102;&#19968;&#20123;&#20248;&#21270;&#65292;&#27604;MySQL&#25928;&#29575;&#26356;&#39640;&#19968;&#20123;&#12290;&#20854;&#27425;&#65292;searchd&#21487;&#20197;&#25171;&#21253;&#26356;&#23569;&#30340;&#25968;&#25454;&#65292;SphinxSE&#20063;&#21487;&#20197;&#20256;&#36755;&#21644;&#35299;&#21253;&#26356;&#23569;&#30340;&#25968;&#25454;&#12290;
</p><p>
&#20174;&#29256;&#26412;0.9.9-rc1&#24320;&#22987;&#65292;&#38500;&#20102;&#32467;&#26524;&#38598;&#65292;&#39069;&#22806;&#30340;&#26597;&#35810;&#20449;&#24687;&#21487;&#20197;&#29992;<code class="code">SHOW ENGINE SPHINX STATUS</code>&#35821;&#21477;&#33719;&#24471;&#65306;
</p><pre class="programlisting">
mysql&gt; SHOW ENGINE SPHINX STATUS;
+--------+-------+-------------------------------------------------+
| Type   | Name  | Status                                          |
+--------+-------+-------------------------------------------------+
| SPHINX | stats | total: 25, total found: 25, time: 126, words: 2 | 
| SPHINX | words | sphinx:591:1256 soft:11076:15945                | 
+--------+-------+-------------------------------------------------+
2 rows in set (0.00 sec)
</pre><p>
&#26597;&#35810;&#29366;&#24577;&#20449;&#24687;&#21487;&#20197;&#36890;&#36807;&#29366;&#24577;&#21464;&#37327;&#21517;&#26469;&#35775;&#38382;&#12290;&#20540;&#24471;&#25552;&#37266;&#30340;&#26159;&#65292;&#35775;&#38382;&#36825;&#20123;&#20449;&#24687;&#19981;&#38656;&#35201;&#36229;&#32423;&#29992;&#25143;&#26435;&#38480;&#12290;
</p><pre class="programlisting">
mysql&gt; SHOW STATUS LIKE 'sphinx_%';
+--------------------+----------------------------------+
| Variable_name      | Value                            |
+--------------------+----------------------------------+
| sphinx_total       | 25                               | 
| sphinx_total_found | 25                               | 
| sphinx_time        | 126                              | 
| sphinx_word_count  | 2                                | 
| sphinx_words       | sphinx:591:1256 soft:11076:15945 | 
+--------------------+----------------------------------+
5 rows in set (0.00 sec)
</pre><p>
</p><p>
&#21487;&#20197;&#23545;SphinxSE&#25628;&#32034;&#34920;&#21644;&#20854;&#20182;&#24341;&#25806;&#30340;&#34920;&#20043;&#38388;&#20351;&#29992;JOIN&#65292;&#20197;&#19979;&#26159;&#19968;&#20010;&#20363;&#23376;&#65292;&#20363;&#20013;&#8220;documents&#8221;&#26469;&#33258;<code class="filename">example.sql</code>&#65306;
</p><pre class="programlisting">
mysql&gt; SELECT content, date_added FROM test.documents docs
-&gt; JOIN t1 ON (docs.id=t1.id) 
-&gt; WHERE query="one document;mode=any";
+-------------------------------------+---------------------+
| content                             | docdate             |
+-------------------------------------+---------------------+
| this is my test document number two | 2006-06-17 14:04:28 | 
| this is my test document number one | 2006-06-17 14:04:28 | 
+-------------------------------------+---------------------+
2 rows in set (0.00 sec)

mysql&gt; SHOW ENGINE SPHINX STATUS;
+--------+-------+---------------------------------------------+
| Type   | Name  | Status                                      |
+--------+-------+---------------------------------------------+
| SPHINX | stats | total: 2, total found: 2, time: 0, words: 2 | 
| SPHINX | words | one:1:2 document:2:2                        | 
+--------+-------+---------------------------------------------+
2 rows in set (0.00 sec)
</pre><p>
</p></div>
<div class="sect1" title="9.4.&nbsp;&#36890;&#36807; MySQL &#29983;&#25104;&#29255;&#27573; (&#25688;&#35201;)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sphinxse-snippets"></a>9.4.&nbsp;&#36890;&#36807; MySQL &#29983;&#25104;&#29255;&#27573; (&#25688;&#35201;)</h2></div></div></div>
<p>
&#20174;&#29256;&#26412;0.9.9-rc2&#24320;&#22987;&#65292;SphinxSE&#25552;&#20379;&#20102;&#19968;&#20010;UDF&#20989;&#25968;&#65292;&#20801;&#35768;&#29992;&#25143;&#36890;&#36807;MySQL&#21019;&#24314;&#25688;&#35201;&#12290;&#36825;&#20010;&#21151;&#33021;&#30340;&#20316;&#29992;&#19982;API&#35843;&#29992;<a class="link" href="#api-func-buildexcerpts" title="8.7.1.&nbsp;BuildExcerpts &#65288;&#20135;&#29983;&#25991;&#26412;&#25688;&#35201;&#21644;&#39640;&#20142;&#65289;">BuildExcerprts</a>&#30340;&#21151;&#33021;&#38750;&#24120;&#30456;&#20284;&#65292;&#20294;&#21487;&#20197;&#36890;&#36807;MySQL+SphinxSE&#26469;&#35775;&#38382;&#12290;
</p><p>
&#25552;&#20379;&#36825;&#20010;UDF&#30340;&#20108;&#36827;&#21046;&#25991;&#20214;&#21483;&#20570;<code class="filename">sphinx.so</code>&#65292;&#24403;&#23433;&#35013;SphinxSE&#26412;&#36523;&#30340;&#26102;&#20505;&#65292;&#36825;&#20010;&#25991;&#20214;&#20250;&#33258;&#21160;&#22320;&#34987;&#21019;&#24314;&#65292;&#24182;&#19988;&#23433;&#35013;&#21040;&#21512;&#36866;&#30340;&#20301;&#32622;&#12290;	&#20294;&#22914;&#26524;&#30001;&#20110;&#26576;&#31181;&#21407;&#22240;&#23427;&#27809;&#33021;&#33258;&#21160;&#23433;&#35013;&#65292;&#37027;&#23601;&#35831;&#22312;&#21019;&#24314;SphinxSE&#30340;&#30446;&#24405;&#20013;&#23547;&#25214;<code class="filename">sphinx.so</code>&#25991;&#20214;&#65292;&#24182;&#25226;&#23427;&#25335;&#36125;&#21040;&#20320;&#30340;MySQL&#23454;&#20363;&#30340;plugins&#30446;&#24405;&#19979;&#12290;&#28982;&#21518;&#29992;&#19979;&#38754;&#35821;&#21477;&#26469;&#27880;&#20876;&#36825;&#20010;UDF&#65306;
</p><pre class="programlisting">
CREATE FUNCTION sphinx_snippets RETURNS STRING SONAME 'sphinx.so';
</pre><p>
</p><p>
&#20989;&#25968;&#30340;&#21517;&#23383;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#26159;sphinx_snippets&#65292;&#32780;&#19981;&#33021;&#38543;&#20415;&#21462;&#21517;&#12290;&#20989;&#25968;&#30340;&#21442;&#25968;&#34920;&#24517;&#39035;&#22914;&#19979;&#65306;
</p><p>
<span class="bold"><strong>&#21407;&#22411;&#65306;</strong></span> function sphinx_snippets ( document, index, words, [options] );
</p><p>
Documents&#21644;words&#36825;&#20004;&#20010;&#21442;&#25968;&#21487;&#20197;&#26159;&#23383;&#31526;&#20018;&#25110;&#32773;&#25968;&#25454;&#24211;&#34920;&#30340;&#21015;&#12290;Options&#21442;&#25968;&#65288;&#39069;&#22806;&#36873;&#39033;&#65289;&#24517;&#39035;&#36825;&#26679;&#25351;&#23450;&#65306;<code class="code">&#8216;&#20540;&#8217; AS &#36873;&#39033;&#21517;</code>&#12290;&#20851;&#20110;&#25903;&#25345;&#30340;&#25152;&#26377;&#36873;&#39033;&#65292;&#21487;&#20197;&#21442;&#35265;API&#35843;&#29992;<a class="link" href="#api-func-buildexcerpts" title="8.7.1.&nbsp;BuildExcerpts &#65288;&#20135;&#29983;&#25991;&#26412;&#25688;&#35201;&#21644;&#39640;&#20142;&#65289;">BuildExcerprts()</a>&#12290;&#21482;&#26377;&#19968;&#20010;&#36873;&#39033;&#19981;&#34987;API&#25903;&#25345;&#32780;&#21482;&#33021;&#29992;&#20110;UDF&#65292;&#36825;&#20010;&#36873;&#39033;&#21483;&#20570;<code class="code">'sphinx'</code>&#65292;&#29992;&#20110;&#25351;&#23450;searchd&#30340;&#20301;&#32622;&#65288;&#26381;&#21153;&#22120;&#21644;&#31471;&#21475;&#65289;&#12290;
</p><p>
&#20351;&#29992;&#31034;&#20363;&#65306;
</p><pre class="programlisting">
SELECT sphinx_snippets('hello world doc', 'main', 'world',
    'sphinx://192.168.1.1/' AS sphinx, true AS exact_phrase,
    '[b]' AS before_match, '[/b]' AS after_match)
FROM documents;

SELECT title, sphinx_snippets(text, 'index', 'mysql php') AS text
    FROM sphinx, documents
    WHERE query='mysql php' AND sphinx.id=documents.id;
</pre><p>
</p></div></div>
<div class="chapter" title="&#31532;&nbsp;10&nbsp;&#31456;&nbsp;&#25253;&#21578;BUG"><div class="titlepage"><div><div><h2 class="title"><a name="reporting-bugs"></a>&#31532;&nbsp;10&nbsp;&#31456;&nbsp;&#25253;&#21578;BUG</h2></div></div></div>
<p>
&#24456;&#19981;&#24184;&#65292;Sphinx&#36824;&#27809;&#26377;&#36798;&#21040;100%&#26080;bug&#65288;&#23613;&#31649;&#25105;&#20204;&#27491;&#21521;&#36825;&#20010;&#30446;&#26631;&#21162;&#21147;&#65289;&#65292;&#22240;&#27492;&#24744;&#21487;&#33021;&#20598;&#23572;&#36935;&#21040;&#20123;&#38382;&#39064;&#12290;
</p><p>
&#23545;&#20110;&#27599;&#20010;&#38382;&#39064;&#30340;&#25253;&#21578;&#36234;&#35814;&#32454;&#36234;&#22909;&#65292;&#36825;&#24456;&#37325;&#35201;&#8212;&#8212;&#22240;&#20026;&#35201;&#24819;&#20462;&#22797;bug&#65292;&#25105;&#20204;&#24517;&#39035;&#37325;&#29616;bug&#24182;&#35843;&#35797;&#23427;&#65292;&#25110;&#32773;&#26681;&#25454;&#24744;&#25552;&#20379;&#30340;&#20449;&#24687;&#26469;&#25512;&#26029;&#20986;&#20135;&#29983;bug&#30340;&#21407;&#22240;&#12290;&#22240;&#27492;&#22312;&#27492;&#25552;&#20379;&#19968;&#20123;&#22914;&#20309;&#25253;&#21578;bug&#30340;&#25351;&#23548;&#12290;
</p><h2>&#32534;&#35793;&#26102;&#30340;&#38382;&#39064;</h2><p>&#22914;&#26524;Sphinx&#26500;&#24314;&#22833;&#36133;&#65292;&#35831;&#24744;&#25353;&#29031;&#20197;&#19979;&#27493;&#39588;&#36827;&#34892;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">&#30830;&#35748;&#24744;&#30340;DBMS&#65288;&#25968;&#25454;&#24211;&#65289;&#30340;&#22836;&#25991;&#20214;&#21644;&#24211;&#25991;&#20214;&#37117;&#27491;&#30830;&#23433;&#35013;&#20102;&#65288;&#20363;&#22914;&#65292;&#26816;&#26597;<code class="filename">mysql-devel</code>&#21253;&#24050;&#32463;&#23433;&#35013;&#65289;
</li>
<li class="listitem">&#25253;&#21578;Sphinx&#30340;&#29256;&#26412;&#21644;&#37197;&#32622;&#25991;&#20214;&#65288;&#21035;&#24536;&#20102;&#21024;&#38500;&#25968;&#25454;&#24211;&#36830;&#25509;&#23494;&#30721;&#65289;&#65292;MySQL&#65288;&#25110;PostgreSQL&#65289;&#37197;&#32622;&#25991;&#20214;&#20449;&#24687;&#65292;gcc&#29256;&#26412;&#65292;&#25805;&#20316;&#31995;&#32479;&#29256;&#26412;&#21644;CPU&#31867;&#22411;&#65288;&#20363;&#22914;x86&#12289;x86-64&#12289;PowerPC&#31561;&#65289;&#65306;
<pre class="programlisting">
mysql_config
gcc --version
uname -a
</pre></li>
<li class="listitem">
&#25253;&#21578;<code class="filename">configure</code>&#33050;&#26412;&#25110;&#32773;<code class="filename">gcc</code>&#32473;&#20986;&#30340;&#38169;&#35823;&#20449;&#24687;&#65288;&#21482;&#38656;&#38169;&#35823;&#20449;&#24687;&#26412;&#36523;&#65292;&#19981;&#24517;&#38468;&#19978;&#25972;&#20010;&#26500;&#24314;&#26085;&#24535;&#65289;
</li>
</ol></div>
<h2>&#36816;&#34892;&#26102;&#30340;&#38382;&#39064;</h2><p>
&#22914;&#26524;Sphinx&#24050;&#32463;&#25104;&#21151;&#26500;&#24314;&#24182;&#33021;&#36816;&#34892;&#65292;&#20294;&#36816;&#34892;&#36807;&#31243;&#20013;&#20986;&#29616;&#20102;&#38382;&#39064;&#65292;&#35831;&#24744;&#25353;&#29031;&#20197;&#19979;&#27493;&#39588;&#36827;&#34892;&#65306;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">&#25551;&#36848;&#24744;&#36935;&#21040;&#30340;bug&#65288;&#21363;&#65292;&#24744;&#39044;&#26399;&#30340;&#34892;&#20026;&#21644;&#23454;&#38469;&#21457;&#29983;&#30340;&#34892;&#20026;&#65289;&#65292;&#20197;&#21450;&#37325;&#29616;&#24744;&#36935;&#21040;&#30340;&#38382;&#39064;&#38656;&#35201;&#30340;&#27493;&#39588;&#65307;</li>
<li class="listitem">&#38468;&#24102;Sphinx&#30340;&#29256;&#26412;&#21644;&#37197;&#32622;&#25991;&#20214;&#65288;&#21035;&#24536;&#20102;&#21024;&#38500;&#23494;&#30721;&#65289;&#65292;MySQL&#65288;&#25110;PostgreSQL&#65289;&#37197;&#32622;&#25991;&#20214;&#20449;&#24687;&#65292;gcc&#29256;&#26412;&#65292;&#25805;&#20316;&#31995;&#32479;&#29256;&#26412;&#21644;CPU&#31867;&#22411;&#65288;&#20363;&#22914;x86&#12289;x86-64&#12289;PowerPC&#31561;&#65289;&#65306;
<pre class="programlisting">
mysql --version
gcc --version
uname -a
</pre></li>
<li class="listitem">&#26500;&#24314;&#12289;&#23433;&#35013;&#21644;&#36816;&#34892;&#35843;&#35797;&#29256;&#26412;&#30340;&#20840;&#37096;Sphinx&#31243;&#24207;&#65288;&#36825;&#20250;&#21551;&#29992;&#24456;&#22810;&#20869;&#37096;&#26657;&#39564;&#65292;&#25110;&#31216;&#26029;&#35328;(assertions)&#65289;&#65306;
<pre class="programlisting">
make distclean
./configure --with-debug
make install
killall -TERM searchd
</pre></li>
<li class="listitem">&#37325;&#26032;&#32034;&#24341;&#65292;&#26816;&#26597;&#26159;&#21542;&#26377;&#26029;&#35328;(assertions)&#34987;&#35302;&#21457;&#65288;&#22914;&#26524;&#26159;&#65292;&#37027;&#24456;&#21487;&#33021;&#26159;&#32034;&#24341;&#25439;&#22351;&#20102;&#24182;&#36896;&#25104;&#20102;&#38382;&#39064;&#65289;&#65307;
</li>
<li class="listitem">&#22914;&#26524;bug&#22312;&#35843;&#35797;&#29256;&#26412;&#20013;&#27809;&#26377;&#37325;&#29616;&#65292;&#35831;&#22238;&#21040;&#38750;&#35843;&#35797;&#29256;&#26412;&#24182;&#22312;&#25253;&#21578;&#20013;&#35828;&#26126;&#36825;&#20010;&#24773;&#20917;&#65307;
</li>
<li class="listitem">&#22914;&#26524;bug&#21487;&#20197;&#22312;&#24744;&#30340;&#25968;&#25454;&#24211;&#30340;&#24456;&#23567;&#30340;&#23376;&#38598;&#65288;1-100&#26465;&#35760;&#24405;&#65289;&#19978;&#37325;&#29616;&#65292;&#35831;&#25552;&#20379;&#19968;&#20010;&#35813;&#23376;&#38598;&#30340;gzip&#21387;&#32553;&#21253;&#65307;
</li>
<li class="listitem">&#22914;&#26524;&#38382;&#39064;&#19982;<code class="filename">searchd</code>&#26377;&#20851;&#65292;&#35831;&#22312;bug&#25253;&#21578;&#20013;&#25552;&#20379;<code class="filename">searchd.log</code>&#21644;<code class="filename">query.log</code>&#20013;&#30340;&#30456;&#20851;&#26465;&#30446;&#65307;
</li>
<li class="listitem">&#22914;&#26524;&#38382;&#39064;&#19982;<code class="filename">searchd</code>&#26377;&#20851;&#65292;&#35831;&#23581;&#35797;&#22312;console&#27169;&#24335;&#19979;&#36816;&#34892;&#23427;&#24182;&#26816;&#26597;&#23427;&#26159;&#21542;&#22240;&#26029;&#35328;&#22833;&#36133;&#32780;&#36864;&#20986;&#12290;
<pre class="programlisting">
./searchd --console
</pre></li>
<li class="listitem">&#22914;&#26524;&#20219;&#20309;&#19968;&#20010;&#31243;&#24207;&#22240;&#26029;&#35328;&#22833;&#36133;&#32780;&#36864;&#20986;&#65292;&#35831;&#25552;&#20379;&#26029;&#35328;(assertions)&#20449;&#24687;&#12290;</li>
</ol></div>
<h2>&#35843;&#35797;&#26029;&#35328;&#65292;&#23849;&#28291;&#21644;&#25346;&#26029;</h2><p>
&#22914;&#26524;&#20219;&#20309;&#19968;&#20010;&#31243;&#24207;&#22240;&#26029;&#35328;(assertions)&#22833;&#36133;&#32780;&#36864;&#20986;&#65292;&#23849;&#28291;&#25110;&#20572;&#27490;&#21709;&#24212;&#65292;&#24744;&#21487;&#20197;&#39069;&#22806;&#29983;&#25104;&#19968;&#20010;&#20869;&#23384;&#36716;&#20648;&#25991;&#20214;&#24182;&#26816;&#26597;&#23427;&#12290;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
&#21551;&#29992;&#20869;&#23384;&#36716;&#20648;&#12290;&#22312;&#22823;&#22810;&#25968;Linux&#31995;&#32479;&#19978;&#65292;&#21487;&#20197;&#29992;<code class="filename">ulimit</code>&#21629;&#20196;&#21551;&#29992;&#23427;&#65306;
<pre class="programlisting">
ulimit -c 32768
</pre></li>
<li class="listitem">
&#36816;&#34892;&#31243;&#24207;&#65292;&#23581;&#35797;&#37325;&#29616;bug&#65307;
</li>
<li class="listitem">
&#22914;&#26524;&#31243;&#24207;&#23849;&#28291;&#65288;&#21487;&#33021;&#26377;&#26029;&#35328;&#22833;&#36133;&#30340;&#24773;&#20917;&#20063;&#21487;&#33021;&#27809;&#26377;&#65289;&#65292;&#22312;&#24403;&#21069;&#30446;&#24405;&#19979;&#25214;&#21040;&#20869;&#23384;&#36716;&#20648;&#25991;&#20214;&#65288;&#19968;&#33324;&#20250;&#25171;&#21360;&#8220;Segmentation fault (core dumped)&#8221;&#28040;&#24687;&#65289;&#65307;
</li>
<li class="listitem">
&#22914;&#26524;&#31243;&#24207;&#20572;&#27490;&#21709;&#24212;&#65292;&#22312;&#21478;&#19968;&#20010;&#25511;&#21046;&#21488;&#19978;&#29992;<code class="filename">kill -SEGV</code>&#24378;&#21046;&#36864;&#20986;&#24182;&#33719;&#24471;&#20869;&#23384;&#36716;&#20648;&#65306;
<pre class="programlisting">
kill -SEGV HANGED-PROCESS-ID
</pre></li>
<li class="listitem">
&#20351;&#29992;<code class="filename">gdb</code>&#26816;&#26597;&#36716;&#20648;&#25991;&#20214;&#65292;&#26597;&#30475;backtrace&#65306;
<pre class="programlisting">
gdb ./CRASHED-PROGRAM-FILE-NAME CORE-DUMP-FILE-NAME
(gdb) bt
(gdb) quit
</pre></li>
</ol></div>
<p>
&#25552;&#31034;&#65306; HANGED-PROCESS-ID&#65288;&#20572;&#27490;&#21709;&#24212;&#30340;&#36827;&#31243;ID&#65289;, CRASHED-PROGRAM-FILE-NAME&#65288;&#23849;&#28291;&#31243;&#24207;&#30340;&#25991;&#20214;&#21517;&#65289; and CORE-DUMP-FILE-NAME&#65288;&#26680;&#24515;&#36716;&#20648;&#25991;&#20214;&#30340;&#25991;&#20214;&#21517;&#65289;&#24212;&#35813;&#34987;&#25442;&#25104;&#20855;&#20307;&#30340;&#25968;&#23383;&#21644;&#25991;&#20214;&#21517;&#12290;&#20363;&#22914;&#65292;&#19968;&#27425;&#23545;&#20572;&#27490;&#21709;&#24212;&#30340;searchd&#30340;&#35843;&#35797;&#20250;&#35805;&#30475;&#36215;&#26469;&#24212;&#35813;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;
</p><pre class="programlisting">
# kill -SEGV 12345
# ls *core*
core.12345
# gdb ./searchd core.12345
(gdb) bt
...
(gdb) quit
</pre><p>
</p><p>
&#27880;&#24847;<code class="filename">ulimit</code>&#24182;&#19981;&#26159;&#25972;&#20010;&#26381;&#21153;&#22120;&#33539;&#22260;&#30340;&#65292;&#32780;&#26159;&#20165;&#24433;&#21709;&#24403;&#21069;&#30340;shell&#20250;&#35805;&#12290;&#22240;&#27492;&#24744;&#19981;&#24517;&#36824;&#21407;&#20219;&#20309;&#26381;&#21153;&#22120;&#33539;&#22260;&#30340;&#38480;&#21046;&#8212;&#8212;&#20294;&#26159;&#19968;&#26086;&#37325;&#26032;&#30331;&#38470;&#65292;&#24744;&#23601;&#38656;&#35201;&#20877;&#27425;&#35774;&#32622;<code class="filename">ulimit</code>&#12290;
</p><p>
&#26680;&#24515;&#20869;&#23384;&#36716;&#20648;&#25991;&#20214;&#20250;&#23384;&#25918;&#22312;&#24403;&#21069;&#24037;&#20316;&#30446;&#24405;&#19979;&#65288;Sphinx&#30340;&#21508;&#20010;&#31243;&#24207;&#19981;&#20250;&#25913;&#21464;&#24037;&#20316;&#30446;&#24405;&#65289;&#65292;&#22240;&#27492;&#23427;&#20204;&#23601;&#22312;&#37027;&#12290;
</p><p>
&#19981;&#35201;&#31435;&#21051;&#21024;&#38500;&#36716;&#20648;&#25991;&#20214;&#65292;&#20174;&#23427;&#37324;&#38754;&#21487;&#33021;&#33719;&#24471;&#26356;&#22810;&#26377;&#29992;&#30340;&#20449;&#24687;&#12290;&#24744;&#19981;&#38656;&#35201;&#25226;&#36825;&#20010;&#25991;&#20214;&#21457;&#36865;&#32473;&#25105;&#20204;&#65288;&#22240;&#20026;&#35843;&#35797;&#20449;&#24687;&#19982;&#24744;&#30340;&#31995;&#32479;&#26412;&#36523;&#32039;&#23494;&#30456;&#20851;&#65289;&#65292;&#20294;&#25105;&#20204;&#21487;&#33021;&#20250;&#21521;&#24744;&#35810;&#38382;&#19968;&#20123;&#19982;&#20043;&#30456;&#20851;&#30340;&#38382;&#39064;&#12290;
</p></div>
<div class="chapter" title="&#31532;&nbsp;11&nbsp;&#31456;&nbsp;sphinx.conf/csft.conf &#37197;&#32622;&#36873;&#39033;&#21442;&#32771;"><div class="titlepage"><div><div><h2 class="title"><a name="conf-reference"></a>&#31532;&nbsp;11&nbsp;&#31456;&nbsp;<code class="filename">sphinx.conf/csft.conf</code> &#37197;&#32622;&#36873;&#39033;&#21442;&#32771;</h2></div></div></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="sect1"><a href="#confgroup-source">11.1. &#25968;&#25454;&#28304;&#37197;&#32622;&#36873;&#39033;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#conf-source-type">11.1.1. type&#65306;&#25968;&#25454;&#28304;&#31867;&#22411;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-host">11.1.2. sql_host&#65306;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-port">11.1.3. sql_port&#65306;&#25968;&#25454;&#24211;&#31471;&#21475;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-user">11.1.4. sql_user&#65306;&#25968;&#25454;&#24211;&#29992;&#25143;&#21517;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-pass">11.1.5. sql_pass&#65306;&#25968;&#25454;&#24211;&#23494;&#30721;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-db">11.1.6. sql_db&#65306;&#25968;&#25454;&#24211;&#21517;&#31216;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-sock">11.1.7. sql_sock&#65306;&#25968;&#25454;&#24211;Socket&#25991;&#20214;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mysql-connect-flags">11.1.8. mysql_connect_flags&#65306;MySQL&#36830;&#25509;&#21442;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mysql-ssl">11.1.9. mysql_ssl_cert, mysql_ssl_key, mysql_ssl_ca&#65306;MySQL&#30340;SSL&#36830;&#25509;</a></span></dt>
<dt><span class="sect2"><a href="#conf-odbc-dsn">11.1.10. odbc_dsn&#65306;ODBC&#36830;&#25509;&#23383;&#31526;&#20018;(DSN)</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-pre">11.1.11. sql_query_pre&#65306;&#24453;&#32034;&#24341;&#25968;&#25454;&#33719;&#21462;&#21069;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query">11.1.12. sql_query&#65306;&#33719;&#21462;&#24453;&#32034;&#24341;&#25968;&#25454;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-joined-field">11.1.13. sql_joined_field&#65306;SQL&#36830;&#25509;&#23383;&#27573;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-range">11.1.14. sql_query_range&#65306;&#20998;&#21306;&#26597;&#35810;&#33539;&#22260;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-range-step">11.1.15. sql_range_step&#65306;&#20998;&#21306;&#26597;&#35810;&#27493;&#36827;&#20540;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-killlist">11.1.16. sql_query_killlist&#65306;Kill-list&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-uint">11.1.17. sql_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-bool">11.1.18. sql_attr_bool&#65306;&#24067;&#23572;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-bigint">11.1.19. sql_attr_bigint&#65306;&#38271;&#25972;&#22411;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-timestamp">11.1.20. sql_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-str2ordinal">11.1.21. sql_attr_str2ordinal&#65306;&#23383;&#31526;&#20018;&#24207;&#25968;&#25490;&#24207;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-float">11.1.22. sql_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-multi">11.1.23. sql_attr_multi&#65306;&#22810;&#20540;&#23646;&#24615;(MVA)&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-string">11.1.24. sql_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;(&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-attr-str2wordcount">11.1.25. sql_attr_str2wordcount&#65306;&#25991;&#26723;&#35789;&#27719;&#25968;&#35760;&#24405;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-column-buffers">11.1.26. sql_column_buffers&#65306;&#32467;&#26524;&#34892;&#32531;&#20914;&#22823;&#23567;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-field-string">11.1.27. sql_field_string&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-field-str2wordcount">11.1.28. sql_field_str2wordcount&#65306;&#25991;&#26723;&#35789;&#27719;&#25968;&#35760;&#24405;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#20449;&#24687;)</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-file-field">11.1.29. sql_file_field&#65306;&#22806;&#37096;&#25991;&#20214;&#23383;&#27573;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-post">11.1.30. sql_query_post&#65306;&#25968;&#25454;&#33719;&#21462;&#21518;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-post-index">11.1.31. sql_query_post_index&#65306;&#25968;&#25454;&#32034;&#24341;&#21518;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-ranged-throttle">11.1.32. sql_ranged_throttle&#65306;&#20998;&#21306;&#26597;&#35810;&#38388;&#38548;&#26102;&#38388;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-info-pre">11.1.33. sql_query_info_pre&#65306;&#21629;&#20196;&#34892;&#20449;&#24687;&#33719;&#21462;&#21069;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-sql-query-info">11.1.34. sql_query_info&#65306;&#21629;&#20196;&#34892;&#20449;&#24687;&#33719;&#21462;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-command">11.1.35. xmlpipe_command&#65306;&#25968;&#25454;&#33719;&#21462;&#21629;&#20196;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-field">11.1.36. xmlpipe_field&#65306;&#23383;&#27573;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-field-string">11.1.37. xmlpipe_field_string&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-field-wordcount">11.1.38. xmlpipe_field_wordcount&#65306;&#35789;&#27719;&#25968;&#23384;&#20648;&#23383;&#27573;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-uint">11.1.39. xmlpipe_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-bool">11.1.40. xmlpipe_attr_bool&#65306;&#24067;&#23572;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-timestamp">11.1.41. xmlpipe_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-str2ordinal">11.1.42. xmlpipe_attr_str2ordinal&#65306;&#23383;&#31526;&#20018;&#24207;&#21015;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-float">11.1.43. xmlpipe_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-multi">11.1.44. xmlpipe_attr_multi&#65306;&#22810;&#20540;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-attr-string">11.1.45. xmlpipe_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-xmlpipe-fixup-utf8">11.1.46. xmlpipe_fixup_utf8&#65306;UTF-8&#20462;&#22797;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mssql-winauth">11.1.47. mssql_winauth&#65306;Windows&#38598;&#25104;&#35748;&#35777;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mssql-unicode">11.1.48. mssql_unicode&#65306;Unicode&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-unpack-zlib">11.1.49. unpack_zlib&#65306;SQL&#25968;&#25454;&#28304;&#35299;&#21387;&#23383;&#27573;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-unpack-mysqlcompress">11.1.50. unpack_mysqlcompress&#65306;MySQL&#25968;&#25454;&#28304;&#35299;&#21387;&#23383;&#27573;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-unpack-mysqlcompress-maxsize">11.1.51. unpack_mysqlcompress_maxsize&#65306;MySQL&#25968;&#25454;&#28304;&#35299;&#21387;&#32531;&#20914;&#21306;&#35774;&#32622;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#confgroup-index">11.2. &#32034;&#24341;&#37197;&#32622;&#36873;&#39033;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#conf-index-type">11.2.1. type&#65306;&#32034;&#24341;&#31867;&#22411;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-source">11.2.2. source&#65306;&#25991;&#26723;&#28304;</a></span></dt>
<dt><span class="sect2"><a href="#conf-path">11.2.3. path&#65306;&#32034;&#24341;&#25991;&#20214;&#36335;&#24452;</a></span></dt>
<dt><span class="sect2"><a href="#conf-docinfo">11.2.4. docinfo&#65306;&#25991;&#26723;&#20449;&#24687;&#23384;&#20648;&#27169;&#24335;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mlock">11.2.5. mlock&#65306;&#32531;&#20914;&#25968;&#25454;&#20869;&#23384;&#38145;&#23450;</a></span></dt>
<dt><span class="sect2"><a href="#conf-morphology">11.2.6. morphology&#65306;&#35789;&#24418;&#22788;&#29702;</a></span></dt>
<dt><span class="sect2"><a href="#conf-dict">11.2.7. dict&#65306;&#20851;&#38190;&#23383;&#35789;&#20856;&#31867;&#22411;</a></span></dt>
<dt><span class="sect2"><a href="#conf-index-sp">11.2.8. index_sp&#65306;&#32034;&#24341;&#21477;&#23376;&#21644;&#27573;&#33853;&#20449;&#24687;</a></span></dt>
<dt><span class="sect2"><a href="#conf-index-zones">11.2.9. index_zones&#65306;&#32034;&#24341;&#26631;&#31614;&#21306;&#22495;&#20449;&#24687;</a></span></dt>
<dt><span class="sect2"><a href="#conf-min-stemming-len">11.2.10. min_stemming_len&#65306;&#35789;&#24178;&#21270;&#26368;&#23567;&#35789;&#38271;</a></span></dt>
<dt><span class="sect2"><a href="#conf-stopwords">11.2.11. stopwords&#65306;&#20572;&#27490;&#35789;</a></span></dt>
<dt><span class="sect2"><a href="#conf-wordforms">11.2.12. wordforms&#65306;&#35789;&#24418;&#23383;&#20856;</a></span></dt>
<dt><span class="sect2"><a href="#conf-exceptions">11.2.13. exceptions&#65306;&#35789;&#27719;&#29305;&#20363;&#22788;&#29702;</a></span></dt>
<dt><span class="sect2"><a href="#conf-min-word-len">11.2.14. min_word_len&#65306;&#26368;&#23567;&#32034;&#24341;&#35789;&#27719;&#38271;&#24230;</a></span></dt>
<dt><span class="sect2"><a href="#conf-charset-type">11.2.15. charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;</a></span></dt>
<dt><span class="sect2"><a href="#conf-charset-table">11.2.16. charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;</a></span></dt>
<dt><span class="sect2"><a href="#conf-ignore-chars">11.2.17. ignore_chars&#65306;&#24573;&#30053;&#23383;&#31526;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-min-prefix-len">11.2.18. min_prefix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#21069;&#32512;&#38271;&#24230;</a></span></dt>
<dt><span class="sect2"><a href="#conf-min-infix-len">11.2.19. min_infix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#20013;&#32512;&#38271;&#24230;</a></span></dt>
<dt><span class="sect2"><a href="#conf-prefix-fields">11.2.20. prefix_fields&#65306;&#21069;&#32512;&#32034;&#24341;&#23383;&#27573;&#21015;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-infix-fields">11.2.21. infix_fields&#65306;&#20013;&#32512;&#32034;&#24341;&#23383;&#27573;&#21015;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-enable-star">11.2.22. enable_star&#65306;&#26143;&#21495;&#35821;&#27861;</a></span></dt>
<dt><span class="sect2"><a href="#conf-ngram-len">11.2.23. ngram_len&#65306;N-gram&#38271;&#24230;</a></span></dt>
<dt><span class="sect2"><a href="#conf-ngram-chars">11.2.24. ngram_chars&#65306;N-gram&#23383;&#31526;&#21015;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-phrase-boundary">11.2.25. phrase_boundary&#65306;&#35789;&#32452;&#36793;&#30028;&#31526;&#21015;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-phrase-boundary-step">11.2.26. phrase_boundary_step&#65306;&#35789;&#32452;&#36793;&#30028;&#20301;&#32622;&#22686;&#37327;</a></span></dt>
<dt><span class="sect2"><a href="#conf-html-strip">11.2.27. html_strip&#65306;HTMl&#26631;&#35760;&#28165;&#29702;</a></span></dt>
<dt><span class="sect2"><a href="#conf-html-index-attrs">11.2.28. html_index_attrs&#65306;HTML&#26631;&#31614;&#23646;&#24615;&#32034;&#24341;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-html-remove-elements">11.2.29. html_remove_elements&#65306;HTML&#20803;&#32032;&#28165;&#29702;</a></span></dt>
<dt><span class="sect2"><a href="#conf-local">11.2.30. local&#65306;&#26412;&#22320;&#32034;&#24341;&#22768;&#26126;</a></span></dt>
<dt><span class="sect2"><a href="#conf-agent">11.2.31. agent&#65306;&#36828;&#31243;&#32034;&#24341;&#22768;&#26126;</a></span></dt>
<dt><span class="sect2"><a href="#conf-agent-blackhole">11.2.32. agent_blackhole&#65306;&#36828;&#31243;&#40657;&#27934;&#20195;&#29702;</a></span></dt>
<dt><span class="sect2"><a href="#conf-agent-connect-timeout">11.2.33. agent_connect_timeout&#65306;&#36828;&#31243;&#26597;&#35810;&#26102;&#38388;</a></span></dt>
<dt><span class="sect2"><a href="#conf-agent-query-timeout">11.2.34. agent_query_timeout&#65306;&#36828;&#31243;&#26597;&#35810;&#36229;&#26102;&#26102;&#38388;</a></span></dt>
<dt><span class="sect2"><a href="#conf-preopen">11.2.35. preopen&#65306;&#32034;&#24341;&#25991;&#20214;&#39044;&#24320;&#21551;</a></span></dt>
<dt><span class="sect2"><a href="#conf-ondisk-dict">11.2.36. ondisk_dict&#65306;&#23383;&#20856;&#25991;&#20214;&#20445;&#25345;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-inplace-enable">11.2.37. inplace_enable&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-inplace-hit-gap">11.2.38. inplace_hit_gap&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#21305;&#37197;&#28857;&#31354;&#38553;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-inplace-docinfo-gap">11.2.39. inplace_docinfo_gap&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#25991;&#26723;&#20449;&#24687;&#31354;&#38553;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-inplace-reloc-factor">11.2.40. inplace_reloc_factor&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#37325;&#23450;&#20301;&#20869;&#23384;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-inplace-write-factor">11.2.41. inplace_write_factor&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#20889;&#32531;&#20914;&#20869;&#23384;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-index-exact-words">11.2.42. index_exact_words&#65306;&#35789;&#24178;&#21270;&#21518;&#21407;&#35789;&#32034;&#24341;</a></span></dt>
<dt><span class="sect2"><a href="#conf-overshort-step">11.2.43. overshort_step&#65306;&#30701;&#35789;&#20301;&#32622;&#22686;&#37327;</a></span></dt>
<dt><span class="sect2"><a href="#conf-stopword-step">11.2.44. stopword_step&#65306;&#36890;&#29992;&#35789;&#20301;&#32622;&#22686;&#37327;</a></span></dt>
<dt><span class="sect2"><a href="#conf-hitless-words">11.2.45. hitless_words&#65306;&#20301;&#32622;&#24573;&#30053;&#35789;&#27719;&#21015;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-expand-keywords">11.2.46. expand_keywords&#65306;&#35789;&#27719;&#23637;&#24320;</a></span></dt>
<dt><span class="sect2"><a href="#conf-blend-chars">11.2.47. blend_chars&#65306;&#28151;&#21512;&#23383;&#31526;&#21015;&#34920;</a></span></dt>
<dt><span class="sect2"><a href="#conf-blend-mode">11.2.48. blend_mode&#65306;&#28151;&#21512;&#31867;&#22411;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-mem-limit">11.2.49. rt_mem_limit&#65306;RT&#32034;&#24341;&#20869;&#23384;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-field">11.2.50. rt_field&#65306;&#23383;&#27573;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-attr-uint">11.2.51. rt_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-attr-bigint">11.2.52. rt_attr_bigint&#65306;&#38271;&#25972;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-attr-float">11.2.53. rt_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-attr-timestamp">11.2.54. rt_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-attr-string">11.2.55. rt_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#confgroup-indexer">11.3. <code class="filename">indexer</code> &#31243;&#24207;&#37197;&#32622;&#36873;&#39033;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#conf-mem-limit">11.3.1. mem_limit&#65306;&#32034;&#24341;&#20869;&#23384;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-iops">11.3.2. max_iops&#65306;&#27599;&#31186;IO&#25805;&#20316;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-iosize">11.3.3. max_iosize&#65306;&#26368;&#22823;IO&#25805;&#20316;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-xmlpipe2-field">11.3.4. max_xmlpipe2_field&#65306;&#26368;&#22823;&#23383;&#27573;&#22823;&#23567;</a></span></dt>
<dt><span class="sect2"><a href="#conf-write-buffer">11.3.5. write_buffer&#65306;&#20889;&#32531;&#20914;&#22823;&#23567;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-file-field-buffer">11.3.6. max_file_field_buffer&#65306;&#22806;&#37096;&#25991;&#20214;&#32531;&#20914;&#22823;&#23567;</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#confgroup-searchd">11.4. <code class="filename">searchd</code> &#31243;&#24207;&#37197;&#32622;&#36873;&#39033;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#conf-listen">11.4.1. listen&#65306;&#30417;&#21548;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-address">11.4.2. address&#65306;&#30417;&#21548;&#22320;&#22336;</a></span></dt>
<dt><span class="sect2"><a href="#conf-port">11.4.3. port&#65306;&#30417;&#21548;&#31471;&#21475;</a></span></dt>
<dt><span class="sect2"><a href="#conf-log">11.4.4. log&#65306;&#25628;&#32034;&#31995;&#32479;&#26085;&#24535;</a></span></dt>
<dt><span class="sect2"><a href="#conf-query-log">11.4.5. query_log&#65306;&#25628;&#32034;&#26597;&#35810;&#26085;&#24535;</a></span></dt>
<dt><span class="sect2"><a href="#conf-query-log-format">11.4.6. query_log_format&#65306;&#26597;&#35810;&#26085;&#24535;&#26684;&#24335;</a></span></dt>
<dt><span class="sect2"><a href="#conf-read-timeout">11.4.7. read_timeout&#65306;&#36828;&#31243;&#35835;&#21462;&#36229;&#26102;&#26102;&#38388;</a></span></dt>
<dt><span class="sect2"><a href="#conf-client-timeout">11.4.8. client_timeout&#65306;&#23458;&#25143;&#31471;&#36229;&#26102;&#26102;&#38388;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-children">11.4.9. max_children&#65306;&#23376;&#36827;&#31243;&#25968;&#30446;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-pid-file">11.4.10. pid_file&#65306;PID&#25991;&#20214;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-matches">11.4.11. max_matches&#65306;&#26368;&#22823;&#36820;&#22238;&#21305;&#37197;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#conf-seamless-rotate">11.4.12. seamless_rotate&#65306;&#26080;&#32541;&#36718;&#25442;</a></span></dt>
<dt><span class="sect2"><a href="#conf-preopen-indexes">11.4.13. preopen_indexes&#65306;&#32034;&#24341;&#39044;&#24320;&#21551;</a></span></dt>
<dt><span class="sect2"><a href="#conf-unlink-old">11.4.14. unlink_old&#65306;&#26087;&#32034;&#24341;&#28165;&#29702;</a></span></dt>
<dt><span class="sect2"><a href="#conf-attr-flush-period">11.4.15. attr_flush_period&#65306;&#23646;&#24615;&#21047;&#26032;&#21608;&#26399;</a></span></dt>
<dt><span class="sect2"><a href="#conf-ondisk-dict-default">11.4.16. ondisk_dict_default&#65306;&#32034;&#24341;&#23383;&#20856;&#23384;&#20648;&#26041;&#24335;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-packet-size">11.4.17. max_packet_size&#65306;&#26368;&#22823;&#21253;&#22823;&#23567;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mva-updates-pool">11.4.18. mva_updates_pool&#65306;MVA&#26356;&#26032;&#20849;&#20139;&#20869;&#23384;</a></span></dt>
<dt><span class="sect2"><a href="#conf-crash-log-path">11.4.19. crash_log_path&#65306;&#23849;&#28291;&#26085;&#24535;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-filters">11.4.20. max_filters&#65306;&#26368;&#22823;&#36807;&#28388;&#22120;&#25968;&#30446;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-filter-values">11.4.21. max_filter_values&#65306;&#21333;&#20010;&#36807;&#28388;&#22120;&#26368;&#22823;&#36807;&#28388;&#20540;&#25968;&#30446;</a></span></dt>
<dt><span class="sect2"><a href="#conf-listen-backlog">11.4.22. listen_backlog&#65306;&#24102;&#22788;&#29702;&#30417;&#21548;&#38431;&#21015;</a></span></dt>
<dt><span class="sect2"><a href="#conf-read-buffer">11.4.23. read_buffer&#65306;&#35835;&#32531;&#20914;&#21306;</a></span></dt>
<dt><span class="sect2"><a href="#conf-read-unhinted">11.4.24. read_unhinted&#65306;&#26080;&#21305;&#37197;&#26102;&#35835;&#21462;&#22823;&#23567;</a></span></dt>
<dt><span class="sect2"><a href="#conf-max-batch-queries">11.4.25. max_batch_queries&#65306;&#26368;&#22823;&#25209;&#37327;&#26597;&#35810;</a></span></dt>
<dt><span class="sect2"><a href="#conf-subtree-docs-cache">11.4.26. subtree_docs_cache&#65306;&#23376;&#26641;&#20248;&#21270;&#25991;&#26723;&#32531;&#23384;</a></span></dt>
<dt><span class="sect2"><a href="#conf-subtree-hits-cache">11.4.27. subtree_hits_cache&#65306;&#23376;&#26641;&#20248;&#21270;&#21629;&#20013;&#32531;&#23384;</a></span></dt>
<dt><span class="sect2"><a href="#conf-workers">11.4.28. workers&#65306;MPM&#27169;&#24335;</a></span></dt>
<dt><span class="sect2"><a href="#conf-dist-threads">11.4.29. dist_threads&#65306;&#24182;&#21457;&#26597;&#35810;&#32447;&#31243;&#25968;</a></span></dt>
<dt><span class="sect2"><a href="#conf-binlog-path">11.4.30. binlog_path&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#36335;&#24452;</a></span></dt>
<dt><span class="sect2"><a href="#conf-binlog-flush">11.4.31. binlog_flush&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#21047;&#26032;</a></span></dt>
<dt><span class="sect2"><a href="#conf-binlog-max-log-size">11.4.32. binlog_max_log_size&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#22823;&#23567;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-collation-server">11.4.33. collation_server&#65306;&#26381;&#21153;&#31471;&#40664;&#35748;&#23383;&#31526;&#38598;</a></span></dt>
<dt><span class="sect2"><a href="#conf-collation-libc-locale">11.4.34. collation_libc_locale&#65306;&#26381;&#21153;&#31471;libc&#23383;&#31526;&#38598;</a></span></dt>
<dt><span class="sect2"><a href="#conf-plugin-dir">11.4.35. plugin_dir&#65306;&#25554;&#20214;&#30446;&#24405;</a></span></dt>
<dt><span class="sect2"><a href="#conf-mysql-version-string">11.4.36. mysql_version_string&#65306;MySQL&#29256;&#26412;&#35774;&#32622;</a></span></dt>
<dt><span class="sect2"><a href="#conf-rt-flush-period">11.4.37. rt_flush_period&#65306;RT&#32034;&#24341;&#21047;&#26032;&#21608;&#26399;</a></span></dt>
<dt><span class="sect2"><a href="#conf-thread-stack">11.4.38. thread_stack&#65306;&#32447;&#31243;&#22534;&#26632;</a></span></dt>
<dt><span class="sect2"><a href="#conf-expansion-limit">11.4.39. expansion_limit&#65306;&#20851;&#38190;&#23383;&#23637;&#24320;&#38480;&#21046;</a></span></dt>
<dt><span class="sect2"><a href="#conf-compat-sphinxql-magics">11.4.40. compat_sphinxql_magics</a></span></dt>
<dt><span class="sect2"><a href="#conf-watchdog">11.4.41. watchdog</a></span></dt>
</dl></dd></dl></div>
<div class="sect1" title="11.1.&nbsp;&#25968;&#25454;&#28304;&#37197;&#32622;&#36873;&#39033;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="confgroup-source"></a>11.1.&nbsp;&#25968;&#25454;&#28304;&#37197;&#32622;&#36873;&#39033;</h2></div></div></div>
<div class="sect2" title="11.1.1.&nbsp;type&#65306;&#25968;&#25454;&#28304;&#31867;&#22411;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-source-type"></a>11.1.1.&nbsp;type&#65306;&#25968;&#25454;&#28304;&#31867;&#22411;</h3></div></div></div>
<p>
&#25968;&#25454;&#28304;&#31867;&#22411;&#12290;&#24517;&#39035;&#36873;&#39033;&#65292;&#26080;&#40664;&#35748;&#20540;&#12290;
&#21487;&#29992;&#30340;&#31867;&#22411;&#21253;&#25324;  <code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>,
<code class="option">xmlpipe</code> and <code class="option">xmlpipe2</code>,  <code class="option">odbc</code>&#65292;&#20197;&#21450;<code class="option">python</code>.
</p><p>
&#22312;CoreSeek&#30340;&#20998;&#21457;&#29256;&#26412;&#20013;&#65292;&#26032;&#22686;&#20102;<code class="option">python</code>&#25968;&#25454;&#28304;&#31867;&#22411;&#65292;&#20174;&#32780;&#24471;&#20197;&#21551;&#29992;Python&#25968;&#25454;&#28304;&#25903;&#25345;&#12290;
</p><p>
&#25152;&#26377;&#20854;&#20182;&#19982;&#25968;&#25454;&#28304;&#30456;&#20851;&#30340;&#36873;&#39033;&#37117;&#20381;&#36182;&#20110;&#36825;&#20010;&#36873;&#39033;&#25351;&#23450;&#30340;&#28304;&#31867;&#22411;&#12290;&#19982;SQL&#25968;&#25454;&#28304;&#65288;&#21363;MSSQL&#12289;MySQL&#21644;PostgreSQL&#65289;&#30456;&#20851;&#30340;&#36873;&#39033;&#20197;&#8220;sql_&#8221;&#24320;&#22836;&#65292;&#32780;&#19982;xmlpipe&#21644;xmlpipe2&#25968;&#25454;&#28304;&#30456;&#20851;&#30340;&#36873;&#39033;&#21017;&#20197;&#8220;xmlpipe_&#8221;&#24320;&#22836;&#12290;
&#38500;&#20102;<code class="option">xmlpipe</code>&#26159;&#40664;&#35748;&#25903;&#25345;&#22806;&#65292;&#20854;&#20182;&#25968;&#25454;&#28304;&#31867;&#22411;&#30340;&#25903;&#25345;&#26159;&#26377;&#21069;&#25552;&#26465;&#20214;&#30340;&#65307;&#20381;&#36182;&#19982;&#24744;&#30340;&#35774;&#32622;&#21644;&#24050;&#23433;&#35013;&#30340;&#25968;&#25454;&#24211;&#23458;&#25143;&#31471;&#24211;&#25991;&#20214;&#65292;&#23427;&#20204;&#21487;&#33021;&#34987;&#25903;&#25345;&#25110;&#32773;&#19981;&#34987;&#25903;&#25345;&#12290;&#20363;&#22914;&#65292;<code class="option">mssql</code>&#20165;&#22312;Windows&#31995;&#32479;&#25552;&#20379;&#25903;&#25345;&#12290;<code class="option">odbc</code>&#22312;Windows&#31995;&#32479;&#19978;&#26159;&#21407;&#29983;&#25903;&#25345;&#65292;&#32780;&#22312;Linux&#31995;&#32479;&#19978;&#36890;&#36807;<a class="ulink" href="http://www.unixodbc.org/" target="_top">UnixODBC library</a>&#25903;&#25345;&#12290;
</p><p>
&#22312;CoreSeek&#30340;&#20998;&#21457;&#29256;&#26412;&#20013;&#65292;<code class="option">python</code>&#36890;&#36807;Python&#25552;&#20379;&#25903;&#25345;&#65292;&#22312;&#23433;&#35013;&#20102;Pythin&#30340;Windows&#31995;&#32479;&#21644;Linux&#31995;&#32479;&#19978;&#37117;&#21487;&#20197;&#25903;&#25345;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
type = mysql
</pre></div>
<div class="sect2" title="11.1.2.&nbsp;sql_host&#65306;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-host"></a>11.1.2.&nbsp;sql_host&#65306;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;</h3></div></div></div>
<p>
&#35201;&#36830;&#25509;&#30340;SQL&#26381;&#21153;&#22120;&#20027;&#26426;&#22320;&#22336;&#12290;&#24517;&#39035;&#36873;&#39033;&#65292;&#26080;&#40664;&#35748;&#20540;&#12290;&#20165;&#23545;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#26377;&#25928;&#12290;
</p><p>
&#26368;&#31616;&#21333;&#30340;&#24773;&#24418;&#19979;&#65292;Sphinx&#19982;MySQL&#25110;PostgreSQL&#26381;&#21153;&#22120;&#23433;&#35013;&#22312;&#21516;&#19968;&#21488;&#20027;&#26426;&#19978;&#65292;&#27492;&#26102;&#24744;&#21482;&#39035;&#35774;&#32622;&#20026;localhost&#21363;&#21487;&#12290;&#27880;&#24847;&#65292;MySQL&#23458;&#25143;&#31471;&#24211;&#26681;&#25454;&#20027;&#26426;&#21517;&#20915;&#23450;&#26159;&#36890;&#36807;TCP/IP&#36824;&#26159;UNIX socket&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#12290;&#19968;&#33324;&#26469;&#35828;&#65292;&#8220;localhost&#8221;&#20351;&#20043;&#24378;&#21046;&#20351;&#29992;UNIX socket&#36830;&#25509;&#65288;&#36825;&#26159;&#40664;&#35748;&#30340;&#20063;&#26159;&#25512;&#33616;&#30340;&#27169;&#24335;&#65289;&#65292;&#32780;&#8220;127.0.01&#8221;&#20250;&#24378;&#21046;&#20351;&#29992;TCP/IP&#12290;&#32454;&#33410;&#35831;&#21442;&#32771;
<a class="ulink" href="http://dev.mysql.com/doc/refman/5.0/en/mysql-real-connect.html" target="_top">MySQL manual</a>
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_host = localhost
</pre></div>
<div class="sect2" title="11.1.3.&nbsp;sql_port&#65306;&#25968;&#25454;&#24211;&#31471;&#21475;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-port"></a>11.1.3.&nbsp;sql_port&#65306;&#25968;&#25454;&#24211;&#31471;&#21475;</h3></div></div></div>
<p>
&#35201;&#36830;&#25509;&#30340;SQL&#26381;&#21153;&#22120;&#30340;IP&#31471;&#21475;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#20026;<code class="option">mysql</code>&#31471;&#21475;3306&#65292;<code class="option">pgsql</code>&#31471;&#21475;5432&#12290;&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;&#27880;&#24847;&#65292;&#27492;&#36873;&#39033;&#26159;&#21542;&#23454;&#38469;&#34987;&#20351;&#29992;&#20381;&#36182;&#20110;<a class="link" href="#conf-sql-host" title="11.1.2.&nbsp;sql_host&#65306;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;">sql_host</a>&#36873;&#39033;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_port = 3306
</pre></div>
<div class="sect2" title="11.1.4.&nbsp;sql_user&#65306;&#25968;&#25454;&#24211;&#29992;&#25143;&#21517;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-user"></a>11.1.4.&nbsp;sql_user&#65306;&#25968;&#25454;&#24211;&#29992;&#25143;&#21517;</h3></div></div></div>
<p>
&#36830;&#25509;&#21040;<a class="link" href="#conf-sql-host" title="11.1.2.&nbsp;sql_host&#65306;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;">sql_host</a>&#26102;&#20351;&#29992;&#30340;SQL&#29992;&#25143;&#21517;&#12290;&#24517;&#39035;&#36873;&#39033;&#65292;&#26080;&#40664;&#35748;&#20540;&#12290;&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_user = test
</pre></div>
<div class="sect2" title="11.1.5.&nbsp;sql_pass&#65306;&#25968;&#25454;&#24211;&#23494;&#30721;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-pass"></a>11.1.5.&nbsp;sql_pass&#65306;&#25968;&#25454;&#24211;&#23494;&#30721;</h3></div></div></div>
<p>
&#36830;&#25509;&#21040;<a class="link" href="#conf-sql-host" title="11.1.2.&nbsp;sql_host&#65306;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;">sql_host</a>&#26102;&#20351;&#29992;&#30340;SQL&#29992;&#25143;&#23494;&#30721;&#12290;&#24517;&#39035;&#36873;&#39033;&#65292;&#26080;&#40664;&#35748;&#20540;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_pass = mysecretpassword
</pre></div>
<div class="sect2" title="11.1.6.&nbsp;sql_db&#65306;&#25968;&#25454;&#24211;&#21517;&#31216;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-db"></a>11.1.6.&nbsp;sql_db&#65306;&#25968;&#25454;&#24211;&#21517;&#31216;</h3></div></div></div>
<p>
&#36830;&#25509;&#21040;SQL&#25968;&#25454;&#28304;&#20043;&#21518;&#20351;&#29992;&#30340;SQL&#25968;&#25454;&#24211;&#65292;&#27492;&#21518;&#30340;&#26597;&#35810;&#22343;&#22312;&#27492;&#25968;&#25454;&#24211;&#19978;&#36827;&#34892;&#12290;&#24517;&#39035;&#36873;&#39033;&#65292;&#26080;&#40664;&#35748;&#20540;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_db = test
</pre></div>
<div class="sect2" title="11.1.7.&nbsp;sql_sock&#65306;&#25968;&#25454;&#24211;Socket&#25991;&#20214;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-sock"></a>11.1.7.&nbsp;sql_sock&#65306;&#25968;&#25454;&#24211;Socket&#25991;&#20214;</h3></div></div></div>
<p>
&#36830;&#25509;&#21040;&#26412;&#22320;SQL&#26381;&#21153;&#22120;&#26102;&#20351;&#29992;&#30340;UNIX socket&#21517;&#31216;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#20026;&#31354;&#65288;&#20351;&#29992;&#23458;&#25143;&#31471;&#24211;&#30340;&#40664;&#35748;&#35774;&#32622;&#65289;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#22312;Linux&#19978;&#65292;&#36890;&#24120;&#26159;<code class="filename">/var/lib/mysql/mysql.sock</code>&#12290; &#32780;&#22312;FreeBSD&#19978;&#36890;&#24120;&#26159;<code class="filename">/tmp/mysql.sock</code>&#12290;&#27880;&#24847;&#27492;&#36873;&#39033;&#26159;&#21542;&#23454;&#38469;&#34987;&#20351;&#29992;&#20381;&#36182;&#19982;<a class="link" href="#conf-sql-host" title="11.1.2.&nbsp;sql_host&#65306;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;">sql_host</a>&#30340;&#35774;&#32622;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_sock = /tmp/mysql.sock
</pre></div>
<div class="sect2" title="11.1.8.&nbsp;mysql_connect_flags&#65306;MySQL&#36830;&#25509;&#21442;&#25968;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-mysql-connect-flags"></a>11.1.8.&nbsp;mysql_connect_flags&#65306;MySQL&#36830;&#25509;&#21442;&#25968;</h3></div></div></div>
<p>
MySQL&#23458;&#25143;&#31471;&#30340;&#36830;&#25509;&#26631;&#24535;&#65288;connection flags&#65289;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#20026;0&#65288;&#19981;&#35774;&#32622;&#20219;&#20309;&#26631;&#24535;&#65289;&#12290;&#20165;&#36866;&#29992;&#20110;<code class="option">mysql</code>&#25968;&#25454;&#28304;&#12290;
</p><p>
&#27492;&#36873;&#39033;&#24517;&#39035;&#21253;&#21547;&#21508;&#26631;&#24535;&#30456;&#21152;&#25152;&#24471;&#30340;&#25972;&#22411;&#20540;&#12290;&#27492;&#25972;&#25968;&#23558;&#34987;&#21407;&#26679;&#20256;&#36882;&#32473;<a class="ulink" href="http://dev.mysql.com/doc/refman/5.0/en/mysql-real-connect.html" target="_top">mysql_real_connect()</a> &#12290;
&#21487;&#29992;&#30340;&#26631;&#24535;&#22312;mysql_com.h&#20013;&#21015;&#20030;&#12290;&#19979;&#38754;&#21015;&#20030;&#30340;&#26159;&#20960;&#20010;&#19982;&#32034;&#24341;&#30456;&#20851;&#30340;&#26631;&#24535;&#21644;&#23427;&#20204;&#30340;&#20540;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">CLIENT_COMPRESS = 32; &#20801;&#35768;&#20351;&#29992;&#21387;&#32553;&#21327;&#35758; protocol</li>
<li class="listitem">CLIENT_SSL = 2048; &#25569;&#25163;&#21518;&#20999;&#25442;&#21040;SSL</li>
<li class="listitem">CLIENT_SECURE_CONNECTION = 32768; &#26032;&#30340;MySQL 4.1&#29256;&#26412;&#36523;&#20221;&#35748;&#35777;</li>
</ul></div>
<p>
&#20363;&#22914;&#65292;&#26631;&#24535;2080&#65288;2048+32&#65289;&#20195;&#34920;&#21516;&#26102;&#20351;&#29992;&#21387;&#32553;&#21644;SSL&#65292;32768&#20195;&#34920;&#20165;&#20351;&#29992;&#26032;&#30340;&#36523;&#20221;&#39564;&#35777;&#12290;&#36215;&#21021;&#36825;&#20010;&#36873;&#39033;&#26159;&#20026;&#20102;&#22312;<code class="filename">indexer</code>&#21644;<code class="filename">mysql</code>&#20301;&#20110;&#19981;&#21516;&#20027;&#26426;&#30340;&#24773;&#20917;&#19979;&#20351;&#29992;&#21387;&#32553;&#21327;&#35758;&#32780;&#24341;&#20837;&#30340;&#12290;&#23613;&#31649;&#38477;&#20302;&#20102;&#32593;&#32476;&#24102;&#23485;&#28040;&#32791;&#65292;&#20294;&#19981;&#31649;&#22312;&#29702;&#35770;&#19978;&#36824;&#26159;&#22312;&#29616;&#23454;&#20013;&#65292;&#22312;1Gbps&#30340;&#38142;&#36335;&#19978;&#21551;&#29992;&#21387;&#32553;&#24456;&#21487;&#33021;&#24694;&#21270;&#32034;&#24341;&#26102;&#38388;&#12290;&#28982;&#32780;&#22312;100Mbps&#30340;&#36830;&#36755;&#19978;&#21551;&#29992;&#21387;&#32553;&#21487;&#33021;&#20250;&#26126;&#26174;&#22320;&#25913;&#21892;&#32034;&#24341;&#26102;&#38388;&#65288;&#26377;&#25253;&#21578;&#35828;&#24635;&#30340;&#32034;&#24341;&#26102;&#38388;&#38477;&#20302;&#20102;20-30%&#65289;&#12290;&#26681;&#25454;&#24744;&#32593;&#32476;&#30340;&#36830;&#25509;&#24773;&#20917;&#65292;&#24744;&#33719;&#24471;&#30340;&#25913;&#21892;&#31243;&#24230;&#21487;&#33021;&#20250;&#26377;&#25152;&#19981;&#21516;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
mysql_connect_flags = 32 # &#21551;&#29992;&#21387;&#32553;
</pre></div>
<div class="sect2" title="11.1.9.&nbsp;mysql_ssl_cert, mysql_ssl_key, mysql_ssl_ca&#65306;MySQL&#30340;SSL&#36830;&#25509;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-mysql-ssl"></a>11.1.9.&nbsp;mysql_ssl_cert, mysql_ssl_key, mysql_ssl_ca&#65306;MySQL&#30340;SSL&#36830;&#25509;</h3></div></div></div>
<p>
&#36830;&#25509;MySQL&#26381;&#21153;&#22120;&#26102;&#20351;&#29992;&#30340;SSL&#35748;&#35777;&#36873;&#39033;&#12290;&#21487;&#36873;&#21442;&#25968;&#65292;&#40664;&#35748;&#20540;&#26159;&#31354;&#20018;&#65288;&#21363;&#19981;&#20351;&#29992;SSL&#35748;&#35777;&#65289;&#12290;
&#20165;&#36866;&#29992;&#20110;<code class="option">mysql</code>&#25968;&#25454;&#28304;&#12290;
</p><p>
&#36825;&#20123;&#25351;&#20196;&#29992;&#26469;&#22312;<code class="filename">indexer</code>&#21644;MySQL&#20043;&#38388;&#24314;&#31435;&#23433;&#20840;&#30340;SSL&#36830;&#25509;&#12290;&#20851;&#20110;&#24590;&#26679;&#24314;&#31435;&#35748;&#35777;&#26426;&#21046;&#21644;&#35774;&#32622;MySQL&#26381;&#21153;&#22120;&#30340;&#20449;&#24687;&#21487;&#20197;&#21442;&#32771;MySQL&#25991;&#26723;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
mysql_ssl_cert = /etc/ssl/client-cert.pem
mysql_ssl_key = /etc/ssl/client-key.pem
mysql_ssl_ca = /etc/ssl/cacert.pem
</pre></div>
<div class="sect2" title="11.1.10.&nbsp;odbc_dsn&#65306;ODBC&#36830;&#25509;&#23383;&#31526;&#20018;(DSN)"><div class="titlepage"><div><div><h3 class="title"><a name="conf-odbc-dsn"></a>11.1.10.&nbsp;odbc_dsn&#65306;ODBC&#36830;&#25509;&#23383;&#31526;&#20018;(DSN)</h3></div></div></div>
<p>
&#35201;&#36830;&#25509;&#30340;ODBC DSN&#12290;&#24517;&#39035;&#36873;&#39033;&#65292;&#27809;&#26377;&#40664;&#35748;&#20540;&#12290;
&#20165;&#36866;&#29992;&#20110;<code class="option">odbc</code>&#25968;&#25454;&#28304;&#12290;
</p><p>
DBC DSN&#65288;&#25968;&#25454;&#28304;&#21517;&#23383;&#65292;Data Source Name&#65289;&#25351;&#23450;&#20102;&#36830;&#25509;ODBC&#25968;&#25454;&#28304;&#26102;&#20351;&#29992;&#30340;&#35748;&#35777;&#36873;&#39033;&#65288;&#20027;&#26426;&#22320;&#22336;&#65292;&#29992;&#25143;&#21517;&#65292;&#23494;&#30721;&#31561;&#65289;&#12290;&#20855;&#20307;&#30340;&#26684;&#24335;&#19982;ODBC&#30340;&#20855;&#20307;&#39537;&#21160;&#26377;&#20851;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
odbc_dsn = Driver={Oracle ODBC Driver};Dbq=myDBName;Uid=myUsername;Pwd=myPassword
</pre></div>
<div class="sect2" title="11.1.11.&nbsp;sql_query_pre&#65306;&#24453;&#32034;&#24341;&#25968;&#25454;&#33719;&#21462;&#21069;&#26597;&#35810;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-query-pre"></a>11.1.11.&nbsp;sql_query_pre&#65306;&#24453;&#32034;&#24341;&#25968;&#25454;&#33719;&#21462;&#21069;&#26597;&#35810;</h3></div></div></div>
<p>
&#32034;&#24341;&#25968;&#25454;&#33719;&#21462;&#21069;&#25191;&#34892;&#30340;&#26597;&#35810;&#65288;pre-fetch query&#65289;&#65292;&#25110;&#39044;&#26597;&#35810;&#65288;pre-query&#65289;&#12290;&#22810;&#20540;&#36873;&#39033;&#65292;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#19968;&#20010;&#31354;&#30340;&#26597;&#35810;&#21015;&#34920;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#22810;&#20540;&#24847;&#24605;&#26159;&#24744;&#21487;&#20197;&#22810;&#27425;&#35774;&#32622;&#35813;&#25351;&#20196;&#65292;&#20174;&#32780;&#25351;&#23450;&#22810;&#20010;&#39044;&#26597;&#35810;&#12290;&#23427;&#20204;&#22312;<a class="link" href="#conf-sql-query" title="11.1.12.&nbsp;sql_query&#65306;&#33719;&#21462;&#24453;&#32034;&#24341;&#25968;&#25454;&#26597;&#35810;">&#32034;&#24341;&#25968;&#25454;&#33719;&#21462;&#26597;&#35810;sql_query</a>&#20043;&#21069;&#25191;&#34892;&#65292;&#32780;&#19988;&#20250;&#20005;&#26684;&#25353;&#29031;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#20986;&#29616;&#30340;&#39034;&#24207;&#25191;&#34892;&#12290;&#39044;&#26597;&#35810;&#30340;&#32467;&#26524;&#20250;&#34987;&#24573;&#30053;&#12290;
</p><p>
&#39044;&#26597;&#35810;&#22312;&#24456;&#22810;&#26102;&#20505;&#26377;&#29992;&#12290;&#23427;&#20204;&#34987;&#29992;&#26469;&#35774;&#32622;&#23383;&#31526;&#38598;&#32534;&#30721;&#65292;&#26631;&#35760;&#24453;&#32034;&#24341;&#30340;&#35760;&#24405;&#65292;&#26356;&#26032;&#20869;&#37096;&#35745;&#25968;&#22120;&#65292;&#35774;&#32622;SQL&#26381;&#21153;&#22120;&#36830;&#25509;&#36873;&#39033;&#21644;&#21464;&#37327;&#31561;&#31561;&#12290;
</p><p>
&#20063;&#35768;&#39044;&#26597;&#35810;&#26368;&#24120;&#29992;&#30340;&#19968;&#20010;&#24212;&#29992;&#23601;&#26159;&#29992;&#26469;&#25351;&#23450;&#26381;&#21153;&#22120;&#36820;&#22238;&#34892;&#26102;&#20351;&#29992;&#30340;&#23383;&#31526;&#32534;&#30721;&#12290;&#36825;<span class="bold"><strong>&#24517;&#39035;</strong></span>&#19982;Sphinx&#26399;&#24453;&#30340;&#32534;&#30721;&#30456;&#21516;&#65288;&#22312;<a class="link" href="#conf-charset-type" title="11.2.15.&nbsp;charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;">charset_type</a> &#21644;<a class="link" href="#conf-charset-table" title="11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;">charset_table</a> &#36873;&#39033;&#20013;&#35774;&#32622;&#65289;&#12290;&#20197;&#19979;&#26159;&#20004;&#20010;&#19982;MySQL&#26377;&#20851;&#30340;&#35774;&#32622;&#31034;&#20363;&#65306;
</p><pre class="programlisting">
sql_query_pre = SET CHARACTER_SET_RESULTS=cp1251
sql_query_pre = SET NAMES utf8
</pre><p>
&#23545;&#20110;MySQL&#25968;&#25454;&#28304;&#65292;&#22312;&#39044;&#26597;&#35810;&#20013;&#31105;&#29992;&#26597;&#35810;&#32531;&#20914;&#65288;query cache&#65289;&#65288;&#20165;&#23545;indexer&#36830;&#25509;&#65289;&#26159;&#26377;&#29992;&#30340;&#65292;&#22240;&#20026;&#32034;&#24341;&#26597;&#35810;&#19968;&#33324;&#24182;&#20250;&#39057;&#32321;&#22320;&#37325;&#26032;&#36816;&#34892;&#65292;&#32531;&#20914;&#23427;&#20204;&#30340;&#32467;&#26524;&#26159;&#27809;&#26377;&#24847;&#20041;&#30340;&#12290;&#36825;&#21487;&#20197;&#25353;&#22914;&#19979;&#26041;&#27861;&#23454;&#29616;&#65306;
</p><pre class="programlisting">
sql_query_pre = SET SESSION query_cache_type=OFF
</pre><p>
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_query_pre = SET NAMES utf8
sql_query_pre = SET SESSION query_cache_type=OFF
</pre></div>
<div class="sect2" title="11.1.12.&nbsp;sql_query&#65306;&#33719;&#21462;&#24453;&#32034;&#24341;&#25968;&#25454;&#26597;&#35810;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-query"></a>11.1.12.&nbsp;sql_query&#65306;&#33719;&#21462;&#24453;&#32034;&#24341;&#25968;&#25454;&#26597;&#35810;</h3></div></div></div>
<p>
&#33719;&#21462;&#21363;&#23558;&#32034;&#24341;&#30340;&#25991;&#26723;&#65288;&#25968;&#25454;&#65289;&#30340;&#20027;&#26597;&#35810;&#12290;&#24517;&#39035;&#30340;&#36873;&#39033;&#65292;&#26080;&#40664;&#35748;&#36873;&#39033;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#21482;&#33021;&#26377;&#19968;&#20010;&#20027;&#26597;&#35810;&#12290;&#23427;&#34987;&#29992;&#26469;&#20174;SQL&#26381;&#21153;&#22120;&#33719;&#21462;&#25991;&#26723;&#65288;&#25991;&#26723;&#21015;&#34920;&#65289;&#12290;&#21487;&#20197;&#25351;&#23450;&#22810;&#36798;32&#20010;&#20840;&#25991;&#25968;&#25454;&#23383;&#27573;&#65288;&#20005;&#26684;&#26469;&#35828;&#26159;&#22312;sphinx.h&#20013;&#23450;&#20041;&#30340;SPH_MAX_FIELDS&#20010;&#65289;&#21644;&#20219;&#24847;&#22810;&#20010;&#23646;&#24615;&#12290;&#25152;&#26377;&#26082;&#19981;&#26159;&#25991;&#26723;ID&#65288;&#31532;&#19968;&#21015;&#65289;&#20063;&#19981;&#26159;&#23646;&#24615;&#30340;&#21015;&#30340;&#25968;&#25454;&#20250;&#34987;&#29992;&#20110;&#24314;&#31435;&#20840;&#25991;&#32034;&#24341;&#12290;
</p><p>
&#25991;&#26723;ID<span class="bold"><strong>&#24517;&#39035;</strong></span>&#26159;&#31532;&#19968;&#21015;&#65292;&#32780;&#19988;<span class="bold"><strong>&#24517;&#39035;&#26159;&#21807;&#19968;&#30340;&#27491;&#25972;&#25968;&#20540;&#65288;&#19981;&#33021;&#26159;0&#20063;&#19981;&#33021;&#26159;&#36127;&#25968;&#65289;</strong></span>&#65292;&#26082;&#21487;&#20197;&#26159;32&#20301;&#30340;&#20063;&#21487;&#20197;&#26159;64&#20301;&#30340;&#65292;&#36825;&#35201;&#26681;&#25454;Sphinx&#26159;&#22914;&#20309;&#34987;&#26500;&#24314;&#30340;&#65292;&#40664;&#35748;&#24773;&#20917;&#19979;&#25991;&#26723;ID&#26159;32&#20301;&#30340;&#65292;&#20294;&#22312;&#36816;&#34892;<code class="filename">configure</code>&#33050;&#26412;&#26102;&#25351;&#23450;<code class="option">--enable-id64</code>&#36873;&#39033;&#20250;&#25171;&#24320;64&#20301;&#25991;&#26723;ID&#21644;&#35789;ID&#30340;&#25903;&#25345;&#12290;

</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_query = \
	SELECT id, group_id, UNIX_TIMESTAMP(date_added) AS date_added, \
		title, content \
	FROM documents
</pre></div>
<div class="sect2" title="11.1.13.&nbsp;sql_joined_field&#65306;SQL&#36830;&#25509;&#23383;&#27573;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-joined-field"></a>11.1.13.&nbsp;sql_joined_field&#65306;SQL&#36830;&#25509;&#23383;&#27573;&#35774;&#32622;</h3></div></div></div>
<p>
&#36830;&#25509;/&#26377;&#25928;&#36733;&#33655;&#23383;&#27573;&#33719;&#21462;&#26597;&#35810;&#12290;
&#22810;&#20540;&#36873;&#39033;&#65292;&#21487;&#36873;&#65292;&#40664;&#35748;&#20540;&#20026;&#31354;&#12290;
&#20165;&#23545;SQL&#25968;&#25454;&#28304;&#26377;&#25928; (<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>) .
</p><p>
<code class="option">sql_joined_field</code> &#25552;&#20379;&#20004;&#31181;&#19981;&#21516;&#30340;&#26041;&#24335;&#65306;&#36830;&#25509;&#23383;&#27573;&#65292;&#25110;&#32773;&#26377;&#25928;&#36733;&#33655;&#65288;&#26377;&#25928;&#36733;&#33655;&#23383;&#27573;&#65289;&#12290;&#20854;&#35821;&#27861;&#26684;&#24335;&#22914;&#19979;&#65306;
</p><pre class="programlisting">
sql_joined_field = FIELD-NAME 'from'  ( 'query' | 'payload-query' ); \
    QUERY [ ; RANGE-QUERY ]
</pre><p>
where
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">FIELD-NAME &#26159; &#36830;&#25509;/&#26377;&#25928;&#36733;&#33655; &#23383;&#27573;&#21517;&#31216;;</li>
<li class="listitem">QUERY &#26159;&#19968;&#20010;&#29992;&#20110;&#33719;&#21462;&#25968;&#25454;&#21040;&#32034;&#24341;&#30340;SQL&#26597;&#35810;.</li>
<li class="listitem">RANGE-QUERY &#26159;&#19968;&#20010;&#21487;&#36873;&#30340;&#29992;&#20110;&#33719;&#21462;&#33539;&#22260;&#30693;&#36947;&#32034;&#24341;&#30340;SQL&#26597;&#35810;. (&#29256;&#26412;2.0.1-beta&#22686;&#21152;.)</li>
</ul></div>
<p>
</p><p>
<span class="bold"><strong>Joined fields</strong></span> let you avoid JOIN and/or GROUP_CONCAT statements in the main
document fetch query (sql_query). This can be useful when SQL-side JOIN is slow,
or needs to be offloaded on Sphinx side, or simply to emulate MySQL-specific
GROUP_CONCAT funcionality in case your database server does not support it.
</p><p>
The query must return exactly 2 columns: document ID, and text to append
to a joined field. Document IDs can be duplicate, but they <span class="bold"><strong>must</strong></span> be
in ascending order. All the text rows fetched for a given ID will be
concatented together, and the concatenation result will be indexed
as the entire contents of a joined field. Rows will be concatenated
in the order returned from the query, and separating whitespace
will be inserted between them. For instance, if joined field query
returns the following rows:
</p><pre class="programlisting">
( 1, 'red' )
( 1, 'right' )
( 1, 'hand' )
( 2, 'mysql' )
( 2, 'sphinx' )
</pre><p>
then the indexing results would be equivalent to that of adding
a new text field with a value of 'red right hand' to document 1 and
'mysql sphinx' to document 2.
</p><p>
Joined fields are only indexed differently. There are no other differences
between joined fields and regular text fields.
</p><p>
Starting with 2.0.1-beta, <span class="bold"><strong>ranged queries</strong></span> can be used when
a single query is not efficient enough or does not work because of
the database driver limitations. It works similar to the ranged
queries in the main indexing loop, &#21442;&#35265; <a class="xref" href="#ranged-queries" title="3.7.&nbsp;&#21306;&#27573;&#26597;&#35810;">&#31532;&nbsp;3.7&nbsp;&#33410; &#8220;&#21306;&#27573;&#26597;&#35810;&#8221;</a>.
The range will be queried for and fetched upfront once,
then multiple queries with different <code class="code">$start</code>
and <code class="code">$end</code> substitutions will be run to fetch
the actual data.
</p><p>
<span class="bold"><strong>Payloads</strong></span> let you create a special field in which, instead of
keyword positions, so-called user payloads are stored. Payloads are
custom integer values attached to every keyword. They can then be used
in search time to affect the ranking.
</p><p>
The payload query must return exactly 3 columns: document ID; keyword;
and integer payload value. Document IDs can be duplicate, but they <span class="bold"><strong>must</strong></span> be
in ascending order. Payloads must be unsigned integers within 24-bit range,
ie. from 0 to 16777215. For reference, payloads are currently internally
stored as in-field keyword positions, but that is not guaranteed
and might change in the future.
</p><p>
Currently, the only method to account for payloads is to use
SPH_RANK_PROXIMITY_BM25 ranker. On indexes with payload fields,
it will automatically switch to a variant that matches keywords
in those fields, computes a sum of matched payloads multiplied
by field wieghts, and adds that sum to the final rank.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_joined_field = \
	tagstext from query; \
	SELECT docid, CONCAT('tag',tagid) FROM tags ORDER BY docid ASC
</pre></div>
<div class="sect2" title="11.1.14.&nbsp;sql_query_range&#65306;&#20998;&#21306;&#26597;&#35810;&#33539;&#22260;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-query-range"></a>11.1.14.&nbsp;sql_query_range&#65306;&#20998;&#21306;&#26597;&#35810;&#33539;&#22260;</h3></div></div></div>
<p>
&#20998;&#21306;&#26597;&#35810;&#35774;&#32622;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#35774;&#32622;&#36825;&#20010;&#36873;&#39033;&#20250;&#21551;&#29992;&#25991;&#26723;&#30340;&#21306;&#27573;&#26597;&#35810;&#65288;&#21442;&#30475;<a class="xref" href="#ranged-queries" title="3.7.&nbsp;&#21306;&#27573;&#26597;&#35810;">&#31532;&nbsp;3.7&nbsp;&#33410; &#8220;&#21306;&#27573;&#26597;&#35810;&#8221;</a>&#65289;&#12290;&#20998;&#21306;&#27573;&#26597;&#35810;&#26377;&#21161;&#20110;&#36991;&#20813;&#22312;&#32034;&#24341;&#22823;&#37327;&#25968;&#25454;&#26102;&#21457;&#29983;MyISAM&#34920;&#33261;&#21517;&#26157;&#33879;&#30340;&#27515;&#38145;&#38382;&#39064;&#12290;&#65288;&#21516;&#26679;&#26377;&#21161;&#20110;&#35299;&#20915;&#20854;&#20182;&#19981;&#37027;&#20040;&#22768;&#21517;&#29436;&#34249;&#30340;&#38382;&#39064;&#65292;&#27604;&#22914;&#22823;&#25968;&#25454;&#38598;&#19978;&#30340;&#24615;&#33021;&#19979;&#38477;&#38382;&#39064;&#65292;&#25110;&#32773;InnoDB&#23545;&#22810;&#20010;&#22823;&#22411;&#35835;&#20107;&#21153;&#65288;read transactions&#65289;&#36827;&#34892;&#24207;&#21015;&#21270;&#26102;&#28040;&#32791;&#39069;&#22806;&#36164;&#28304;&#30340;&#38382;&#39064;&#12290;&#65289;
</p><p>
&#27492;&#36873;&#39033;&#25351;&#23450;&#30340;&#26597;&#35810;&#35821;&#21477;&#24517;&#39035;&#33719;&#21462;&#29992;&#20110;&#20998;&#21306;&#30340;&#26368;&#23567;&#21644;&#26368;&#22823;&#25991;&#26723;ID&#12290;&#23427;&#24517;&#39035;&#36820;&#22238;&#27491;&#22909;&#20004;&#20010;&#25972;&#25968;&#23383;&#27573;&#65292;&#20808;&#26159;&#26368;&#23567;ID&#28982;&#21518;&#26159;&#26368;&#22823;ID&#65292;&#23383;&#27573;&#30340;&#21517;&#23383;&#20250;&#34987;&#24573;&#30053;&#12290;
</p><p>
&#24403;&#21551;&#29992;&#20102;&#20998;&#21306;&#27573;&#26597;&#35810;&#26102;&#65292;<a class="link" href="#conf-sql-query" title="11.1.12.&nbsp;sql_query&#65306;&#33719;&#21462;&#24453;&#32034;&#24341;&#25968;&#25454;&#26597;&#35810;">sql_query</a>&#35201;&#27714;&#21253;&#25324;<code class="option">$start</code> &#21644; <code class="option">$end</code>&#23439;&#65288;&#22240;&#20026;&#37325;&#22797;&#22810;&#27425;&#32034;&#24341;&#25972;&#20010;&#34920;&#26174;&#28982;&#26159;&#20010;&#38169;&#35823;&#65289;&#12290;&#27880;&#24847;&#65292;<code class="option">$start</code> .. <code class="option">$end</code>&#25152;&#25351;&#23450;&#30340;&#21306;&#38388;&#19981;&#20250;&#37325;&#21472;&#65292;&#22240;&#27492;<span class="bold"><strong>&#19981;&#20250;</strong></span>&#22312;&#26597;&#35810;&#20013;&#21024;&#38500;ID&#27491;&#22909;&#31561;&#20110;<code class="option">$start</code> &#25110; <code class="option">$end</code>&#30340;&#25991;&#26723;&#12290;<a class="xref" href="#ranged-queries" title="3.7.&nbsp;&#21306;&#27573;&#26597;&#35810;">&#31532;&nbsp;3.7&nbsp;&#33410; &#8220;&#21306;&#27573;&#26597;&#35810;&#8221;</a>&#20013;&#30340;&#20363;&#23376;&#35299;&#37322;&#20102;&#36825;&#20010;&#38382;&#39064;&#65292;&#27880;&#24847;&#22823;&#20110;&#31561;&#20110;&#25110;&#23567;&#20110;&#31561;&#20110;&#27604;&#36739;&#25805;&#20316;&#26159;&#22914;&#20309;&#34987;&#20351;&#29992;&#30340;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_query_range = SELECT MIN(id),MAX(id) FROM documents
</pre></div>
<div class="sect2" title="11.1.15.&nbsp;sql_range_step&#65306;&#20998;&#21306;&#26597;&#35810;&#27493;&#36827;&#20540;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-range-step"></a>11.1.15.&nbsp;sql_range_step&#65306;&#20998;&#21306;&#26597;&#35810;&#27493;&#36827;&#20540;</h3></div></div></div>
<p>
&#21306;&#27573;&#26597;&#35810;&#30340;&#27493;&#36827;&#20540;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;1024&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#20165;&#24403;&#21551;&#29992;<a class="link" href="#ranged-queries" title="3.7.&nbsp;&#21306;&#27573;&#26597;&#35810;">ranged queries</a> &#26102;&#26377;&#25928;&#12290;&#29992;<a class="link" href="#conf-sql-query-range" title="11.1.14.&nbsp;sql_query_range&#65306;&#20998;&#21306;&#26597;&#35810;&#33539;&#22260;">sql_query_range</a> &#21462;&#24471;&#30340;&#25991;&#26723;ID&#21306;&#38388;&#20250;&#34987;&#20197;&#36825;&#20010;&#19981;&#23567;&#30340;&#38388;&#38548;&#27493;&#25968;&#36339;&#36291;&#36941;&#21382;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#21462;&#24471;&#30340;&#26368;&#23567;&#21644;&#26368;&#22823;ID&#20998;&#21035;&#26159;12&#21644;3456&#65292;&#32780;&#38388;&#38548;&#27493;&#25968;&#26159;1000&#65292;&#37027;&#20040;indexer&#20250;&#29992;&#19979;&#38754;&#36825;&#20123;&#20540;&#37325;&#22797;&#35843;&#29992;&#20960;&#27425;<a class="link" href="#conf-sql-query" title="11.1.12.&nbsp;sql_query&#65306;&#33719;&#21462;&#24453;&#32034;&#24341;&#25968;&#25454;&#26597;&#35810;">sql_query</a>&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">$start=12, $end=1011</li>
<li class="listitem">$start=1012, $end=2011</li>
<li class="listitem">$start=2012, $end=3011</li>
<li class="listitem">$start=3012, $end=3456</li>
</ul></div>
<p>
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_range_step = 1000
</pre></div>
<div class="sect2" title="11.1.16.&nbsp;sql_query_killlist&#65306;Kill-list&#26597;&#35810;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-query-killlist"></a>11.1.16.&nbsp;sql_query_killlist&#65306;Kill-list&#26597;&#35810;</h3></div></div></div>
<p>
&#29992;&#20110;&#24471;&#21040;Kill-list&#30340;&#26597;&#35810;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#65288;&#19981;&#35774;&#23450;&#26597;&#35810;&#65289;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
&#29256;&#26412;0.9.9-rc1&#24341;&#20837;.
</p><p>
&#36825;&#20010;&#26597;&#35810;&#36820;&#22238;&#30340;&#32467;&#26524;&#38598;&#24212;&#35813;&#21482;&#26377;&#19968;&#21015;&#65292;&#27599;&#34892;&#26159;&#19968;&#20010;&#25991;&#26723;ID&#12290;&#36820;&#22238;&#30340;&#36825;&#20123;&#25991;&#26723;ID&#23558;&#34987;&#23384;&#20648;&#22312;&#19968;&#20010;&#32034;&#24341;&#37324;&#12290;&#26681;&#25454;&#26597;&#35810;&#20013;&#25552;&#21040;&#30340;&#32034;&#24341;&#30340;&#39034;&#24207;&#65292;&#19968;&#20010;&#32034;&#24341;&#30340;kill-list&#20250;&#25233;&#21046;&#26469;&#33258;<span class="emphasis"><em>&#20854;&#20182;</em></span>&#65288;&#39034;&#24207;&#22312;&#20854;&#21069;&#38754;&#65289;&#32034;&#24341;&#30340;&#32467;&#26524;&#12290;&#36825;&#20010;&#35774;&#35745;&#30340;&#30446;&#30340;&#26159;&#35201;&#24110;&#21161;&#29992;&#25143;&#23454;&#29616;&#22312;&#29616;&#26377;&#32034;&#24341;&#19978;&#30340;&#21024;&#38500;&#25110;&#32773;&#26356;&#26032;&#65292;&#32780;&#19981;&#29992;&#37325;&#24314;&#32034;&#24341;&#65288;&#29978;&#33267;&#26681;&#26412;&#19981;&#29992;&#35775;&#38382;&#36825;&#20010;&#32034;&#24341;&#65289;&#65292;&#23588;&#20854;&#26159;&#20026;&#20102;&#32467;&#26524;&#35299;&#20915;&#8220;&#24189;&#28789;&#32467;&#26524;&#8221;&#38382;&#39064;&#12290;
</p><p>
&#35753;&#25105;&#20204;&#26469;&#20998;&#26512;&#19968;&#20010;&#23454;&#38469;&#30340;&#20363;&#23376;&#12290;&#20551;&#35774;&#25105;&#20204;&#26377;&#20004;&#20010;&#32034;&#24341;&#65292;&#8216;main&#8217;&#21644;&#8216;delta&#8217;&#12290;&#20551;&#35774;&#25991;&#26723;2&#12289;3&#21644;5&#22312;&#19978;&#19968;&#27425;&#37325;&#24314;&#32034;&#24341;&#8216;main&#8217;&#30340;&#26102;&#20505;&#23601;&#34987;&#21024;&#38500;&#20102;&#65292;&#32780;&#25991;&#26723;7&#21644;&#25991;&#26723;11&#21017;&#34987;&#26356;&#26032;&#20102;&#65288;&#21363;&#20182;&#20204;&#30340;&#25991;&#23383;&#20869;&#23481;&#21457;&#29983;&#20102;&#21464;&#21270;&#65289;&#12290;&#20551;&#35774;&#22312;&#24314;&#31435;&#32034;&#24341;&#8216;main&#8217;&#30340;&#26102;&#20505;&#65292;&#20851;&#38190;&#23383;&#8216;test&#8217;&#22312;&#25152;&#26377;&#36825;&#20123;&#25552;&#21040;&#30340;&#25991;&#26723;&#20013;&#37117;&#20986;&#29616;&#20102;&#12290;&#32780;&#24403;&#25105;&#20204;&#24314;&#31435;&#32034;&#24341;&#8216;delta&#8217;&#30340;&#26102;&#20505;&#25991;&#26723;7&#20013;&#20063;&#20986;&#29616;&#20102;&#20851;&#38190;&#23383;&#8216;test&#8217;&#65292;&#20294;&#26159;&#25991;&#26723;11&#20013;&#19981;&#20877;&#26377;&#20851;&#38190;&#23383;&#8216;test&#8217;&#20102;&#12290;&#29616;&#22312;&#25105;&#20204;&#37325;&#26032;&#24314;&#31435;&#32034;&#24341;&#8216;delta&#8217;&#65292;&#28982;&#21518;&#20197;&#21512;&#36866;&#30340;&#39034;&#24207;&#65288;&#36739;&#26087;&#30340;&#25490;&#22312;&#36739;&#26032;&#30340;&#20043;&#21069;&#65289;&#23545;&#36825;&#20004;&#20010;&#32034;&#24341;&#36827;&#34892;&#26816;&#32034;&#65306;
</p><pre class="programlisting">
$res = $cl-&gt;Query ( "test", "main delta" );
</pre><p>
</p><p>
&#39318;&#20808;&#65292;&#25105;&#20204;&#35201;&#27491;&#30830;&#22320;&#22788;&#29702;&#21024;&#38500;&#30340;&#24773;&#20917;&#12290;&#32467;&#26524;&#38598;&#21512;&#19981;&#24212;&#35813;&#21253;&#21547;&#25991;&#26723;2&#12289;3&#25110;5&#12290;&#20854;&#27425;&#65292;&#25105;&#20204;&#20063;&#35201;&#36991;&#20813;&#20986;&#29616;&#24189;&#28789;&#32467;&#26524;&#12290;&#22914;&#26524;&#25105;&#20204;&#19981;&#20570;&#28857;&#20160;&#20040;&#65292;&#25991;&#26723;11<span class="emphasis"><em>&#23601;&#20250;</em></span>&#20986;&#29616;&#22312;&#25628;&#32034;&#32467;&#26524;&#20013;&#12290;&#22240;&#20026;&#23427;&#20250;&#34987;&#22312;&#8216;main&#8217;&#20013;&#26597;&#21040;&#65288;&#20294;&#22312;&#8216;delta&#8217;&#20013;&#26597;&#19981;&#21040;&#23427;&#65289;&#65292;&#24182;&#20986;&#29616;&#22312;&#26368;&#32456;&#30340;&#32467;&#26524;&#38598;&#21512;&#20013;&#65292;&#38500;&#38750;&#25105;&#20204;&#20570;&#28857;&#20160;&#20040;&#38450;&#27490;&#36825;&#31181;&#24773;&#20917;&#30340;&#21457;&#29983;&#12290;
</p><p>
Kill-list&#65292;&#25110;&#32773;&#32553;&#20889;&#25104;K-list&#23601;&#26159;&#25105;&#20204;&#35201;&#20570;&#30340;&#12290;&#38468;&#21152;&#22312;&#8216;delta&#8217;&#32034;&#24341;&#19978;&#30340;Kill-list&#20250;&#23631;&#34109;&#25481;&#21069;&#38754;<span class="bold"><strong>&#25152;&#26377;</strong></span>&#21508;&#32034;&#24341;&#20013;&#26816;&#32034;&#21040;&#30340;&#29305;&#23450;&#34892;&#65292;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#20063;&#23601;&#26159;&#8216;main&#8217;&#20013;&#30340;&#34892;&#12290;&#22240;&#27492;&#65292;&#24819;&#35201;&#24471;&#21040;&#39044;&#26399;&#30340;&#32467;&#26524;&#65292;&#25105;&#20204;&#24212;&#35813;&#23558;&#26356;&#26032;&#20102;&#30340;<span class="emphasis"><em>&#21644;</em></span>&#21024;&#38500;&#20102;&#30340;&#25991;&#26723;ID&#37117;&#25918;&#36827;Kill-list&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_query_killlist = \
	SELECT id FROM documents WHERE updated_ts&gt;=@last_reindex UNION \
	SELECT id FROM documents_deleted WHERE deleted_ts&gt;=@last_reindex
</pre></div>
<div class="sect2" title="11.1.17.&nbsp;sql_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-attr-uint"></a>11.1.17.&nbsp;sql_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;</h3></div></div></div>
<p>
&#22768;&#26126;&#26080;&#31526;&#21495;&#25972;&#25968;&#23646;&#24615;(<a class="link" href="#attributes" title="3.2.&nbsp;&#23646;&#24615;">attribute</a>)&#12290;&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#34987;&#22768;&#26126;&#30340;&#21015;&#30340;&#20540;&#24517;&#39035;&#22312;32&#20301;&#26080;&#31526;&#21495;&#25972;&#22411;&#21487;&#34920;&#31034;&#30340;&#33539;&#22260;&#20869;&#12290;&#36229;&#20986;&#27492;&#33539;&#22260;&#30340;&#20540;&#20063;&#20250;&#34987;&#25509;&#21463;&#65292;&#20294;&#20250;&#28322;&#20986;&#12290;&#20363;&#22914;-1&#20250;&#21464;&#25104; 2^32-1 &#25110;&#32773;&#35828;4,294,967,295&#12290;
</p><p>
&#24744;&#21487;&#20197;&#22312;&#23646;&#24615;&#21517;&#21518;&#38754;&#38468;&#21152;&#8220;:BITCOUNT&#8221;&#65288;&#35265;&#19979;&#38754;&#30340;&#31034;&#20363;&#65289;&#20197;&#20415;&#25351;&#23450;&#25972;&#22411;&#23646;&#24615;&#30340;&#20301;&#25968;&#12290;&#23646;&#24615;&#23567;&#20110;&#40664;&#35748;32&#20301;&#65288;&#27492;&#26102;&#31216;&#20026;&#20301;&#22495;&#65289;&#20250;&#26377;&#25439;&#24615;&#33021;&#12290;&#20294;&#23427;&#20204;&#22312;&#22806;&#37096;&#23384;&#20648;&#65288;<a class="link" href="#conf-docinfo" title="11.2.4.&nbsp;docinfo&#65306;&#25991;&#26723;&#20449;&#24687;&#23384;&#20648;&#27169;&#24335;">extern storage</a>&#65289;&#27169;&#24335;&#19979;&#21487;&#20197;&#33410;&#32422;&#20869;&#23384;&#65306;&#36825;&#20123;&#20301;&#22495;&#34987;&#32452;&#21512;&#25104;32&#20301;&#30340;&#22359;&#23384;&#20648;&#22312;<code class="filename">.spa</code>&#23646;&#24615;&#25968;&#25454;&#25991;&#20214;&#20013;&#12290;&#22914;&#26524;&#20351;&#29992;&#20869;&#32852;&#23384;&#20648;&#65288;<a class="link" href="#conf-docinfo" title="11.2.4.&nbsp;docinfo&#65306;&#25991;&#26723;&#20449;&#24687;&#23384;&#20648;&#27169;&#24335;">inline storage</a>&#65289;&#65292;&#21017;&#20301;&#23485;&#24230;&#30340;&#35774;&#32622;&#20250;&#34987;&#24573;&#30053;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_attr_uint = group_id
sql_attr_uint = forum_id:9 # 9 bits for forum_id
</pre></div>
<div class="sect2" title="11.1.18.&nbsp;sql_attr_bool&#65306;&#24067;&#23572;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-attr-bool"></a>11.1.18.&nbsp;sql_attr_bool&#65306;&#24067;&#23572;&#23646;&#24615;</h3></div></div></div>
<p>
&#22768;&#26126;&#24067;&#23572;&#23646;&#24615;&#65288;<a class="link" href="#attributes" title="3.2.&nbsp;&#23646;&#24615;">attribute</a>&#65289;&#12290;&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;mysql&#21644;pgsql&#65289;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
&#31561;&#20215;&#20110;&#29992;<a class="link" href="#conf-sql-attr-uint" title="11.1.17.&nbsp;sql_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;">sql_attr_uint</a>&#22768;&#26126;&#20026;1&#20301;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_attr_bool = is_deleted # &#23558;&#34987;&#32534;&#30721;&#20026;1&#20010;bit
</pre></div>
<div class="sect2" title="11.1.19.&nbsp;sql_attr_bigint&#65306;&#38271;&#25972;&#22411;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-attr-bigint"></a>11.1.19.&nbsp;sql_attr_bigint&#65306;&#38271;&#25972;&#22411;&#23646;&#24615;</h3></div></div></div>
<p>
64&#20301;&#25972;&#25968;&#23646;&#24615;&#65288;attribute&#65289;&#22768;&#26126;&#12290;&#22810;&#20010;&#20540;&#65288;&#21487;&#20197;&#21516;&#26102;&#22768;&#26126;&#22810;&#20010;&#23646;&#24615;&#65289;&#65292;&#21487;&#36873;&#36873;&#39033;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
&#27880;&#24847;&#65292;&#19982;<a class="link" href="#conf-sql-attr-uint" title="11.1.17.&nbsp;sql_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;">sql_attr_uint</a>&#19981;&#21516;&#65292;&#36825;&#20123;&#20540;&#26159;<span class="bold"><strong>&#26377;&#31526;&#21495;</strong></span>&#30340;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_attr_bigint = my_bigint_id
</pre></div>
<div class="sect2" title="11.1.20.&nbsp;sql_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-attr-timestamp"></a>11.1.20.&nbsp;sql_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;</h3></div></div></div>
<p>
&#22768;&#26126;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;&#65288;<a class="link" href="#attributes" title="3.2.&nbsp;&#23646;&#24615;">attribute</a>&#65289;&#12290;&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#36825;&#20010;&#21015;&#30340;&#20540;&#24517;&#39035;&#26159;UNIX&#26684;&#24335;&#30340;&#26102;&#38388;&#25139;&#65292;&#21363;32&#20301;&#26080;&#31526;&#21495;&#25972;&#25968;&#34920;&#31034;&#30340;&#33258;&#26684;&#26519;&#23612;&#27835;&#24179;&#26102;1970&#24180;1&#26376;1&#26085;&#21320;&#22812;&#36215;&#36807;&#21435;&#30340;&#31186;&#25968;&#12290;&#26102;&#38388;&#25139;&#22312;&#20869;&#37096;&#26159;&#25353;&#25972;&#25968;&#20540;&#23384;&#20648;&#21644;&#22788;&#29702;&#30340;&#12290;&#20294;&#38500;&#20102;&#23558;&#26102;&#38388;&#25139;&#25353;&#25972;&#25968;&#20351;&#29992;&#65292;&#36824;&#21487;&#20197;&#23545;&#23427;&#20204;&#20351;&#29992;&#22810;&#31181;&#19982;&#26085;&#26399;&#30456;&#20851;&#30340;&#20989;&#25968;&#8212;&#8212;&#27604;&#22914;&#26102;&#38388;&#27573;&#25490;&#24207;&#27169;&#24335;&#65292;&#25110;&#20026;&#20998;&#32452;&#65288;GROUP BY&#65289;&#25277;&#21462;&#22825;/&#26143;&#26399;/&#26376;/&#24180;&#12290;&#27880;&#24847;MySQL&#20013;&#30340;DATE&#21644;DATETIME&#21015;&#31867;&#22411;<span class="bold"><strong>&#19981;&#33021;</strong></span>&#30452;&#25509;&#20316;&#20026;&#26102;&#38388;&#25139;&#20351;&#29992;&#65292;&#24517;&#39035;&#20351;&#29992;UNIX_TIMESTAMP&#20989;&#25968;&#23558;&#36825;&#20123;&#21015;&#20570;&#26174;&#24335;&#36716;&#25442;&#12290;
</p><p>
&#35831;&#27880;&#24847;MySQL&#30340;DATE&#25110;&#32773;DATETIME&#23383;&#27573;&#31867;&#22411;<span class="bold"><strong>&#19981;&#33021;</strong></span>&#30452;&#25509;&#22312;Sphinx&#20043;&#20013;&#20316;&#20026;timestamp&#23646;&#24615;&#20351;&#29992;&#65307;&#22914;&#26524;&#36825;&#26679;&#30340;&#23383;&#27573;&#38656;&#35201;&#22312;Sphinx&#20013;&#36827;&#34892;&#33539;&#22260;&#36807;&#28388;&#65292;&#22312;sql_query&#20013;&#20320;&#38656;&#35201;&#26126;&#30830;&#20351;&#29992;MySQL&#30340;UNIX_TIMESTAMP&#20989;&#25968;&#26469;&#36716;&#25442;&#36825;&#26679;&#30340;&#23383;&#27573;&#12290;
</p><p>
&#36824;&#24517;&#39035;&#27880;&#24847;&#30340;&#26159;UNIX&#26102;&#38388;&#25139;&#19981;&#25903;&#25345;1970&#24180;1&#26376;1&#26085;&#20043;&#21069;&#30340;&#26085;&#26399;&#65292;&#22312;MySQL&#20013;&#20351;&#29992;UNIX_TIMESTAMP()&#26102;&#23558;&#19981;&#20250;&#36820;&#22238;&#39044;&#26399;&#30340;&#32467;&#26524;&#12290;&#22914;&#26524;&#20320;&#21482;&#38656;&#35201;&#22788;&#29702;&#26085;&#26399;&#32780;&#19981;&#26159;&#26102;&#38388;&#65288;&#23567;&#26102;&#25110;&#32773;&#20998;&#38047;&#25110;&#32773;&#31186;&#65289;&#65292;&#21487;&#20197;&#32771;&#34385;&#20351;&#29992;MySQL&#30340;TO_DAYS()&#20989;&#25968;&#65288;&#20174;&#24180;&#20221;0&#24320;&#22987;&#30340;&#22825;&#25968;&#65289;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_attr_timestamp = UNIX_TIMESTAMP(added_datetime) AS added_ts
</pre></div>
<div class="sect2" title="11.1.21.&nbsp;sql_attr_str2ordinal&#65306;&#23383;&#31526;&#20018;&#24207;&#25968;&#25490;&#24207;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-attr-str2ordinal"></a>11.1.21.&nbsp;sql_attr_str2ordinal&#65306;&#23383;&#31526;&#20018;&#24207;&#25968;&#25490;&#24207;&#23646;&#24615;</h3></div></div></div>
<p>
&#22768;&#26126;&#23383;&#31526;&#20018;&#24207;&#25968;&#23646;&#24615;&#65288;<a class="link" href="#attributes" title="3.2.&nbsp;&#23646;&#24615;">&#23646;&#24615;</a> &#65289;&#12290;&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#36825;&#20010;&#23646;&#24615;&#31867;&#22411;&#65288;&#31616;&#31216;&#20026;&#23383;&#20018;&#24207;&#25968;&#65289;&#30340;&#35774;&#35745;&#26159;&#20026;&#20102;&#20801;&#35768;&#25353;&#23383;&#31526;&#20018;&#20540;&#25490;&#24207;&#65292;&#20294;&#19981;&#23384;&#20648;&#23383;&#31526;&#20018;&#26412;&#36523;&#12290;&#23545;&#23383;&#20018;&#24207;&#25968;&#20570;&#32034;&#24341;&#26102;&#65292;&#23383;&#31526;&#20018;&#20540;&#20174;&#25968;&#25454;&#24211;&#20013;&#21462;&#20986;&#12289;&#26242;&#23384;&#12289;&#25490;&#24207;&#28982;&#21518;&#29992;&#23427;&#20204;&#22312;&#35813;&#26377;&#24207;&#25968;&#32452;&#20013;&#30340;&#24207;&#25968;&#20195;&#26367;&#23427;&#20204;&#33258;&#36523;&#65292;&#22240;&#27492;&#23383;&#20018;&#24207;&#25968;&#26159;&#20010;&#25972;&#22411;&#65292;&#23545;&#23427;&#20204;&#30340;&#22823;&#23567;&#27604;&#36739;&#19982;&#22312;&#21407;&#23383;&#20018;&#19978;&#20570;&#23383;&#20856;&#24207;&#27604;&#36739;&#32467;&#26524;&#30456;&#21516;&#12290;
</p><p>
&#26089;&#26399;&#29256;&#26412;&#19978;&#65292;&#23545;&#23383;&#20018;&#24207;&#25968;&#20570;&#32034;&#24341;&#21487;&#33021;&#28040;&#32791;&#22823;&#37327;&#30340;RAM&#12290;&#33258;svn r1112&#36215;&#65292;&#23383;&#20018;&#24207;&#25968;&#30340;&#31215;&#32047;&#21644;&#25490;&#24207;&#20063;&#21487;&#22312;&#22266;&#23450;&#22823;&#23567;&#30340;&#20869;&#23384;&#20013;&#35299;&#20915;&#20102;&#65288;&#20195;&#20215;&#26159;&#39069;&#22806;&#30340;&#20020;&#26102;&#30913;&#30424;&#31354;&#38388;&#65289;&#65292;&#24182;&#21463;
<a class="link" href="#conf-mem-limit" title="11.3.1.&nbsp;mem_limit&#65306;&#32034;&#24341;&#20869;&#23384;&#38480;&#21046;">mem_limit</a> &#35774;&#32622;&#38480;&#21046;&#12290;
</p><p>
&#29702;&#24819;&#20013;&#23383;&#31526;&#20018;&#21487;&#20197;&#26681;&#25454;&#23383;&#31526;&#32534;&#30721;&#21644;&#26412;&#22320;&#23383;&#31526;&#38598;&#65288;locale&#65289;&#25490;&#24207;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#24050;&#30693;&#23383;&#31526;&#20018;&#20026;KOI8R&#32534;&#30721;&#19979;&#30340;&#20420;&#35821;&#23383;&#20018;&#65292;&#37027;&#20040;&#23545;&#23383;&#33410;0xE0,0xE1&#21644;0xE2&#25490;&#24207;&#32467;&#26524;&#24212;&#20026;0xE1,0xE2&#21644;0xE0&#65292;&#22240;&#20026;0xE0&#22312;KOI8R&#20013;&#20195;&#34920;&#30340;&#23383;&#31526;&#26126;&#26174;&#24212;&#22312;0xE1&#21644;0xE2&#20043;&#21518;&#12290;&#20294;&#24456;&#19981;&#24184;&#65292;Sphinx&#30446;&#21069;&#19981;&#25903;&#25345;&#36825;&#20010;&#21151;&#33021;&#65292;&#32780;&#26159;&#31616;&#21333;&#22320;&#25353;&#23383;&#33410;&#20540;&#22823;&#23567;&#25490;&#24207;&#12290;
</p><p>
&#35831;&#27880;&#24847;&#65292;&#36825;&#37324;&#30340;&#24207;&#21495;&#26159;&#27599;&#20010;&#32034;&#24341;&#26681;&#25454;&#33258;&#36523;&#25968;&#25454;&#35745;&#31639;&#30340;&#65292;&#22240;&#27492;&#22312;&#21516;&#26102;&#35835;&#21462;&#22810;&#20010;&#32034;&#24341;&#20107;&#23454;&#26080;&#27861;&#21516;&#26102;&#20445;&#30041;&#27491;&#30830;&#30340;&#39034;&#24207;&#36827;&#34892;&#21512;&#24182;&#30340;&#12290;&#22788;&#29702;&#21518;&#30340;&#23383;&#31526;&#20018;&#34987;&#26367;&#25442;&#20026;&#22788;&#29702;&#26102;&#20854;&#22312;&#32034;&#24341;&#20013;&#30340;&#24207;&#21015;&#21495;&#65292;&#20294;&#26159;&#19981;&#21516;&#30340;&#32034;&#24341;&#20855;&#26377;&#19981;&#21516;&#30340;&#23383;&#31526;&#20018;&#38598;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;'main'&#32034;&#24341;&#21253;&#21547;&#23383;&#31526;&#20018;"aaa", "bbb", "ccc", &#30452;&#21040; "zzz"&#65292;&#23427;&#20204;&#23558;&#20250;&#34987;&#20998;&#21035;&#20998;&#37197;&#25968;&#20540;&#20026;1,2,3,&#30452;&#21040;26&#12290;&#20294;&#26159;'delta'&#22914;&#26524;&#20165;&#21253;&#21547;"zzz"&#65292;&#21017;&#20250;&#34987;&#20998;&#37197;&#25968;&#20540;1&#12290;&#37027;&#20040;&#22312;&#21512;&#24182;&#21518;&#65292;&#35813;&#39034;&#24207;&#23558;&#34987;&#25171;&#20081;&#12290;&#19981;&#24184;&#30340;&#26159;&#65292;&#22312;&#19981;&#23384;&#20648;&#21407;&#22987;&#23383;&#31526;&#20018;&#30340;&#24773;&#20917;&#19979;&#65292;&#36825;&#20010;&#38382;&#39064;&#26080;&#27861;&#35299;&#20915;&#65288;&#19968;&#26086;&#23384;&#20648;&#21407;&#22987;&#23383;&#31526;&#20018;&#65292;&#24207;&#21495;&#23558;&#27809;&#26377;&#20219;&#20309;&#29992;&#22788;&#20102;&#65289;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_attr_str2ordinal = author_name
</pre></div>
<div class="sect2" title="11.1.22.&nbsp;sql_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-attr-float"></a>11.1.22.&nbsp;sql_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;</h3></div></div></div>
<p>
&#22768;&#26126;&#28014;&#28857;&#22411;&#23646;&#24615; <a class="link" href="#attributes" title="3.2.&nbsp;&#23646;&#24615;">attribute</a> &#12290;
&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#23646;&#24615;&#20540;&#25353;&#21333;&#31934;&#24230;32&#20301;IEEE754&#26684;&#24335;&#23384;&#20648;&#12290;&#21487;&#34920;&#31034;&#30340;&#33539;&#22260;&#22823;&#32422;&#26159;1e-38&#21040;1e+38&#12290;&#21487;&#31934;&#30830;&#34920;&#31034;&#30340;&#23567;&#25968;&#22823;&#32422;&#26159;7&#20301;&#12290;&#28014;&#28857;&#23646;&#24615;&#30340;&#19968;&#20010;&#37325;&#35201;&#24212;&#29992;&#26159;&#23384;&#20648;&#32463;&#24230;&#21644;&#32428;&#24230;&#20540;&#65288;&#20197;&#35282;&#24230;&#20026;&#21333;&#20301;&#65289;&#65292;&#32463;&#32428;&#24230;&#20540;&#22312;&#26597;&#35810;&#26102;&#30340;&#22320;&#29702;&#20301;&#32622;&#36317;&#31163;&#35745;&#31639;&#20013;&#26377;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_attr_float = lat_radians
sql_attr_float = long_radians
</pre></div>
<div class="sect2" title="11.1.23.&nbsp;sql_attr_multi&#65306;&#22810;&#20540;&#23646;&#24615;(MVA)&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-attr-multi"></a>11.1.23.&nbsp;sql_attr_multi&#65306;&#22810;&#20540;&#23646;&#24615;(MVA)&#23646;&#24615;</h3></div></div></div>
<p>
&#22768;&#26126;&#22810;&#20540;&#23646;&#24615;&#65288;<a class="link" href="#mva" title="3.3.&nbsp;MVA (&#22810;&#20540;&#23646;&#24615;)">&#22810;&#20540;&#23646;&#24615;</a> &#65292;MVA)&#65289;.
&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#31616;&#21333;&#23646;&#24615;&#27599;&#31687;&#25991;&#26723;&#21482;&#20801;&#35768;&#19968;&#20010;&#20540;&#12290;&#28982;&#32780;&#26377;&#24456;&#22810;&#24773;&#20917;&#65288;&#27604;&#22914;tags&#25110;&#32773;&#31867;&#21035;&#65289;&#38656;&#35201;&#23558;&#22810;&#20010;&#20540;&#38468;&#21152;&#32473;&#21516;&#19968;&#20010;&#23646;&#24615;&#65292;&#32780;&#19988;&#35201;&#23545;&#36825;&#20010;&#23646;&#24615;&#20540;&#21015;&#34920;&#20570;&#36807;&#28388;&#25110;&#32773;&#20998;&#32452;&#12290;
</p><p>
&#22768;&#26126;&#26684;&#24335;&#22914;&#19979;&#65288;&#29992;&#21453;&#26012;&#32447;&#21482;&#26159;&#20026;&#20102;&#28165;&#26224;&#65292;&#24744;&#20173;&#21487;&#20197;&#22312;&#19968;&#34892;&#20043;&#20869;&#23436;&#25104;&#22768;&#26126;&#65289;&#65306;
</p><pre class="programlisting">
sql_attr_multi = ATTR-TYPE ATTR-NAME 'from' SOURCE-TYPE \
	[;QUERY] \
	[;RANGE-QUERY]
</pre><p>
&#20854;&#20013;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">ATTR-TYPE &#26159; 'uint' &#25110;&#32773; 'timestamp' &#20043;&#19968;</li>
<li class="listitem">SOURCE-TYPE &#26159; 'field', 'query', &#25110;&#32773; 'ranged-query' &#20043;&#19968;</li>
<li class="listitem">QUERY &#26159;&#29992;&#26469;&#21462;&#24471;&#20840;&#37096;&#65288;&#25991;&#26723;ID&#65292;&#23646;&#24615;&#20540;&#65289;&#24207;&#23545;&#30340;SQL&#26597;&#35810;</li>
<li class="listitem">RANGE-QUERY &#26159;&#29992;&#26469;&#21462;&#24471;&#25991;&#26723;ID&#30340;&#26368;&#23567;&#20540;&#19982;&#26368;&#22823;&#20540;&#30340;SQL&#26597;&#35810;&#65292;&#19982;'<a class="link" href="#conf-sql-query-range" title="11.1.14.&nbsp;sql_query_range&#65306;&#20998;&#21306;&#26597;&#35810;&#33539;&#22260;">sql_query_range</a>'&#31867;&#20284;</li>
</ul></div>
<p>
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_attr_multi = uint tag from query; SELECT id, tag FROM tags
sql_attr_multi = uint tag from ranged-query; \
	SELECT id, tag FROM tags WHERE id&gt;=$start AND id&lt;=$end; \
	SELECT MIN(id), MAX(id) FROM tags
</pre></div>
<div class="sect2" title="11.1.24.&nbsp;sql_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;(&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-attr-string"></a>11.1.24.&nbsp;sql_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;(&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)</h3></div></div></div>
<p>
&#23383;&#31526;&#20018;&#23646;&#24615;&#23450;&#20041;&#12290;
&#22810;&#20540;&#36873;&#39033;&#65288;&#21363;&#21487;&#20197;&#26377;&#19968;&#20010;&#25110;&#22810;&#20010;&#36825;&#26679;&#23376;&#30340;&#23450;&#20041;&#65289;&#65292;&#21487;&#36873;&#39033;&#12290;&#20165;&#23545;SQL&#25968;&#25454;&#28304;&#31867;&#22411;&#26377;&#25928; (<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>) &#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
String attributes can store arbitrary strings attached to every document.
There's a fixed size limit of 4 MB per value. Also, <code class="filename">searchd</code>
will currently cache all the values in RAM, which is an additional implicit limit.
</p><p>
As of 1.10-beta, strings can only be used for storage and retrieval.
They can not participate in expressions, be used for filtering, sorting,
or grouping (ie. in WHERE, ORDER or GROUP clauses). Note that attributes
declared using <code class="option">sql_attr_string</code> will <span class="bold"><strong>not</strong></span> be full-text
indexed; you can use <a class="link" href="#conf-sql-field-string" title="11.1.27.&nbsp;sql_field_string&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)">sql_field_string</a>
directive for that.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_attr_string = title # will be stored but will not be indexed
</pre></div>
<div class="sect2" title="11.1.25.&nbsp;sql_attr_str2wordcount&#65306;&#25991;&#26723;&#35789;&#27719;&#25968;&#35760;&#24405;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-attr-str2wordcount"></a>11.1.25.&nbsp;sql_attr_str2wordcount&#65306;&#25991;&#26723;&#35789;&#27719;&#25968;&#35760;&#24405;&#23646;&#24615;</h3></div></div></div>
<p>
&#35789;&#27719;&#25968;&#23646;&#24615;&#23450;&#20041;&#12290;&#22810;&#20540;&#36873;&#39033;&#65288;&#21363;&#21487;&#20197;&#26377;&#19968;&#20010;&#25110;&#22810;&#20010;&#36825;&#26679;&#23376;&#30340;&#23450;&#20041;&#65289;&#65292;&#21487;&#36873;&#39033;&#12290;&#20165;&#23545;SQL&#25968;&#25454;&#28304;&#31867;&#22411;&#26377;&#25928; (<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>) &#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Word-count attribute takes a string column, tokenizes it according
to index settings, and stores the resulting number of tokens in an attribute.
This number of tokens ("word count") is a normal integer that can be later
used, for instance, in custom ranking expressions (boost shorter titles,
help identify exact field matches, etc).
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_attr_str2wordcount = title_wc
</pre></div>
<div class="sect2" title="11.1.26.&nbsp;sql_column_buffers&#65306;&#32467;&#26524;&#34892;&#32531;&#20914;&#22823;&#23567;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-column-buffers"></a>11.1.26.&nbsp;sql_column_buffers&#65306;&#32467;&#26524;&#34892;&#32531;&#20914;&#22823;&#23567;</h3></div></div></div>
<p>
&#27599;&#34892;&#32531;&#20914;&#22823;&#23567;&#12290;
&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#20026;&#31354;&#65288;&#33258;&#21160;&#35745;&#31639;&#22823;&#23567;&#65289;&#12290;
&#20165;&#23545;SQL&#25968;&#25454;&#28304;&#31867;&#22411;&#26377;&#25928; (<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>) &#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
ODBC and MS SQL drivers sometimes can not return the maximum
actual column size to be expected. For instance, NVARCHAR(MAX) columns
always report their length as 2147483647 bytes to
<code class="filename">indexer</code> even though the actually used length
is likely considerably less. However, the receiving buffers still
need to be allocated upfront, and their sizes have to be determined.
When the driver does not report the column length at all, Sphinx
allocates default 1 KB buffers for each non-char column, and 1 MB
buffers for each char column. Driver-reported column length
also gets clamped by an upper limie of 8 MB, so in case the
driver reports (almost) a 2 GB column length, it will be clamped
and a 8 MB buffer will be allocated instead for that column.
These hard-coded limits can be overridden using the
<code class="code">sql_column_buffers</code> directive, either in order
to save memory on actually shorter columns, or overcome
the 8 MB limit on actually longer columns. The directive values
must be a comma-separated lists of selected column names and sizes:
</p><pre class="programlisting">
sql_column_buffers = &lt;colname&gt;=&lt;size&gt;[K|M] [, ...]
</pre><p>
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_query = SELECT id, mytitle, mycontent FROM documents
sql_column_buffers = mytitle=64K, mycontent=10M
</pre></div>
<div class="sect2" title="11.1.27.&nbsp;sql_field_string&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-field-string"></a>11.1.27.&nbsp;sql_field_string&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)</h3></div></div></div>
<p>
&#32452;&#21512;&#23383;&#31526;&#20018;&#23646;&#24615;&#21644;&#20840;&#25991;&#23383;&#27573;&#23450;&#20041;&#12290;
Combined string attribute and full-text field declaration.
&#22810;&#20540;&#36873;&#39033;&#65288;&#21363;&#21487;&#20197;&#26377;&#19968;&#20010;&#25110;&#22810;&#20010;&#36825;&#26679;&#23376;&#30340;&#23450;&#20041;&#65289;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#23545;SQL&#25968;&#25454;&#28304;&#31867;&#22411;&#26377;&#25928; (<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>) &#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
<a class="link" href="#conf-sql-attr-string" title="11.1.24.&nbsp;sql_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;(&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)">sql_attr_string</a> only stores the column
value but does not full-text index it.  In some cases it might be desired to both full-text
index the column and store it as attribute.  <code class="option">sql_field_string</code> lets you do
exactly that. Both the field and the attribute will be named the same.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_field_string = title # will be both indexed and stored
</pre></div>
<div class="sect2" title="11.1.28.&nbsp;sql_field_str2wordcount&#65306;&#25991;&#26723;&#35789;&#27719;&#25968;&#35760;&#24405;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#20449;&#24687;)"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-field-str2wordcount"></a>11.1.28.&nbsp;sql_field_str2wordcount&#65306;&#25991;&#26723;&#35789;&#27719;&#25968;&#35760;&#24405;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#20449;&#24687;)</h3></div></div></div>
<p>
&#32452;&#21512;&#35789;&#27719;&#25968;&#23646;&#24615;&#19982;&#20840;&#25991;&#23383;&#27573;&#23450;&#20041;&#12290;
&#22810;&#20540;&#36873;&#39033;&#65288;&#21363;&#21487;&#20197;&#26377;&#19968;&#20010;&#25110;&#22810;&#20010;&#36825;&#26679;&#23376;&#30340;&#23450;&#20041;&#65289;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#23545;SQL&#25968;&#25454;&#28304;&#31867;&#22411;&#26377;&#25928; (<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>) &#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><a class="link" href="#conf-sql-attr-str2wordcount" title="11.1.25.&nbsp;sql_attr_str2wordcount&#65306;&#25991;&#26723;&#35789;&#27719;&#25968;&#35760;&#24405;&#23646;&#24615;">sql_attr_str2wordcount</a> only stores the column
word count but does not full-text index it.  In some cases it might be desired to both full-text
index the column and also have the count.  <code class="option">sql_field_str2wordcount</code> lets you do
exactly that. Both the field and the attribute will be named the same.
<h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_field_str2wordcount = title # will be indexed, and counted/stored
</pre></div>
<div class="sect2" title="11.1.29.&nbsp;sql_file_field&#65306;&#22806;&#37096;&#25991;&#20214;&#23383;&#27573;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-file-field"></a>11.1.29.&nbsp;sql_file_field&#65306;&#22806;&#37096;&#25991;&#20214;&#23383;&#27573;</h3></div></div></div>
<p>
&#23454;&#38469;&#25968;&#25454;&#23384;&#20648;&#20110;&#25991;&#20214;&#30340;&#23383;&#27573;&#23450;&#20041;&#12290;
&#20165;&#23545;SQL&#25968;&#25454;&#28304;&#31867;&#22411;&#26377;&#25928; (<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>) &#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
This directive makes <code class="filename">indexer</code> interpret field contents
as a file name, and load and index the referred file.  Files larger than
<a class="link" href="#conf-max-file-field-buffer" title="11.3.6.&nbsp;max_file_field_buffer&#65306;&#22806;&#37096;&#25991;&#20214;&#32531;&#20914;&#22823;&#23567;">max_file_field_buffer</a>
in size are skipped.  Any errors during the file loading (IO errors, missed
limits, etc) will be reported as indexing warnings and will <span class="bold"><strong>not</strong></span> early
terminate the indexing.  No content will be indexed for such files.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_file_field = my_file_path # load and index files referred to by my_file_path
</pre></div>
<div class="sect2" title="11.1.30.&nbsp;sql_query_post&#65306;&#25968;&#25454;&#33719;&#21462;&#21518;&#26597;&#35810;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-query-post"></a>11.1.30.&nbsp;sql_query_post&#65306;&#25968;&#25454;&#33719;&#21462;&#21518;&#26597;&#35810;</h3></div></div></div>
<p>
&#21462;&#21518;&#26597;&#35810;&#12290;&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#20026;&#31354;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#27492;&#26597;&#35810;&#22312;<a class="link" href="#conf-sql-query" title="11.1.12.&nbsp;sql_query&#65306;&#33719;&#21462;&#24453;&#32034;&#24341;&#25968;&#25454;&#26597;&#35810;">sql_query</a>&#25104;&#21151;&#25191;&#34892;&#21518;&#31435;&#21363;&#25191;&#34892;&#12290;&#22914;&#26524;&#21462;&#21518;&#21462;&#26597;&#35810;&#20135;&#29983;&#20102;&#38169;&#35823;&#65292;&#35813;&#38169;&#35823;&#34987;&#24403;&#20316;&#35686;&#21578;&#34987;&#25253;&#21578;&#65292;&#20294;&#32034;&#24341;<span class="bold"><strong>&#19981;&#20250;</strong></span>&#22240;&#27492;&#32456;&#27490;&#12290;&#21462;&#21518;&#26597;&#35810;&#30340;&#32467;&#26524;&#20250;&#34987;&#24573;&#30053;&#12290;&#27880;&#24847;&#24403;&#21462;&#21518;&#26597;&#35810;&#25191;&#34892;&#26102;&#32034;&#24341;&#36824;<span class="bold"><strong>&#23578;&#26410;</strong></span>&#23436;&#25104;&#65292;&#32780;&#21518;&#38754;&#30340;&#32034;&#24341;&#20173;&#28982;&#21487;&#33021;&#22833;&#36133;&#12290;&#22240;&#27492;&#22312;&#36825;&#20010;&#26597;&#35810;&#20013;&#19981;&#24212;&#36827;&#34892;&#20219;&#20309;&#27704;&#20037;&#24615;&#30340;&#26356;&#26032;&#12290;&#20363;&#22914;&#65292;&#19981;&#24212;&#22312;&#27492;&#26597;&#35810;&#20013;&#26356;&#26032;&#36741;&#21161;&#34920;&#20013;&#23384;&#20648;&#30340;&#26368;&#36817;&#25104;&#21151;&#32034;&#24341;&#30340;&#25991;&#26723;ID&#20540;&#65292;&#35831;&#22312;&#21518;&#32034;&#24341;&#26597;&#35810;&#65288;<a class="link" href="#conf-sql-query-post-index" title="11.1.31.&nbsp;sql_query_post_index&#65306;&#25968;&#25454;&#32034;&#24341;&#21518;&#26597;&#35810;">&#32034;&#24341;&#21518;&#26597;&#35810;sql_query_post_index</a> &#65289;&#20013;&#25805;&#20316;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_query_post = DROP TABLE my_tmp_table
</pre></div>
<div class="sect2" title="11.1.31.&nbsp;sql_query_post_index&#65306;&#25968;&#25454;&#32034;&#24341;&#21518;&#26597;&#35810;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-query-post-index"></a>11.1.31.&nbsp;sql_query_post_index&#65306;&#25968;&#25454;&#32034;&#24341;&#21518;&#26597;&#35810;</h3></div></div></div>
<p>
&#32034;&#24341;&#21518;&#26597;&#35810;&#12290;&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#20026;&#31354;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#27492;&#26597;&#35810;&#22312;&#32034;&#24341;&#23436;&#20840;&#25104;&#21151;&#32467;&#26463;&#21518;&#25191;&#34892;&#12290;&#22914;&#26524;&#27492;&#26597;&#35810;&#20135;&#29983;&#38169;&#35823;&#65292;&#35813;&#38169;&#35823;&#20250;&#34987;&#24403;&#20316;&#35686;&#21578;&#25253;&#21578;&#65292;&#20294;&#32034;&#24341;<span class="bold"><strong>&#19981;&#20250;</strong></span>&#22240;&#27492;&#32780;&#32456;&#27490;&#12290;&#35813;&#26597;&#35810;&#30340;&#32467;&#26524;&#38598;&#34987;&#24573;&#30053;&#12290;&#27492;&#26597;&#35810;&#20013;&#21487;&#20197;&#20351;&#29992;&#23439;<code class="code">$maxid</code>&#65292;&#23427;&#20250;&#34987;&#25193;&#23637;&#20026;&#32034;&#24341;&#36807;&#31243;&#20013;&#23454;&#38469;&#24471;&#21040;&#30340;&#26368;&#22823;&#30340;&#25991;&#26723;ID&#12290;&#22914;&#26524;&#27809;&#26377;&#25991;&#26723;&#34987;&#32034;&#24341;&#65292;&#21017;$maxid&#20250;&#35774;&#32622;&#20026;0&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_query_post_index = REPLACE INTO counters ( id, val ) \
    VALUES ( 'max_indexed_id', $maxid )
</pre></div>
<div class="sect2" title="11.1.32.&nbsp;sql_ranged_throttle&#65306;&#20998;&#21306;&#26597;&#35810;&#38388;&#38548;&#26102;&#38388;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-ranged-throttle"></a>11.1.32.&nbsp;sql_ranged_throttle&#65306;&#20998;&#21306;&#26597;&#35810;&#38388;&#38548;&#26102;&#38388;</h3></div></div></div>
<p>
&#20998;&#21306;&#26597;&#35810;&#30340;&#38388;&#38548;&#26102;&#38388;&#65288;throttling&#65289;&#65292;&#21333;&#20301;&#26159;&#27627;&#31186;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#20026;0&#65288;&#26080;&#38388;&#38548;&#26102;&#38388;&#65289;&#12290;
&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;
</p><p>
&#27492;&#36873;&#39033;&#26088;&#22312;&#36991;&#20813;indexer&#23545;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;&#26500;&#25104;&#20102;&#22826;&#22823;&#30340;&#36127;&#25285;&#12290;&#23427;&#20250;&#20351;indexer&#22312;&#27599;&#20010;&#20998;&#21306;&#26597;&#35810;&#30340;&#27493;&#20043;&#21518;&#20241;&#30496;&#33509;&#24178;&#27627;&#31186;&#12290;&#20241;&#30496;&#26080;&#26465;&#20214;&#25191;&#34892;&#65292;&#24182;&#22312;&#21462;&#32467;&#26524;&#30340;&#26597;&#35810;&#20043;&#21069;&#25191;&#34892;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_ranged_throttle = 1000 # sleep for 1 sec before each query step
</pre></div>
<div class="sect2" title="11.1.33.&nbsp;sql_query_info_pre&#65306;&#21629;&#20196;&#34892;&#20449;&#24687;&#33719;&#21462;&#21069;&#26597;&#35810;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-query-info-pre"></a>11.1.33.&nbsp;sql_query_info_pre&#65306;&#21629;&#20196;&#34892;&#20449;&#24687;&#33719;&#21462;&#21069;&#26597;&#35810;</h3></div></div></div>
<p>
&#21629;&#20196;&#34892;&#26597;&#35810;&#21069;&#26597;&#35810;&#12290;
&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
&#20165;&#23545; <code class="option">mysql</code> &#25968;&#25454;&#28304;&#26377;&#25928;&#12290;
</p><p>
&#20165;&#34987;&#21629;&#20196;&#34892;&#25628;&#32034;&#25152;&#29992;&#65292;&#29992;&#26469;&#22312;&#21629;&#20196;&#34892;&#26597;&#35810;&#20043;&#21069;&#25191;&#34892;&#26597;&#35810;&#65292;&#19968;&#33324;&#29992;&#20110;&#35774;&#32622;&#26597;&#35810;&#30340;&#23383;&#31526;&#38598;&#32534;&#30721;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_query_info_pre = SET NAMES utf8
</pre></div>
<div class="sect2" title="11.1.34.&nbsp;sql_query_info&#65306;&#21629;&#20196;&#34892;&#20449;&#24687;&#33719;&#21462;&#26597;&#35810;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-sql-query-info"></a>11.1.34.&nbsp;sql_query_info&#65306;&#21629;&#20196;&#34892;&#20449;&#24687;&#33719;&#21462;&#26597;&#35810;</h3></div></div></div>
<p>
&#25991;&#26723;&#20449;&#24687;&#26597;&#35810;&#12290;
&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
&#20165;&#23545; <code class="option">mysql</code> &#25968;&#25454;&#28304;&#26377;&#25928;&#12290;
</p><p>
&#20165;&#34987;&#21629;&#20196;&#34892;&#25628;&#32034;&#25152;&#29992;&#65292;&#29992;&#26469;&#33719;&#21462;&#21644;&#26174;&#31034;&#25991;&#26723;&#20449;&#24687;&#65292;&#30446;&#21069;&#20165;&#23545;MySQL&#26377;&#25928;&#65292;&#19988;&#20165;&#29992;&#20110;&#35843;&#35797;&#30446;&#30340;&#12290;&#27492;&#26597;&#35810;&#20026;&#27599;&#20010;&#25991;&#26723;ID&#33719;&#21462;CLI&#25628;&#32034;&#24037;&#20855;&#35201;&#26174;&#31034;&#30340;&#25991;&#26723;&#20449;&#24687;&#12290;
&#23427;&#38656;&#35201;&#21253;&#21547;<code class="code">$id</code>&#23439;&#65292;&#20197;&#27492;&#26469;&#23545;&#24212;&#21040;&#26597;&#35810;&#30340;&#25991;&#26723;&#30340;ID&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
sql_query_info = SELECT * FROM documents WHERE id=$id
</pre></div>
<div class="sect2" title="11.1.35.&nbsp;xmlpipe_command&#65306;&#25968;&#25454;&#33719;&#21462;&#21629;&#20196;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-xmlpipe-command"></a>11.1.35.&nbsp;xmlpipe_command&#65306;&#25968;&#25454;&#33719;&#21462;&#21629;&#20196;</h3></div></div></div>
<p>
&#35843;&#29992;xmlpipe&#27969;&#25552;&#20379;&#32773;&#30340;Shell&#21629;&#20196;&#12290;&#24517;&#39035;&#36873;&#39033;&#12290;&#20165;&#23545;<code class="option">xmlpipe</code> &#21644; <code class="option">xmlpipe2</code>&#25968;&#25454;&#28304;&#26377;&#25928;&#12290;
</p><p>
&#25351;&#23450;&#30340;&#21629;&#20196;&#20250;&#34987;&#36816;&#34892;&#65292;&#20854;&#36755;&#20986;&#34987;&#24403;&#20316;XML&#25991;&#26723;&#35299;&#26512;&#12290;&#20855;&#20307;&#26684;&#24335;&#25551;&#36848;&#35831;&#21442;&#32771; <a class="xref" href="#xmlpipe" title="3.8.&nbsp;xmlpipe &#25968;&#25454;&#28304;">&#31532;&nbsp;3.8&nbsp;&#33410; &#8220;xmlpipe &#25968;&#25454;&#28304;&#8221;</a>
&#21644; <a class="xref" href="#xmlpipe2" title="3.9.&nbsp;xmlpipe2 &#25968;&#25454;&#28304;">&#31532;&nbsp;3.9&nbsp;&#33410; &#8220;xmlpipe2 &#25968;&#25454;&#28304;&#8221;</a> &#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
xmlpipe_command = cat /home/sphinx/test.xml
</pre></div>
<div class="sect2" title="11.1.36.&nbsp;xmlpipe_field&#65306;&#23383;&#27573;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-xmlpipe-field"></a>11.1.36.&nbsp;xmlpipe_field&#65306;&#23383;&#27573;&#35774;&#32622;</h3></div></div></div>
<p>
&#22768;&#26126;xmlpipe&#25968;&#25454;&#23383;&#27573;&#12290;&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;&#20165;&#23545;<code class="option">xmlpipe2</code>&#25968;&#25454;&#28304;&#26377;&#25928;&#12290;&#21442;&#32771; <a class="xref" href="#xmlpipe2" title="3.9.&nbsp;xmlpipe2 &#25968;&#25454;&#28304;">&#31532;&nbsp;3.9&nbsp;&#33410; &#8220;xmlpipe2 &#25968;&#25454;&#28304;&#8221;</a>.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
xmlpipe_field = subject
xmlpipe_field = content
</pre></div>
<div class="sect2" title="11.1.37.&nbsp;xmlpipe_field_string&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-xmlpipe-field-string"></a>11.1.37.&nbsp;xmlpipe_field_string&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;</h3></div></div></div>
<p>
xmlpipe&#23383;&#27573;&#21644;&#23383;&#31526;&#20018;&#23646;&#24615;&#23450;&#20041;&#12290;
&#22810;&#20540;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#23545; <code class="option">xmlpipe2</code> &#25968;&#25454;&#28304;&#26469;&#24615;&#26377;&#25928;&#12290;&#21442;&#35265; <a class="xref" href="#xmlpipe2" title="3.9.&nbsp;xmlpipe2 &#25968;&#25454;&#28304;">&#31532;&nbsp;3.9&nbsp;&#33410; &#8220;xmlpipe2 &#25968;&#25454;&#28304;&#8221;</a>.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Makes the specified XML element indexed as both a full-text field and a string attribute.
Equivalent to &lt;sphinx:field name="field" attr="string"/&gt; declaration within the XML file.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
xmlpipe_field_string = subject
</pre></div>
<div class="sect2" title="11.1.38.&nbsp;xmlpipe_field_wordcount&#65306;&#35789;&#27719;&#25968;&#23384;&#20648;&#23383;&#27573;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-xmlpipe-field-wordcount"></a>11.1.38.&nbsp;xmlpipe_field_wordcount&#65306;&#35789;&#27719;&#25968;&#23384;&#20648;&#23383;&#27573;</h3></div></div></div>
<p>
xmlpipe&#23383;&#27573;&#21644;&#35789;&#27719;&#25968;&#23646;&#24615;&#23450;&#20041;&#12290;
&#22810;&#20540;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#23545; <code class="option">xmlpipe2</code> &#25968;&#25454;&#28304;&#26469;&#24615;&#26377;&#25928;&#12290;&#21442;&#35265; <a class="xref" href="#xmlpipe2" title="3.9.&nbsp;xmlpipe2 &#25968;&#25454;&#28304;">&#31532;&nbsp;3.9&nbsp;&#33410; &#8220;xmlpipe2 &#25968;&#25454;&#28304;&#8221;</a>.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Makes the specified XML element indexed as both a full-text field and a word count attribute.
Equivalent to &lt;sphinx:field name="field" attr="wordcount"/&gt; declaration within the XML file.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
xmlpipe_field_wordcount = subject
</pre></div>
<div class="sect2" title="11.1.39.&nbsp;xmlpipe_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-xmlpipe-attr-uint"></a>11.1.39.&nbsp;xmlpipe_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;</h3></div></div></div>
<p>
&#22768;&#26126;xmlpipe&#25972;&#22411;&#23646;&#24615;&#12290;&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;&#20165;&#23545;<code class="option">xmlpipe2</code>&#25968;&#25454;&#28304;&#26377;&#25928;&#12290;&#35821;&#27861;&#19982; <a class="link" href="#conf-sql-attr-uint" title="11.1.17.&nbsp;sql_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;">sql_attr_uint</a>&#30456;&#21516;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
xmlpipe_attr_uint = author
</pre></div>
<div class="sect2" title="11.1.40.&nbsp;xmlpipe_attr_bool&#65306;&#24067;&#23572;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-xmlpipe-attr-bool"></a>11.1.40.&nbsp;xmlpipe_attr_bool&#65306;&#24067;&#23572;&#23646;&#24615;</h3></div></div></div>
<p>
&#22768;&#26126;xmlpipe&#24067;&#23572;&#22411;&#23646;&#24615;&#12290;&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#23545;<code class="option">xmlpipe2</code>&#25968;&#25454;&#28304;&#26377;&#25928;&#12290;&#35821;&#27861;&#19982;  <a class="link" href="#conf-sql-attr-bool" title="11.1.18.&nbsp;sql_attr_bool&#65306;&#24067;&#23572;&#23646;&#24615;">sql_attr_bool</a>&#30456;&#21516;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
xmlpipe_attr_bool = is_deleted # will be packed to 1 bit
</pre></div>
<div class="sect2" title="11.1.41.&nbsp;xmlpipe_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-xmlpipe-attr-timestamp"></a>11.1.41.&nbsp;xmlpipe_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;</h3></div></div></div>
<p>
&#22768;&#26126;xmlpipe UNIX&#26102;&#38388;&#25139;&#23646;&#24615;&#12290;&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#23545;<code class="option">xmlpipe2</code>&#25968;&#25454;&#28304;&#26377;&#25928;&#12290;&#35821;&#27861;&#19982;  <a class="link" href="#conf-sql-attr-timestamp" title="11.1.20.&nbsp;sql_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;">sql_attr_timestamp</a>&#30456;&#21516;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
xmlpipe_attr_timestamp = published
</pre></div>
<div class="sect2" title="11.1.42.&nbsp;xmlpipe_attr_str2ordinal&#65306;&#23383;&#31526;&#20018;&#24207;&#21015;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-xmlpipe-attr-str2ordinal"></a>11.1.42.&nbsp;xmlpipe_attr_str2ordinal&#65306;&#23383;&#31526;&#20018;&#24207;&#21015;&#23646;&#24615;</h3></div></div></div>
<p>
&#22768;&#26126;xmlpipe&#23383;&#31526;&#24207;&#25968;&#23646;&#24615;&#12290;&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#23545;<code class="option">xmlpipe2</code>&#25968;&#25454;&#28304;&#26377;&#25928;&#12290;&#35821;&#27861;&#19982;  <a class="link" href="#conf-sql-attr-str2ordinal" title="11.1.21.&nbsp;sql_attr_str2ordinal&#65306;&#23383;&#31526;&#20018;&#24207;&#25968;&#25490;&#24207;&#23646;&#24615;">sql_attr_str2ordinal</a>&#30456;&#21516;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
xmlpipe_attr_str2ordinal = author_sort
</pre></div>
<div class="sect2" title="11.1.43.&nbsp;xmlpipe_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-xmlpipe-attr-float"></a>11.1.43.&nbsp;xmlpipe_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;</h3></div></div></div>
<p>
&#22768;&#26126;xmlpipe&#28014;&#28857;&#22411;&#23646;&#24615;&#12290;&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#23545;<code class="option">xmlpipe2</code>&#25968;&#25454;&#28304;&#26377;&#25928;&#12290;&#35821;&#27861;&#19982;  <a class="link" href="#conf-sql-attr-float" title="11.1.22.&nbsp;sql_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;">sql_attr_float</a>&#30456;&#21516;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
xmlpipe_attr_float = lat_radians
xmlpipe_attr_float = long_radians
</pre></div>
<div class="sect2" title="11.1.44.&nbsp;xmlpipe_attr_multi&#65306;&#22810;&#20540;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-xmlpipe-attr-multi"></a>11.1.44.&nbsp;xmlpipe_attr_multi&#65306;&#22810;&#20540;&#23646;&#24615;</h3></div></div></div>
<p>
&#22768;&#26126;xmlpipe MVA&#23646;&#24615;&#12290;&#21487;&#22768;&#26126;&#21516;&#19968;&#31867;&#22411;&#30340;&#22810;&#20010;&#19981;&#21516;&#21517;&#31216;&#30340;&#23646;&#24615;&#65292;&#21487;&#36873;&#39033;&#12290;
&#20165;&#23545;<code class="option">xmlpipe2</code>&#25968;&#25454;&#28304;&#26377;&#25928;&#12290;
</p><p>
&#36825;&#20010;&#36873;&#39033;&#20026;xmlpipe2&#27969;&#22768;&#26126;&#19968;&#20010;MVA&#23646;&#24615;&#26631;&#31614;&#12290;&#35813;&#26631;&#31614;&#30340;&#20869;&#23481;&#20250;&#34987;&#35797;&#22270;&#35299;&#26512;&#25104;&#19968;&#20010;&#25972;&#22411;&#20540;&#30340;&#21015;&#34920;&#65288;&#25968;&#32452;&#65289;&#65292;&#27492;&#21015;&#34920;&#26500;&#25104;&#19968;&#20010;MVA&#23646;&#24615;&#20540;&#65292;&#36825;&#19982;&#25226;MVA&#23646;&#24615;&#30340;&#25968;&#25454;&#28304;&#35774;&#32622;&#20026;&#8220;&#23383;&#27573;&#8221;&#26102;<a class="link" href="#conf-sql-attr-multi" title="11.1.23.&nbsp;sql_attr_multi&#65306;&#22810;&#20540;&#23646;&#24615;(MVA)&#23646;&#24615;">sql_attr_multi</a>&#20998;&#26512;SQL&#21015;&#20869;&#23481;&#30340;&#26041;&#24335;&#31867;&#20284;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
xmlpipe_attr_multi = taglist
</pre></div>
<div class="sect2" title="11.1.45.&nbsp;xmlpipe_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-xmlpipe-attr-string"></a>11.1.45.&nbsp;xmlpipe_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;</h3></div></div></div>
<p>
xmlpipe&#23383;&#31526;&#20018;&#23450;&#20041;&#12290;
&#22810;&#20540;&#65292;&#21487;&#36873;&#39033;&#12290;
Applies to <code class="option">xmlpipe2</code> source type only.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
This setting declares a string attribute tag in xmlpipe2 stream.
The contents of the specified tag will be parsed and stored as a string value.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
xmlpipe_attr_string = subject
</pre></div>
<div class="sect2" title="11.1.46.&nbsp;xmlpipe_fixup_utf8&#65306;UTF-8&#20462;&#22797;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-xmlpipe-fixup-utf8"></a>11.1.46.&nbsp;xmlpipe_fixup_utf8&#65306;UTF-8&#20462;&#22797;&#35774;&#32622;</h3></div></div></div>
<p>
&#22312;Sphinx&#31471;&#36827;&#34892;UTF-8&#39564;&#35777;&#21644;&#36807;&#28388;&#65292;&#38450;&#27490;XML&#20998;&#26512;&#22120;&#22240;&#20026;&#30896;&#19978;&#38750;UTF-8&#25991;&#26723;&#32780;&#29359;&#30127;&#21345;&#27515;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#20026;0&#12290;&#21482;&#36866;&#29992;&#20110;xmlpipe2&#25968;&#25454;&#28304;&#12290;
&#20165;&#23545;<code class="option">xmlpipe2</code>&#25968;&#25454;&#28304;&#26377;&#25928;&#12290;
</p><p>
&#22312;&#26576;&#20123;&#29305;&#23450;&#24773;&#20917;&#19979;&#24456;&#38590;&#29978;&#33267;&#19981;&#21487;&#33021;&#20445;&#38556;&#36755;&#20837;&#30340;xmlpipe2&#25991;&#26723;&#20307;&#37117;&#26159;&#23436;&#32654;&#26377;&#25928;&#19968;&#33268;&#30340;UTF-8&#32534;&#30721;&#12290;&#20363;&#22914;&#65292;&#36755;&#20837;&#27969;&#20013;&#21487;&#33021;&#28316;&#36827;&#19968;&#20123;&#29305;&#23450;&#22269;&#23478;&#30340;&#21333;&#23383;&#33410;&#32534;&#30721;&#25991;&#26412;&#12290;Libexpat&#36825;&#20010;XML&#20998;&#26512;&#22120;&#38750;&#24120;&#33030;&#24369;&#65292;&#36935;&#21040;&#36825;&#31181;&#24773;&#20917;&#23601;&#20250;&#20572;&#27490;&#24037;&#20316;&#12290;UTF-8&#20462;&#22797;&#65288;UTF-8 fixup&#65289;&#21151;&#33021;&#33021;&#35753;&#36825;&#31181;&#24773;&#20917;&#24471;&#21040;&#36991;&#20813;&#12290;&#24403;&#21551;&#21160;&#20102;&#20462;&#22797;&#36873;&#39033;&#30340;&#26102;&#20505;&#65292;Sphinx&#20250;&#23545;&#36755;&#20837;&#30041;&#36827;&#34892;&#39044;&#22788;&#29702;&#65292;&#20854;&#21518;&#20877;&#20256;&#32473;XML&#20998;&#26512;&#22120;&#65292;&#20854;&#38388;&#38750;&#27861;&#30340;UTF-8&#24207;&#21015;&#20840;&#37096;&#34987;&#26367;&#25442;&#25104;&#31354;&#26684;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
xmlpipe_fixup_utf8 = 1
</pre></div>
<div class="sect2" title="11.1.47.&nbsp;mssql_winauth&#65306;Windows&#38598;&#25104;&#35748;&#35777;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-mssql-winauth"></a>11.1.47.&nbsp;mssql_winauth&#65306;Windows&#38598;&#25104;&#35748;&#35777;</h3></div></div></div>
<p>
&#26631;&#24535;&#20301;&#65292;&#20195;&#34920;&#26159;&#21542;&#20351;&#29992;MS SQL&#30340;windows&#36523;&#20221;&#35748;&#35777;&#12290;&#24067;&#23572;&#22411;&#65292;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;0&#65288;&#20551;&#65289;&#12290;&#21482;&#36866;&#29992;&#20110;<code class="option">mssql</code>&#25968;&#25454;&#28304;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#36825;&#20010;&#36873;&#39033;&#25351;&#20986;&#22312;&#36830;&#25509;&#21040;MS SQL Server&#26102;&#26102;&#20505;&#20351;&#29992;&#29616;&#22312;&#27491;&#30331;&#24405;&#30340;windows&#36134;&#25143;&#30340;&#20973;&#25454;&#20316;&#26469;&#36827;&#34892;&#36523;&#20221;&#39564;&#35777;&#12290;&#27880;&#24847;&#24403;<code class="filename">searchd</code>&#20316;&#20026;&#26381;&#21153;&#36816;&#34892;&#26102;&#65292;&#36134;&#25143;&#30340;&#29992;&#25143;&#21517;&#21487;&#33021;&#19982;&#23433;&#35013;&#36825;&#20010;&#26381;&#21153;&#30340;&#36134;&#25143;&#19981;&#21516;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
mssql_winauth = 1
</pre></div>
<div class="sect2" title="11.1.48.&nbsp;mssql_unicode&#65306;Unicode&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-mssql-unicode"></a>11.1.48.&nbsp;mssql_unicode&#65306;Unicode&#35774;&#32622;</h3></div></div></div>
<p>
MS SQL&#32534;&#30721;&#31867;&#22411;&#26631;&#24535;&#20301;&#12290;&#24067;&#23572;&#22411;&#65292;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;0&#65288;&#20551;&#65289;&#12290;&#21482;&#36866;&#29992;&#20110;<code class="option">mssql</code>&#25968;&#25454;&#28304;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#36825;&#20010;&#36873;&#39033;&#25351;&#20986;&#22312;&#23545;MS SQL Server&#36827;&#34892;&#26597;&#35810;&#26102;&#65292;&#26159;&#20351;&#29992;Unicode&#36824;&#26159;&#21333;&#23383;&#33410;&#25968;&#25454;&#12290;&#36825;&#20010;&#26631;&#24535;&#20301;<span class="bold"><strong>&#24517;&#39035;</strong></span>&#19982;<a class="link" href="#conf-charset-type" title="11.2.15.&nbsp;charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;">charset_type</a>&#25351;&#20196;&#21516;&#27493;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#35201;&#32034;&#24341;Unicode&#25968;&#25454;&#65292;&#21017;&#26082;&#35201;&#35774;&#32622;<a class="link" href="#conf-charset-type" title="11.2.15.&nbsp;charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;">charset_type</a>&#36873;&#39033;&#65288;&#35774;&#20026;&#8216;utf-8&#8217;&#65289;&#65292;&#21448;&#35201;&#35774;&#32622;&#25968;&#25454;&#28304;&#30340;<code class="option">mssql_unicode</code>&#36873;&#39033;&#65288;&#35774;&#20026;1&#65289;&#12290;&#22810;&#35828;&#19968;&#21477;&#65306;MS SQL&#23454;&#36136;&#19978;&#36820;&#22238;UCS-2&#32534;&#30721;&#30340;&#25968;&#25454;&#65292;&#32780;&#19981;&#26159;UTF-8&#65292;&#20294;Sphinx&#21487;&#20197;&#33258;&#21160;&#22788;&#29702;&#36825;&#20010;&#24773;&#20917;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
mssql_unicode = 1
</pre></div>
<div class="sect2" title="11.1.49.&nbsp;unpack_zlib&#65306;SQL&#25968;&#25454;&#28304;&#35299;&#21387;&#23383;&#27573;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-unpack-zlib"></a>11.1.49.&nbsp;unpack_zlib&#65306;SQL&#25968;&#25454;&#28304;&#35299;&#21387;&#23383;&#27573;&#35774;&#32622;</h3></div></div></div>
<p>
&#20351;&#29992;zlib&#65288;&#21363;gnuzip&#65289;&#26469;&#35299;&#21387;&#65288;unpack&#65292;deflate&#65289;&#30340;&#21015;&#12290;&#22810;&#20010;&#20540;&#65292;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;&#21015;&#30340;&#31354;&#21015;&#34920;&#12290;&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
<code class="filename">indexer</code>&#20250;&#20351;&#29992;&#26631;&#20934;zlib&#31639;&#27861;&#65288;&#31216;&#20316;deflate&#65292;<code class="filename">gunzip</code>&#20063;&#23454;&#29616;&#20102;&#36825;&#20010;&#31639;&#27861;&#65289;&#23545;&#36825;&#20010;&#36873;&#39033;&#25351;&#23450;&#30340;&#37027;&#20123;&#21015;&#36827;&#34892;&#35299;&#21387;&#32553;&#12290;&#24403;&#24314;&#31435;&#32034;&#24341;&#30340;&#21160;&#20316;&#21457;&#29983;&#22312;&#25968;&#25454;&#24211;&#25152;&#22312;&#26426;&#22120;&#20197;&#22806;&#30340;&#26426;&#22120;&#26102;&#65292;&#36825;&#20010;&#36873;&#39033;&#20250;&#38477;&#20302;&#25968;&#25454;&#24211;&#30340;&#36127;&#36733;&#65292;&#24182;&#33410;&#32422;&#32593;&#32476;&#24102;&#23485;&#12290;&#35201;&#24819;&#20351;&#29992;&#36825;&#20010;&#29305;&#24615;&#65292;&#23601;&#24517;&#39035;&#20445;&#35777;&#22312;&#24314;&#31435;&#26102;zlib&#21644;zlib-devel&#37117;&#26159;&#21487;&#29992;&#30340;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
unpack_zlib = col1
unpack_zlib = col2
</pre></div>
<div class="sect2" title="11.1.50.&nbsp;unpack_mysqlcompress&#65306;MySQL&#25968;&#25454;&#28304;&#35299;&#21387;&#23383;&#27573;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-unpack-mysqlcompress"></a>11.1.50.&nbsp;unpack_mysqlcompress&#65306;MySQL&#25968;&#25454;&#28304;&#35299;&#21387;&#23383;&#27573;&#35774;&#32622;</h3></div></div></div>
<p>
&#20351;&#29992;MySQL UNCOMPRESS()&#31639;&#27861;&#35299;&#21387;&#30340;&#21015;&#12290;&#22810;&#20010;&#20540;&#65292;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;&#21015;&#30340;&#31354;&#21015;&#34920;&#12290;&#20165;&#36866;&#29992;&#20110;SQL&#25968;&#25454;&#28304;&#65288;<code class="option">mysql</code>, <code class="option">pgsql</code>, <code class="option">mssql</code>&#65289;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
<code class="filename">indexer</code>&#20250;&#20351;&#29992;MySQL COMPRESS()&#21644;UNCOMPRESS()&#20351;&#29992;&#30340;&#20462;&#25913;&#36807;&#30340;zlib&#31639;&#27861;&#23545;&#36825;&#20010;&#36873;&#39033;&#25351;&#23450;&#30340;&#37027;&#20123;&#21015;&#36827;&#34892;&#35299;&#21387;&#32553;&#12290; &#24403;&#24314;&#31435;&#32034;&#24341;&#30340;&#21160;&#20316;&#21457;&#29983;&#22312;&#25968;&#25454;&#24211;&#25152;&#22312;&#26426;&#22120;&#20197;&#22806;&#30340;&#26426;&#22120;&#26102;&#65292;&#36825;&#20010;&#36873;&#39033;&#20250;&#38477;&#20302;&#25968;&#25454;&#24211;&#30340;&#36127;&#36733;&#65292;&#24182;&#33410;&#32422;&#32593;&#32476;&#24102;&#23485;&#12290;&#35201;&#24819;&#20351;&#29992;&#36825;&#20010;&#29305;&#24615;&#65292;&#23601;&#24517;&#39035;&#20445;&#35777;&#22312;&#24314;&#31435;&#26102;zlib&#21644;zlib-devel&#37117;&#26159;&#21487;&#29992;&#30340;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
unpack_mysqlcompress = body_compressed
unpack_mysqlcompress = description_compressed
</pre></div>
<div class="sect2" title="11.1.51.&nbsp;unpack_mysqlcompress_maxsize&#65306;MySQL&#25968;&#25454;&#28304;&#35299;&#21387;&#32531;&#20914;&#21306;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-unpack-mysqlcompress-maxsize"></a>11.1.51.&nbsp;unpack_mysqlcompress_maxsize&#65306;MySQL&#25968;&#25454;&#28304;&#35299;&#21387;&#32531;&#20914;&#21306;&#35774;&#32622;</h3></div></div></div>
<p>
&#29992;&#20110;UNCOMPRESS()&#35299;&#21387;&#21518;&#25968;&#25454;&#30340;&#32531;&#20914;&#21306;&#22823;&#23567;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;16M&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#24403;&#20351;&#29992;<a class="link" href="#conf-unpack-mysqlcompress" title="11.1.50.&nbsp;unpack_mysqlcompress&#65306;MySQL&#25968;&#25454;&#28304;&#35299;&#21387;&#23383;&#27573;&#35774;&#32622;">unpack_mysqlcompress</a>&#36873;&#39033;&#26102;&#65292;&#30001;&#20110;&#23454;&#29616;&#26041;&#27861;&#26412;&#36136;&#19978;&#30340;&#38480;&#21046;&#65292;&#19981;&#21487;&#33021;&#20943;&#23567;&#32531;&#20914;&#21306;&#22823;&#23567;&#26041;&#38754;&#30340;&#38656;&#27714;&#12290;&#22240;&#27492;&#32531;&#20914;&#21306;&#24517;&#39035;&#39044;&#20808;&#20998;&#37197;&#22909;&#65292;&#35299;&#21387;&#20986;&#30340;&#25968;&#25454;&#20063;&#19981;&#33021;&#36229;&#36807;&#32531;&#20914;&#21306;&#22823;&#23567;&#12290;&#36825;&#20010;&#36873;&#39033;&#25511;&#21046;&#36825;&#20010;&#32531;&#20914;&#21306;&#22823;&#23567;&#20540;&#65292;&#26082;&#21487;&#20197;&#29992;&#20110;&#38480;&#21046;<code class="filename">indexer</code>&#30340;&#20869;&#23384;&#20351;&#29992;&#65292;&#20063;&#21487;&#20197;&#29992;&#20110;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#20351;&#35299;&#21387;&#38750;&#24120;&#22823;&#30340;&#25968;&#25454;&#21464;&#20026;&#21487;&#33021;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
unpack_mysqlcompress_maxsize = 1M
</pre></div></div>
<div class="sect1" title="11.2.&nbsp;&#32034;&#24341;&#37197;&#32622;&#36873;&#39033;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="confgroup-index"></a>11.2.&nbsp;&#32034;&#24341;&#37197;&#32622;&#36873;&#39033;</h2></div></div></div>
<div class="sect2" title="11.2.1.&nbsp;type&#65306;&#32034;&#24341;&#31867;&#22411;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-index-type"></a>11.2.1.&nbsp;type&#65306;&#32034;&#24341;&#31867;&#22411;&#35774;&#32622;</h3></div></div></div>
<p>
&#32034;&#24341;&#31867;&#22411;&#12290;&#21487;&#29992;&#30340;&#20540;&#21253;&#25324;plain&#65288;&#26222;&#36890;&#26412;&#22320;&#32034;&#24341;&#65289;&#12289;distributed&#65288;&#20998;&#24067;&#24335;&#65289;&#25110;rt&#65288;&#23454;&#26102;&#32034;&#24341;&#65289;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#20026;plain&#65288;&#32034;&#24341;&#20026;&#26222;&#36890;&#26412;&#22320;&#32034;&#24341;&#65289;&#12290;
</p><p>
Sphinx&#25903;&#25345;&#20960;&#31181;&#19981;&#21516;&#30340;&#32034;&#24341;&#31867;&#22411;&#12290;
&#29256;&#26412;0.9.x&#25903;&#25345;&#20004;&#31181;&#32034;&#24341;&#31867;&#22411;&#65306;&#26222;&#36890;&#26412;&#22320;&#32034;&#24341;&#65293;&#65293;&#22312;&#26412;&#26426;&#19978;&#23384;&#20648;&#21644;&#22788;&#29702;&#65292;&#21644;&#20998;&#24067;&#24335;&#32034;&#24341;&#65293;&#65293;&#19981;&#20165;&#28041;&#21450;&#26412;&#22320;&#25628;&#32034;&#65292;&#32780;&#19988;&#21516;&#26102;&#36890;&#36807;&#32593;&#32476;&#21521;&#36828;&#31243;<code class="filename">searchd</code>&#23454;&#20363;&#20570;&#26597;&#35810;&#65288;&#26597;&#30475;<a class="xref" href="#distributed" title="5.8.&nbsp;&#20998;&#24067;&#24335;&#25628;&#32034;">&#31532;&nbsp;5.8&nbsp;&#33410; &#8220;&#20998;&#24067;&#24335;&#25628;&#32034;&#8221;</a>&#20102;&#35299;&#35814;&#24773;&#65289;&#12290;
&#29256;&#26412;1.10-beta&#20063;&#22686;&#21152;&#20102;&#34987;&#31216;&#20026;&#23454;&#26102;&#32034;&#24341;&#65288;&#31616;&#31216;&#20026;RT&#32034;&#24341;&#65289;&#30340;&#32034;&#24341;&#31867;&#22411;&#65292;&#23427;&#20063;&#25903;&#25345;&#22312;&#26412;&#26426;&#19978;&#23384;&#20648;&#21644;&#22788;&#29702;&#65292;&#38500;&#27492;&#20043;&#22806;&#36824;&#25903;&#25345;&#20840;&#25991;&#32034;&#24341;&#25968;&#25454;&#30340;&#21363;&#26102;&#26356;&#26032;&#65288;&#26597;&#30475;<a class="xref" href="#rt-indexes" title="&#31532;&nbsp;4&nbsp;&#31456;&nbsp;RT&#23454;&#26102;&#32034;&#24341;">&#31532;&nbsp;4&nbsp;&#31456; <i>RT&#23454;&#26102;&#32034;&#24341;</i></a>&#20102;&#35299;&#35814;&#24773;&#65289;&#12290;
&#38656;&#35201;&#25552;&#37266;&#30340;&#26159;<span class="emphasis"><em>attributes</em></span>&#20540;&#22312;&#26222;&#36890;&#26412;&#22320;&#32034;&#24341;&#25110;&#32773;RT&#32034;&#24341;&#20013;&#37117;&#21487;&#20197;&#34987;&#21363;&#26102;&#26356;&#26032;&#12290;
</p><p>
&#20320;&#21487;&#20197;&#26681;&#25454;&#38656;&#35201;&#35774;&#32622;&#32034;&#24341;&#20869;&#34892;&#12290;&#32034;&#24341;&#40664;&#35748;&#26159;&#26222;&#36890;&#26412;&#22320;&#32034;&#24341;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
type = distributed
</pre></div>
<div class="sect2" title="11.2.2.&nbsp;source&#65306;&#25991;&#26723;&#28304;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-source"></a>11.2.2.&nbsp;source&#65306;&#25991;&#26723;&#28304;</h3></div></div></div>
<p>
&#21521;&#26412;&#22320;&#32034;&#24341;&#22686;&#21152;&#25991;&#26723;&#28304;&#12290;&#21487;&#20197;&#20986;&#29616;&#22810;&#27425;&#65292;&#24517;&#39035;&#36873;&#39033;&#12290;
</p><p>
&#20026;&#24403;&#21069;&#32034;&#24341;&#25351;&#23450;&#19968;&#20010;&#20174;&#20013;&#21487;&#20197;&#33719;&#21462;&#25991;&#26723;&#30340;&#25991;&#26723;&#28304;&#12290;&#24517;&#39035;&#33267;&#23569;&#26377;&#19968;&#20010;&#25991;&#26723;&#28304;&#12290;&#21487;&#20197;&#26377;&#22810;&#20010;&#25991;&#26723;&#28304;&#65292;&#20219;&#20309;&#25968;&#25454;&#28304;&#31867;&#22411;&#37117;&#21487;&#25509;&#21463;&#65306;&#21363;&#24744;&#21487;&#20197;&#20174;MySQL&#26381;&#21153;&#22120;&#20013;&#33719;&#21462;&#19968;&#37096;&#20998;&#25968;&#25454;&#65292;&#20174;PostgreSQL&#20013;&#33719;&#21462;&#21478;&#19968;&#37096;&#20998;&#65292;&#20877;&#22312;&#25991;&#20214;&#31995;&#32479;&#19978;&#20351;&#29992;xmlpipe2&#33719;&#21462;&#19968;&#37096;&#20998;&#12290;
</p><p>
&#28982;&#32780;&#65292;&#23545;&#28304;&#25968;&#25454;&#21364;&#26377;&#19968;&#20123;&#38480;&#21046;&#12290;&#39318;&#20808;&#65292;&#25991;&#26723;ID&#24517;&#39035;&#22312;&#25152;&#26377;&#28304;&#30340;&#24635;&#20307;&#19978;&#26159;&#21807;&#19968;&#30340;&#12290;&#22914;&#26524;&#36825;&#20010;&#26465;&#20214;&#19981;&#28385;&#36275;&#65292;&#37027;&#21487;&#33021;&#23548;&#33268;&#38750;&#39044;&#26399;&#30340;&#25628;&#32034;&#32467;&#26524;&#12290;&#20854;&#27425;&#65292;&#28304;&#30340;&#27169;&#24335;&#24517;&#39035;&#30456;&#21516;&#65292;&#20197;&#20415;&#22312;&#21516;&#19968;&#20010;&#32034;&#24341;&#20013;&#23384;&#20648;&#12290;
</p><p>
&#25968;&#25454;&#26469;&#28304;&#30340;ID&#19981;&#20250;&#34987;&#33258;&#21160;&#23384;&#20648;&#12290;&#22240;&#27492;&#65292;&#20026;&#20102;&#33719;&#30693;&#21305;&#37197;&#30340;&#25991;&#26723;&#26159;&#20174;&#21738;&#20010;&#25968;&#25454;&#28304;&#20013;&#26469;&#30340;&#65292;&#38656;&#35201;&#25163;&#24037;&#23384;&#20648;&#19968;&#20123;&#39069;&#22806;&#30340;&#20449;&#24687;&#12290;&#36890;&#24120;&#26377;&#20004;&#31181;&#26041;&#27861;&#65306;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">&#20462;&#25913;&#25991;&#26723;ID&#65292;&#23558;&#28304;ID&#32534;&#30721;&#36827;&#21435;&#65306;
<pre class="programlisting">
source src1
{
	sql_query = SELECT id*10+1, ... FROM table1
	...
}

source src2
{
	sql_query = SELECT id*10+2, ... FROM table2
	...
}
</pre></li>
<li class="listitem">
&#23558;&#25968;&#25454;&#26469;&#28304;&#23384;&#20648;&#20026;&#19968;&#20010;&#23646;&#24615;&#65306;
<pre class="programlisting">
source src1
{
	sql_query = SELECT id, 1 AS source_id FROM table1
	sql_attr_uint = source_id
	...
}

source src2
{
	sql_query = SELECT id, 2 AS source_id FROM table2
	sql_attr_uint = source_id
	...
}
</pre></li>
</ol></div>
<p>
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
source = srcpart1
source = srcpart2
source = srcpart3
</pre></div>
<div class="sect2" title="11.2.3.&nbsp;path&#65306;&#32034;&#24341;&#25991;&#20214;&#36335;&#24452;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-path"></a>11.2.3.&nbsp;path&#65306;&#32034;&#24341;&#25991;&#20214;&#36335;&#24452;</h3></div></div></div>
<p>
&#32034;&#24341;&#25991;&#20214;&#30340;&#36335;&#24452;&#21644;&#25991;&#20214;&#21517;&#65288;&#19981;&#21253;&#25324;&#25193;&#23637;&#21517;&#65289;&#12290;&#24517;&#39035;&#36873;&#39033;&#12290;
</p><p>
path&#26082;&#21253;&#25324;&#25991;&#20214;&#22841;&#20063;&#21253;&#25324;&#25991;&#20214;&#21517;&#65292;&#20294;&#19981;&#21253;&#25324;&#25193;&#23637;&#21517;&#12290;<code class="filename">indexer</code>&#22312;&#20135;&#29983;&#27704;&#20037;&#21644;&#20020;&#26102;&#32034;&#24341;&#25991;&#20214;&#30340;&#26368;&#32456;&#21517;&#23383;&#26102;&#20250;&#38468;&#21152;&#19978;&#19981;&#21516;&#30340;&#25193;&#23637;&#21517;&#12290;&#27704;&#20037;&#25968;&#25454;&#25991;&#20214;&#26377;&#20960;&#20010;&#19981;&#21516;&#30340;&#25193;&#23637;&#21517;&#65292;&#37117;&#20197;&#8220;.sp&#8221;&#24320;&#22836;&#65292;&#20020;&#26102;&#25991;&#20214;&#30340;&#25193;&#23637;&#21517;&#20197;&#8220;.tmp&#8221;&#24320;&#22836;&#12290;&#22914;&#26524;indexer&#27809;&#26377;&#25104;&#21151;&#22320;&#33258;&#21160;&#21024;&#38500;<code class="filename">.tmp*</code>&#25991;&#20214;&#65292;&#25163;&#24037;&#21024;&#38500;&#26159;&#23433;&#20840;&#30340;&#12290;
</p><p>
&#20197;&#19979;&#26159;&#19981;&#21516;&#32034;&#24341;&#25991;&#20214;&#25152;&#23384;&#20648;&#30340;&#25968;&#25454;&#31181;&#31867;&#65292;&#20379;&#21442;&#32771;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="filename">.spa</code> &#23384;&#20648;&#25991;&#26723;&#23646;&#24615;&#65288;&#20165;&#22312;<a class="link" href="#conf-docinfo" title="11.2.4.&nbsp;docinfo&#65306;&#25991;&#26723;&#20449;&#24687;&#23384;&#20648;&#27169;&#24335;">extern &#25991;&#26723;&#20449;&#24687;</a>&#23384;&#20648;&#27169;&#24335;&#20013;&#20351;&#29992;&#65289;&#65307;</li>
<li class="listitem"><code class="filename">.spd</code> &#23384;&#20648;&#27599;&#20010;&#35789;ID&#21487;&#21305;&#37197;&#30340;&#25991;&#26723;ID&#21015;&#34920;&#65307;</li>
<li class="listitem"><code class="filename">.sph</code> &#23384;&#20648;&#32034;&#24341;&#22836;&#20449;&#24687;&#65307;</li>
<li class="listitem"><code class="filename">.spi</code> &#23384;&#20648;&#35789;&#21015;&#34920;&#65288;&#35789;ID&#21644;&#25351;&#21521;<code class="filename">.spd</code>&#25991;&#20214;&#30340;&#25351;&#38024;&#65289;&#65307;</li>
<li class="listitem"><code class="filename">.spk</code> &#23384;&#20648;kill-lists;</li>
<li class="listitem"><code class="filename">.spm</code> &#23384;&#20648;MVA&#25968;&#25454;&#65307;</li>
<li class="listitem"><code class="filename">.spp</code> &#23384;&#20648;&#27599;&#20010;&#35789;ID&#30340;&#21629;&#20013;&#65288;&#25110;&#32773;&#35828;&#35760;&#36134;&#65292;&#25110;&#32773;&#35789;&#30340;&#20986;&#29616;&#65289;&#21015;&#34920;&#65307;</li>
<li class="listitem"><code class="filename">.sps</code> &#23384;&#20648;&#23383;&#31526;&#20018;&#23646;&#24615;&#25968;&#25454;.</li>
</ul></div>
<p>
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
path = /var/data/test1
</pre></div>
<div class="sect2" title="11.2.4.&nbsp;docinfo&#65306;&#25991;&#26723;&#20449;&#24687;&#23384;&#20648;&#27169;&#24335;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-docinfo"></a>11.2.4.&nbsp;docinfo&#65306;&#25991;&#26723;&#20449;&#24687;&#23384;&#20648;&#27169;&#24335;</h3></div></div></div>
<p>
&#25991;&#26723;&#20449;&#24687;(docinfo)&#30340;&#23384;&#20648;&#27169;&#24335;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#26159;&#8220;extern&#8221;&#65292;&#21487;&#29992;&#30340;&#20540;&#21253;&#25324;'none', 'extern' &#21644; 'inline'.&#12290;
</p><p>
&#27492;&#36873;&#39033;&#30830;&#20999;&#23450;&#20041;&#20102;&#25991;&#26723;&#20449;&#24687;&#22312;&#30913;&#30424;&#21644;RAM&#20013;&#30340;&#29289;&#29702;&#23384;&#20648;&#26041;&#24335;&#12290;&#8220;none&#8221;&#24847;&#24605;&#26159;&#26681;&#26412;&#19981;&#23384;&#20648;&#25991;&#26723;&#20449;&#24687;&#65288;&#27809;&#26377;&#20219;&#20309;&#23646;&#24615;&#65289;&#12290;&#36890;&#24120;&#24182;&#19981;&#38656;&#35201;&#26174;&#24335;&#35774;&#32622;&#20026;&#8220;none&#8221;&#22240;&#20026;&#24403;&#27809;&#26377;&#37197;&#32622;&#20219;&#20309;&#23646;&#24615;&#26102;Sphinx&#20250;&#33258;&#21160;&#36873;&#25321;&#8220;none&#8221;&#12290;&#8220;inline&#8221;&#20195;&#34920;&#25991;&#26723;&#20449;&#24687;&#19982;&#25991;&#26723;ID&#21015;&#34920;&#19968;&#21516;&#23384;&#20648;&#22312;&#22312;<code class="filename">.spd</code>&#25991;&#20214;&#20013;&#12290;&#8220;extern&#8221;&#20195;&#34920;&#25991;&#26723;&#20449;&#24687;&#19982;&#25991;&#26723;ID&#20998;&#24320;&#65288;&#22312;&#22806;&#37096;&#65289;&#23384;&#20648;&#65288;&#22312;<code class="filename">.spa</code>&#25991;&#20214;&#20013;&#65289;&#12290;
</p><p>
&#22522;&#26412;&#19978;&#65292;&#22806;&#37096;&#23384;&#20648;&#30340;&#25991;&#26723;&#20449;&#24687;&#22312;&#26597;&#35810;&#26102;&#24517;&#39035;&#20445;&#25345;&#22312;&#20869;&#23384;&#20013;&#12290;&#36825;&#26159;&#24615;&#33021;&#30340;&#21407;&#22240;&#12290;&#22240;&#27492;&#26377;&#26102;&#20505;&#8220;inline&#8221;&#26159;&#21807;&#19968;&#30340;&#36873;&#25321;&#12290;&#28982;&#32780;&#36825;&#31181;&#24773;&#20917;&#24182;&#19981;&#22810;&#35265;&#65292;&#25991;&#26723;&#20449;&#24687;&#40664;&#35748;&#26159;&#8220;extern&#8221;&#23384;&#20648;&#30340;&#12290;&#28145;&#20837;&#30340;&#25506;&#35752;&#21644;RAM&#20351;&#29992;&#30340;&#20272;&#35745;&#35831;&#21442;&#35265;<a class="xref" href="#attributes" title="3.2.&nbsp;&#23646;&#24615;">&#31532;&nbsp;3.2&nbsp;&#33410; &#8220;&#23646;&#24615;&#8221;</a>&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
docinfo = inline
</pre></div>
<div class="sect2" title="11.2.5.&nbsp;mlock&#65306;&#32531;&#20914;&#25968;&#25454;&#20869;&#23384;&#38145;&#23450;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-mlock"></a>11.2.5.&nbsp;mlock&#65306;&#32531;&#20914;&#25968;&#25454;&#20869;&#23384;&#38145;&#23450;</h3></div></div></div>
<p>
&#24050;&#32531;&#20914;&#25968;&#25454;&#30340;&#20869;&#23384;&#38145;&#23450;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;0&#65288;&#19981;&#35843;&#29992;mlock()&#65289;
</p><p>
&#20026;&#25552;&#39640;&#24615;&#33021;&#65292;<code class="filename">searchd</code>&#23558;<code class="filename">.spa</code>&#21644;<code class="filename">.spi</code>&#25991;&#20214;&#39044;&#21462;&#21040;&#20869;&#23384;&#20013;&#65292;&#24182;&#19968;&#30452;&#22312;&#20869;&#23384;&#20013;&#20445;&#23384;&#23427;&#20204;&#30340;&#25335;&#36125;&#12290;&#20294;&#22914;&#26524;&#19968;&#27573;&#26102;&#38388;&#20869;&#27809;&#26377;&#23545;&#35813;&#32034;&#24341;&#30340;&#25628;&#32034;&#65292;&#21017;&#23545;&#36825;&#20221;&#32531;&#20914;&#30340;&#25335;&#36125;&#27809;&#26377;&#20869;&#23384;&#35775;&#38382;&#65292;&#32780;&#25805;&#20316;&#31995;&#32479;&#21487;&#33021;&#20250;&#20915;&#23450;&#23558;&#23427;&#20132;&#25442;&#21040;&#30913;&#30424;&#19978;&#21435;&#12290;&#23545;&#36825;&#20123;&#8220;&#20919;&#21364;&#8221;&#20102;&#30340;&#32034;&#24341;&#30340;&#35775;&#38382;&#20250;&#23548;&#33268;&#20854;&#20132;&#25442;&#22238;&#20869;&#23384;&#24182;&#24471;&#21040;&#19968;&#20010;&#36739;&#22823;&#30340;&#24310;&#36831;&#12290;
</p><p>
&#23558;mlock&#36873;&#39033;&#35774;&#32622;&#20026;1&#20250;&#20351;Sphinx&#20351;&#29992;mlock(2)&#31995;&#32479;&#35843;&#29992;&#23558;&#23384;&#20648;&#19978;&#36848;&#32531;&#20914;&#20102;&#30340;&#25968;&#25454;&#30340;&#31995;&#32479;&#20869;&#23384;&#38145;&#23450;&#65292;&#36825;&#23558;&#36991;&#20813;&#20869;&#23384;&#20132;&#25442;&#65288;&#35814;&#24773;&#21442;&#35265;man 2 mlock&#65289;&#12290;mlock(2)&#26159;&#29305;&#26435;&#35843;&#29992;&#65292;&#22240;&#27492;&#21487;&#33021;&#38656;&#35201;<code class="filename">searchd</code>&#20197;root&#36134;&#25143;&#36816;&#34892;&#25110;&#36890;&#36807;&#20854;&#20182;&#21150;&#27861;&#36171;&#20104;&#36275;&#22815;&#30340;&#26435;&#38480;&#12290;&#22914;&#26524;mlock()&#22833;&#36133;&#20250;&#21457;&#20986;&#35686;&#21578;&#65292;&#20294;&#32034;&#24341;&#20250;&#32487;&#32493;&#36827;&#34892;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
mlock = 1
</pre></div>
<div class="sect2" title="11.2.6.&nbsp;morphology&#65306;&#35789;&#24418;&#22788;&#29702;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-morphology"></a>11.2.6.&nbsp;morphology&#65306;&#35789;&#24418;&#22788;&#29702;</h3></div></div></div>
<p>
&#35789;&#24418;&#22788;&#29702;&#22120;&#30340;&#21015;&#34920;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#65288;&#19981;&#20351;&#29992;&#20219;&#20309;&#35789;&#24418;&#22788;&#29702;&#22120;&#65289;&#12290;
</p><p>
&#35789;&#24418;&#22788;&#29702;&#22120;&#21487;&#20197;&#23558;&#24453;&#32034;&#24341;&#30340;&#35789;&#20174;&#21508;&#31181;&#24418;&#24577;&#21464;&#25104;&#22522;&#26412;&#30340;&#35268;&#21017;&#30340;&#24418;&#24577;&#12290;&#20363;&#22914;&#65292;&#33521;&#35821;&#35789;&#24178;&#25552;&#21462;&#22120;&#65288;English stemmer&#65289;&#21487;&#20197;&#23558;&#8220;dogs&#8221;&#21644;&#8220;dog&#8221;&#37117;&#21464;&#25104;&#8220;dog&#8221;&#65292;&#36825;&#20351;&#25628;&#32034;&#36825;&#20004;&#20010;&#35789;&#30340;&#32467;&#26524;&#37117;&#30456;&#21516;&#12290;
</p><p>
&#20869;&#32622;&#30340;&#35789;&#24418;&#22788;&#29702;&#22120;&#21253;&#25324;&#33521;&#35821;&#35789;&#24178;&#25552;&#21462;&#22120;&#65292;&#20420;&#35821;&#35789;&#24178;&#25552;&#21462;&#22120;&#65288;&#25903;&#25345;UTF-8&#21644;Windows-1251&#32534;&#30721;&#65289;&#65292;Soundex&#21644;Metaphone&#12290;&#21518;&#38754;&#20004;&#20010;&#20250;&#23558;&#35789;&#26367;&#25442;&#25104;&#29305;&#27530;&#30340;&#35821;&#38899;&#32534;&#30721;&#65292;&#36825;&#20250;&#20351;&#21457;&#38899;&#30456;&#36817;&#30340;&#35789;&#34920;&#31034;&#24418;&#24335;&#30456;&#21516;&#12290;<a class="ulink" href="http://snowball.tartarus.org/" target="_top">Snowball</a> &#39033;&#30446;&#30340;<a class="ulink" href="http://snowball.tartarus.org/dist/libstemmer_c.tgz" target="_top">libstemmer</a> &#24211;&#25552;&#20379;&#30340;&#39069;&#22806;&#35789;&#24178;&#25552;&#21462;&#22120;&#21487;&#20197;&#36890;&#36807;&#22312;&#32534;&#35793;&#26399;&#23545;<code class="filename">configure</code> &#33050;&#26412;&#20351;&#29992;<code class="option">--with-libstemmer</code>&#36873;&#39033;&#26469;&#21551;&#29992;&#12290;&#20869;&#24314;&#30340;&#33521;&#35821;&#21644;&#20420;&#35821;&#35789;&#24178;&#25552;&#21462;&#22120;&#35201;&#27604;&#23427;&#20204;&#22312;libstemmer&#20013;&#30340;&#23545;&#24212;&#29289;&#27169;&#22359;&#36816;&#34892;&#26356;&#24555;&#65292;&#20294;&#23427;&#20204;&#30340;&#32467;&#26524;&#21487;&#33021;&#30053;&#26377;&#19981;&#21516;&#65292;&#22240;&#20026;&#20869;&#24314;&#30340;&#29256;&#26412;&#22522;&#20110;&#36739;&#26087;&#30340;&#29256;&#26412;&#12290;Metaphone&#22522;&#20110;Double Metaphone&#31639;&#27861;&#23454;&#29616;&#12290;Metaphone&#26159;
&#22522;&#20110;Double Metaphone&#30340;&#31639;&#27861;&#21644;&#32034;&#24341;&#30340;&#20027;&#35201;&#20195;&#30721;&#23454;&#29616;&#30340;&#12290;
</p><p>
&#22312;<code class="option">morphology</code>&#36873;&#39033;&#20013;&#21487;&#20351;&#29992;&#30340;&#20869;&#24314;&#20540;&#21253;&#25324;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">none - &#19981;&#20570;&#20219;&#20309;&#35789;&#24418;&#22788;&#29702;&#65292;&#20445;&#25345;&#21407;&#26679;;</li>
<li class="listitem">stem_en - &#24212;&#29992;&#23454;&#29616;&#30340;&#33521;&#35821;&#35789;&#24178;;</li>
<li class="listitem">stem_ru - &#24212;&#29992;&#23454;&#29616;&#30340;&#20420;&#35821;&#35789;&#24178;;</li>
<li class="listitem">stem_enru - &#24212;&#29992;&#23454;&#29616;&#30340;&#33521;&#35821;&#21644;&#20420;&#35821;&#35789;&#24178;;</li>
<li class="listitem">stem_cz - &#24212;&#29992;&#23454;&#29616;&#30340;&#25463;&#20811;&#35821;&#35789;&#24178;;</li>
<li class="listitem">soundex - &#29992;&#20851;&#38190;&#23383;&#30340;SOUNDEX&#32534;&#30721;&#21462;&#20195;&#23427;;</li>
<li class="listitem">metaphone - &#29992;&#20851;&#38190;&#23383;&#30340;METAPHONE&#32534;&#30721;&#21462;&#20195;&#23427;.</li>
</ul></div>
<p>
libstemmer&#25552;&#20379;&#30340;&#39069;&#22806;&#20540;&#26684;&#24335;&#20026;&#8220;libstemmer_XXX&#8221;&#65292;XXX&#25351;libstemmer&#31639;&#27861;&#30340;&#20195;&#21495;&#12290;&#65288;&#23436;&#25972;&#21015;&#34920;&#21442;&#35265;<code class="filename">libstemmer_c/libstemmer/modules.txt</code>&#65289;
</p><p>
&#21487;&#20197;&#25351;&#23450;&#22810;&#20010;&#35789;&#24178;&#25552;&#21462;&#22120;&#65288;&#20197;&#36887;&#21495;&#20998;&#38548;&#65289;&#12290;&#36825;&#20123;&#25552;&#21462;&#22120;&#25353;&#21015;&#20986;&#30340;&#39034;&#24207;&#24212;&#29992;&#20110;&#36755;&#20837;&#35789;&#20018;&#65292;&#25972;&#20010;&#22788;&#29702;&#20250;&#22312;&#31532;&#19968;&#20010;&#30495;&#27491;&#20462;&#25913;&#20102;&#21407;&#35789;&#30340;&#35789;&#24178;&#25552;&#21462;&#22120;&#20043;&#21518;&#20572;&#27490;&#12290;&#21478;&#22806;&#65292;&#24403;<a class="link" href="#conf-wordforms" title="11.2.12.&nbsp;wordforms&#65306;&#35789;&#24418;&#23383;&#20856;">wordforms</a> &#29305;&#24615;&#21551;&#29992;&#26102;&#65292;&#35789;&#20250;&#29616;&#22312;&#35789;&#24418;&#23383;&#20856;&#20013;&#26597;&#35810;&#65292;&#22914;&#26524;&#35789;&#20856;&#20013;&#26377;&#23545;&#24212;&#30340;&#26465;&#30446;&#65292;&#37027;&#20040;&#35789;&#24178;&#25552;&#21462;&#22120;&#24178;&#33030;&#19981;&#20250;&#34987;&#20351;&#29992;&#12290;&#25442;&#20010;&#35828;&#27861;&#65292;<a class="link" href="#conf-wordforms" title="11.2.12.&nbsp;wordforms&#65306;&#35789;&#24418;&#23383;&#20856;">wordforms</a>&#36873;&#39033;&#21487;&#20197;&#29992;&#26469;&#34917;&#20805;&#25351;&#23450;&#35789;&#24178;&#25552;&#21462;&#22120;&#30340;&#20363;&#22806;&#24773;&#20917;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
morphology = stem_en, libstemmer_sv
</pre></div>
<div class="sect2" title="11.2.7.&nbsp;dict&#65306;&#20851;&#38190;&#23383;&#35789;&#20856;&#31867;&#22411;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-dict"></a>11.2.7.&nbsp;dict&#65306;&#20851;&#38190;&#23383;&#35789;&#20856;&#31867;&#22411;</h3></div></div></div>
<p>
&#20851;&#38190;&#23383;&#35789;&#20856;&#30340;&#31867;&#22411;&#12290;
&#21487;&#29992;&#20540;&#20026;crc&#25110;&#32773;keywords&#12290;
&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;crc&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
The default dictionary type in Sphinx, and the only one available
until version 2.0.1-beta, is a so-called CRC dictionary which never
stores the original keyword text in the index. Instead, keywords are
replaced with their control sum value (either CRC32 or FNV64, depending
whether Sphinx was built with <code class="option">--enable-id64</code>) both
when searching and indexing, and that value is used internally
in the index.
</p><p>
That approach has two drawbacks. First, in CRC32 case there is
a chance of control sum collision between several pairs of different
keywords, growing quadratically with the number of unique keywords
in the index. (FNV64 case is unaffected in practice, as a chance
of a single FNV64 collision in a dictionary of 1 billion entries
is approximately 1:16, or 6.25 percent. And most dictionaries
will be much more compact that a billion keywords, as a typical
spoken human language has in the region of 1 to 10 million word
forms.) Second, and more importantly, substring searches are not
directly possible with control sums. Sphinx alleviated that by
pre-indexing all the possible substrings as separate keywords
(&#21442;&#35265; <a class="xref" href="#conf-min-prefix-len" title="11.2.18.&nbsp;min_prefix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#21069;&#32512;&#38271;&#24230;">&#31532;&nbsp;11.2.18&nbsp;&#33410; &#8220;min_prefix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#21069;&#32512;&#38271;&#24230;&#8221;</a>, <a class="xref" href="#conf-min-infix-len" title="11.2.19.&nbsp;min_infix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#20013;&#32512;&#38271;&#24230;">&#31532;&nbsp;11.2.19&nbsp;&#33410; &#8220;min_infix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#20013;&#32512;&#38271;&#24230;&#8221;</a>
directives). That actually has an added benefit of matching
substrings in the quickest way possible. But at the same time
pre-indexing all substrings grows the index size a lot (factors
of 3-10x and even more would not be unusual) and impacts the
indexing time respectively, rendering substring searches
on big indexes rather impractical.
</p><p>
Keywords dictionary, introduced in 2.0.1-beta, fixes both these
drawbacks. It stores the keywords in the index and performs
search-time wildcard expansion. For example, a search for a
'test*' prefix could internally expand to 'test|tests|testing'
query based on the dictionary contents. That expansion is fully
transparent to the application, except that the separate
per-keyword statistics for all the actually matched keywords 
would now also be reported.
</p><p>
Indexing with keywords dictionary should be 1.1x to 1.3x slower
compared to regular, non-substring indexing - but times faster
compared to substring indexing (either prefix or infix). Index size
should only be slightly bigger that than of the regular non-substring
index, with a 1..10% percent total difference
Regular keyword searching time must be very close or identical across
all three discussed index kinds (CRC non-substring, CRC substring,
keywords). Substring searching time can vary greatly depending
on how many actual keywords match the given substring (in other
words, into how many keywords does the search term expand).
The maximum number of keywords matched is restricted by the
<a class="link" href="#conf-expansion-limit" title="11.4.39.&nbsp;expansion_limit&#65306;&#20851;&#38190;&#23383;&#23637;&#24320;&#38480;&#21046;">expansion_limit</a>
directive.
</p><p>
Essentially, keywords and CRC dictionaries represent the two
different trade-off substring searching decisions. You can choose
to either sacrifice indexing time and index size in favor of
top-speed worst-case searches (CRC dictionary), or only slightly
impact indexing time but sacrifice worst-case searching time when
the prefix expands into very many keywords (keywords dictionary).
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
dict = keywords
</pre></div>
<div class="sect2" title="11.2.8.&nbsp;index_sp&#65306;&#32034;&#24341;&#21477;&#23376;&#21644;&#27573;&#33853;&#20449;&#24687;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-index-sp"></a>11.2.8.&nbsp;index_sp&#65306;&#32034;&#24341;&#21477;&#23376;&#21644;&#27573;&#33853;&#20449;&#24687;</h3></div></div></div>
<p>
&#26159;&#21542;&#26816;&#27979;&#24182;&#32034;&#24341;&#21477;&#23376;&#21644;&#27573;&#33853;&#36793;&#30028;&#12290;
&#21487;&#36873;&#20540;&#65292;&#40664;&#35748;&#20026;0&#65288;&#19981;&#26816;&#27979;&#21644;&#32034;&#24341;&#65289;&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
This directive enables sentence and paragraph boundary indexing.
It's required for the SENTENCE and PARAGRAPH operators to work.
Sentence boundary detection is based on plain text analysis, so you
only need to set <code class="code">index_sp = 1</code> to enable it. Paragraph
detection is however based on HTML markup, and happens in the
<a class="link" href="#conf-html-strip" title="11.2.27.&nbsp;html_strip&#65306;HTMl&#26631;&#35760;&#28165;&#29702;">HTML stripper</a>.
So to index paragraph locations you also need to enable the stripper
by specifying <code class="code">html_strip = 1</code>. Both types of boundaries
are detected based on a few built-in rules enumerated just below.
</p><p>
Sentence boundary detection rules are as follows.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Question and excalamation signs (? and !) are always a sentence boundary.</li>
<li class="listitem">Trailing dot (.) is a sentence boundary, except:
	<div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">When followed by a letter. That's considered a part of an abbreviation (as in "S.T.A.L.K.E.R" or "Goldman Sachs S.p.A.").</li>
<li class="listitem">When followed by a comma. That's considered an abbreviation followed by a comma (as in "Telecom Italia S.p.A., founded in 1994").</li>
<li class="listitem">When followed by a space and a small letter. That's considered an abbreviation within a sentence (as in "News Corp. announced in Februrary").</li>
<li class="listitem">When preceded by a space and a capital letter, and followed by a space. That's considered a middle initial (as in "John D. Doe").</li>
</ul></div></li>
</ul></div>
<p>
</p><p>
Paragraph boundaries are inserted at every block-level HTML tag.
Namely, those are (as taken from HTML 4 standard) ADDRESS, BLOCKQUOTE,
CAPTION, CENTER, DD, DIV, DL, DT, H1, H2, H3, H4, H5, LI, MENU, OL, P,
PRE, TABLE, TBODY, TD, TFOOT, TH, THEAD, TR, and UL.
</p><p>
Both sentences and paragraphs increment the keyword position counter by 1.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
index_sp = 1
</pre></div>
<div class="sect2" title="11.2.9.&nbsp;index_zones&#65306;&#32034;&#24341;&#26631;&#31614;&#21306;&#22495;&#20449;&#24687;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-index-zones"></a>11.2.9.&nbsp;index_zones&#65306;&#32034;&#24341;&#26631;&#31614;&#21306;&#22495;&#20449;&#24687;</h3></div></div></div>
<p>
&#23383;&#27573;&#20869;&#38656;&#35201;&#32034;&#24341;&#30340;HTML/XML&#21306;&#22495;&#30340;&#26631;&#31614;&#21015;&#34920;&#12290;
&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#65288;&#19981;&#32034;&#24341;&#21306;&#22495;&#65289;&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Zones can be formally defined as follows. Everything between
an opening and a matching closing tag is called a span, and
the aggregate of all spans corresponding sharing the same
tag name is called a zone. For instance, everything between
the occurrences of &lt;H1&gt; and &lt;/H1&gt; in the document
field belongs to H1 zone.
</p><p>
Zone indexing, enabled by <code class="code">index_zones</code> directive,
is an optional extension of the HTML stripper. So it will also
require that the <a class="link" href="#conf-html-strip" title="11.2.27.&nbsp;html_strip&#65306;HTMl&#26631;&#35760;&#28165;&#29702;">stripper</a>
is enabled (with <code class="code">html_strip = 1</code>). The value of the
<code class="code">index_zones</code> should be a comma-separated list of
those tag names and wildcards (ending with a star) that should
be indexed as zones.
</p><p>
Zones can nest and overlap arbitrarily. The only requirement
is that every opening tag has a matching tag. You can also have
an arbitrary number of both zones (as in unique zone names,
such as H1) and spans (all the occurrences of those H1 tags)
in a document.
Once indexed, zones can then be used for matching with
the ZONE operator, &#21442;&#35265; <a class="xref" href="#extended-syntax" title="5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;">&#31532;&nbsp;5.3&nbsp;&#33410; &#8220;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;&#8221;</a>.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
index_zones = h*, th, title
</pre></div>
<div class="sect2" title="11.2.10.&nbsp;min_stemming_len&#65306;&#35789;&#24178;&#21270;&#26368;&#23567;&#35789;&#38271;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-min-stemming-len"></a>11.2.10.&nbsp;min_stemming_len&#65306;&#35789;&#24178;&#21270;&#26368;&#23567;&#35789;&#38271;</h3></div></div></div>
<p>
&#21551;&#29992;&#35789;&#24178;&#21270;&#30340;&#26368;&#23567;&#35789;&#38271;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;1&#65288;&#23545;&#20219;&#20309;&#35789;&#37117;&#36827;&#34892;&#35789;&#24178;&#21270;&#65289;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#35789;&#24178;&#21270;&#26041;&#27861;&#24182;&#19981;&#23436;&#32654;&#65292;&#26377;&#26102;&#20250;&#20135;&#29983;&#29992;&#25143;&#19981;&#24819;&#35201;&#30340;&#32467;&#26524;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#29992;&#33521;&#35821;&#30340;Porter stemmer&#35789;&#24178;&#21270;&#31639;&#27861;&#22788;&#29702;&#20851;&#38190;&#35789;&#8220;gps&#8221;&#65292;&#24471;&#21040;&#30340;&#32467;&#26524;&#26159;&#8220;gp&#8221;&#65292;&#26174;&#28982;&#36825;&#26159;&#19981;&#23545;&#30340;&#12290;<code class="option">min_stemming_len</code>&#36825;&#20010;&#29305;&#24615;&#20801;&#35768;&#26681;&#25454;&#35789;&#30340;&#38271;&#24230;&#26469;&#20915;&#23450;&#26159;&#21542;&#36339;&#36807;&#35789;&#24178;&#21270;&#65292;&#21363;&#19981;&#23545;&#36739;&#30701;&#30340;&#35789;&#36827;&#34892;&#35789;&#24178;&#21270;&#12290;&#27880;&#24847;&#65292;&#35789;&#38271;&#31561;&#20110;&#36825;&#20010;&#36873;&#39033;&#35774;&#32622;&#30340;&#20540;&#30340;&#35789;<span class="bold"><strong>&#20250;</strong></span>&#34987;&#35789;&#24178;&#21270;&#12290;&#22240;&#27492;&#35201;&#36991;&#20813;&#23545;3&#20010;&#23383;&#31526;&#38271;&#30340;&#20851;&#38190;&#35789;&#36827;&#34892;&#35789;&#24178;&#21270;&#65292;&#24517;&#39035;&#25351;&#23450;&#36825;&#20010;&#36873;&#39033;&#30340;&#20540;&#20026;4&#12290;&#35201;&#27963;&#30340;&#26356;&#32454;&#31890;&#24230;&#30340;&#25511;&#21046;&#65292;&#35831;&#21442;&#32771;<a class="link" href="#conf-wordforms" title="11.2.12.&nbsp;wordforms&#65306;&#35789;&#24418;&#23383;&#20856;">wordforms</a>&#36825;&#20010;&#29305;&#24615;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
min_stemming_len = 4
</pre></div>
<div class="sect2" title="11.2.11.&nbsp;stopwords&#65306;&#20572;&#27490;&#35789;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-stopwords"></a>11.2.11.&nbsp;stopwords&#65306;&#20572;&#27490;&#35789;</h3></div></div></div>
<p>
&#20572;&#29992;&#35789;&#25991;&#20214;&#21015;&#34920;&#65288;&#31354;&#26684;&#20998;&#38548;&#65289;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
</p><p>
&#20572;&#29992;&#35789;&#26159;&#19981;&#34987;&#32034;&#24341;&#30340;&#35789;&#12290;&#20572;&#29992;&#35789;&#34920;&#19968;&#33324;&#21253;&#25324;&#26368;&#24120;&#29992;&#30340;&#39640;&#39057;&#35789;&#65292;&#22240;&#20026;&#23427;&#20204;&#23545;&#25628;&#32034;&#32467;&#26524;&#27809;&#26377;&#22810;&#22823;&#24110;&#21161;&#21364;&#28040;&#32791;&#24456;&#22810;&#22788;&#29702;&#36164;&#28304;&#12290;
</p><p>
&#21487;&#20197;&#25351;&#23450;&#22810;&#20010;&#25991;&#20214;&#21517;&#65292;&#29992;&#31354;&#26684;&#20998;&#38548;&#12290;&#25152;&#26377;&#25991;&#20214;&#37117;&#20250;&#34987;&#36733;&#20837;&#12290;&#20572;&#29992;&#35789;&#25991;&#20214;&#30340;&#26684;&#24335;&#26159;&#31616;&#21333;&#30340;&#32431;&#25991;&#26412;&#12290;&#20854;&#32534;&#30721;&#24517;&#39035;&#19982;<a class="link" href="#conf-charset-type" title="11.2.15.&nbsp;charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;">charset_type</a>&#36873;&#39033;&#25152;&#25351;&#23450;&#30340;&#32034;&#24341;&#32534;&#30721;&#30456;&#21305;&#37197;&#12290;&#25991;&#20214;&#25968;&#25454;&#20250;&#26681;&#25454;<a class="link" href="#conf-charset-type" title="11.2.15.&nbsp;charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;">charset_type</a>&#36873;&#39033;&#30340;&#35774;&#32622;&#36827;&#34892;&#20999;&#20998;&#65292;&#22240;&#27492;&#24744;&#21487;&#20197;&#20351;&#29992;&#19982;&#24453;&#32034;&#24341;&#25968;&#25454;&#30456;&#21516;&#30340;&#20998;&#38548;&#31526;&#12290;&#35789;&#24178;&#25552;&#21462;&#22120;&#65288;<a class="link" href="#conf-morphology" title="11.2.6.&nbsp;morphology&#65306;&#35789;&#24418;&#22788;&#29702;">stemmers</a>&#65289;&#20063;&#20250;&#22312;&#20572;&#29992;&#35789;&#25991;&#20214;&#30340;&#20998;&#26512;&#20013;&#20351;&#29992;&#12290;
</p><p>
&#23613;&#31649;&#20572;&#29992;&#35789;&#19981;&#20250;&#34987;&#32034;&#24341;&#65292;&#23427;&#20204;&#21364;&#24433;&#21709;&#20851;&#38190;&#35789;&#30340;&#20301;&#32622;&#12290;&#20363;&#22914;&#65292;&#20551;&#35774;&#8220;the&#8221;&#26159;&#19968;&#20010;&#20572;&#29992;&#35789;&#65292;&#25991;&#26723;1&#21253;&#21547;&#19968;&#34892;&#8220;in office&#8221;&#65292;&#32780;&#25991;&#26723;2&#21253;&#21547;&#8220;in the office&#8221;&#12290;&#23558;&#8220;in office&#8221;&#20316;&#20026;&#30830;&#20999;&#35789;&#32452;&#25628;&#32034;&#21017;&#21482;&#20250;&#24471;&#21040;&#25991;&#26723;1&#65292;&#34429;&#28982;&#25991;&#26723;2&#37324;&#30340;the&#26159;&#20572;&#29992;&#30340;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
stopwords = /usr/local/sphinx/data/stopwords.txt
stopwords = stopwords-ru.txt stopwords-en.txt
</pre></div>
<div class="sect2" title="11.2.12.&nbsp;wordforms&#65306;&#35789;&#24418;&#23383;&#20856;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-wordforms"></a>11.2.12.&nbsp;wordforms&#65306;&#35789;&#24418;&#23383;&#20856;</h3></div></div></div>
<p>
&#35789;&#24418;&#23383;&#20856;&#12290;
&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
</p><p>
&#35789;&#24418;&#23383;&#20856;&#22312;&#36755;&#20837;&#25991;&#26723;&#26681;&#25454;<a class="link" href="#conf-charset-table" title="11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;">charset_table</a>&#20999;&#30862;&#21518;&#20351;&#29992;&#12290;&#26412;&#36136;&#19978;&#65292;&#23427;&#20351;&#24744;&#21487;&#20197;&#23558;&#19968;&#20010;&#35789;&#26367;&#25442;&#25104;&#21478;&#19968;&#20010;&#12290;&#36825;&#36890;&#24120;&#34987;&#29992;&#26469;&#23558;&#19981;&#21516;&#30340;&#35789;&#24418;&#21464;&#25104;&#19968;&#20010;&#21333;&#19968;&#30340;&#26631;&#20934;&#24418;&#24335;&#65288;&#21363;&#23558;&#35789;&#30340;&#21508;&#31181;&#24418;&#24577;&#22914;&#8220;walks&#8221;&#65292;&#8220;walked&#8221;&#65292;&#8220;walking&#8221;&#21464;&#20026;&#26631;&#20934;&#24418;&#24335;&#8220;walk&#8221;&#65289;&#12290;&#20063;&#21487;&#20197;&#29992;&#26469;&#23454;&#29616;&#21462;&#35789;&#26681;&#30340;&#20363;&#22806;&#24773;&#20917;&#65292;&#22240;&#20026;&#35789;&#24418;&#23383;&#20856;&#20013;&#21487;&#20197;&#25214;&#21040;&#30340;&#35789;&#19981;&#20250;&#32463;&#36807;&#35789;&#24178;&#25552;&#21462;&#22120;&#30340;&#22788;&#29702;&#12290;
</p><p>
&#32034;&#24341;&#21644;&#25628;&#32034;&#20013;&#30340;&#36755;&#20837;&#35789;&#37117;&#20250;&#21033;&#29992;&#35789;&#20856;&#20570;&#35268;&#21017;&#21270;&#12290;&#22240;&#27492;&#35201;&#20351;&#35789;&#24418;&#23383;&#20856;&#30340;&#26356;&#25913;&#36215;&#20316;&#29992;&#65292;&#38656;&#35201;&#37325;&#26032;&#32034;&#24341;&#24182;&#37325;&#21551;<code class="filename">searchd</code>&#12290;
</p><p>
Sphnix&#30340;&#35789;&#24418;&#25903;&#25345;&#34987;&#35774;&#35745;&#25104;&#21487;&#20197;&#24456;&#22909;&#22320;&#25903;&#25345;&#24456;&#22823;&#30340;&#23383;&#20856;&#12290;&#23427;&#20204;&#36731;&#24494;&#22320;&#24433;&#21709;&#32034;&#24341;&#36895;&#24230;&#65306;&#20363;&#22914;&#65292;1M&#20010;&#26465;&#30446;&#30340;&#23383;&#20856;&#20250;&#20351;&#32034;&#24341;&#36895;&#24230;&#19979;&#38477;1.5&#20493;&#12290;&#25628;&#32034;&#36895;&#24230;&#21017;&#23436;&#20840;&#19981;&#21463;&#24433;&#21709;&#12290;&#39069;&#22806;&#30340;&#20869;&#23384;&#21344;&#29992;&#22823;&#20307;&#19978;&#31561;&#20110;&#23383;&#20856;&#25991;&#20214;&#30340;&#22823;&#23567;&#65292;&#32780;&#19988;&#23383;&#20856;&#26159;&#34987;&#22810;&#20010;&#32034;&#24341;&#20849;&#20139;&#30340;&#65292;&#21363;&#22914;&#26524;&#19968;&#20010;50MB&#30340;&#35789;&#24418;&#23383;&#20856;&#25991;&#20214;&#34987;10&#20010;&#19981;&#21516;&#30340;&#32034;&#24341;&#20351;&#29992;&#20102;&#65292;&#37027;&#20040;&#39069;&#22806;&#30340;<code class="filename">searchd</code>&#20869;&#23384;&#21344;&#29992;&#23601;&#26159;&#22823;&#32422;50MB&#12290;
</p><p>
&#23383;&#20856;&#25991;&#20214;&#30340;&#26684;&#24335;&#26159;&#31616;&#21333;&#30340;&#32431;&#25991;&#26412;&#12290;&#27599;&#34892;&#21253;&#25324;&#19968;&#20010;&#28304;&#35789;&#24418;&#21644;&#19968;&#20010;&#30446;&#26631;&#35789;&#24418;&#65292;&#32534;&#30721;&#24212;&#19982;<a class="link" href="#conf-charset-type" title="11.2.15.&nbsp;charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;">charset_type</a>&#36873;&#39033;&#25152;&#25351;&#23450;&#30340;&#23436;&#20840;&#30456;&#21516;&#65292;&#20108;&#32773;&#29992;&#22823;&#20110;&#21495;&#20998;&#38548;&#12290;&#25991;&#20214;&#36733;&#20837;&#26102;&#20250;&#32463;&#36807;<a class="link" href="#conf-charset-table" title="11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;">charset_table</a>&#36873;&#39033;&#25351;&#23450;&#30340;&#35268;&#21017;&#30340;&#22788;&#29702;&#12290;&#22240;&#27492;&#22522;&#26412;&#19978;&#22312;&#22823;&#23567;&#20889;&#26159;&#21542;&#25935;&#24863;&#36825;&#20010;&#38382;&#39064;&#19978;&#23427;&#26159;&#19982;&#24453;&#32034;&#24341;&#30340;&#20840;&#25991;&#25968;&#25454;&#30456;&#21516;&#30340;&#65292;&#21363;&#36890;&#24120;&#26159;&#22823;&#23567;&#20889;&#26080;&#20851;&#30340;&#12290;&#19968;&#19979;&#26159;&#20010;&#25991;&#20214;&#20869;&#23481;&#30340;&#20363;&#23376;&#65306;
</p><pre class="programlisting">
walks &gt; walk
walked &gt; walk
walking &gt; walk
</pre><p>
</p><p>
&#25105;&#20204;&#25552;&#20379;&#20102;&#19968;&#20010;<code class="filename">spelldump</code>&#24037;&#20855;&#65292;&#23427;&#21487;&#20197;&#24110;&#24744;&#20174;<code class="filename">ispell</code> &#21644; <code class="filename">MySpell</code>&#65288;OpenOffice&#25552;&#20379;&#65289;&#26684;&#24335;&#30340;<code class="filename">.dict</code>&#21644;<code class="filename">.aff</code>&#23383;&#20856;&#25991;&#20214;&#29983;&#25104;Sphinix&#21487;&#25509;&#21463;&#30340;&#26684;&#24335;&#12290;
</p><p>
&#20174;&#29256;&#26412;0.9.9-rc1&#24320;&#22987;&#65292;&#21487;&#20197;&#23558;&#22909;&#20960;&#20010;&#28304;&#35789;&#23545;&#24212;&#21040;&#21516;&#19968;&#20010;&#30446;&#26631;&#35789;&#19978;&#12290;&#30001;&#20110;&#36825;&#20010;&#36807;&#31243;&#20316;&#29992;&#20110;&#31526;&#21495;&#21270;&#20043;&#21518;&#30340;&#32467;&#26524;&#32780;&#19981;&#26159;&#21407;&#22987;&#25991;&#26412;&#65292;&#31354;&#30333;&#23383;&#31526;&#21644;&#26631;&#35760;&#35821;&#35328;&#37117;&#34987;&#24573;&#30053;&#12290;
</p><pre class="programlisting">
core 2 duo &gt; c2d
e6600 &gt; c2d
core 2duo &gt; c2d
</pre><p>
</p><p>
Notice however that the <span class="emphasis"><em>destination</em></span> wordforms
are still always interpreted as a <span class="emphasis"><em>single</em></span> keyword!
Having a mapping like "St John &gt; Saint John" will result in <span class="bold"><strong>not</strong></span>
matching "St John" when searching for "Saint" or "John", because the
destination keyword will be "Saint John" with a space character in it
(and it's barely possible to input a destination keyword with a space).
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
wordforms = /usr/local/sphinx/data/wordforms.txt
</pre></div>
<div class="sect2" title="11.2.13.&nbsp;exceptions&#65306;&#35789;&#27719;&#29305;&#20363;&#22788;&#29702;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-exceptions"></a>11.2.13.&nbsp;exceptions&#65306;&#35789;&#27719;&#29305;&#20363;&#22788;&#29702;</h3></div></div></div>
<p>
Token&#29305;&#20363;&#25991;&#20214;&#12290;
&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
</p><p>
&#23545;&#20110;&#20351;&#29992;Coreseek&#30340;&#20013;&#25991;&#29992;&#25143;&#65292;&#36825;&#19968;&#36873;&#39033;&#26080;&#25928;&#12290;Coreseek&#20026;Sphinx&#36129;&#29486;&#30340;&#20013;&#25991;&#20998;&#35789;&#27861;&#20869;&#32622;&#20102;Token&#29305;&#20363;&#21270;&#25903;&#25345;&#65292;&#20855;&#20307;&#21442;&#38405;<a class="ulink" href="http://www.coreseek.cn/opensource/mmseg/" target="_top">Coreseek MMSeg</a>&#20998;&#35789;&#27861;&#30340;&#25991;&#26723;&#12290;&#19981;&#36807;&#65292;&#20540;&#24471;&#39640;&#20852;&#30340;&#26159;&#65292;Token&#29305;&#20363;&#21270;&#30340;&#25991;&#20214;&#26684;&#24335;&#20004;&#32773;&#26159;&#21516;&#26679;&#30340;&#12290;
</p><p>
&#27492;&#36873;&#39033;&#20801;&#35768;&#23558;&#19968;&#20010;&#25110;&#22810;&#20010;Token&#65288;Token&#20013;&#65292;&#21487;&#20197;&#21253;&#25324;&#22312;&#27491;&#24120;&#24773;&#20917;&#19979;&#20250;&#34987;&#36807;&#28388;&#30340;&#23383;&#31526;&#65289;&#26144;&#23556;&#25104;&#19968;&#20010;&#21333;&#29420;&#30340;&#20851;&#38190;&#35789;&#12290;exceptions&#36873;&#39033;&#19982;<a class="link" href="#conf-wordforms" title="11.2.12.&nbsp;wordforms&#65306;&#35789;&#24418;&#23383;&#20856;">wordforms</a>&#36873;&#39033;&#24456;&#31867;&#20284;&#65292;&#23427;&#20204;&#37117;&#20195;&#34920;&#26576;&#31181;&#26144;&#23556;&#65292;&#20294;&#26377;&#19968;&#20123;&#37325;&#35201;&#30340;&#19981;&#21516;&#28857;&#12290;
</p><p>
&#36825;&#20123;&#19981;&#21516;&#28857;&#31616;&#35201;&#24635;&#32467;&#22914;&#19979;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">exceptions &#22823;&#23567;&#20889;&#25935;&#24863;, wordforms&#22823;&#23567;&#20889;&#26080;&#20851;&#65307;</li>
<li class="listitem">exceptions &#20801;&#35768;&#26816;&#27979;&#19968;&#20018;&#35760;&#21495;&#65292; wordforms&#20165;&#23545;&#21333;&#29420;&#30340;&#35789;&#26377;&#25928;&#65307;</li>
<li class="listitem">exceptions &#21487;&#20197;&#20351;&#29992;charset_table&#20013;<span class="bold"><strong>&#27809;&#26377;</strong></span>&#30340;&#29305;&#27530;&#31526;&#21495;&#65292;wordforms&#23436;&#20840;&#36981;&#20174;charset_table&#65307;</li>
<li class="listitem">exceptions &#22312;&#22823;&#23383;&#20856;&#19978;&#24615;&#33021;&#20250;&#19979;&#38477;&#65292;wordforms&#21017;&#23545;&#30334;&#19975;&#32423;&#30340;&#26465;&#30446;&#24212;&#23545;&#33258;&#22914;&#12290;</li>
</ul></div>
<p>
</p><p>
&#36755;&#20837;&#25991;&#20214;&#30340;&#26684;&#24335;&#20173;&#28982;&#26159;&#32431;&#25991;&#26412;&#65292;&#27599;&#34892;&#19968;&#20010;&#20998;&#35789;&#20363;&#22806;&#65292;&#32780;&#34892;&#30340;&#26684;&#24335;&#22914;&#19979;&#65306;
</p><pre class="programlisting">
map-from-tokens =&gt; map-to-token
</pre><p>
&#31034;&#20363;&#25991;&#20214;&#65306;
</p><pre class="programlisting">
AT &amp; T =&gt; AT&amp;T
AT&amp;T =&gt; AT&amp;T
Standarten   Fuehrer =&gt; standartenfuhrer
Standarten Fuhrer =&gt; standartenfuhrer
MS Windows =&gt; ms windows
Microsoft Windows =&gt; ms windows
C++ =&gt; cplusplus
c++ =&gt; cplusplus
C plus plus =&gt; cplusplus
</pre><p>
&#36825;&#37324;&#20840;&#37096;&#30340;&#31526;&#21495;&#37117;&#26159;&#22823;&#23567;&#20889;&#25935;&#24863;&#30340;&#65306;&#23427;&#20204;<span class="bold"><strong>&#19981;&#20250;</strong></span>&#25353;<a class="link" href="#conf-charset-table" title="11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;">charset_table</a>&#36873;&#39033;&#30340;&#35268;&#21017;&#22788;&#29702;&#12290;&#22240;&#27492;&#65292;&#22312;&#19978;&#36848;&#20363;&#22806;&#25991;&#20214;&#19979;&#65292;&#8220;At&amp;t&#8221;&#20250;&#34987;&#20998;&#25104;&#20004;&#20010;&#20851;&#38190;&#23383;&#8220;at&#8221;&#21644;&#8220;t&#8221;&#65292;&#22240;&#20026;&#20854;&#20013;&#30340;&#23567;&#20889;&#23383;&#27597;&#12290;&#32780;&#8220;AT&amp;T&#8221;&#21364;&#34987;&#31934;&#30830;&#21305;&#37197;&#24182;&#20135;&#29983;&#19968;&#20010;&#21333;&#29420;&#30340;&#20851;&#38190;&#23383;&#8220;AT&amp;T&#8221;&#12290;
</p><p>
&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#21069;&#36848;&#26144;&#23556;&#25991;&#20214;&#30340;&#30446;&#26631;&#20851;&#38190;&#35789;&#65288;&#21491;&#20391;&#65289;a)&#24635;&#26159;&#34987;&#35299;&#37322;&#25104;&#19968;&#20010;<span class="emphasis"><em>&#21333;&#29420;</em></span>&#30340;&#35789;&#65292;&#32780;&#19988;b)&#19981;&#20165;&#26159;&#22823;&#23567;&#20889;&#25935;&#24863;&#30340;&#65292;&#32780;&#19988;&#26159;&#31354;&#30333;&#31526;&#21495;&#25935;&#24863;&#30340;&#65281;&#22312;&#19978;&#36848;&#26679;&#20363;&#20013;&#65292;&#26597;&#35810;&#8220;ms windows&#8221;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#21305;&#37197;&#21253;&#21547;&#8220;MS Windows&#8221;&#30340;&#25991;&#26723;&#12290;&#36825;&#20010;&#26597;&#35810;&#20250;&#34987;&#35299;&#37322;&#25104;&#20004;&#20010;&#35789;&#8220;ms&#8221;&#21644;&#8220;Windows&#8221;&#12290;&#32780;&#8220;MS Windows&#8221;&#26144;&#23556;&#21040;&#30340;&#26159;&#19968;&#20010;<span class="emphasis"><em>&#21333;&#29420;</em></span>&#30340;&#20851;&#38190;&#23383;&#8220;ms windows&#8221;&#65292;&#21253;&#25324;&#20013;&#38388;&#30340;&#31354;&#26684;&#12290;&#21478;&#19968;&#26041;&#38754;&#8220;standartenfuhrer&#8221;&#20250;&#21462;&#22238;&#24102;&#26377;&#8220;Standarten Fuhrer&#8221;&#25110;&#32773;&#8220;Standarten Fuehrer&#8221;&#20869;&#23481;&#30340;&#25991;&#26723;&#65288;&#22823;&#20889;&#23383;&#27597;&#24517;&#39035;&#19982;&#27492;&#22788;&#21015;&#20986;&#30340;&#23436;&#20840;&#30456;&#21516;&#65289;&#65292;&#25110;&#32773;&#20851;&#38190;&#35789;&#26412;&#36523;&#22823;&#23567;&#20889;&#38543;&#24847;&#30340;&#20219;&#20309;&#29256;&#26412;&#65292;&#20363;&#22914;&#8220;staNdarTenfUhreR&#8221;&#12290;&#65288;&#28982;&#32780;&#8220;standarten fuhrer&#8221;&#19981;&#20250;&#21305;&#37197;&#12290;&#36825;&#27573;&#25991;&#26412;&#26080;&#27861;&#19982;&#21015;&#20986;&#30340;&#20219;&#20309;&#19968;&#20010;&#20363;&#22806;&#30456;&#21305;&#37197;&#65292;&#22240;&#20026;&#22823;&#23567;&#20889;&#19981;&#21516;&#12290;&#22240;&#27492;&#34987;&#32034;&#24341;&#20026;&#20004;&#20010;&#20998;&#24320;&#30340;&#20851;&#38190;&#23383;&#65289;
</p><p>
&#26144;&#23556;&#28304;&#37096;&#20998;&#30340;&#31354;&#30333;&#31526;&#65288;white space&#65289;&#19981;&#20250;&#34987;&#24573;&#30053;&#65292;&#20294;&#31354;&#30333;&#31526;&#30340;&#25968;&#37327;&#26080;&#25152;&#35859;&#12290;&#20219;&#20309;&#25968;&#37327;&#30340;&#31354;&#30333;&#31526;&#37117;&#21305;&#37197;&#24050;&#32034;&#24341;&#30340;&#25991;&#26723;&#25110;&#32773;&#26597;&#35810;&#20013;&#30340;&#20219;&#24847;&#25968;&#37327;&#30340;&#31354;&#30333;&#31526;&#12290;&#20363;&#22914;&#26144;&#23556;&#28304;&#37096;&#20998;&#65288;&#8220;=&gt;&#8221;&#24038;&#31471;&#65289;&#30340;&#8220;AT&amp;T&#8221;&#21487;&#20197;&#21305;&#37197;&#8220;AT&amp;T&#8221;&#65292;&#19981;&#31649;&#34987;&#26144;&#23556;&#37096;&#20998;&#25110;&#24050;&#32034;&#24341;&#20840;&#25991;&#25968;&#25454;&#20013;&#23454;&#38469;&#26377;&#20960;&#20010;&#31354;&#26684;&#12290;&#26681;&#25454;&#19978;&#36848;&#20363;&#23376;&#20013;&#30340;&#31532;&#19968;&#26465;&#65292;&#19978;&#36848;&#25991;&#26412;&#20250;&#20316;&#20026;&#8220;AT&amp;T&#8221;&#20851;&#38190;&#23383;&#34987;&#32034;&#24341;&#12290;
<span class="emphasis"><em>&#23545;&#20110;&#20351;&#29992;Coreseek&#30340;&#20013;&#25991;&#29992;&#25143;&#65292;&#36825;&#20010;&#29305;&#24615;&#30446;&#21069;&#23578;&#19981;&#34987;&#25903;&#25345;&#12290;Coreseek&#23558;&#22312;&#21518;&#32493;&#29256;&#26412;&#25903;&#25345;&#36825;&#20010;&#29305;&#24615;&#12290;</em></span>
</p><p>
exceptions&#36873;&#39033;&#20063;&#20801;&#35768;&#29305;&#27530;&#23383;&#31526;&#65288;&#36825;&#26159;&#36890;&#29992;<a class="link" href="#conf-charset-table" title="11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;">charset_table</a>&#36873;&#39033;&#35268;&#21017;&#30340;&#20363;&#22806;&#65288;exception&#65289;&#65292;&#27492;&#36873;&#39033;&#22240;&#32780;&#24471;&#21517;&#65289;&#12290;&#20551;&#35774;&#24744;&#19968;&#33324;&#19981;&#24819;&#25226;&#8220;+&#8221;&#24403;&#20316;&#26377;&#25928;&#30340;&#23383;&#31526;&#65292;&#20294;&#20173;&#24819;&#25628;&#32034;&#19968;&#20123;&#20363;&#22806;&#24773;&#20917;&#65292;&#27604;&#22914;&#8220;C++&#8221;&#12290;&#19978;&#36848;&#20363;&#23376;&#27491;&#22909;&#21487;&#20197;&#20570;&#21040;&#36825;&#28857;&#65292;&#23436;&#20840;&#19981;&#31649;&#21738;&#20123;&#23383;&#31526;&#22312;&#34920;&#20013;&#65292;&#21738;&#20123;&#23383;&#31526;&#19981;&#22312;&#12290;
</p><p>
Exceptions&#36873;&#39033;&#34987;&#24212;&#29992;&#20110;&#21407;&#22987;&#36755;&#20837;&#25991;&#26723;&#21644;&#32034;&#24341;&#12289;&#25628;&#32034;&#26102;&#30340;&#26597;&#35810;&#25968;&#25454;&#12290;&#22240;&#27492;&#35201;&#20351;&#25991;&#20214;&#30340;&#25913;&#21160;&#29983;&#25928;&#65292;&#38656;&#35201;&#37325;&#24314;&#32034;&#24341;&#24182;&#37325;&#21551;<code class="filename">searchd</code>&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
exceptions = /usr/local/sphinx/data/exceptions.txt
</pre></div>
<div class="sect2" title="11.2.14.&nbsp;min_word_len&#65306;&#26368;&#23567;&#32034;&#24341;&#35789;&#27719;&#38271;&#24230;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-min-word-len"></a>11.2.14.&nbsp;min_word_len&#65306;&#26368;&#23567;&#32034;&#24341;&#35789;&#27719;&#38271;&#24230;</h3></div></div></div>
<p>
&#26368;&#23567;&#32034;&#24341;&#35789;&#38271;&#24230;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;1&#65288;&#32034;&#24341;&#20219;&#20309;&#35789;&#65289;
</p><p>
&#21482;&#26377;&#38271;&#24230;&#19981;&#23567;&#20110;&#36825;&#20010;&#26368;&#23567;&#32034;&#24341;&#35789;&#38271;&#24230;&#30340;&#35789;&#20250;&#34987;&#32034;&#24341;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;min_word_len&#20026;4&#65292;&#37027;&#20040;&#8220;the&#8221;&#36825;&#20010;&#35789;&#19981;&#20250;&#34987;&#32034;&#24341;&#65292;&#20294;&#8220;they&#8221;&#20250;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
min_word_len = 4
</pre></div>
<div class="sect2" title="11.2.15.&nbsp;charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-charset-type"></a>11.2.15.&nbsp;charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;</h3></div></div></div>
<p>
&#23383;&#31526;&#38598;&#32534;&#30721;&#31867;&#22411;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#8220;sbcs&#8221;&#12290;&#21487;&#29992;&#30340;&#20540;&#21253;&#25324;&#8220;sbcs&#8221;&#21644;&#8220;utf-8&#8221;&#12290;
<span class="emphasis"><em>&#23545;&#20110;&#20351;&#29992;Coreseek&#30340;&#20013;&#25991;&#29992;&#25143;&#65292;&#21487;&#36873;&#30340;&#20540;&#36824;&#21487;&#20197;&#26377;&#8220;zh_cn.utf-8 &#8221;&#12289;&#8220;zh_cn.gbk&#8221;&#21644;&#8220;zh_cn.big5&#8221;&#65288;&#38656;&#35201;&#32534;&#35793;&#26102;&#25552;&#20379;iconv&#25903;&#25345;&#65289;&#12290;&#24403;&#35774;&#32622;charset_type&#20540;&#20026;&#19978;&#38754;&#30340;&#20540;&#26102;&#65292;&#31995;&#32479;&#40664;&#35748;&#24744;&#24320;&#21551;&#20102;&#20013;&#25991;&#20998;&#35789;&#29305;&#24615;&#12290;</em></span>
</p><p>
&#19981;&#21516;&#30340;&#32534;&#30721;&#23558;&#23427;&#20204;&#30340;&#20869;&#37096;&#23383;&#31526;&#20195;&#30721;&#26144;&#23556;&#21040;&#29305;&#27530;&#23383;&#33410;&#24207;&#21015;&#30340;&#26041;&#27861;&#19981;&#21516;&#12290;&#30446;&#21069;&#20004;&#20010;&#26368;&#24120;&#35265;&#30340;&#26041;&#27861;&#26159;&#21333;&#23383;&#33410;&#32534;&#30721;&#21644;UTF-8&#12290;&#23427;&#20204;&#23545;&#24212;&#30340;charset_type&#20540;&#20998;&#21035;&#26159;&#8220;sbcs&#8221;&#65288;&#20195;&#34920;Single Byte Character Set&#21333;&#23383;&#33410;&#23383;&#31526;&#38598;&#65289;&#21644;&#8220;utf-8&#8221;&#12290;&#36873;&#23450;&#30340;&#32534;&#30721;&#31867;&#22411;&#20250;&#22312;&#25628;&#32034;&#34987;&#20351;&#29992;&#30340;&#20219;&#20309;&#24773;&#20917;&#19979;&#20351;&#29992;&#65306;&#32034;&#24341;&#25968;&#25454;&#26102;&#65292;&#23545;&#32034;&#24341;&#26597;&#35810;&#26102;&#65292;&#20135;&#29983;&#25688;&#35201;&#26102;&#65292;&#31561;&#31561;&#12290;
</p><p>
&#27880;&#24847;&#65292;&#23613;&#31649;&#8220;utf-8&#8221;&#26263;&#31034;&#35299;&#30721;&#20986;&#26469;&#30340;&#20540;&#24212;&#25353;unicode&#30721;&#28857;&#25968;&#20540;&#23545;&#24453;&#65292;&#8220;sbcs&#8221;&#21364;&#23545;&#24212;&#19968;&#31995;&#21015;&#19981;&#21516;&#30340;&#32534;&#30721;&#65292;&#23427;&#20204;&#23545;&#19981;&#21516;&#23383;&#33410;&#20540;&#30340;&#22788;&#29702;&#19981;&#21516;&#65292;&#36825;&#35201;&#22312;<a class="link" href="#conf-charset-table" title="11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;">charset_table</a>&#35774;&#32622;&#20013;&#27491;&#30830;&#22320;&#21453;&#24212;&#20986;&#26469;&#12290;&#20363;&#22914;&#65292;&#21516;&#19968;&#20010;&#20540;244&#65288;&#21313;&#20845;&#36827;&#21046;0xE0&#65289;&#26681;&#25454;&#20351;&#29992;&#30340;&#26159;koi-8r&#36824;&#26159;windows-1251&#32534;&#30721;&#32780;&#26144;&#23556;&#21040;&#19981;&#21516;&#30340;&#20420;&#35821;&#23383;&#31526;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
charset_type = utf-8
</pre></div>
<div class="sect2" title="11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-charset-table"></a>11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;</h3></div></div></div>
<p>
&#25509;&#21463;&#30340;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#19982;<a class="link" href="#conf-charset-type" title="11.2.15.&nbsp;charset_type&#65306;&#23383;&#31526;&#38598;&#32534;&#30721;">charset_type</a> &#36873;&#39033;&#30340;&#20540;&#26377;&#20851;&#12290;
<span class="emphasis"><em>&#23545;&#20110;&#20351;&#29992;Coreseek&#30340;&#20013;&#25991;&#29992;&#25143;&#65292;Coreseek &#25552;&#20379;&#30340;MMseg&#20998;&#35789;&#27861;&#20869;&#32622;&#20102;&#21487;&#25509;&#21463;&#30340;&#23383;&#31526;&#34920;&#65292;&#24182;&#19988;&#29992;&#25143;&#19981;&#21487;&#20462;&#25913;&#12290;&#24403;&#21551;&#29992;&#20998;&#35789;&#21151;&#33021;&#26102;&#65292;&#33258;&#21160;&#24320;&#21551;&#12290;</em></span>
</p><p>
charset_table&#39057;&#32321;&#24212;&#29992;&#20110;Sphinx&#30340;&#20998;&#35789;&#36807;&#31243;&#65292;&#21363;&#20174;&#25991;&#26723;&#25991;&#26412;&#25110;&#26597;&#35810;&#25991;&#26412;&#20013;&#25277;&#21462;&#20851;&#38190;&#23383;&#30340;&#36807;&#31243;&#12290;&#23427;&#25511;&#21046;&#21738;&#20123;&#23383;&#31526;&#34987;&#24403;&#20316;&#26377;&#25928;&#23383;&#31526;&#25509;&#21463;&#65292;&#21738;&#20123;&#30456;&#21453;&#65292;&#36824;&#26377;&#25509;&#21463;&#20102;&#30340;&#23383;&#31526;&#22914;&#20309;&#36716;&#25442;&#65288;&#20363;&#22914;&#22823;&#23567;&#20889;&#20449;&#24687;&#20445;&#30041;&#36824;&#26159;&#21435;&#38500;&#65289;&#12290;
</p><p>
&#21487;&#20197;&#25226;charset_table&#24819;&#25104;&#19968;&#20010;&#23545;&#36229;&#36807;100K&#20010;Unicode&#23383;&#31526;&#20013;&#27599;&#19968;&#20010;&#30340;&#26144;&#23556;&#20851;&#31995;&#30340;&#22823;&#34920;&#65288;&#25110;&#32773;&#19968;&#20010;256&#20010;&#23383;&#31526;&#30340;&#23567;&#34920;&#65292;&#22914;&#26524;&#20320;&#20351;&#29992;SBCS&#65289;&#12290;&#40664;&#35748;&#27599;&#20010;&#23383;&#31526;&#37117;&#23545;&#24212;0&#65292;&#36825;&#34920;&#31034;&#23427;&#19981;&#22312;&#20851;&#38190;&#23383;&#20013;&#20986;&#29616;&#65292;&#24212;&#34987;&#35270;&#20026;&#20998;&#38548;&#31526;&#12290;&#19968;&#26086;&#22312;&#27492;&#34920;&#20013;&#34987;&#25552;&#21450;&#65292;&#23383;&#31526;&#23601;&#26144;&#23556;&#21040;&#21478;&#19968;&#20010;&#23383;&#31526;&#65288;&#36890;&#24120;&#26159;&#23427;&#33258;&#36523;&#25110;&#32773;&#33258;&#36523;&#30340;&#23567;&#20889;&#29256;&#26412;&#65289;&#65292;&#21516;&#26102;&#34987;&#24403;&#20316;&#19968;&#20010;&#21487;&#20197;&#20986;&#29616;&#22312;&#20851;&#38190;&#23383;&#20013;&#30340;&#26377;&#25928;&#23383;&#31526;&#12290;
</p><p>
&#20540;&#30340;&#26684;&#24335;&#26159;&#36887;&#21495;&#20998;&#38548;&#30340;&#26144;&#23556;&#21015;&#34920;&#12290;&#20004;&#31181;&#26368;&#31616;&#21333;&#30340;&#26144;&#23556;&#20998;&#21035;&#26159;&#22768;&#26126;&#19968;&#20010;&#23383;&#31526;&#20026;&#26377;&#25928;&#21644;&#23558;&#19968;&#20010;&#31616;&#21333;&#23383;&#31526;&#26144;&#23556;&#20026;&#21478;&#19968;&#20010;&#23383;&#31526;&#12290;&#20294;&#29992;&#36825;&#31181;&#26684;&#24335;&#25351;&#23450;&#25972;&#20010;&#34920;&#20250;&#23548;&#33268;&#20854;&#20307;&#31215;&#33219;&#32959;&#12289;&#26080;&#27861;&#31649;&#29702;&#12290;&#22240;&#27492;&#25552;&#20379;&#20102;&#19968;&#20123;&#35821;&#27861;&#19978;&#30340;&#24555;&#25463;&#26041;&#24335;&#65292;&#29992;&#23427;&#20204;&#21487;&#20197;&#19968;&#27425;&#25351;&#23450;&#19968;&#23450;&#33539;&#22260;&#30340;&#23383;&#31526;&#12290;&#35814;&#32454;&#30340;&#21015;&#34920;&#22914;&#19979;&#65306;
</p><div class="variablelist"><dl><dt><span class="term">A-&gt;a</span></dt>
<dd>&#21333;&#20010;&#23383;&#31526;&#26144;&#23556;&#65292;&#22768;&#26126;&#28304;&#23383;&#31526;&#8220;A&#8221;&#20026;&#20801;&#35768;&#20986;&#29616;&#22312;&#20851;&#38190;&#23383;&#20013;&#30340;&#23383;&#31526;&#65292;&#24182;&#23558;&#20043;&#26144;&#23556;&#21040;&#30446;&#30340;&#23383;&#31526;&#8220;a&#8221;&#65288;&#36825;&#24182;<span class="emphasis"><em>&#27809;&#26377;</em></span>&#22768;&#26126;&#8220;a&#8221;&#26159;&#20801;&#35768;&#30340;&#65289;&#12290;
	</dd><dt><span class="term">A..Z-&gt;a..z</span></dt>
<dd>&#33539;&#22260;&#26144;&#23556;&#65292;&#22768;&#26126;&#28304;&#33539;&#22260;&#20013;&#30340;&#20840;&#37096;&#23383;&#31526;&#20801;&#35768;&#20986;&#29616;&#22312;&#20851;&#38190;&#23383;&#20013;&#65292;&#24182;&#23558;&#23427;&#20204;&#26144;&#23556;&#21040;&#30446;&#30340;&#33539;&#22260;&#12290;<span class="emphasis"><em>&#24182;&#19981;</em></span>&#22768;&#26126;&#30446;&#30340;&#33539;&#22260;&#26159;&#20801;&#35768;&#30340;&#12290;&#27492;&#22806;&#20250;&#26816;&#26597; &#65288;&#38271;&#24230;&#24517;&#39035;&#30456;&#31561;&#65289; 
	</dd><dt><span class="term">a</span></dt>
<dd>&#21333;&#19968;&#23383;&#31526;&#26144;&#23556;&#65292;&#22768;&#26126;&#19968;&#20010;&#20801;&#35768;&#30340;&#23383;&#31526;&#65292;&#23558;&#23427;&#26144;&#23556;&#21040;&#23427;&#33258;&#36523;&#12290;&#30456;&#24403;&#20110;&#21333;&#20010;&#23383;&#31526;&#26144;&#23556; a-&gt;a &#12290;
	</dd><dt><span class="term">a..z</span></dt>
<dd>&#26434;&#25955;&#33539;&#22260;&#26144;&#23556;&#65292;&#22768;&#26126;&#33539;&#22260;&#20013;&#30340;&#20840;&#37096;&#23383;&#31526;&#20026;&#20801;&#35768;&#65292;&#23558;&#23427;&#20204;&#26144;&#23556;&#21040;&#33258;&#36523;&#12290;&#30456;&#24403;&#20110;&#33539;&#22260;&#26144;&#23556;
		a..z-&gt;a..z &#12290;
	</dd><dt><span class="term">A..Z/2</span></dt>
<dd>&#26827;&#30424;&#33539;&#22260;&#26144;&#23556;&#12290;&#26144;&#23556;&#27599;&#30456;&#37051;&#20004;&#20010;&#23383;&#31526;&#21040;&#20854;&#20013;&#30340;&#31532;&#20108;&#20010;&#12290;&#24418;&#24335;&#21270;&#22320;&#35828;&#65292;&#22768;&#26126;&#33539;&#22260;&#20013;&#30340;&#22855;&#25968;&#23383;&#31526;&#20026;&#20801;&#35768;&#65292;&#23558;&#23427;&#20204;&#26144;&#23556;&#21040;&#20598;&#25968;&#23383;&#31526;&#19978;&#12290;&#21516;&#26102;&#20801;&#35768;&#20598;&#25968;&#23383;&#31526;&#24182;&#26144;&#23556;&#21040;&#20854;&#33258;&#36523;&#12290;&#20363;&#22914;&#65292; A..Z/2 &#30456;&#24403;&#20110; A-&gt;B, B-&gt;B, C-&gt;D, D-&gt;D,
		..., Y-&gt;Z, Z-&gt;Z&#12290;&#36825;&#20010;&#26144;&#23556;&#25509;&#23558;&#25463;&#24452;&#26041;&#20415;&#22768;&#26126;&#22823;&#23567;&#20889;&#23383;&#31526;&#20132;&#26367;&#32780;&#38750;&#22823;&#23567;&#20889;&#23383;&#31526;&#20998;&#21035;&#36830;&#32493;&#30340;Unicode&#22359;&#12290;
	</dd></dl></div>
<p>
</p><p>
&#32534;&#30721;&#20026;0&#21040;31&#20043;&#38388;&#30340;&#25511;&#21046;&#23383;&#31526;&#24635;&#26159;&#34987;&#35270;&#20316;&#20998;&#38548;&#31526;&#12290;&#32534;&#30721;32&#21040;127&#30340;&#23383;&#31526;&#21363;7&#20301;ASCII&#23383;&#31526;&#21487;&#20197;&#21407;&#26679;&#20351;&#29992;&#22312;&#26144;&#23556;&#20013;&#12290;&#20026;&#36991;&#20813;&#37197;&#32622;&#25991;&#20214;&#30340;&#32534;&#30721;&#38382;&#39064;&#65292;8&#20301;ASCII&#23383;&#31526;&#21644;Unicode&#23383;&#31526;&#24517;&#39035;&#20197;U+xxx&#24418;&#24335;&#25351;&#23450;&#65292;&#8220;xxx&#8221;&#26159;&#30721;&#28857;&#23545;&#24212;&#30340;&#21313;&#20845;&#36827;&#21046;&#25968;&#12290;&#20063;&#21487;&#20197;&#29992;&#36825;&#20010;&#24418;&#24335;&#32534;&#30721;7&#20301;ASCII&#32534;&#30721;&#20013;&#30340;&#29305;&#27530;&#23383;&#31526;&#65292;&#20363;&#22914;&#29992;U+20&#26469;&#32534;&#30721;&#31354;&#26684;&#31526;&#65292;U+2E&#26469;&#32534;&#30721;&#21477;&#28857;&#65292;U+2C&#26469;&#32534;&#30721;&#36887;&#21495;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
# 'sbcs' defaults for English and Russian
charset_table = 0..9, A..Z-&gt;a..z, _, a..z, \
	U+A8-&gt;U+B8, U+B8, U+C0..U+DF-&gt;U+E0..U+FF, U+E0..U+FF

# 'utf-8' defaults for English and Russian
charset_table = 0..9, A..Z-&gt;a..z, _, a..z, \
	U+410..U+42F-&gt;U+430..U+44F, U+430..U+44F
</pre></div>
<div class="sect2" title="11.2.17.&nbsp;ignore_chars&#65306;&#24573;&#30053;&#23383;&#31526;&#34920;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-ignore-chars"></a>11.2.17.&nbsp;ignore_chars&#65306;&#24573;&#30053;&#23383;&#31526;&#34920;</h3></div></div></div>
<p>
&#24573;&#30053;&#23383;&#31526;&#34920;&#12290;
&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
</p><p>
&#26377;&#20123;&#23383;&#31526;&#65292;&#22914;&#36719;&#26029;&#23383;&#31526;(U+00AD)&#65292;&#19981;&#26159;&#20165;&#20165;&#35201;&#24403;&#20316;&#20998;&#38548;&#31526;&#65292;&#32780;&#19988;&#24212;&#35813;&#34987;&#23436;&#20840;&#24573;&#30053;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#8220;-&#8221;&#21482;&#26159;&#19981;&#22312;charset_table&#37324;&#65292;&#37027;&#20040;&#8220;abc-def&#8221;&#20250;&#34987;&#24403;&#20316;&#20004;&#20010;&#20851;&#38190;&#23383;&#8220;abc&#8221;&#21644;&#8220;def&#8221;&#26469;&#32034;&#24341;&#12290;&#30456;&#21453;&#65292;&#22914;&#26524;&#23558;&#8220;-&#8221;&#21152;&#21040;ignore_char&#21015;&#34920;&#20013;&#65292;&#37027;&#20040;&#30456;&#21516;&#30340;&#25991;&#26412;&#20250;&#34987;&#24403;&#20316;&#19968;&#20010;&#21333;&#29420;&#30340;&#20851;&#38190;&#23383;&#8220;abcdef&#8221;&#32034;&#24341;&#12290;
</p><p>
&#27492;&#36873;&#39033;&#30340;&#35821;&#27861;&#19982; <a class="link" href="#conf-charset-table" title="11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;">charset_table</a>&#30456;&#21516;&#65292;&#20294;&#21482;&#20801;&#35768;&#22768;&#26126;&#23383;&#31526;&#65292;&#19981;&#20801;&#35768;&#26144;&#23556;&#23427;&#20204;&#12290;&#21478;&#22806;&#65292;&#24573;&#30053;&#30340;&#23383;&#31526;&#19981;&#33021;&#20986;&#29616;&#22312;charset_table&#37324;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
ignore_chars = U+AD
</pre></div>
<div class="sect2" title="11.2.18.&nbsp;min_prefix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#21069;&#32512;&#38271;&#24230;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-min-prefix-len"></a>11.2.18.&nbsp;min_prefix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#21069;&#32512;&#38271;&#24230;</h3></div></div></div>
<p>
&#32034;&#24341;&#30340;&#26368;&#23567;&#21069;&#32512;&#38271;&#24230;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;0&#65288;&#19981;&#32034;&#24341;&#21069;&#32512;&#65289;&#12290;
</p><p>
&#21069;&#32512;&#32034;&#24341;&#20351;&#23454;&#29616;&#8220;wordstart*&#8221;&#24418;&#24335;&#30340;&#36890;&#37197;&#31526;&#25104;&#20026;&#21487;&#33021;&#65288;&#36890;&#37197;&#31526;&#35821;&#27861;&#30340;&#32454;&#33410;&#35831;&#21442;&#32771; <a class="link" href="#conf-enable-star" title="11.2.22.&nbsp;enable_star&#65306;&#26143;&#21495;&#35821;&#27861;">enable_star</a> &#36873;&#39033;&#65289;&#12290;&#24403;&#26368;&#23567;&#21069;&#32512;&#38271;&#24230;&#34987;&#35774;&#32622;&#20026;&#27491;&#20540;&#65292;indexer&#38500;&#20102;&#20851;&#38190;&#23383;&#26412;&#36523;&#36824;&#20250;&#32034;&#24341;&#25152;&#26377;&#21487;&#33021;&#30340;&#21069;&#32512;&#65288;&#21363;&#35789;&#30340;&#24320;&#22836;&#37096;&#20998;&#65289;&#12290;&#22826;&#30701;&#30340;&#21069;&#32512;&#65288;&#23567;&#20110;&#20801;&#35768;&#30340;&#26368;&#23567;&#20540;&#65289;&#19981;&#20250;&#34987;&#32034;&#24341;&#12290;
</p><p>
&#20363;&#22914;&#65292;&#22312;min_prefix_len=3&#35774;&#32622;&#19979;&#32034;&#24341;&#20851;&#38190;&#23383;&#8220;example&#8221;&#20250;&#23548;&#33268;&#20135;&#29983;5&#20010;&#32034;&#24341;&#39033;&#8220;exa&#8221;, &#8220;exam&#8221;, &#8220;examp&#8221;, &#8220;exampl&#8221;&#21644;&#35813;&#35789;&#26412;&#36523;&#12290;&#23545;&#36825;&#20010;&#32034;&#24341;&#25628;&#32034;&#8220;exam&#8221;&#20250;&#24471;&#21040;&#21253;&#21547;&#8220;example&#8221;&#30340;&#25991;&#26723;&#65292;&#21363;&#20351;&#35813;&#25991;&#26723;&#20013;&#27809;&#26377;&#8220;exam&#8221;&#33258;&#36523;&#12290;&#28982;&#32780;&#65292;&#21069;&#32512;&#32034;&#24341;&#20250;&#20351;&#32034;&#24341;&#20307;&#31215;&#24613;&#21095;&#22686;&#22823;&#65288;&#22240;&#20026;&#24453;&#32034;&#24341;&#20851;&#38190;&#23383;&#22686;&#22810;&#20102;&#24456;&#22810;&#65289;&#65292;&#32780;&#19988;&#32034;&#24341;&#21644;&#25628;&#32034;&#30340;&#26102;&#38388;&#30342;&#20250;&#24694;&#21270;&#12290;
</p><p>
&#22312;&#21069;&#32512;&#32034;&#24341;&#20013;&#27809;&#26377;&#33258;&#21160;&#30340;&#21150;&#27861;&#21487;&#20197;&#25552;&#39640;&#31934;&#30830;&#21305;&#37197;&#65288;&#25972;&#20010;&#35789;&#23436;&#20840;&#21305;&#37197;&#65289;&#30340;&#35780;&#20998;&#65292;&#20294;&#26377;&#19968;&#20123;&#25216;&#24039;&#21487;&#20197;&#23454;&#29616;&#36825;&#20010;&#21151;&#33021;&#12290;&#39318;&#20808;&#65292;&#21487;&#20197;&#24314;&#31435;&#20004;&#20010;&#32034;&#24341;&#65292;&#19968;&#20010;&#24102;&#26377;&#21069;&#32512;&#32034;&#24341;&#65292;&#21478;&#19968;&#20010;&#27809;&#26377;&#65292;&#21516;&#26102;&#22312;&#36825;&#20004;&#20010;&#32034;&#24341;&#20013;&#25628;&#32034;&#65292;&#28982;&#21518;&#29992; <a class="link" href="#api-func-setindexweights" title="8.3.6.&nbsp;SetIndexWeights &#65288;&#35774;&#32622;&#32034;&#24341;&#26435;&#37325;&#65289;">SetIndexWeights()</a>
&#26469;&#35774;&#32622;&#20108;&#32773;&#30340;&#26435;&#37325;&#12290;&#20854;&#27425;&#65292;&#21487;&#20197;&#21551;&#29992;&#26143;&#21495;&#35821;&#27861;&#24182;&#37325;&#20889;&#25193;&#23637;&#27169;&#24335;&#30340;&#26597;&#35810;&#65306;
</p><pre class="programlisting">
# in sphinx.conf
enable_star = 1

// in query
$cl-&gt;Query ( "( keyword | keyword* ) other keywords" );
</pre><p>
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
min_prefix_len = 3
</pre></div>
<div class="sect2" title="11.2.19.&nbsp;min_infix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#20013;&#32512;&#38271;&#24230;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-min-infix-len"></a>11.2.19.&nbsp;min_infix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#20013;&#32512;&#38271;&#24230;</h3></div></div></div>
<p>
&#32034;&#24341;&#30340;&#26368;&#23567;&#20013;&#32512;&#38271;&#24230;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;0&#65288;&#19981;&#32034;&#24341;&#20013;&#32512;&#65289;&#12290;
</p>
&#20013;&#32512;&#32034;&#24341;&#26159;&#23454;&#29616;&#8220;start*&#8221;, &#8220;*end&#8221;, and &#8220;*middle*&#8221;&#31561;&#24418;&#24335;&#30340;&#36890;&#37197;&#31526;&#25104;&#20026;&#21487;&#33021;&#65288;&#36890;&#37197;&#31526;&#35821;&#27861;&#30340;&#32454;&#33410;&#35831;&#21442;&#32771; <a class="link" href="#conf-enable-star" title="11.2.22.&nbsp;enable_star&#65306;&#26143;&#21495;&#35821;&#27861;">enable_star</a> &#36873;&#39033;&#65289;&#12290;&#24403;&#26368;&#23567;&#20013;&#32512;&#38271;&#24230;&#35774;&#32622;&#20026;&#27491;&#20540;&#65292;indexer&#38500;&#20102;&#23545;&#20851;&#38190;&#23383;&#26412;&#36523;&#36824;&#20250;&#23545;&#25152;&#26377;&#21487;&#33021;&#30340;&#20013;&#32512;&#65288;&#21363;&#23376;&#23383;&#31526;&#20018;&#65289;&#20570;&#32034;&#24341;&#12290;&#22826;&#30701;&#30340;&#20013;&#32512;&#65288;&#30701;&#20110;&#20801;&#35768;&#30340;&#26368;&#23567;&#38271;&#24230;&#65289;&#19981;&#20250;&#34987;&#32034;&#24341;&#12290;
<p>
&#20363;&#22914;&#65292;&#22312;min_infix_len=2&#35774;&#32622;&#19979;&#32034;&#24341;&#20851;&#38190;&#23383;&#8220;test&#8221;&#20250;&#23548;&#33268;&#20135;&#29983;6&#20010;&#32034;&#24341;&#39033; "te", "es", "st", "tes", "est"&#31561;&#20013;&#32512;&#21644;&#35789;&#26412;&#36523;&#12290;&#23545;&#27492;&#32034;&#24341;&#25628;&#32034;&#8220;es&#8221;&#20250;&#24471;&#21040;&#21253;&#21547;&#8220;test&#8221;&#30340;&#25991;&#26723;&#65292;&#21363;&#20351;&#23427;&#24182;&#19981;&#21253;&#21547;&#8220;es&#8221;&#26412;&#36523;&#12290;&#28982;&#32780;&#65292;&#20013;&#32512;&#32034;&#24341;&#20250;&#20351;&#32034;&#24341;&#20307;&#31215;&#24613;&#21095;&#22686;&#22823;&#65288;&#22240;&#20026;&#24453;&#32034;&#24341;&#20851;&#38190;&#23383;&#22686;&#22810;&#20102;&#24456;&#22810;&#65289;&#65292;&#32780;&#19988;&#32034;&#24341;&#21644;&#25628;&#32034;&#30340;&#26102;&#38388;&#30342;&#20250;&#24694;&#21270;&#12290;
</p><p>
&#22312;&#20013;&#32512;&#32034;&#24341;&#20013;&#27809;&#26377;&#33258;&#21160;&#30340;&#21150;&#27861;&#21487;&#20197;&#25552;&#39640;&#31934;&#30830;&#21305;&#37197;&#65288;&#25972;&#20010;&#35789;&#23436;&#20840;&#21305;&#37197;&#65289;&#30340;&#35780;&#20998;&#65292;&#20294;&#21487;&#20197;&#20351;&#29992;&#19982; <a class="link" href="#conf-min-prefix-len" title="11.2.18.&nbsp;min_prefix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#21069;&#32512;&#38271;&#24230;">prefix indexes</a>
&#36873;&#39033;&#20013;&#30456;&#21516;&#30340;&#25216;&#24039;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
min_infix_len = 3
</pre></div>
<div class="sect2" title="11.2.20.&nbsp;prefix_fields&#65306;&#21069;&#32512;&#32034;&#24341;&#23383;&#27573;&#21015;&#34920;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-prefix-fields"></a>11.2.20.&nbsp;prefix_fields&#65306;&#21069;&#32512;&#32034;&#24341;&#23383;&#27573;&#21015;&#34920;</h3></div></div></div>
<p>
&#20570;&#21069;&#32512;&#32034;&#24341;&#30340;&#23383;&#27573;&#21015;&#34920;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#65288;&#25152;&#26377;&#23383;&#27573;&#22343;&#20026;&#21069;&#32512;&#32034;&#24341;&#27169;&#24335;&#65289;&#12290;
</p><p>
&#22240;&#20026;&#21069;&#32512;&#32034;&#24341;&#23545;&#32034;&#24341;&#21644;&#25628;&#32034;&#24615;&#33021;&#22343;&#26377;&#24433;&#21709;&#65292;&#21487;&#33021;&#38656;&#35201;&#23558;&#23427;&#38480;&#21046;&#22312;&#26576;&#20123;&#29305;&#23450;&#30340;&#20840;&#25991;&#25968;&#25454;&#23383;&#27573;&#65306;&#20363;&#22914;&#65292;&#23545;URL&#25552;&#20379;&#21069;&#32512;&#32034;&#24341;&#65292;&#20294;&#23545;&#39029;&#38754;&#20869;&#23481;&#19981;&#25552;&#20379;&#12290;prefix_fields&#25351;&#23450;&#21738;&#20123;&#23383;&#27573;&#35201;&#25552;&#20379;&#21069;&#32512;&#32034;&#24341;&#65292;&#20854;&#20182;&#23383;&#27573;&#22343;&#20250;&#20351;&#29992;&#26222;&#36890;&#27169;&#24335;&#12290;&#20540;&#30340;&#26684;&#24335;&#26159;&#36887;&#21495;&#20998;&#38548;&#30340;&#23383;&#27573;&#21517;&#23383;&#21015;&#34920;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
prefix_fields = url, domain
</pre></div>
<div class="sect2" title="11.2.21.&nbsp;infix_fields&#65306;&#20013;&#32512;&#32034;&#24341;&#23383;&#27573;&#21015;&#34920;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-infix-fields"></a>11.2.21.&nbsp;infix_fields&#65306;&#20013;&#32512;&#32034;&#24341;&#23383;&#27573;&#21015;&#34920;</h3></div></div></div>
<p>
&#20570;&#20013;&#32512;&#32034;&#24341;&#30340;&#23383;&#27573;&#21015;&#34920;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#65288;&#25152;&#26377;&#23383;&#27573;&#22343;&#20026;&#20013;&#32512;&#32034;&#24341;&#27169;&#24335;&#65289;&#12290;
</p><p>
&#19982; <a class="link" href="#conf-prefix-fields" title="11.2.20.&nbsp;prefix_fields&#65306;&#21069;&#32512;&#32034;&#24341;&#23383;&#27573;&#21015;&#34920;">prefix_fields</a>&#36873;&#39033;&#31867;&#20284;&#65292;&#20294;&#38480;&#21046;&#30340;&#26159;&#21738;&#20123;&#23383;&#27573;&#20570;&#20013;&#32512;&#32034;&#24341;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
infix_fields = url, domain
</pre></div>
<div class="sect2" title="11.2.22.&nbsp;enable_star&#65306;&#26143;&#21495;&#35821;&#27861;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-enable-star"></a>11.2.22.&nbsp;enable_star&#65306;&#26143;&#21495;&#35821;&#27861;</h3></div></div></div>
<p>
&#20801;&#35768;&#21069;&#32512;/&#20013;&#32512;&#32034;&#24341;&#19978;&#30340;&#26143;&#21495;&#35821;&#27861;&#65288;&#25110;&#31216;&#36890;&#37197;&#31526;&#65289;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;0&#65288;&#19981;&#20351;&#29992;&#36890;&#37197;&#31526;&#65289;&#65292;&#36825;&#26159;&#20026;&#20102;&#19982;0.9.7&#29256;&#26412;&#30340;&#20860;&#23481;&#24615;&#12290;&#21487;&#29992;&#30340;&#20540;&#20026;0&#21644;1&#12290;
</p><p>
&#27492;&#29305;&#24615;&#21551;&#29992;&#25628;&#32034;&#21069;&#32512;&#25110;&#20013;&#32512;&#32034;&#24341;&#26102;&#30340;&#8220;&#26143;&#21495;&#35821;&#27861;&#8221;&#65292;&#25110;&#32773;&#35828;&#36890;&#37197;&#31526;&#35821;&#27861;&#12290;&#20165;&#24433;&#21709;&#25628;&#32034;&#65292;&#22240;&#27492;&#35201;&#20351;&#25913;&#21464;&#29983;&#25928;&#21482;&#39035;&#37325;&#21551; <code class="filename">searchd</code>&#65292;&#32780;&#19981;&#38656;&#35201;&#37325;&#26032;&#32034;&#24341;&#12290;
</p><p>
&#40664;&#35748;&#20540;&#20026;0&#65292;&#24847;&#24605;&#26159;&#31105;&#27490;&#26143;&#21495;&#35821;&#27861;&#65292;&#25152;&#26377;&#20851;&#38190;&#23383;&#37117;&#26681;&#25454;&#32034;&#24341;&#26102;&#30340; <a class="link" href="#conf-min-prefix-len" title="11.2.18.&nbsp;min_prefix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#21069;&#32512;&#38271;&#24230;">min_prefix_len</a>
&#21644; <a class="link" href="#conf-min-infix-len" title="11.2.19.&nbsp;min_infix_len&#65306;&#26368;&#23567;&#32034;&#24341;&#20013;&#32512;&#38271;&#24230;">min_infix_len settings</a>&#35774;&#32622;&#34987;&#35270;&#20026;&#21069;&#32512;&#25110;&#32773;&#20013;&#32512;&#12290;&#21462;&#20540;1&#30340;&#24847;&#24605;&#26159;&#26143;&#21495;&#65288;&#8220;*&#8221;&#65289;&#21487;&#20197;&#29992;&#22312;&#20851;&#38190;&#23383;&#30340;&#21069;&#38754;&#25110;&#21518;&#38754;&#12290;&#26143;&#21495;&#19982;&#38646;&#20010;&#25110;&#22810;&#20010;&#23383;&#31526;&#21305;&#37197;&#12290;
</p><p>
&#20363;&#22914;&#65292;&#20551;&#35774;&#26576;&#32034;&#24341;&#21551;&#29992;&#20102;&#20013;&#32512;&#32034;&#24341;&#65292;&#19988;enable_star&#20540;&#20026;1&#12290;&#25628;&#32034;&#36807;&#31243;&#25353;&#22914;&#19979;&#24037;&#20316;&#65306;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">&#26597;&#35810; "abcdef" &#20165;&#21305;&#37197;&#30830;&#20999;&#21547;&#26377;&#8220;abcdef&#8221;&#36825;&#20010;&#35789;&#30340;&#25991;&#26723;&#65307;</li>
<li class="listitem">&#26597;&#35810; "abc*" &#21487;&#21305;&#37197;&#21547;&#26377;&#20197;&#8220;abc&#8221;&#24320;&#22836;&#30340;&#35789;&#30340;&#25991;&#26723;&#65288;&#21253;&#25324;&#31934;&#30830;&#21305;&#37197;&#35789;&#8220;abc&#8221;&#30340;&#25991;&#26723;&#65289;&#65307;</li>
<li class="listitem">&#26597;&#35810; "*cde*" &#21305;&#37197;&#22312;&#20219;&#20309;&#22320;&#26041;&#21547;&#26377;&#8220;cde&#8221;&#30340;&#35789;&#30340;&#25991;&#26723;&#65288;&#21253;&#25324;&#31934;&#30830;&#21305;&#37197;&#35789;&#8220;cde&#8221;&#30340;&#25991;&#26723;&#65289;&#65307;</li>
<li class="listitem">&#26597;&#35810; "*def" &#21305;&#37197;&#21547;&#26377;&#20197;&#8220;def&#8221;&#32467;&#26463;&#30340;&#35789;&#30340;&#25991;&#26723;&#65288;&#21253;&#25324;&#31934;&#30830;&#21305;&#37197;&#35789;&#8220;def&#8221;&#30340;&#25991;&#26723;&#65289;</li>
</ol></div>
<p>
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
enable_star = 1
</pre></div>
<div class="sect2" title="11.2.23.&nbsp;ngram_len&#65306;N-gram&#38271;&#24230;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-ngram-len"></a>11.2.23.&nbsp;ngram_len&#65306;N-gram&#38271;&#24230;</h3></div></div></div>
<p>
N-gram&#32034;&#24341;&#30340;N-gram&#38271;&#24230;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;0&#65288;&#31105;&#29992;n-gram&#32034;&#24341;&#65289;&#21487;&#29992;&#30340;&#20540;&#26159;0&#21644;1&#65288;&#20854;&#20182;&#38271;&#24230;&#23578;&#26410;&#23454;&#29616;&#65289;
<span class="emphasis"><em>&#23545;&#20110;&#20351;&#29992;Coreseek&#30340;&#20013;&#25991;&#29992;&#25143;&#65292;&#22312;&#21551;&#29992;&#20102;&#20013;&#25991;&#20998;&#35789;&#30340;&#24773;&#20917;&#19979;&#65292;&#26412;&#33410;&#20869;&#23481;&#21487;&#24573;&#30053;&#12290;</em></span>
</p><p>
N-gram&#25552;&#20379;&#23545;&#26410;&#20998;&#35789;CJK&#65288;Chinese, Japanse, Koreasn&#20013;&#26085;&#38889;&#65289;&#25991;&#26412;&#30340;&#22522;&#26412;&#25903;&#25345;&#12290;CJK&#25628;&#32034;&#30340;&#38382;&#39064;&#22312;&#20110;&#35789;&#19982;&#35789;&#20043;&#21069;&#27809;&#26377;&#28165;&#26224;&#30340;&#30028;&#38480;&#12290;&#29702;&#24819;&#20013;&#65292;&#25991;&#26412;&#21487;&#20197;&#36890;&#36807;&#19968;&#20010;&#31216;&#20316;&#20998;&#35789;&#31243;&#24207;&#65288;segmenter&#65289;&#30340;&#29305;&#27530;&#31243;&#24207;&#30340;&#36807;&#28388;&#65292;&#20043;&#21518;&#20998;&#38548;&#31526;&#21363;&#34987;&#21152;&#20837;&#21040;&#36866;&#24403;&#20301;&#32622;&#12290;&#28982;&#32780;&#20998;&#35789;&#36807;&#31243;&#32531;&#24930;&#32780;&#26131;&#38169;&#65292;&#22240;&#27492;&#36890;&#24120;&#20250;&#36716;&#32780;&#32034;&#24341;&#36830;&#32493;&#30340;&#19968;&#32452;N&#20010;&#23383;&#31526;&#65292;&#25110;&#31216;N-gram&#12290;
</p><p>
&#21551;&#29992;&#27492;&#29305;&#24615;&#65292;CJK&#23383;&#31526;&#27969;&#20250;&#34987;&#24403;&#20316;n-gram&#32034;&#24341;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#36755;&#20837;&#25991;&#26412;&#20026;&#8220;ABCDEF&#8221;&#65288;A&#21040;F&#22343;&#20195;&#34920;CJK&#23383;&#31526;&#65289; &#65292;&#32780;&#27492;&#36873;&#39033;&#35774;&#32622;&#30340;&#38271;&#24230;&#20026;1&#65292;&#37027;&#23427;&#20204;&#20250;&#34987;&#24403;&#20316;&#8220;A B C D E F&#8221;&#32780;&#32034;&#24341;&#12290;&#65288;&#22914;&#26524;&#27492;&#36873;&#39033;&#35774;&#32622;&#30340;&#38271;&#24230;&#26159;2&#65292;&#37027;&#20250;&#20135;&#29983;&#8220;AB BC CD DE EF&#8221;&#65292;&#20294;&#30446;&#21069;&#20165;&#25903;&#25345;1&#65289;&#12290;&#21482;&#26377;&#37027;&#20123;&#22312; <a class="link" href="#conf-ngram-chars" title="11.2.24.&nbsp;ngram_chars&#65306;N-gram&#23383;&#31526;&#21015;&#34920;">ngram_chars</a> &#36873;&#39033;&#34920;&#20013;&#21015;&#20986;&#30340;&#23383;&#31526;&#20250;&#36825;&#26679;&#20998;&#21106;&#65292;&#20854;&#20182;&#19981;&#21463;&#24433;&#21709;&#12290;
</p><p>
&#27880;&#24847;&#65292;&#22914;&#26524;&#25628;&#32034;&#26597;&#35810;&#26159;&#24050;&#20998;&#35789;&#30340;&#65292;&#21363;&#21333;&#29420;&#30340;&#35789;&#20043;&#38388;&#26377;&#20998;&#38548;&#31526;&#20998;&#38548;&#65292;&#37027;&#20040;&#22312;&#25193;&#23637;&#27169;&#24335;&#20013;&#23558;&#36825;&#20123;&#35789;&#25918;&#20837;&#24341;&#21495;&#20013;&#25628;&#32034;&#20250;&#24471;&#21040;&#27491;&#30830;&#30340;&#21305;&#37197;&#32467;&#26524;&#65292;&#21363;&#20351;&#25991;&#26723;<span class="bold"><strong>&#27809;&#26377;</strong></span>&#20998;&#35789;&#12290;&#20363;&#22914;&#65292;&#20551;&#35774;&#21407;&#26597;&#35810;&#20026;&#8220;BC DEF&#8221;&#65292;&#22312;&#24212;&#29992;&#31243;&#24207;&#31471;&#29992;&#24341;&#21495;&#23558;&#32034;&#24341;&#21253;&#36215;&#26469;&#65292;&#30475;&#36215;&#26469;&#26159;&#8220;BC&#8221; &#8220;DEF&#8221;&#65288;<span class="emphasis"><em>&#21253;&#25324;</em></span>&#24341;&#21495;&#65289;&#65292;&#36825;&#20010;&#26597;&#35810;&#34987;&#20256;&#32473;Sphinx&#24182;&#22312;&#20854;&#20869;&#37096;&#20998;&#21106;&#25104;1-gram&#65292;&#26597;&#35810;&#21464;&#25104;&#8220;B C&#8221; &#8220;D E F&#8221;&#65292;&#20173;&#28982;&#21253;&#25324;&#20316;&#20026;&#35789;&#32452;&#26597;&#35810;&#25805;&#20316;&#31526;&#30340;&#24341;&#21495;&#12290;&#35813;&#26597;&#35810;&#20250;&#21305;&#37197;&#27491;&#30830;&#30340;&#25991;&#26412;&#65292;&#21363;&#20351;&#25991;&#26412;&#20013;&#27809;&#26377;&#30456;&#24212;&#30340;&#20998;&#38548;&#31526;&#12290;
</p><p>
&#21363;&#20351;&#25628;&#32034;&#26597;&#35810;&#27809;&#26377;&#20998;&#35789;&#65292;Sphinx&#20063;&#21487;&#20197;&#36820;&#22238;&#36739;&#22909;&#30340;&#32467;&#26524;&#65292;&#36825;&#35201;&#24863;&#35874;&#22522;&#20110;&#35789;&#32452;&#30340;&#30456;&#20851;&#24230;&#35745;&#31639;&#65306;&#23427;&#20250;&#20351;&#30456;&#36817;&#30340;&#35789;&#32452;&#21305;&#37197;&#65288;&#22312;n-gram&#20013;CJK&#35789;&#30456;&#24403;&#20110;&#22810;&#20010;&#23383;&#31526;&#30340;&#35789;&#21305;&#37197;&#65289;&#25490;&#22312;&#21069;&#38754;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
ngram_len = 1
</pre></div>
<div class="sect2" title="11.2.24.&nbsp;ngram_chars&#65306;N-gram&#23383;&#31526;&#21015;&#34920;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-ngram-chars"></a>11.2.24.&nbsp;ngram_chars&#65306;N-gram&#23383;&#31526;&#21015;&#34920;</h3></div></div></div>
<p>
N-gram&#23383;&#31526;&#21015;&#34920;&#12290;
&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
<span class="emphasis"><em>&#23545;&#20110;&#20351;&#29992;Coreseek&#30340;&#20013;&#25991;&#29992;&#25143;&#65292;&#22312;&#21551;&#29992;&#20102;&#20013;&#25991;&#20998;&#35789;&#30340;&#24773;&#20917;&#19979;&#65292;&#26412;&#33410;&#20869;&#23481;&#21487;&#24573;&#30053;&#12290;</em></span>
</p><p>
&#19982; <a class="link" href="#conf-ngram-len" title="11.2.23.&nbsp;ngram_len&#65306;N-gram&#38271;&#24230;">ngram_len</a>&#36873;&#39033;&#32852;&#29992;&#65292;&#27492;&#21015;&#34920;&#23450;&#20041;&#20102;&#20174;&#20013;&#25277;&#21462;n-gram&#30340;&#23383;&#31526;&#24207;&#21015;&#12290;&#20854;&#20182;&#23383;&#31526;&#32452;&#25104;&#30340;&#35789;&#19981;&#21463;n-gram&#32034;&#24341;&#29305;&#24615;&#30340;&#24433;&#21709;&#12290;&#20540;&#30340;&#26684;&#24335;&#19982;<a class="link" href="#conf-charset-table" title="11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;">charset_table</a>&#30456;&#21516;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
ngram_chars = U+3000..U+2FA1F
</pre></div>
<div class="sect2" title="11.2.25.&nbsp;phrase_boundary&#65306;&#35789;&#32452;&#36793;&#30028;&#31526;&#21015;&#34920;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-phrase-boundary"></a>11.2.25.&nbsp;phrase_boundary&#65306;&#35789;&#32452;&#36793;&#30028;&#31526;&#21015;&#34920;</h3></div></div></div>
<p>
&#35789;&#32452;&#36793;&#30028;&#31526;&#21015;&#34920;&#12290;
&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
</p><p>
&#27492;&#21015;&#34920;&#25511;&#21046;&#21738;&#20123;&#23383;&#31526;&#34987;&#35270;&#20316;&#20998;&#38548;&#19981;&#21516;&#35789;&#32452;&#30340;&#36793;&#30028;&#65292;&#27599;&#21040;&#19968;&#20010;&#36825;&#26679;&#30340;&#36793;&#30028;&#65292;&#20854;&#21518;&#38754;&#30340;&#35789;&#30340;&#8220;&#20301;&#32622;&#8221;&#20540;&#37117;&#20250;&#34987;&#21152;&#20837;&#19968;&#20010;&#39069;&#22806;&#30340;&#22686;&#37327;&#65292;&#21487;&#20197;&#20511;&#27492;&#29992;&#36817;&#20284;&#25628;&#32034;&#31526;&#26469;&#27169;&#25311;&#35789;&#32452;&#25628;&#32034;&#12290;&#35821;&#27861;&#19982; <a class="link" href="#conf-charset-table" title="11.2.16.&nbsp;charset_table&#65306;&#23383;&#31526;&#34920;&#21644;&#22823;&#23567;&#20889;&#36716;&#25442;&#35268;&#21017;">charset_table</a>&#36873;&#39033;&#30456;&#20284;&#65292;&#20294;&#27809;&#26377;&#23383;&#31526;&#20043;&#38388;&#30340;&#26144;&#23556;&#20851;&#31995;&#65292;&#32780;&#19988;&#36825;&#20123;&#35789;&#32452;&#36793;&#30028;&#31526;&#19981;&#33021;&#37325;&#22797;&#20986;&#29616;&#22312;&#20854;&#20182;&#20219;&#20309;&#35774;&#32622;&#36873;&#39033;&#20013;&#12290;
</p><p>
&#33258;&#27599;&#20010;&#35789;&#32452;&#36793;&#30028;&#36215;&#65292;&#21518;&#38754;&#30340;&#35789;&#30340;&#8220;&#20301;&#32622;&#8221;&#37117;&#20250;&#34987;&#21152;&#20837;&#19968;&#20010;&#39069;&#22806;&#30340;&#22686;&#37327;&#65288;&#30001;
<a class="link" href="#conf-phrase-boundary-step" title="11.2.26.&nbsp;phrase_boundary_step&#65306;&#35789;&#32452;&#36793;&#30028;&#20301;&#32622;&#22686;&#37327;">phrase_boundary_step</a>&#23450;&#20041;&#65289;&#12290;&#36825;&#20351;&#36890;&#36807;&#36817;&#20284;&#25628;&#32034;&#31526;&#23454;&#29616;&#35789;&#32452;&#25628;&#32034;&#25104;&#20026;&#21487;&#33021;&#65306;&#19981;&#21516;&#35789;&#32452;&#20013;&#30340;&#35789;&#20043;&#38388;&#30340;&#36317;&#31163;&#32943;&#23450;&#22823;&#20110;phrase_boundary_step&#65292;&#22240;&#27492;&#30456;&#20284;&#36317;&#31163;&#23567;&#20110;phrase_boundary_step&#30340;&#36817;&#20284;&#25628;&#32034;&#20854;&#23454;&#26159;&#22312;&#25628;&#32034;&#22312;&#19968;&#20010;&#35789;&#32452;&#33539;&#22260;&#20869;&#20986;&#29616;&#20102;&#20840;&#37096;&#32473;&#23450;&#26597;&#35810;&#35789;&#30340;&#24773;&#20917;&#65292;&#30456;&#24403;&#20110;&#35789;&#32452;&#25628;&#32034;&#12290;
</p><p>
&#21482;&#26377;&#35789;&#32452;&#36793;&#30028;&#31526;&#21518;&#38754;&#32039;&#36319;&#30528;&#19968;&#20010;&#20998;&#38548;&#31526;&#26102;&#65292;&#35789;&#32452;&#36793;&#30028;&#25165;&#34987;&#28608;&#27963;&#65292;&#36825;&#26159;&#20026;&#20102;&#36991;&#20813;S.T.A.L.K.E.R &#25110; URLs &#31561;&#32553;&#20889;&#34987;&#38169;&#24403;&#25104;&#33509;&#24178;&#20010;&#36830;&#32493;&#30340;&#35789;&#32452;&#65288;&#22240;&#20026;&#8220;.&#8221;&#23646;&#20110;&#35789;&#32452;&#36793;&#30028;&#31526;&#65289;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
phrase_boundary = ., ?, !, U+2026 # horizontal ellipsis
</pre></div>
<div class="sect2" title="11.2.26.&nbsp;phrase_boundary_step&#65306;&#35789;&#32452;&#36793;&#30028;&#20301;&#32622;&#22686;&#37327;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-phrase-boundary-step"></a>11.2.26.&nbsp;phrase_boundary_step&#65306;&#35789;&#32452;&#36793;&#30028;&#20301;&#32622;&#22686;&#37327;</h3></div></div></div>
<p>
&#35789;&#32452;&#36793;&#30028;&#19978;&#35789;&#20301;&#32622;&#30340;&#22686;&#37327;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;0&#12290;
</p><p>
&#22312;&#35789;&#32452;&#36793;&#30028;&#19978;&#65292;&#24403;&#21069;&#35789;&#20301;&#32622;&#20250;&#21152;&#19978;&#27492;&#36873;&#39033;&#35774;&#32622;&#30340;&#39069;&#22806;&#22686;&#37327;&#12290;&#35814;&#32454;&#35831;&#21442;&#32771; <a class="link" href="#conf-phrase-boundary" title="11.2.25.&nbsp;phrase_boundary&#65306;&#35789;&#32452;&#36793;&#30028;&#31526;&#21015;&#34920;">phrase_boundary</a> &#36873;&#39033;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
phrase_boundary_step = 100
</pre></div>
<div class="sect2" title="11.2.27.&nbsp;html_strip&#65306;HTMl&#26631;&#35760;&#28165;&#29702;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-html-strip"></a>11.2.27.&nbsp;html_strip&#65306;HTMl&#26631;&#35760;&#28165;&#29702;</h3></div></div></div>
<p>
&#26159;&#21542;&#20174;&#36755;&#20837;&#20840;&#25991;&#25968;&#25454;&#20013;&#21435;&#38500;HTML&#26631;&#35760;&#12290;&#21487;&#36873;&#26631;&#35760;&#65292;&#40664;&#35748;&#20026;0&#12290;&#24050;&#30693;&#20540;&#21253;&#25324;0&#65288;&#31105;&#29992;&#65289;&#21644;1&#65288;&#21551;&#29992;&#65289;&#12290;
</p><p>
HTML&#26631;&#31614;&#21644;&#23454;&#20307;&#37117;&#21487;&#20197;&#34987;&#26631;&#35760;&#24182;&#19988;&#24471;&#21040;&#22788;&#29702;&#12290;
</p><p>HTML&#26631;&#31614;&#20250;&#34987;&#21024;&#38500;&#65292;&#20294;&#26159;&#20854;&#20869;&#23481;&#65288;&#21363;&lt;P&gt; &#19982; &lt;/P&gt;&#20043;&#38388;&#30340;&#37096;&#20998;&#65289;&#40664;&#35748;&#24773;&#20917;&#19979;&#20250;&#20445;&#30041;&#12290;&#20320;&#21487;&#20197;&#36873;&#25321;&#26631;&#31614;&#20013;&#38656;&#35201;&#20445;&#30041;&#21644;&#32034;&#24341;&#30340;&#23646;&#24615;&#65288;&#20363;&#22914;A&#26631;&#31614;&#20013;&#30340;HREF&#23646;&#24615;&#65292;&#25110;&#32773;IMG&#26631;&#31614;&#20013;&#30340;ALT&#23646;&#24615;&#65289;&#19968;&#20123;&#24120;&#35265;&#30340;&#20869;&#23884;&#26631;&#31614;&#20250;&#34987;&#23436;&#20840;&#28165;&#38500;&#65292;&#20854;&#20182;&#26631;&#31614;&#37117;&#34987;&#35270;&#20026;&#22359;&#32423;&#24182;&#34987;&#26367;&#25442;&#20026;&#31354;&#26684;&#12290;&#20363;&#22914;&#65306;'te&lt;B&gt;st&lt;/B&gt;'&#25991;&#26412;&#23558;&#34987;&#21333;&#20570;&#19968;&#20010;&#21333;&#19968;&#30340;&#20851;&#38190;&#23383;'test'&#34987;&#32034;&#24341;&#65292;&#20294;&#26159;&#65292;'te&lt;P&gt;st&lt;/P&gt;'&#23558;&#34987;&#24403;&#20570;&#20004;&#20010;&#20851;&#38190;&#23383;'te'&#21644;'st'&#34987;&#32034;&#24341;&#12290;&#24050;&#30693;&#30340;&#20869;&#23884;&#26631;&#31614;&#22914;&#19979;&#65306;A, B, I, S, U, BASEFONT,
BIG, EM, FONT, IMG, LABEL, SMALL, SPAN, STRIKE, STRONG, SUB, SUP, TT.
</p><p>
HTML&#23454;&#20307;&#20250;&#34987;&#35299;&#30721;&#24182;&#26367;&#25442;&#20026;&#23545;&#24212;&#30340;UTF-8&#23383;&#31526;&#12290;&#21093;&#31163;&#22120;&#21516;&#26102;&#25903;&#25345;&#25968;&#23383;&#24418;&#24335;&#65288;&#20363;&#22914;&amp;#239;&#65289;&#21644;&#25991;&#26412;&#24418;&#24335;&#65288;&#20363;&#22914;&amp; oacute;&#25110;&amp; nbsp;&#65289;&#12290;&#25152;&#26377;&#30001;HTML4&#26631;&#20934;&#35268;&#23450;&#30340;&#23454;&#20307;&#37117;&#25903;&#25345;&#12290;
</p><p>
&#27492;&#29305;&#24615;&#23545; <code class="option">xmlpipe</code> &#25968;&#25454;&#28304;&#26080;&#25928;&#65288;&#24314;&#35758;&#21319;&#32423;&#21040; xmlpipe2 &#65289;&#12290;&#36825;&#20010;&#21435;&#38500;HTML&#26631;&#35760;&#30340;&#27169;&#22359;&#24212;&#35813;&#24456;&#22909;&#22320;&#24037;&#20316;&#20110;&#27491;&#30830;&#26684;&#24335;&#21270;&#30340;HTML&#21644;XHTML&#65292;&#20294;&#23601;&#20687;&#22823;&#22810;&#25968;&#27983;&#35272;&#22120;&#19968;&#26679;&#65292;&#23545;&#20110;&#26684;&#24335;&#38169;&#35823;&#30340;&#25991;&#26412;&#65288;&#20363;&#22914;&#24102;&#26377;&#26080;&#27861;&#37197;&#23545;&#30340;&lt;&#21644;&gt;&#30340;HTML&#65289;&#21487;&#33021;&#20135;&#29983;&#19981;&#24076;&#26395;&#30340;&#36755;&#20986;&#12290;
</p><p>
&#21482;&#26377;HTML&#26631;&#31614;&#21644;HTML&#27880;&#37322;&#20250;&#34987;&#21024;&#38500;&#12290;&#35201;&#21516;&#26102;&#21024;&#38500;&#26631;&#31614;&#30340;&#20869;&#23481;&#65288;&#20363;&#22914;&#35201;&#21024;&#38500;&#20869;&#23884;&#30340;&#33050;&#26412;&#65289;&#65292;&#35831;&#21442;&#32771; <a class="link" href="#conf-html-remove-elements" title="11.2.29.&nbsp;html_remove_elements&#65306;HTML&#20803;&#32032;&#28165;&#29702;">html_remove_elements</a> &#36873;&#39033;&#12290;&#26631;&#31614;&#21517;&#27809;&#26377;&#38480;&#21046;&#65292;&#21363;&#20219;&#20309;&#30475;&#36215;&#26469;&#20687;&#26377;&#25928;&#30340;&#26631;&#31614;&#24320;&#22836;&#12289;&#32467;&#26463;&#25110;&#32773;&#27880;&#37322;&#30340;&#20869;&#23481;&#37117;&#20250;&#34987;&#21024;&#38500;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
html_strip = 1
</pre></div>
<div class="sect2" title="11.2.28.&nbsp;html_index_attrs&#65306;HTML&#26631;&#31614;&#23646;&#24615;&#32034;&#24341;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-html-index-attrs"></a>11.2.28.&nbsp;html_index_attrs&#65306;HTML&#26631;&#31614;&#23646;&#24615;&#32034;&#24341;&#35774;&#32622;</h3></div></div></div>
<p>
&#21435;&#38500;HTML&#26631;&#35760;&#20294;&#35201;&#32034;&#24341;&#30340;&#26631;&#35760;&#23646;&#24615;&#21015;&#34920;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#65288;&#19981;&#32034;&#24341;&#26631;&#35760;&#30340;&#23646;&#24615;&#65289;&#12290;
</p><p>
&#25351;&#23450;&#34987;&#20445;&#30041;&#24182;&#32034;&#24341;&#30340;HTML&#26631;&#35760;&#23646;&#24615;&#65292;&#32780;HTML&#26631;&#35760;&#26412;&#36523;&#20250;&#34987;&#34987;&#21024;&#38500;&#12290;&#26684;&#24335;&#26159;&#23545;&#27599;&#20010;&#26631;&#35760;&#21015;&#20030;&#21487;&#20197;&#32034;&#24341;&#30340;&#23646;&#24615;&#65292;&#35831;&#30475;&#19979;&#20363;&#65306;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
html_index_attrs = img=alt,title; a=title;
</pre></div>
<div class="sect2" title="11.2.29.&nbsp;html_remove_elements&#65306;HTML&#20803;&#32032;&#28165;&#29702;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-html-remove-elements"></a>11.2.29.&nbsp;html_remove_elements&#65306;HTML&#20803;&#32032;&#28165;&#29702;</h3></div></div></div>
<p>
&#23436;&#20840;&#28165;&#31354;HTML&#26631;&#31614;&#21015;&#34920;&#65292;&#19981;&#20165;&#36825;&#20123;&#26631;&#31614;&#26412;&#36523;&#20250;&#34987;&#21024;&#38500;&#65292;&#26631;&#31614;&#26412;&#36523;&#21253;&#21547;&#30340;&#20869;&#23481;&#20063;&#20250;&#34987;&#21024;&#38500;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#65288;&#19981;&#21024;&#38500;&#20219;&#20309;&#26631;&#31614;&#30340;&#20869;&#23481;&#65289;&#12290;
</p><p>
&#27492;&#29305;&#24615;&#20801;&#35768;&#21024;&#38500;&#26631;&#31614;&#21253;&#21547;&#30340;&#20869;&#23481;&#65292;&#21363;&#22312;&#24320;&#22987;&#26631;&#35760;&#21644;&#32467;&#26463;&#26631;&#35760;&#20043;&#38388;&#30340;&#25152;&#26377;&#19996;&#35199;&#12290;&#19968;&#33324;&#29992;&#20110;&#21024;&#38500;&#20869;&#23884;&#30340;&#33050;&#26412;&#25110;CSS&#31561;&#12290;&#30701;&#30340;&#27809;&#26377;&#23454;&#38469;&#20869;&#23481;&#30340;&#26631;&#31614;&#65288;&#21363;&lt;br /&gt;&#65289;&#20063;&#25903;&#25345;&#65307;&#31867;&#20284;<span class="bold"><strong>&#19981;&#20250;</strong></span>&#36825;&#26679;&#30340;&#26631;&#31614;&#20013;&#30340;&#20869;&#23481;&#23558;&#34987;&#21024;&#38500;&#12290;
</p><p>
&#20540;&#20026;&#36887;&#21495;&#20998;&#38548;&#30340;&#26631;&#31614;&#21517;&#31216;&#21015;&#34920;&#12290;&#26631;&#31614;&#21517;&#22823;&#23567;&#20889;&#26080;&#20851;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
html_remove_elements = style, script
</pre></div>
<div class="sect2" title="11.2.30.&nbsp;local&#65306;&#26412;&#22320;&#32034;&#24341;&#22768;&#26126;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-local"></a>11.2.30.&nbsp;local&#65306;&#26412;&#22320;&#32034;&#24341;&#22768;&#26126;</h3></div></div></div>
<p>
&#20998;&#24067;&#24335;&#32034;&#24341; <a class="link" href="#distributed" title="5.8.&nbsp;&#20998;&#24067;&#24335;&#25628;&#32034;">distributed index</a>&#20013;&#30340;&#26412;&#22320;&#32034;&#24341;&#22768;&#26126;&#12290;&#21487;&#20197;&#20986;&#29616;&#22810;&#27425;&#65292; &#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
</p><p>
&#27492;&#35774;&#32622;&#29992;&#20110;&#22768;&#26126;&#20998;&#24067;&#24335;&#32034;&#24341;&#34987;&#25628;&#32034;&#26102;&#35201;&#25628;&#32034;&#30340;&#26412;&#22320;&#32034;&#24341;&#12290;&#20840;&#37096;&#26412;&#22320;&#32034;&#24341;&#20250;&#34987;<span class="bold"><strong>&#20381;&#27425;</strong></span>&#25628;&#32034;&#65292;&#20165;&#20351;&#29992;1&#20010;CPU&#25110;&#26680;&#12290;&#35201;&#24182;&#34892;&#22788;&#29702;&#65292;&#21487;&#20197;&#37197;&#32622;<code class="filename">searchd</code>&#26597;&#35810;&#23427;&#33258;&#36523;&#65288;&#32454;&#33410;&#21442;&#32771;
<a class="xref" href="#conf-agent" title="11.2.31.&nbsp;agent&#65306;&#36828;&#31243;&#32034;&#24341;&#22768;&#26126;">&#31532;&nbsp;11.2.31&nbsp;&#33410; &#8220;agent&#65306;&#36828;&#31243;&#32034;&#24341;&#22768;&#26126;&#8221;</a> &#65289;&#12290;&#21487;&#20197;&#20026;&#27599;&#20010;&#20998;&#24067;&#24335;&#32034;&#24341;&#22768;&#26126;&#22810;&#20010;&#26412;&#22320;&#32034;&#24341;&#12290;&#27599;&#20010;&#26412;&#22320;&#32034;&#24341;&#21487;&#20197;&#22312;&#20854;&#20182;&#20998;&#24067;&#24335;&#32034;&#24341;&#20013;&#22810;&#27425;&#24341;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
local = chunk1
local = chunk2
</pre></div>
<div class="sect2" title="11.2.31.&nbsp;agent&#65306;&#36828;&#31243;&#32034;&#24341;&#22768;&#26126;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-agent"></a>11.2.31.&nbsp;agent&#65306;&#36828;&#31243;&#32034;&#24341;&#22768;&#26126;</h3></div></div></div>
<p>
&#20998;&#24067;&#24335;&#32034;&#24341;&#65288;<a class="link" href="#distributed" title="5.8.&nbsp;&#20998;&#24067;&#24335;&#25628;&#32034;">distributed index</a>&#65289;&#20013;&#30340;&#36828;&#31243;&#20195;&#29702;&#21644;&#32034;&#24341;&#22768;&#26126;&#12290;&#21487;&#20197;&#20986;&#29616;&#22810;&#27425;&#65292;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
</p><p>
&#27492;&#35774;&#32622;&#29992;&#26469;&#22768;&#26126;&#25628;&#32034;&#20998;&#24067;&#24335;&#32034;&#24341;&#26102;&#35201;&#25628;&#32034;&#30340;&#36828;&#31243;&#20195;&#29702;&#12290;&#20195;&#29702;&#21487;&#20197;&#30475;&#20316;&#32593;&#32476;&#25351;&#38024;&#65292;&#23427;&#25351;&#23450;&#20102;&#20027;&#26426;&#12289;&#31471;&#21475;&#21644;&#32034;&#24341;&#21517;&#12290;&#22312;&#26368;&#22522;&#26412;&#30340;&#24773;&#20917;&#19979;&#65292;&#20195;&#29702;&#21487;&#20197;&#19982;&#36828;&#31243;&#29289;&#29702;&#20027;&#26426;&#23545;&#24212;&#12290;&#26356;&#20005;&#26684;&#30340;&#26469;&#35828;&#65292;&#36825;&#19981;&#19968;&#23450;&#24635;&#26159;&#27491;&#30830;&#65306;&#21487;&#20197;&#23558;&#22810;&#20010;&#20195;&#29702;&#25351;&#21521;&#21516;&#19968;&#21488;&#36828;&#31243;&#20027;&#26426;&#65292;&#29978;&#33267;&#25351;&#21521;&#21516;&#19968;&#20010;<code class="filename">searchd</code>&#23454;&#20363;&#65288;&#20197;&#20415;&#21033;&#29992;&#22810;&#20010;CPU&#25110;&#26680;&#65289;&#12290;
</p><p>
&#20540;&#30340;&#26684;&#24335;&#22914;&#19979;&#65306;
</p><pre class="programlisting">
agent = specification:remote-indexes-list
specification = hostname ":" port | path
</pre><p>
&#8220;hostname&#8221;&#26159;&#36828;&#31243;&#20027;&#26426;&#21517;&#65292;&#8220;port&#8221;&#26159;&#36828;&#31243;TCP&#31471;&#21475;&#65292;"path"&#26159;Unix&#22495;&#22871;&#25509;&#23383;&#30340;&#36335;&#24452;&#65292; &#32780;&#8220;remote-index-list&#8221;&#26159;&#19968;&#20010;&#36887;&#21495;&#20998;&#38548;&#30340;&#36828;&#31243;&#32034;&#24341;&#21015;&#34920;&#12290;
</p><p>
&#20840;&#37096;&#20195;&#29702;&#20250;&#34987;&#24182;&#34892;&#25628;&#32034;&#12290;&#28982;&#32780;&#21516;&#19968;&#20010;&#20195;&#29702;&#30340;&#22810;&#20010;&#32034;&#24341;&#26159;&#20381;&#27425;&#25628;&#32034;&#30340;&#12290;&#36825;&#20351;&#24744;&#21487;&#20197;&#26681;&#25454;&#30828;&#20214;&#26469;&#20248;&#21270;&#37197;&#32622;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20004;&#20010;&#36828;&#31243;&#32034;&#24341;&#23384;&#20648;&#22312;&#19968;&#20010;&#30456;&#21516;&#30340;&#30828;&#30424;&#19978;&#65292;&#26368;&#22909;&#26159;&#37197;&#32622;&#19968;&#20010;&#24102;&#26377;&#22810;&#20010;&#25353;&#39034;&#24207;&#25628;&#32034;&#30340;&#32034;&#24341;&#65292;&#36991;&#20813;&#39057;&#32321;&#30340;&#30913;&#22836;&#23547;&#22336;&#12290;&#22914;&#26524;&#36825;&#20123;&#32034;&#24341;&#23384;&#20648;&#22312;&#19981;&#21516;&#30340;&#30828;&#30424;&#19978;&#65292;&#37027;&#37197;&#32622;&#20004;&#20010;&#20195;&#29702;&#20250;&#26356;&#26377;&#21033;&#65292;&#22240;&#20026;&#36825;&#21487;&#20197;&#20351;&#24037;&#20316;&#23436;&#20840;&#24182;&#34892;&#12290;&#23545;&#20110;CPU&#20063;&#26159;&#22914;&#27492;&#65292;&#34429;&#28982;&#22312;&#20004;&#20010;&#36827;&#31243;&#38388;&#20999;&#25442;&#23545;&#24615;&#33021;&#30340;&#24433;&#21709;&#27604;&#36739;&#23567;&#32780;&#19988;&#24120;&#24120;&#34987;&#23436;&#20840;&#24573;&#30053;&#12290;
</p><p>
&#22312;&#26377;&#22810;&#20010;CPU&#21644;&#30828;&#30424;&#30340;&#26426;&#22120;&#19978;&#65292;&#20195;&#29702;&#21487;&#20197;&#25351;&#21521;&#30456;&#21516;&#30340;&#26426;&#22120;&#20197;&#20415;&#24182;&#34892;&#22320;&#20351;&#29992;&#30828;&#20214;&#65292;&#38477;&#20302;&#26597;&#35810;&#24310;&#36831;&#12290;&#24182;&#19981;&#38656;&#35201;&#20026;&#27492;&#35774;&#32622;&#22810;&#20010;<code class="filename">searchd</code>&#23454;&#20363;&#65292;&#19968;&#20010;&#23454;&#20363;&#19982;&#33258;&#36523;&#36890;&#20449;&#26159;&#21512;&#27861;&#30340;&#12290;&#20197;&#19979;&#26159;&#19968;&#20010;&#31034;&#20363;&#35774;&#32622;&#65292;&#23427;&#26159;&#20026;&#19968;&#21488;&#26377;4&#20010;CPU&#30340;&#26426;&#22120;&#20934;&#22791;&#30340;&#65292;&#21487;&#20197;&#24182;&#34892;&#22320;&#20351;&#29992;4&#20010;CPU&#65292;&#21508;&#22788;&#29702;&#19968;&#20010;&#26597;&#35810;&#65306;
</p><pre class="programlisting">
index dist
{
	type = distributed
	local = chunk1
	agent = localhost:9312:chunk2
	agent = localhost:9312:chunk3
	agent = localhost:9312:chunk4
}
</pre><p>
&#27880;&#24847;&#20854;&#20013;&#19968;&#22359;&#26159;&#26412;&#22320;&#25628;&#32034;&#30340;&#65292;&#32780;&#21516;&#19968;&#20010;searchd&#31034;&#20363;&#21448;&#21521;&#26412;&#36523;&#26597;&#35810;&#65292;&#20197;&#20415;&#24182;&#34892;&#22320;&#21551;&#21160;&#20854;&#20182;&#19977;&#20010;&#25628;&#32034;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
agent = localhost:9312:chunk2 # contact itself
agent = /var/run/searchd.s:chunk2
agent = searchbox2:9312:chunk3,chunk4 # search remote indexes
</pre></div>
<div class="sect2" title="11.2.32.&nbsp;agent_blackhole&#65306;&#36828;&#31243;&#40657;&#27934;&#20195;&#29702;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-agent-blackhole"></a>11.2.32.&nbsp;agent_blackhole&#65306;&#36828;&#31243;&#40657;&#27934;&#20195;&#29702;</h3></div></div></div>
<p>
&#20998;&#24067;&#24335;&#32034;&#24341;&#65288; <a class="link" href="#distributed" title="5.8.&nbsp;&#20998;&#24067;&#24335;&#25628;&#32034;">distributed index</a>&#65289;&#20013;&#22768;&#26126;&#36828;&#31243;&#40657;&#27934;&#20195;&#29702;&#12290;&#22810;&#20010;&#20540;&#65292;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#26159;&#31354;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
<code class="option">agent_blackhole</code> &#36873;&#39033;&#20351;&#29992;&#25143;&#21487;&#20197;&#21521;&#36828;&#31243;&#20195;&#29702;&#21457;&#36865;&#8220;&#21363;&#21457;&#21363;&#24536;&#8221;&#30340;&#26597;&#35810;&#65288;fire-and-forget queries&#65289;&#12290;&#36825;&#22312;&#35843;&#35797;&#65288;&#25110;&#32773;&#20165;&#20165;&#26159;&#27979;&#35797;&#65289;&#21363;&#23558;&#25237;&#20837;&#29983;&#20135;&#30340;&#38598;&#32676;&#30340;&#26102;&#20505;&#24456;&#26377;&#29992;&#65306;&#21487;&#20197;&#35774;&#32622;&#19968;&#20010;&#21333;&#29420;&#30340;&#35843;&#35797;/&#27979;&#35797;<code class="filename">searchd</code>&#23454;&#20363;&#65292;&#28982;&#21518;&#20174;&#23454;&#38469;&#29983;&#20135;&#20013;&#20351;&#29992;&#30340;&#20027;&#26381;&#21153;&#22120;&#65288;master&#65292;&#25110;&#31216;&#32858;&#38598;&#32773;aggregator&#65289;&#23454;&#20363;&#21521;&#36825;&#20010;&#27979;&#35797;&#26381;&#21153;&#22120;&#36716;&#21457;&#26597;&#35810;&#35831;&#27714;&#65292;&#20294;&#19981;&#24178;&#25200;&#29983;&#20135;&#31995;&#32479;&#30340;&#24037;&#20316;&#12290;&#20027;&#65288;master&#65289;<code class="filename">searchd</code>&#20250;&#20197;&#27491;&#24120;&#30340;&#26041;&#24335;&#23581;&#35797;&#36830;&#25509;&#21644;&#26597;&#35810;&#40657;&#27934;&#20195;&#29702;&#65292;&#20294;&#26159;&#23427;&#26082;&#19981;&#20250;&#31561;&#24453;&#20063;&#19981;&#20250;&#22788;&#29702;&#40657;&#27934;&#20195;&#29702;&#30340;&#21453;&#39304;&#12290;&#21516;&#26102;&#65292;&#21457;&#29983;&#22312;&#40657;&#27934;&#20195;&#29702;&#19978;&#30340;&#20840;&#37096;&#32593;&#32476;&#38169;&#35823;&#20063;&#37117;&#34987;&#24573;&#30053;&#12290;&#20540;&#30340;&#26684;&#24335;&#19982;&#26222;&#36890;&#30340;
<a class="link" href="#conf-agent" title="11.2.31.&nbsp;agent&#65306;&#36828;&#31243;&#32034;&#24341;&#22768;&#26126;">agent</a> &#23436;&#20840;&#30456;&#21516;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
agent_blackhole = testbox:9312:testindex1,testindex2
</pre></div>
<div class="sect2" title="11.2.33.&nbsp;agent_connect_timeout&#65306;&#36828;&#31243;&#26597;&#35810;&#26102;&#38388;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-agent-connect-timeout"></a>11.2.33.&nbsp;agent_connect_timeout&#65306;&#36828;&#31243;&#26597;&#35810;&#26102;&#38388;</h3></div></div></div>
<p>
&#36828;&#31243;&#20195;&#29702;&#30340;&#36830;&#25509;&#36229;&#26102;&#26102;&#38388;&#65292;&#21333;&#20301;&#20026;&#27627;&#31186;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;1000&#65288;&#21363;1&#31186;&#65289;&#12290;
</p><p>
&#36830;&#25509;&#21040;&#36828;&#31243;&#20195;&#29702;&#26102;&#65292;<code class="filename">searchd</code>&#26368;&#22810;&#33457;&#36825;&#20123;&#26102;&#38388;&#31561;&#24453;connet()&#35843;&#29992;&#25104;&#21151;&#23436;&#25104;&#12290;&#22914;&#26524;&#36798;&#21040;&#20102;&#36229;&#26102;&#26102;&#38388;connect()&#20173;&#27809;&#26377;&#23436;&#25104;&#65292;&#32780;
and <a class="link" href="#api-func-setretries" title="8.1.4.&nbsp;SetRetries (&#35774;&#32622;&#22833;&#36133;&#37325;&#35797;)">retries</a> &#36873;&#39033;&#26159;&#21551;&#29992;&#30340;&#65292;&#37027;&#20040;&#23558;&#24320;&#22987;&#37325;&#35797;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
agent_connect_timeout = 300
</pre></div>
<div class="sect2" title="11.2.34.&nbsp;agent_query_timeout&#65306;&#36828;&#31243;&#26597;&#35810;&#36229;&#26102;&#26102;&#38388;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-agent-query-timeout"></a>11.2.34.&nbsp;agent_query_timeout&#65306;&#36828;&#31243;&#26597;&#35810;&#36229;&#26102;&#26102;&#38388;</h3></div></div></div>
<p>
&#36828;&#31243;&#20195;&#29702;&#26597;&#35810;&#36229;&#26102;&#26102;&#38388;&#65292;&#20197;&#27627;&#31186;&#20026;&#21333;&#20301;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;3000&#65288;&#21363;3&#31186;&#65289;&#12290;
</p><p>
&#36830;&#25509;&#21518;&#65292;<code class="filename">searchd</code>&#26368;&#22810;&#33457;&#36825;&#36825;&#20123;&#26102;&#38388;&#31561;&#21040;&#36828;&#31243;&#26597;&#35810;&#23436;&#25104;&#12290;&#36825;&#20010;&#36229;&#26102;&#26102;&#38388;&#19982;&#36830;&#25509;&#36229;&#26102;&#26102;&#38388;&#26159;&#23436;&#20840;&#29420;&#31435;&#30340;&#12290;&#22240;&#27492;&#19968;&#20010;&#36828;&#31243;&#20195;&#29702;&#26368;&#22810;&#33021;&#36896;&#25104;&#30340;&#24310;&#36831;&#20026;<code class="code">agent_connection_timeout</code>&#19982;<code class="code">agent_query_timeout</code>&#20043;&#21644;&#12290;&#22914;&#26524;&#36229;&#26102;&#26102;&#38388;&#24050;&#21040;&#65292;&#26597;&#35810;<span class="bold"><strong>&#19981;&#20250;</strong></span>&#20877;&#37325;&#35797;&#65292;&#21516;&#26102;&#20135;&#29983;&#35686;&#21578;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
agent_query_timeout = 10000 # our query can be long, allow up to 10 sec
</pre></div>
<div class="sect2" title="11.2.35.&nbsp;preopen&#65306;&#32034;&#24341;&#25991;&#20214;&#39044;&#24320;&#21551;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-preopen"></a>11.2.35.&nbsp;preopen&#65306;&#32034;&#24341;&#25991;&#20214;&#39044;&#24320;&#21551;</h3></div></div></div>
<p>
&#39044;&#20808;&#25171;&#24320;&#20840;&#37096;&#32034;&#24341;&#25991;&#20214;&#36824;&#26159;&#27599;&#27425;&#26597;&#35810;&#26102;&#20877;&#25171;&#24320;&#32034;&#24341;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;0&#65288;&#19981;&#39044;&#20808;&#25171;&#24320;&#65289;&#12290;
</p><p>
&#27492;&#36873;&#39033;&#20196;<code class="filename">searchd</code>&#22312;&#21551;&#21160;&#26102;&#65288;&#25110;&#36718;&#25442;&#32034;&#24341;&#26102;&#65289;&#39044;&#20808;&#24320;&#25171;&#20840;&#37096;&#32034;&#24341;&#25991;&#20214;&#24182;&#22312;&#36816;&#34892;&#36807;&#31243;&#20013;&#20445;&#25345;&#25171;&#24320;&#12290;&#30446;&#21069;&#65292;&#40664;&#35748;&#26159;<span class="bold"><strong>&#19981;</strong></span>&#39044;&#20808;&#25171;&#24320;&#36825;&#20123;&#25991;&#20214;&#65288;&#27492;&#34892;&#20026;&#21487;&#33021;&#22312;&#26410;&#26469;&#25913;&#21464;&#65289;&#12290;&#39044;&#20808;&#25171;&#24320;&#30340;&#27599;&#20010;&#32034;&#24341;&#25991;&#20214;&#20250;&#21344;&#29992;&#33509;&#24178;&#65288;&#30446;&#21069;&#26159;&#20004;&#20010;&#65289;&#25991;&#20214;&#25551;&#36848;&#31526;&#12290;&#20294;&#27599;&#27425;&#26597;&#35810;&#21487;&#20197;&#33410;&#32422;&#20004;&#20010;<code class="code">open()</code>&#35843;&#29992;&#32780;&#19988;&#19981;&#20250;&#21463;&#39640;&#36127;&#36733;&#24773;&#20917;&#19979;&#32034;&#24341;&#36718;&#25442;&#36807;&#31243;&#20013;&#21487;&#33021;&#21457;&#29983;&#30340;&#24494;&#22937;&#30340;&#31454;&#20105;&#26465;&#20214;&#65288;race condition&#65289;&#30340;&#24433;&#21709;&#12290;&#21478;&#19968;&#26041;&#38754;&#65292;&#24403;&#25552;&#20379;&#24456;&#22810;&#32034;&#24341;&#26381;&#21153;&#65288;&#20960;&#30334;&#21040;&#20960;&#21315;&#65289;&#26102;&#65292;&#24517;&#39035;&#27599;&#27425;&#26597;&#35810;&#26102;&#25171;&#24320;&#32034;&#24341;&#25991;&#20214;&#20197;&#20415;&#33410;&#32422;&#25991;&#20214;&#25551;&#36848;&#31526;&#12290;
</p><p>
&#36825;&#20010;&#25351;&#20196;&#19981;&#24433;&#21709;<code class="filename">indexer</code>&#30340;&#20219;&#20309;&#34892;&#20026;&#65292;&#21482;&#23545;<code class="filename">searchd</code>&#26377;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
preopen = 1
</pre></div>
<div class="sect2" title="11.2.36.&nbsp;ondisk_dict&#65306;&#23383;&#20856;&#25991;&#20214;&#20445;&#25345;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-ondisk-dict"></a>11.2.36.&nbsp;ondisk_dict&#65306;&#23383;&#20856;&#25991;&#20214;&#20445;&#25345;&#35774;&#32622;</h3></div></div></div>
<p>
&#25351;&#23450;&#26159;&#23558;&#23383;&#20856;&#25991;&#20214;&#65288;.spi&#65289;&#20445;&#25345;&#22312;&#30913;&#30424;&#19978;&#36824;&#26159;&#23558;&#23427;&#39044;&#20808;&#32531;&#20914;&#22312;&#20869;&#23384;&#20013;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;0&#65288;&#39044;&#20808;&#32531;&#20914;&#22312;&#20869;&#23384;&#37324;&#65289;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#23383;&#20856;&#25991;&#20214;&#65288;.spi&#65289;&#26082;&#21487;&#20197;&#39547;&#30041;&#22312;&#20869;&#23384;&#20013;&#20063;&#21487;&#20197;&#20445;&#25345;&#22312;&#30913;&#30424;&#19978;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#26159;&#23558;&#25972;&#20010;&#23383;&#20856;&#32531;&#20914;&#22312;&#20869;&#23384;&#20013;&#12290;&#36825;&#26679;&#20570;&#25552;&#39640;&#24615;&#33021;&#65292;&#20294;&#21487;&#33021;&#24102;&#26469;&#36807;&#22823;&#30340;&#20869;&#23384;&#21387;&#21147;&#65292;&#23588;&#20854;&#26159;&#20351;&#29992;&#20102;&#21069;&#32512;&#25110;&#20013;&#32512;&#30340;&#26102;&#20505;&#12290;&#21551;&#29992;<code class="option">ondisk_dict</code>&#20026;&#27599;&#27425;&#26597;&#35810;&#30340;&#27599;&#20010;&#20851;&#38190;&#35789;&#24102;&#26469;&#19968;&#27425;&#30913;&#30424;I/O&#25805;&#20316;&#65292;&#20294;&#26159;&#20250;&#20943;&#23569;&#20869;&#23384;&#20351;&#29992;&#12290;
</p><p>
&#36825;&#20010;&#25351;&#20196;&#19981;&#24433;&#21709;<code class="filename">indexer</code>&#30340;&#20219;&#20309;&#34892;&#20026;&#65292;&#21482;&#23545;<code class="filename">searchd</code>&#26377;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
ondisk_dict = 1
</pre></div>
<div class="sect2" title="11.2.37.&nbsp;inplace_enable&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-inplace-enable"></a>11.2.37.&nbsp;inplace_enable&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#35774;&#32622;</h3></div></div></div>
<p>
&#26159;&#21542;&#21551;&#29992;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#65288;in-place index inversion&#65289;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;0&#65288;&#20351;&#29992;&#21333;&#29420;&#30340;&#20020;&#26102;&#25991;&#20214;&#65289;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
<code class="option">inplace_enable</code> &#36873;&#39033;&#26497;&#22823;&#22320;&#20943;&#23569;&#20102;&#24314;&#31435;&#32034;&#24341;&#26102;&#30340;&#30913;&#30424;&#21387;&#21147;&#65292;&#20195;&#20215;&#26159;&#30053;&#24930;&#30340;&#32034;&#24341;&#36895;&#24230;&#65288;&#23569;&#20351;&#29992;&#22823;&#32422;&#20004;&#20493;&#30340;&#30913;&#30424;&#31354;&#38388;&#65292;&#36895;&#24230;&#26041;&#38754;&#33021;&#36798;&#21040;&#21407;&#26377;&#24615;&#33021;&#30340;90-95%&#65289;
</p><p>
&#24314;&#31435;&#32034;&#24341;&#30340;&#36807;&#31243;&#26377;&#20004;&#20010;&#20027;&#35201;&#30340;&#38454;&#27573;&#12290;&#31532;&#19968;&#20010;&#38454;&#27573;&#20027;&#35201;&#26159;&#25910;&#38598;&#12289;&#22788;&#29702;&#25991;&#26723;&#20197;&#21450;&#23545;&#25991;&#26723;&#26681;&#25454;&#20851;&#38190;&#35789;&#36827;&#34892;&#37096;&#20998;&#30340;&#25490;&#24207;&#65292;&#20013;&#38388;&#32467;&#26524;&#34987;&#20889;&#20837;&#21040;&#20020;&#26102;&#25991;&#20214;&#65288;.tmp*&#65289;&#20013;&#12290;&#31532;&#20108;&#20010;&#38454;&#27573;&#21017;&#23545;&#25991;&#26723;&#36827;&#34892;&#23436;&#20840;&#25490;&#24207;&#24182;&#21019;&#24314;&#24635;&#37325;&#30340;&#32034;&#24341;&#25991;&#20214;&#12290;&#22240;&#27492;&#65292;&#37325;&#24314;&#19968;&#20010;&#27491;&#22312;&#24212;&#29992;&#20110;&#29983;&#20135;&#30340;&#32034;&#24341;&#23558;&#23548;&#33268;&#19968;&#20010;&#19977;&#20493;&#22823;&#30340;&#30913;&#30424;&#21344;&#29992;&#23792;&#20540;&#65306;&#31532;&#19968;&#20493;&#65292;&#20013;&#38388;&#32467;&#26524;&#20020;&#26102;&#25991;&#20214;&#65292;&#31532;&#20108;&#65292;&#26032;&#24314;&#30340;&#21103;&#26412;&#65292;&#21644;&#31532;&#19977;&#65292;&#22312;&#19968;&#20999;&#21457;&#29983;&#26102;&#26087;&#30340;&#32034;&#24341;&#20173;&#28982;&#21344;&#29992;&#19968;&#20221;&#30913;&#30424;&#31354;&#38388;&#65292;&#20197;&#20415;&#32487;&#32493;&#26381;&#21153;&#12290;&#65288;&#20013;&#38388;&#32467;&#26524;&#30340;&#22823;&#23567;&#19982;&#26368;&#32456;&#32034;&#24341;&#30340;&#22823;&#23567;&#30456;&#24403;&#65289;&#12290;&#23545;&#20110;&#24456;&#22823;&#30340;&#25968;&#25454;&#38598;&#65292;&#36825;&#23558;&#26159;&#19968;&#31508;&#24456;&#22823;&#30340;&#30913;&#30424;&#24320;&#38144;&#65292;&#32780;<code class="option">inplace_enable</code> &#36873;&#39033;&#29992;&#20110;&#20943;&#23569;&#36825;&#20010;&#24320;&#38144;&#12290;&#19968;&#26086;&#21551;&#29992;&#36825;&#20010;&#36873;&#39033;&#65292;&#20020;&#26102;&#25991;&#20214;&#23558;&#34987;&#37325;&#22797;&#21033;&#29992;&#65292;&#26368;&#32456;&#30340;&#25968;&#25454;&#20889;&#22238;&#21040;&#20020;&#26102;&#25991;&#20214;&#20013;&#65292;&#26368;&#21518;&#25913;&#20010;&#21517;&#23383;&#23601;&#21487;&#20197;&#20316;&#20026;&#26368;&#32456;&#32467;&#26524;&#20351;&#29992;&#20102;&#12290;&#28982;&#32780;&#65292;&#36825;&#21487;&#33021;&#23548;&#33268;&#26356;&#22810;&#30340;&#20020;&#26102;&#25968;&#25454;&#22359;&#37325;&#26032;&#20998;&#37197;&#65292;&#22240;&#27492;&#24615;&#33021;&#20250;&#26377;&#19968;&#28857;&#25439;&#22833;&#12290;
</p><p>
&#36825;&#20010;&#25351;&#20196;&#19981;&#24433;&#21709;<code class="filename">searchd</code>&#30340;&#20219;&#20309;&#34892;&#20026;&#65292;&#21482;&#23545;<code class="filename">indexer</code>&#26377;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
inplace_enable = 1
</pre></div>
<div class="sect2" title="11.2.38.&nbsp;inplace_hit_gap&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#21305;&#37197;&#28857;&#31354;&#38553;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-inplace-hit-gap"></a>11.2.38.&nbsp;inplace_hit_gap&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#21305;&#37197;&#28857;&#31354;&#38553;&#35774;&#32622;</h3></div></div></div>
<p>
&#24494;&#35843;&#21407;&#22320;&#20498;&#36716;&#65288;<a class="link" href="#conf-inplace-enable" title="11.2.37.&nbsp;inplace_enable&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#35774;&#32622;">In-place inversion</a>&#65289;&#34892;&#20026;&#30340;&#36873;&#39033;&#12290;&#25511;&#21046;&#39044;&#20808;&#20998;&#37197;&#30340;&#21305;&#37197;&#28857;&#21015;&#34920;&#65288;hitlist&#65289;&#30340;&#31354;&#38553;&#30340;&#22823;&#23567;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#26159;0&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#36825;&#20010;&#25351;&#20196;&#19981;&#24433;&#21709;<code class="filename">searchd</code>&#30340;&#20219;&#20309;&#34892;&#20026;&#65292;&#21482;&#23545;<code class="filename">indexer</code>&#26377;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
inplace_hit_gap = 1M
</pre></div>
<div class="sect2" title="11.2.39.&nbsp;inplace_docinfo_gap&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#25991;&#26723;&#20449;&#24687;&#31354;&#38553;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-inplace-docinfo-gap"></a>11.2.39.&nbsp;inplace_docinfo_gap&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#25991;&#26723;&#20449;&#24687;&#31354;&#38553;&#35774;&#32622;</h3></div></div></div>
<p>
&#24494;&#35843;&#21407;&#22320;&#20498;&#36716;&#65288;<a class="link" href="#conf-inplace-enable" title="11.2.37.&nbsp;inplace_enable&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#35774;&#32622;">In-place inversion</a>&#65289;&#34892;&#20026;&#30340;&#36873;&#39033;&#12290;&#25511;&#21046;&#39044;&#20808;&#20998;&#37197;&#30340;&#25991;&#26723;&#20449;&#24687;&#65288;docinfo&#65289;&#30340;&#31354;&#38553;&#30340;&#22823;&#23567;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#26159;0&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#36825;&#20010;&#25351;&#20196;&#19981;&#24433;&#21709;<code class="filename">searchd</code>&#30340;&#20219;&#20309;&#34892;&#20026;&#65292;&#21482;&#23545;<code class="filename">indexer</code>&#26377;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
inplace_docinfo_gap = 1M
</pre></div>
<div class="sect2" title="11.2.40.&nbsp;inplace_reloc_factor&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#37325;&#23450;&#20301;&#20869;&#23384;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-inplace-reloc-factor"></a>11.2.40.&nbsp;inplace_reloc_factor&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#37325;&#23450;&#20301;&#20869;&#23384;&#35774;&#32622;</h3></div></div></div>
<p>
&#24494;&#35843;&#21407;&#22320;&#20498;&#36716;&#65288;<a class="link" href="#conf-inplace-reloc-factor" title="11.2.40.&nbsp;inplace_reloc_factor&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#37325;&#23450;&#20301;&#20869;&#23384;&#35774;&#32622;">In-place inversion</a> &#65289;&#34892;&#20026;&#30340;&#36873;&#39033;&#12290;&#25511;&#21046;&#37325;&#23450;&#20301;&#32531;&#20914;&#21306;&#21344;&#29992;&#32034;&#24341;&#26102;&#30340;&#20869;&#23384;&#30340;&#27604;&#20363;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#26159;0.1&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#36825;&#20010;&#25351;&#20196;&#19981;&#24433;&#21709;<code class="filename">searchd</code>&#30340;&#20219;&#20309;&#34892;&#20026;&#65292;&#21482;&#23545;<code class="filename">indexer</code>&#26377;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
inplace_reloc_factor = 0.1
</pre></div>
<div class="sect2" title="11.2.41.&nbsp;inplace_write_factor&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#20889;&#32531;&#20914;&#20869;&#23384;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-inplace-write-factor"></a>11.2.41.&nbsp;inplace_write_factor&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#20889;&#32531;&#20914;&#20869;&#23384;&#35774;&#32622;</h3></div></div></div>
<p>
&#24494;&#35843;&#21407;&#22320;&#20498;&#36716;&#65288;<a class="link" href="#conf-inplace-reloc-factor" title="11.2.40.&nbsp;inplace_reloc_factor&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#37325;&#23450;&#20301;&#20869;&#23384;&#35774;&#32622;">In-place inversion</a> &#65289;&#34892;&#20026;&#30340;&#36873;&#39033;&#12290;&#25511;&#21046;&#21407;&#22320;&#20889;&#32531;&#20914;&#21344;&#29992;&#32034;&#24341;&#26102;&#30340;&#20869;&#23384;&#30340;&#27604;&#20363;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#26159;0.1&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#36825;&#20010;&#25351;&#20196;&#19981;&#24433;&#21709;<code class="filename">searchd</code>&#30340;&#20219;&#20309;&#34892;&#20026;&#65292;&#21482;&#23545;<code class="filename">indexer</code>&#26377;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
inplace_write_factor = 0.1
</pre></div>
<div class="sect2" title="11.2.42.&nbsp;index_exact_words&#65306;&#35789;&#24178;&#21270;&#21518;&#21407;&#35789;&#32034;&#24341;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-index-exact-words"></a>11.2.42.&nbsp;index_exact_words&#65306;&#35789;&#24178;&#21270;&#21518;&#21407;&#35789;&#32034;&#24341;</h3></div></div></div>
<p>
&#26159;&#21542;&#22312;&#35789;&#24178;&#21270;&#22788;&#29702;&#21518;&#36824;&#32034;&#24341;&#21407;&#35789;&#65288;&#26159;&#21542;&#22312;&#32034;&#24341;&#21407;&#20851;&#38190;&#35789;&#30340;&#35789;&#24178;&#21270;/&#37325;&#26144;&#23556;&#21518;&#30340;&#24418;&#24335;&#30340;&#21516;&#26102;&#20063;&#32034;&#24341;&#21407;&#35789;&#65289;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;0&#65288;&#19981;&#32034;&#24341;&#39069;&#22806;&#30340;&#24418;&#24335;&#65289;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#19968;&#26086;&#21551;&#29992;&#65292;<code class="option">index_exact_words</code>&#24378;&#21046;<code class="filename">indexer</code>&#38500;&#20102;&#35789;&#24178;&#21270;&#30340;&#29256;&#26412;&#22806;&#65292;&#23558;&#21407;&#22987;&#30340;&#20851;&#38190;&#23383;&#20063;&#21152;&#20837;&#32034;&#24341;&#12290;&#36825;&#26679;&#20570;&#20063;&#20351;&#26597;&#35810;&#35821;&#35328;&#20013;&#30340;<a class="link" href="#extended-syntax" title="5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;">&#31934;&#30830;&#21305;&#37197;&#25628;&#32034;&#31526;</a>&#21487;&#29992;&#12290;&#36825;&#20010;&#36873;&#39033;&#23558;&#23545;&#32034;&#24341;&#22823;&#23567;&#21644;&#32034;&#24341;&#26102;&#38388;&#24102;&#26469;&#24310;&#36831;&#12290;&#28982;&#32780;&#25628;&#32034;&#30340;&#24615;&#33021;&#19981;&#20250;&#34987;&#24433;&#21709;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
index_exact_words = 1
</pre></div>
<div class="sect2" title="11.2.43.&nbsp;overshort_step&#65306;&#30701;&#35789;&#20301;&#32622;&#22686;&#37327;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-overshort-step"></a>11.2.43.&nbsp;overshort_step&#65306;&#30701;&#35789;&#20301;&#32622;&#22686;&#37327;</h3></div></div></div>
<p>
&#22312;&#32463;&#36807;&#36807;&#30701;&#30340;&#35789;&#65288;&#27604; <a class="link" href="#conf-min-word-len" title="11.2.14.&nbsp;min_word_len&#65306;&#26368;&#23567;&#32034;&#24341;&#35789;&#27719;&#38271;&#24230;">min_word_len</a>&#30701;&#30340;&#35789;&#65289;&#22788;&#21518;&#22686;&#21152;&#20301;&#32622;&#20540;&#12290;
&#21487;&#36873;&#36873;&#39033;&#65292;&#20801;&#35768;&#30340;&#20540;&#26159;0&#25110;&#32773;1&#65292;&#40664;&#35748;&#26159;1&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#36825;&#20010;&#25351;&#20196;&#19981;&#24433;&#21709;<code class="filename">searchd</code>&#30340;&#20219;&#20309;&#34892;&#20026;&#65292;&#21482;&#23545;<code class="filename">indexer</code>&#26377;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
overshort_step = 1
</pre></div>
<div class="sect2" title="11.2.44.&nbsp;stopword_step&#65306;&#36890;&#29992;&#35789;&#20301;&#32622;&#22686;&#37327;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-stopword-step"></a>11.2.44.&nbsp;stopword_step&#65306;&#36890;&#29992;&#35789;&#20301;&#32622;&#22686;&#37327;</h3></div></div></div>
<p>
&#22312;&#32463;&#36807; <a class="link" href="#conf-stopwords" title="11.2.11.&nbsp;stopwords&#65306;&#20572;&#27490;&#35789;">&#20572;&#29992;&#35789;</a> &#22788;&#21518;&#22686;&#21152;&#20301;&#32622;&#20540;&#21487;&#36873;&#36873;&#39033;&#65292;&#20801;&#35768;&#30340;&#20540;&#26159;0&#25110;&#32773;1&#65292;&#40664;&#35748;&#26159;1&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#36825;&#20010;&#25351;&#20196;&#19981;&#24433;&#21709;<code class="filename">searchd</code>&#30340;&#20219;&#20309;&#34892;&#20026;&#65292;&#21482;&#23545;<code class="filename">indexer</code>&#26377;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
stopword_step = 1
</pre></div>
<div class="sect2" title="11.2.45.&nbsp;hitless_words&#65306;&#20301;&#32622;&#24573;&#30053;&#35789;&#27719;&#21015;&#34920;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-hitless-words"></a>11.2.45.&nbsp;hitless_words&#65306;&#20301;&#32622;&#24573;&#30053;&#35789;&#27719;&#21015;&#34920;</h3></div></div></div>
<p>
&#20301;&#32622;&#24573;&#30053;&#35789;&#27719;&#21015;&#34920;&#12290;
&#21487;&#36873;&#39033;&#65292;&#21487;&#29992;&#20540;&#20026;all&#25110;&#32773;&#21015;&#34920;&#25152;&#22312;&#30340;&#25991;&#20214;&#21517;&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
By default, Sphinx full-text index stores not only a list of matching
documents for every given keyword, but also a list of its in-document positions
(aka hitlist). Hitlists enables phrase, proximity, strict order and other
advanced types of searching, as well as phrase proximity ranking. However,
hitlists for specific frequent keywords (that can not be stopped for
some reason despite being frequent) can get huge and thus slow to process
while querying. Also, in some cases we might only care about boolean
keyword matching, and never need position-based searching operators
(such as phrase matching) nor phrase ranking.
</p><p>
<code class="option">hitless_words</code> lets you create indexes that either
do not have positional information (hitlists) at all, or skip it for
specific keywords.
</p><p>
Hitless index will generally use less space than the respective
regular index (about 1.5x can be expected). Both indexing and searching
should be faster, at a cost of missing positional query and ranking support.
When searching, positional queries (eg. phrase queries) will be automatically
converted to respective non-positional (document-level) or combined queries.
For instance, if keywords "hello" and "world" are hitless, "hello world"
phrase query will be converted to (hello &amp; world) bag-of-words query,
matching all documents that mention either of the keywords but not necessarily
the exact phrase. And if, in addition, keywords "simon" and "says" are not
hitless, "simon says hello world" will be converted to ("simon says" &amp;
hello &amp; world) query, matching all documents that contain "hello" and
"world" anywhere in the document, and also "simon says" as an exact phrase.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
hitless_words = all
</pre></div>
<div class="sect2" title="11.2.46.&nbsp;expand_keywords&#65306;&#35789;&#27719;&#23637;&#24320;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-expand-keywords"></a>11.2.46.&nbsp;expand_keywords&#65306;&#35789;&#27719;&#23637;&#24320;</h3></div></div></div>
<p>
&#23613;&#21487;&#33021;&#23637;&#24320;&#20851;&#38190;&#23383;&#30340;&#31934;&#30830;&#26684;&#24335;&#25110;&#32773;&#22411;&#21495;&#24418;&#24335;&#12290;
&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;0&#65288;&#19981;&#23637;&#24320;&#20851;&#38190;&#23383;&#65289;&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Queries against indexes with <code class="option">expand_keywords</code> feature
enabled are internally expanded as follows. If the index was built with
prefix or infix indexing enabled, every keyword gets internally replaced
with a disjunction of keyword itself and a respective prefix or infix
(keyword with stars). If the index was built with both stemming and
<a class="link" href="#conf-index-exact-words" title="11.2.42.&nbsp;index_exact_words&#65306;&#35789;&#24178;&#21270;&#21518;&#21407;&#35789;&#32034;&#24341;">index_exact_words</a> enabled,
exact form is also added. Here's an example that shows how internal
expansion works when all of the above (infixes, stemming, and exact
words) are combined:
</p><pre class="programlisting">
running -&gt; ( running | *running* | =running )
</pre><p>
</p><p>
Expanded queries take naturally longer to complete, but can possibly
improve the search quality, as the documents with exact form matches
should be ranked generally higher than documents with stemmed or infix matches.
</p><p>
Note that the existing query syntax does not allowe to emulate this
kind of expansion, because internal expansion works on keyword level and
expands keywords within phrase or quorum operators too (which is not
possible through the query syntax).
</p><p>
This directive does not affect <code class="filename">indexer</code> in any way,
it only affects <code class="filename">searchd</code>.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
expand_keywords = 1
</pre></div>
<div class="sect2" title="11.2.47.&nbsp;blend_chars&#65306;&#28151;&#21512;&#23383;&#31526;&#21015;&#34920;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-blend-chars"></a>11.2.47.&nbsp;blend_chars&#65306;&#28151;&#21512;&#23383;&#31526;&#21015;&#34920;</h3></div></div></div>
<p>
&#28151;&#21512;&#23383;&#31526;&#21015;&#34920;&#12290;
&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Blended characters are indexed both as separators and valid characters.
For instance, assume that &amp; is configured as blended and AT&amp;T
occurs in an indexed document. Three different keywords will get indexed,
namely "at&amp;t", treating blended characters as valid, plus "at" and "t",
treating them as separators.
</p><p>
Positions for tokens obtained by replacing blended characters with whitespace
are assigned as usual, so regular keywords will be indexed just as if there was
no <code class="option">blend_chars</code> specified at all. An additional token that
mixes blended and non-blended characters will be put at the starting position.
For instance, if the field contents are "AT&amp;T company" occurs in the very
beginning of the text field, "at" will be given position 1, "t" position 2, 
"company" positin 3, and "AT&amp;T" will also be given position 1 ("blending"
with the opening regular keyword). Thus, querying for either AT&amp;T or just
AT will match that document, and querying for "AT T" as a phrase also match it.
Last but not least, phrase query for "AT&amp;T company" will <span class="emphasis"><em>also</em></span>
match it, despite the position
</p><p>
Blended characters can overlap with special characters used in query
syntax (think of T-Mobile or @twitter). Where possible, query parser will
automatically handle blended character as blended. For instance, "hello @twitter"
within quotes (a phrase operator) would handle @-sign as blended, because
@-syntax for field operator is not allowed within phrases. Otherwise,
the character would be handled as an operator. So you might want to
escape the keywords.
</p><p>
Starting with version 2.0.1-beta, blended characters can be remapped,
so that multiple different blended characters could be normalized into
just one base form. This is useful when indexing multiple alternative
Unicode codepoints with equivalent glyphs.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
blend_chars = +, &amp;, U+23
blend_chars = +, &amp;-&gt;+ # 2.0.1-beta and above
</pre></div>
<div class="sect2" title="11.2.48.&nbsp;blend_mode&#65306;&#28151;&#21512;&#31867;&#22411;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-blend-mode"></a>11.2.48.&nbsp;blend_mode&#65306;&#28151;&#21512;&#31867;&#22411;</h3></div></div></div>
<p>
&#28151;&#21512;&#31867;&#22411;&#21015;&#34920;&#12290;&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026; <code class="option">trim_none</code>&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
By default, tokens that mix blended and non-blended characters
get indexed in there entirety. For instance, when both at-sign and
an exclamation are in <code class="option">blend_chars</code>, "@dude!" will get
result in two tokens indexed: "@dude!" (with all the blended characters)
and "dude" (without any). Therefore "@dude" query will <span class="emphasis"><em>not</em></span>
match it.
</p><p>
<code class="option">blend_mode</code> directive adds flexibility to this indexing
behavior. It takes a comma-separated list of options.
</p><pre class="programlisting">
blend_mode = option [, option [, ...]]
option = trim_none | trim_head | trim_tail | trim_both | skip_pure
</pre><p>
</p><p>
Options specify token indexing variants. If multiple options are
specified, multiple variants of the same token will be indexed.
Regular keywords (resulting from that token by replacing blended
with whitespace) are always be indexed.
</p><div class="variablelist"><dl><dt><span class="term">trim_none</span></dt>
<dd>Index the entire token.</dd><dt><span class="term">trim_head</span></dt>
<dd>Trim heading blended characters, and index the resulting token.</dd><dt><span class="term">trim_tail</span></dt>
<dd>Trim trailing blended characters, and index the resulting token.</dd><dt><span class="term">trim_both</span></dt>
<dd>Trim both heading and trailing blended characters, and index the resulting token.</dd><dt><span class="term">skip_pure</span></dt>
<dd>Do not index the token if it's purely blended, that is, consists of blended characters only.</dd></dl></div>
<p>
Returning to the "@dude!" example above, setting <code class="option">blend_mode = trim_head,
trim_tail</code> will result in two tokens being indexed, "@dude" and "dude!".
In this particular example, <code class="option">trim_both</code> would have no effect,
because trimming both blended characters results in "dude" which is already
indexed as a regular keyword. Indexing "@U.S.A." with <code class="option">trim_both</code>
(and assuming that dot is blended two) would result in "U.S.A" being indexed.
Last but not least, <code class="option">skip_pure</code> enables you to fully ignore
sequences of blended characters only. For example, "one @@@ two" would be
indexed exactly as "one two", and match that as a phrase. That is not the case
by default because a fully blended token gets indexed and offsets the second
keyword position.
</p><p>
Default behavior is to index the entire token, equivalent to
<code class="option">blend_mode = trim_none</code>.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
blend_mode = trim_tail, skip_pure
</pre></div>
<div class="sect2" title="11.2.49.&nbsp;rt_mem_limit&#65306;RT&#32034;&#24341;&#20869;&#23384;&#38480;&#21046;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-rt-mem-limit"></a>11.2.49.&nbsp;rt_mem_limit&#65306;RT&#32034;&#24341;&#20869;&#23384;&#38480;&#21046;</h3></div></div></div>
<p>
&#20869;&#23384;&#21306;&#22359;&#38480;&#21046;&#22823;&#23567;&#12290;
&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
RT index keeps some data in memory (so-called RAM chunk) and
also maintains a number of on-disk indexes (so-called disk chunks).
This directive lets you control the RAM chunk size. Once there's
too much data to keep in RAM, RT index will flush it to disk,
activate a newly created disk chunk, and reset the RAM chunk.
</p><p>
The limit is pretty strict; RT index should never allocate more
memory than it's limited to. The memory is not preallocated either,
hence, specifying 512 MB limit and only inserting 3 MB of data
should result in allocating 3 MB, not 512 MB.
</p><p>
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
rt_mem_limit = 512M
</pre></div>
<div class="sect2" title="11.2.50.&nbsp;rt_field&#65306;&#23383;&#27573;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-rt-field"></a>11.2.50.&nbsp;rt_field&#65306;&#23383;&#27573;&#35774;&#32622;</h3></div></div></div>
<p>
&#20840;&#25991;&#23383;&#27573;&#23450;&#20041;&#12290;
&#22810;&#20540;&#36873;&#39033;&#65292;&#24517;&#39035;&#35774;&#32622;&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Full-text fields to be indexed are declared using <code class="option">rt_field</code>
directive. The names must be unique. The order is preserved; and so field values
in INSERT statements without an explicit list of inserted columns will have to be
in the same order as configured.
</p><p>
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
rt_field = author
rt_field = title
rt_field = content
</pre></div>
<div class="sect2" title="11.2.51.&nbsp;rt_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-rt-attr-uint"></a>11.2.51.&nbsp;rt_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;</h3></div></div></div>
<p>
&#26080;&#31526;&#21495;&#25972;&#25968;&#23646;&#24615;&#23450;&#20041;&#12290;
&#22810;&#20540;&#36873;&#39033;&#65288;&#20801;&#35768;&#35774;&#32622;&#20219;&#24847;&#20010;&#27492;&#23646;&#24615;&#65289;&#65292;&#21487;&#36873;&#39033;&#12290;
&#22768;&#26126;&#19968;&#20010;32&#20301;&#30340;&#26080;&#31526;&#21495;&#25968;&#23646;&#24615;&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
rt_attr_uint = gid
</pre></div>
<div class="sect2" title="11.2.52.&nbsp;rt_attr_bigint&#65306;&#38271;&#25972;&#25968;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-rt-attr-bigint"></a>11.2.52.&nbsp;rt_attr_bigint&#65306;&#38271;&#25972;&#25968;&#23646;&#24615;</h3></div></div></div>
<p>
BIGINT&#23646;&#24615;&#23450;&#20041;
&#22810;&#20540;&#36873;&#39033;&#65288;&#20801;&#35768;&#35774;&#32622;&#20219;&#24847;&#20010;&#27492;&#23646;&#24615;&#65289;&#65292;&#21487;&#36873;&#39033;&#12290;
&#22768;&#26126;&#19968;&#20010;64&#20301;&#30340;&#26377;&#31526;&#21495;&#25968;&#23646;&#24615;&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
rt_attr_bigint = guid
</pre></div>
<div class="sect2" title="11.2.53.&nbsp;rt_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-rt-attr-float"></a>11.2.53.&nbsp;rt_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;</h3></div></div></div>
<p>
&#28014;&#28857;&#25968;&#23646;&#24615;&#23450;&#20041;&#12290;
&#22810;&#20540;&#36873;&#39033;&#65288;&#20801;&#35768;&#35774;&#32622;&#20219;&#24847;&#20010;&#27492;&#23646;&#24615;&#65289;&#65292;&#21487;&#36873;&#39033;&#12290;
&#22768;&#26126;&#19968;&#20010;&#21333;&#31934;&#24230;&#65292;32&#20026;&#30340;IEEE 754&#26684;&#24335;&#30340;&#28014;&#28857;&#25968;&#23646;&#24615;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
rt_attr_float = gpa
</pre></div>
<div class="sect2" title="11.2.54.&nbsp;rt_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-rt-attr-timestamp"></a>11.2.54.&nbsp;rt_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;</h3></div></div></div>
<p>
&#26102;&#38388;&#25139;&#23646;&#24615;&#23450;&#20041;&#12290;
&#22810;&#20540;&#36873;&#39033;&#65288;&#20801;&#35768;&#35774;&#32622;&#20219;&#24847;&#20010;&#27492;&#23646;&#24615;&#65289;&#65292;&#21487;&#36873;&#39033;&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
rt_attr_timestamp = date_added
</pre></div>
<div class="sect2" title="11.2.55.&nbsp;rt_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-rt-attr-string"></a>11.2.55.&nbsp;rt_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;</h3></div></div></div>
<p>
&#23383;&#31526;&#20018;&#23646;&#24615;&#23450;&#20041;&#12290;
&#22810;&#20540;&#36873;&#39033;&#65288;&#20801;&#35768;&#35774;&#32622;&#20219;&#24847;&#20010;&#27492;&#23646;&#24615;&#65289;&#65292;&#21487;&#36873;&#39033;&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
rt_attr_string = author
</pre></div></div>
<div class="sect1" title="11.3.&nbsp;indexer &#31243;&#24207;&#37197;&#32622;&#36873;&#39033;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="confgroup-indexer"></a>11.3.&nbsp;<code class="filename">indexer</code> &#31243;&#24207;&#37197;&#32622;&#36873;&#39033;</h2></div></div></div>
<div class="sect2" title="11.3.1.&nbsp;mem_limit&#65306;&#32034;&#24341;&#20869;&#23384;&#38480;&#21046;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-mem-limit"></a>11.3.1.&nbsp;mem_limit&#65306;&#32034;&#24341;&#20869;&#23384;&#38480;&#21046;</h3></div></div></div>
<p>
&#32034;&#24341;&#36807;&#31243;&#20013;&#20869;&#23384;&#20351;&#29992;&#38480;&#21046;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;32M&#12290;
</p><p>
&#36825;&#26159;<code class="filename">indexer</code>&#19981;&#20250;&#36229;&#36234;&#30340;&#24378;&#21046;&#20869;&#23384;&#38480;&#21046;&#12290;&#21487;&#20197;&#20197;&#23383;&#33410;&#12289;&#21315;&#23383;&#33410;&#65288;&#20197;K&#20026;&#21518;&#32512;&#65289;&#25110;&#20806;&#23383;&#33410;&#65288;&#20197;M&#20026;&#21518;&#32512;&#65289;&#20026;&#21333;&#20301;&#12290;&#21442;&#35265;&#31034;&#20363;&#12290;&#24403;&#36807;&#23567;&#30340;&#20540;&#23548;&#33268;I/O&#32531;&#20914;&#20302;&#20110;8KB&#26102;&#35813;&#38480;&#21046;&#20250;&#33258;&#21160;&#25552;&#39640;&#65292;&#27492;&#20540;&#30340;&#26368;&#20302;&#38480;&#24230;&#20381;&#36182;&#20110;&#24453;&#32034;&#24341;&#25968;&#25454;&#30340;&#22823;&#23567;&#12290;&#22914;&#26524;&#32531;&#20914;&#20302;&#20110;256KB&#65292;&#20250;&#20135;&#29983;&#35686;&#21578;&#12290;
</p><p>
&#26368;&#22823;&#21487;&#33021;&#30340;&#38480;&#21046;&#26159;2047M&#12290;&#22826;&#20302;&#30340;&#20540;&#20250;&#24433;&#21709;&#32034;&#24341;&#36895;&#24230;&#65292;&#20294;256M&#21040;1024M&#23545;&#32477;&#22823;&#22810;&#25968;&#25968;&#25454;&#38598;&#65288;&#22914;&#26524;&#19981;&#26159;&#20840;&#37096;&#65289;&#26469;&#35828;&#24212;&#35813;&#36275;&#22815;&#20102;&#12290;&#36825;&#20010;&#20540;&#35774;&#24471;&#22826;&#39640;&#21487;&#33021;&#23548;&#33268;SQL&#26381;&#21153;&#22120;&#36830;&#25509;&#36229;&#26102;&#12290;&#22312;&#25991;&#26723;&#25910;&#38598;&#38454;&#27573;&#65292;&#26377;&#26102;&#20869;&#23384;&#32531;&#20914;&#30340;&#19968;&#37096;&#20998;&#20250;&#34987;&#25490;&#24207;&#65292;&#32780;&#19982;&#25968;&#25454;&#24211;&#30340;&#36890;&#20449;&#20250;&#26242;&#20572;&#65292;&#20110;&#26159;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;&#21487;&#33021;&#36229;&#26102;&#12290;&#36825;&#21487;&#20197;&#36890;&#36807;&#25552;&#39640;SQL&#26381;&#21153;&#22120;&#31471;&#30340;&#36229;&#26102;&#26102;&#38388;&#25110;&#38477;&#20302;
<code class="code">mem_limit</code>&#26469;&#35299;&#20915;&#12290;
<span class="emphasis"><em>&#22312;Coreseek&#30340;&#20998;&#21457;&#29256;&#26412;&#20013;&#65292;&#22914;&#26524;&#20351;&#29992;<code class="option">python</code>&#25968;&#25454;&#28304;&#65292;&#21017;&#22312;Python&#37096;&#20998;&#30340;&#22788;&#29702;&#19981;&#20250;&#21463;<code class="code">mem_limit</code>&#30340;&#38480;&#21046;&#12290;</em></span>
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
mem_limit = 256M
# mem_limit = 262144K # same, but in KB
# mem_limit = 268435456 # same, but in bytes
</pre></div>
<div class="sect2" title="11.3.2.&nbsp;max_iops&#65306;&#27599;&#31186;IO&#25805;&#20316;&#38480;&#21046;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-max-iops"></a>11.3.2.&nbsp;max_iops&#65306;&#27599;&#31186;IO&#25805;&#20316;&#38480;&#21046;</h3></div></div></div>
<p>
&#27599;&#31186;&#26368;&#22823;I/O&#25805;&#20316;&#27425;&#25968;&#65292;&#29992;&#20110;&#38480;&#21046;I/O&#25805;&#20316;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;0&#65288;&#26080;&#38480;&#21046;&#65289;&#12290;
</p><p>
&#19982;I/O&#33410;&#27969;&#26377;&#20851;&#30340;&#36873;&#39033;&#12290;&#23427;&#38480;&#21046;&#20102;&#27599;&#31186;&#38047;&#26368;&#22823;&#30340;I/O&#25805;&#20316;&#65288;&#35835;&#25110;&#20889;&#65289;&#30340;&#27425;&#25968;&#12290;&#20540;0&#24847;&#24605;&#26159;&#19981;&#21152;&#38480;&#21046;&#12290;
</p><p>
<code class="filename">indexer</code>&#22312;&#32034;&#24341;&#26102;&#21487;&#33021;&#23548;&#33268;&#31361;&#21457;&#30340;&#23494;&#38598;&#30913;&#30424;I/O&#65292;&#22240;&#27492;&#38656;&#35201;&#38480;&#21046;&#23427;&#30913;&#30424;&#27963;&#21160;&#65288;&#32473;&#21516;&#19968;&#21488;&#26426;&#22120;&#19978;&#36816;&#34892;&#30340;&#20854;&#20182;&#31243;&#24207;&#30041;&#20986;&#19968;&#20123;&#36164;&#28304;&#65292;&#27604;&#22914;<code class="filename">searchd</code>&#65289;&#12290;
I/O&#33410;&#27969;&#23601;&#26159;&#29992;&#26469;&#23454;&#29616;&#19978;&#36848;&#21151;&#33021;&#30340;&#12290;&#23427;&#30340;&#24037;&#20316;&#21407;&#29702;&#26159;&#65292;&#22312;<code class="filename">indexer</code>&#30340;&#36830;&#32493;&#30913;&#30424;I/O&#25805;&#20316;&#20043;&#38388;&#24378;&#21046;&#22686;&#21152;&#19968;&#20010;&#20445;&#35777;&#30340;&#24310;&#36831;&#12290;&#29616;&#20195;SATA&#30828;&#30424;&#27599;&#31186;&#38047;&#21487;&#20197;&#25191;&#34892;&#22810;&#36798;70-100&#20197;&#19978;&#27425;&#30340;I/O&#25805;&#20316;&#65288;&#20027;&#35201;&#21463;&#30913;&#22836;&#23547;&#36947;&#26102;&#38388;&#30340;&#38480;&#21046;&#65289;&#12290;&#23558;&#32034;&#24341;I/O&#38480;&#21046;&#20026;&#19978;&#36848;&#25968;&#20540;&#30340;&#20960;&#20998;&#20043;&#19968;&#21487;&#20197;&#20943;&#36731;&#30001;&#32034;&#24341;&#24102;&#26469;&#30340;&#25628;&#32034;&#24615;&#33021;&#19979;&#38477;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
max_iops = 40
</pre></div>
<div class="sect2" title="11.3.3.&nbsp;max_iosize&#65306;&#26368;&#22823;IO&#25805;&#20316;&#38480;&#21046;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-max-iosize"></a>11.3.3.&nbsp;max_iosize&#65306;&#26368;&#22823;IO&#25805;&#20316;&#38480;&#21046;</h3></div></div></div>
<p>
&#26368;&#22823;&#20801;&#35768;&#30340;I/O&#25805;&#20316;&#22823;&#23567;&#65292;&#20197;&#23383;&#33410;&#20026;&#21333;&#20301;&#65292;&#29992;&#20110;I/O&#33410;&#27969;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;0&#65288;&#19981;&#38480;&#21046;&#65289;&#12290;
</p><p>
&#19982;I/O&#33410;&#27969;&#26377;&#20851;&#30340;&#36873;&#39033;&#12290;&#23427;&#38480;&#21046;<code class="filename">indexer</code>&#25991;&#20214;I/O&#25805;&#20316;&#30340;&#21333;&#27425;&#26368;&#22823;&#22823;&#23567;&#12290;&#20540;0&#20195;&#34920;&#19981;&#21152;&#38480;&#21046;&#12290;&#36229;&#36807;&#38480;&#21046;&#30340;&#35835;&#20889;&#25805;&#20316;&#20250;&#34987;&#20998;&#25104;&#20960;&#20010;&#23567;&#30340;&#25805;&#20316;&#65292;&#24182;&#34987;<a class="link" href="#conf-max-iops" title="11.3.2.&nbsp;max_iops&#65306;&#27599;&#31186;IO&#25805;&#20316;&#38480;&#21046;">max_iops</a> &#35745;&#20026;&#22810;&#27425;&#12290;&#22312;&#26412;&#25991;&#20889;&#20316;&#26102;&#65292;&#20840;&#37096;I/O&#25805;&#20316;&#37117;&#34987;&#38480;&#21046;&#22312;256KB&#20197;&#19979;&#65288;&#40664;&#35748;&#30340;&#20869;&#37096;&#32531;&#20914;&#22823;&#23567;&#65289;&#65292;&#22240;&#27492;&#22823;&#20110;256KB&#30340;<code class="code">max_iosize</code>&#20540;&#27809;&#26377;&#20219;&#20309;&#20316;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
max_iosize = 1048576
</pre></div>
<div class="sect2" title="11.3.4.&nbsp;max_xmlpipe2_field&#65306;&#26368;&#22823;&#23383;&#27573;&#22823;&#23567;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-max-xmlpipe2-field"></a>11.3.4.&nbsp;max_xmlpipe2_field&#65306;&#26368;&#22823;&#23383;&#27573;&#22823;&#23567;</h3></div></div></div>
<p>
&#23545;&#20110;XMLLpipe2&#25968;&#25454;&#28304;&#20801;&#35768;&#30340;&#26368;&#22823;&#30340;&#23383;&#27573;&#22823;&#23567;&#65292;&#20197;&#23383;&#33410;&#20026;&#21333;&#20301;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#20026;2MB&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
max_xmlpipe2_field = 8M
</pre></div>
<div class="sect2" title="11.3.5.&nbsp;write_buffer&#65306;&#20889;&#32531;&#20914;&#22823;&#23567;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-write-buffer"></a>11.3.5.&nbsp;write_buffer&#65306;&#20889;&#32531;&#20914;&#22823;&#23567;</h3></div></div></div>
<p>
&#20889;&#32531;&#20914;&#21306;&#30340;&#22823;&#23567;&#65292;&#21333;&#20301;&#26159;&#23383;&#33410;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;1MB&#12290;
</p><p>
&#22312;&#24314;&#31435;&#32034;&#24341;&#36807;&#31243;&#20013;&#65292;&#20889;&#32531;&#20914;&#29992;&#20110;&#20889;&#20837;&#20020;&#26102;&#34892;&#32780;&#26368;&#32456;&#30340;&#32034;&#24341;&#25991;&#20214;&#12290;&#20889;&#32531;&#20914;&#21306;&#36234;&#22823;&#21017;&#25152;&#38656;&#30340;&#30913;&#30424;&#20889;&#20837;&#27425;&#25968;&#36234;&#23569;&#12290;&#32531;&#20914;&#21306;&#20351;&#29992;&#30340;&#20869;&#23384;&#19981;&#35745;&#20837;
<a class="link" href="#conf-mem-limit" title="11.3.1.&nbsp;mem_limit&#65306;&#32034;&#24341;&#20869;&#23384;&#38480;&#21046;">mem_limit</a>&#36873;&#39033;&#30340;&#20540;&#12290;&#27880;&#24847;&#23545;&#20110;&#19981;&#21516;&#30340;&#25991;&#20214;&#65292;&#20250;&#20998;&#37197;&#22810;&#20010;&#32531;&#20914;&#21306;&#65288;&#30446;&#21069;&#26368;&#22810;4&#20010;&#65289;&#65292;&#36825;&#20250;&#24341;&#36215;&#20869;&#23384;&#21344;&#29992;&#22686;&#21152;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
write_buffer = 4M
</pre></div>
<div class="sect2" title="11.3.6.&nbsp;max_file_field_buffer&#65306;&#22806;&#37096;&#25991;&#20214;&#32531;&#20914;&#22823;&#23567;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-max-file-field-buffer"></a>11.3.6.&nbsp;max_file_field_buffer&#65306;&#22806;&#37096;&#25991;&#20214;&#32531;&#20914;&#22823;&#23567;</h3></div></div></div>
<p>
&#25991;&#20214;&#23383;&#27573;&#21487;&#29992;&#30340;&#26368;&#22823;&#32531;&#20914;&#21306;&#22823;&#23567;&#65292;&#23383;&#33410;&#20026;&#21333;&#20301;&#12290;
&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;8MB&#65292;&#26368;&#23567;&#20540;&#20026;1MB.
</p><p>
File field buffer is used to load files referred to from
<a class="link" href="#conf-sql-file-field" title="11.1.29.&nbsp;sql_file_field&#65306;&#22806;&#37096;&#25991;&#20214;&#23383;&#27573;">sql_file_field</a> columns.
This buffer is adaptive, starting at 1 MB at first allocation,
and growing in 2x steps until either file contents can be loaded,
or maximum buffer size, specified by <code class="option">max_file_field_buffer</code>
directive, is reached.
</p><p>
Thus, if there are no file fields are specified, no buffer
is allocated at all.  If all files loaded during indexing are under
(for example) 2 MB in size, but <code class="option">max_file_field_buffer</code> 
value is 128 MB, peak buffer usage would still be only 2 MB. However,
files over 128 MB would be entirely skipped.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
max_file_field_buffer = 128M
</pre></div></div>
<div class="sect1" title="11.4.&nbsp;searchd &#31243;&#24207;&#37197;&#32622;&#36873;&#39033;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="confgroup-searchd"></a>11.4.&nbsp;<code class="filename">searchd</code> &#31243;&#24207;&#37197;&#32622;&#36873;&#39033;</h2></div></div></div>
<div class="sect2" title="11.4.1.&nbsp;listen&#65306;&#30417;&#21548;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-listen"></a>11.4.1.&nbsp;listen&#65306;&#30417;&#21548;&#35774;&#32622;</h3></div></div></div>
<p>
&#25351;&#23450;<code class="code">searchd</code>&#30417;&#21548;&#30340;IP&#22320;&#22336;&#21644;&#31471;&#21475;&#65292;&#25110;UNIX&#22495;socket&#30340;&#36335;&#24452;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#19968;&#20010;&#38750;&#27491;&#24335;&#30340;<code class="code">listen</code>&#35821;&#27861;&#35828;&#26126;&#22914;&#19979;&#65306;
</p><pre class="programlisting">
listen = ( address ":" port | port | path ) [ ":" protocol ]
</pre><p>
&#21363;&#65292;&#29992;&#25143;&#21487;&#20197;&#25351;&#23450;IP&#22320;&#22336;&#65288;&#25110;&#20027;&#26426;&#21517;&#65289;&#21644;&#31471;&#21475;&#21495;&#65292;&#25110;&#32773;&#20165;&#20165;&#26159;&#31471;&#21475;&#21495;&#65292;&#25110;&#32773;Unix socket&#30340;&#36335;&#24452;&#12290;&#22914;&#26524;&#20165;&#25351;&#23450;&#20102;&#31471;&#21475;&#21495;&#32780;&#27809;&#26377;&#22320;&#22336;&#65292;&#37027;&#20040;<code class="code">searchd</code>&#20250;&#22312;&#25152;&#26377;&#30340;&#32593;&#32476;&#25509;&#21475;&#19978;&#30417;&#21548;&#12290;Unix&#36335;&#24452;&#37117;&#24102;&#26377;&#19968;&#20010;&#21069;&#23548;&#30340;&#26012;&#26464;&#8221;/&#8221;&#12290;
</p><p>
&#20174;&#29256;&#26412;0.9.9-rc2&#24320;&#22987;&#65292;&#36824;&#21487;&#20197;&#25351;&#23450;&#19968;&#20010;&#21327;&#35758;&#22788;&#29702;&#22120;&#65288;protocl  handler&#65289;&#65292;&#25110;&#32773;&#21483;&#30417;&#21548;&#22120;&#65288;listener&#65289;&#65292;&#24212;&#29992;&#20110;&#36825;&#20010;socket&#19978;&#30340;&#36830;&#25509;&#12290;&#25903;&#25345;&#30340;&#21327;&#35758;&#20540;&#21253;&#25324;&#8216;sphinx&#8217;&#65288;Sphinx 0.9.x API&#21327;&#35758;&#65289;&#21644;mysql41&#65288;&#29256;&#26412;4.1&#21040;&#33267;&#23569;5.1&#30340;MySQL&#20351;&#29992;&#30340;&#21327;&#35758;&#65289;&#12290;&#20851;&#20110;MySQL&#21327;&#35758;&#30340;&#26356;&#22810;&#32454;&#33410;&#21487;&#20197;&#21442;&#32771;
<a class="xref" href="#sphinxql" title="5.10.&nbsp;MySQL &#21327;&#35758;&#25903;&#25345;&#19982; SphinxQL">&#31532;&nbsp;5.10&nbsp;&#33410; &#8220;MySQL &#21327;&#35758;&#25903;&#25345;&#19982; SphinxQL&#8221;</a> &#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
listen = localhost
listen = localhost:5000
listen = 192.168.0.1:5000
listen = /var/run/sphinx.s
listen = 9312
listen = localhost:9306:mysql41
</pre><p>
&#21487;&#20197;&#26377;&#22810;&#20010;listen&#25351;&#20196;&#65292;<code class="code">searchd</code> &#20250;&#22312;&#25152;&#26377;&#36825;&#20123;&#25351;&#20196;&#32440;&#27974;&#30340;&#31471;&#21475;&#21644;socket&#19978;&#30417;&#21548;&#65292;&#20197;&#22791;&#29992;&#25143;&#36830;&#25509;&#12290;&#22914;&#26524;&#27809;&#26377;&#25214;&#21040;<code class="code">listen</code>&#25351;&#20196;&#65292;&#26381;&#21153;&#22120;&#20250;&#22312;&#25152;&#26377;&#30340;&#32593;&#32476;&#25509;&#21475;&#19978;&#29992;&#40664;&#35748;&#31471;&#21475;&#65288;9312&#65289;&#30417;&#21548;&#12290;
&#20174;&#29256;&#26412;1.10-beta&#24320;&#22987;&#65292;&#20063;&#20250;&#33258;&#21160;&#30417;&#21548;&#40664;&#35748;&#30340;SphinxQL&#31471;&#21475;9306&#12290;&#36825;&#20004;&#20010;&#31471;&#21475;&#21495;&#26159;&#30001;IANA&#65288;&#26597;&#30475;<a class="ulink" href="http://www.iana.org/assignments/port-numbers" target="_top">http://www.iana.org/assignments/port-numbers</a>&#20102;&#35299;&#35814;&#24773;&#65289;&#25152;&#20998;&#37197;&#30340;&#65292;&#22240;&#27492;&#21487;&#20197;&#27491;&#24120;&#20351;&#29992;&#12290;
</p><p>
&#22312;Windows&#19978;&#19981;&#25903;&#25345;Unix&#22495;&#22871;&#25509;&#23383;&#12290;
</p></div>
<div class="sect2" title="11.4.2.&nbsp;address&#65306;&#30417;&#21548;&#22320;&#22336;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-address"></a>11.4.2.&nbsp;address&#65306;&#30417;&#21548;&#22320;&#22336;</h3></div></div></div>
<p>
&#35201;&#32465;&#23450;&#30340;&#25509;&#21475;IP&#22320;&#22336;&#12290;&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;0.0.0.0&#65288;&#21363;&#22312;&#25152;&#26377;&#25509;&#21475;&#19978;&#30417;&#21548;&#65289;&#12290;
<span class="bold"><strong>&#19981;&#25512;&#33616;</strong></span>, &#24314;&#35758;&#20351;&#29992; <a class="link" href="#conf-listen" title="11.4.1.&nbsp;listen&#65306;&#30417;&#21548;&#35774;&#32622;">listen</a> &#12290;
</p><p>
<code class="code">address</code> &#35774;&#32622;&#25351;&#23450;<code class="filename">searchd</code>&#22312;&#21738;&#20010;&#25509;&#21475;&#19978;&#32465;&#23450;&#12289;&#30417;&#21548;&#21644;&#25509;&#21463;&#36755;&#20837;&#30340;&#32593;&#32476;&#36830;&#25509;&#12290;&#40664;&#35748;&#20540;&#20026;0.0.0.0&#65292;&#24847;&#24605;&#26159;&#22312;&#25152;&#26377;&#25509;&#21475;&#19978;&#30417;&#21548;&#12290;&#30446;&#21069;<span class="bold"><strong>&#19981;&#33021;</strong></span>&#25351;&#23450;&#22810;&#20010;&#25509;&#21475;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
address = 192.168.0.1
</pre></div>
<div class="sect2" title="11.4.3.&nbsp;port&#65306;&#30417;&#21548;&#31471;&#21475;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-port"></a>11.4.3.&nbsp;port&#65306;&#30417;&#21548;&#31471;&#21475;</h3></div></div></div>
<p>
<code class="filename">searchd</code> &#30340;TCP&#31471;&#21475;&#21495;&#12290;
<span class="bold"><strong>&#19981;&#25512;&#33616;</strong></span>, &#24314;&#35758;&#20351;&#29992; <a class="link" href="#conf-listen" title="11.4.1.&nbsp;listen&#65306;&#30417;&#21548;&#35774;&#32622;">listen</a> &#12290;
&#24517;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;9312&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
port = 9312
</pre></div>
<div class="sect2" title="11.4.4.&nbsp;log&#65306;&#25628;&#32034;&#31995;&#32479;&#26085;&#24535;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-log"></a>11.4.4.&nbsp;log&#65306;&#25628;&#32034;&#31995;&#32479;&#26085;&#24535;</h3></div></div></div>
<p>
&#26085;&#24535;&#25991;&#20214;&#21517;&#12290;&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#8220;searchd.log&#8221;&#12290;&#20840;&#37096;<code class="filename">searchd</code>&#36816;&#34892;&#26102;&#20107;&#20214;&#20250;&#34987;&#35760;&#24405;&#22312;&#36825;&#20010;&#26085;&#24535;&#25991;&#20214;&#20013;&#12290;
</p><p>
Also you can use the 'syslog' as the file name. In this case the events will be sent to syslog daemon.
To use the syslog option the sphinx must be configured '--with-syslog' on building.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
log = /var/log/searchd.log
</pre></div>
<div class="sect2" title="11.4.5.&nbsp;query_log&#65306;&#25628;&#32034;&#26597;&#35810;&#26085;&#24535;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-query-log"></a>11.4.5.&nbsp;query_log&#65306;&#25628;&#32034;&#26597;&#35810;&#26085;&#24535;</h3></div></div></div>
<p>
&#26597;&#35810;&#26085;&#24535;&#25991;&#20214;&#21517;&#12290;&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;&#31354;&#65288;&#19981;&#35760;&#24405;&#26597;&#35810;&#26085;&#24535;&#65289;&#12290;&#20840;&#37096;&#25628;&#32034;&#26597;&#35810;&#20250;&#34987;&#35760;&#24405;&#22312;&#27492;&#25991;&#20214;&#20013;&#12290;&#20854;&#26684;&#24335;&#22312;<a class="xref" href="#query-log-format" title="5.9.&nbsp;&#25628;&#32034;&#26381;&#21153;(searchd) &#26597;&#35810;&#26085;&#24535;&#26684;&#24335;">&#31532;&nbsp;5.9&nbsp;&#33410; &#8220;&#25628;&#32034;&#26381;&#21153;(<code class="filename">searchd</code>) &#26597;&#35810;&#26085;&#24535;&#26684;&#24335;&#8221;</a>&#20013;&#25551;&#36848;&#12290;
</p><p>
In case of 'plain' format, you can use the 'syslog' as the path to the log file.
In this case all search queries will be sent to syslog daemon with LOG_INFO priority,
prefixed with '[query]' instead of timestamp.
To use the syslog option the sphinx must be configured '--with-syslog' on building.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
query_log = /var/log/query.log
</pre></div>
<div class="sect2" title="11.4.6.&nbsp;query_log_format&#65306;&#26597;&#35810;&#26085;&#24535;&#26684;&#24335;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-query-log-format"></a>11.4.6.&nbsp;query_log_format&#65306;&#26597;&#35810;&#26085;&#24535;&#26684;&#24335;</h3></div></div></div>
<p>
&#26597;&#35810;&#26085;&#24535;&#26684;&#24335;&#12290;
&#21487;&#36873;&#39033;&#65292;&#21487;&#29992;&#20540;&#20026;plain&#12289;sphinxql&#65292;&#40664;&#35748;&#20026;plain&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Starting with version 2.0.1-beta, two different log formats are supported.
The default one logs queries in a custom text format. The new one logs
valid SphinxQL statements. This directive allows to switch between the two
formats on search daemon startup. The log format can also be altered
on the fly, using <code class="code">SET GLOBAL query_log_format=sphinxql</code> syntax.
Refer to <a class="xref" href="#query-log-format" title="5.9.&nbsp;&#25628;&#32034;&#26381;&#21153;(searchd) &#26597;&#35810;&#26085;&#24535;&#26684;&#24335;">&#31532;&nbsp;5.9&nbsp;&#33410; &#8220;&#25628;&#32034;&#26381;&#21153;(<code class="filename">searchd</code>) &#26597;&#35810;&#26085;&#24535;&#26684;&#24335;&#8221;</a> for more discussion and format
details.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
query_log_format = sphinxql
</pre></div>
<div class="sect2" title="11.4.7.&nbsp;read_timeout&#65306;&#36828;&#31243;&#35835;&#21462;&#36229;&#26102;&#26102;&#38388;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-read-timeout"></a>11.4.7.&nbsp;read_timeout&#65306;&#36828;&#31243;&#35835;&#21462;&#36229;&#26102;&#26102;&#38388;</h3></div></div></div>
<p>
&#32593;&#32476;&#23458;&#25143;&#31471;&#35831;&#27714;&#30340;&#35835;&#36229;&#26102;&#26102;&#38388;&#65292;&#21333;&#20301;&#26159;&#31186;&#12290;&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#26159;5&#31186;&#12290;
<code class="filename">searchd</code> &#24378;&#21046;&#20851;&#38381;&#22312;&#27492;&#26102;&#38388;&#20869;&#26410;&#33021;&#25104;&#21151;&#21457;&#20986;&#26597;&#35810;&#30340;&#23458;&#25143;&#31471;&#36830;&#25509;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
read_timeout = 1
</pre></div>
<div class="sect2" title="11.4.8.&nbsp;client_timeout&#65306;&#23458;&#25143;&#31471;&#36229;&#26102;&#26102;&#38388;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-client-timeout"></a>11.4.8.&nbsp;client_timeout&#65306;&#23458;&#25143;&#31471;&#36229;&#26102;&#26102;&#38388;</h3></div></div></div>
<p>
&#22312;&#20351;&#29992;&#25345;&#20037;&#36830;&#25509;&#26102;&#65292;&#20004;&#27425;&#26597;&#35810;&#20043;&#38388;&#31561;&#24453;&#30340;&#26368;&#38271;&#26102;&#38388;&#65288;&#21333;&#20301;&#26159;&#31186;&#65289;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#26159;5&#20998;&#38047;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
client_timeout = 3600
</pre></div>
<div class="sect2" title="11.4.9.&nbsp;max_children&#65306;&#23376;&#36827;&#31243;&#25968;&#30446;&#38480;&#21046;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-max-children"></a>11.4.9.&nbsp;max_children&#65306;&#23376;&#36827;&#31243;&#25968;&#30446;&#38480;&#21046;</h3></div></div></div>
<p>
&#23376;&#36827;&#31243;&#30340;&#26368;&#22823;&#25968;&#37327;&#65288;&#25110;&#32773;&#35828;&#65292;&#24182;&#34892;&#25191;&#34892;&#30340;&#25628;&#32034;&#30340;&#25968;&#30446;&#65289;&#12290;&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;0&#65292;&#19981;&#38480;&#21046;&#12290;
</p><p>
&#29992;&#26469;&#25511;&#21046;&#26381;&#21153;&#22120;&#36127;&#36733;&#12290;&#20219;&#20309;&#26102;&#20505;&#19981;&#21487;&#33021;&#26377;&#27604;&#27492;&#35774;&#32622;&#20540;&#26356;&#22810;&#30340;&#25628;&#32034;&#21516;&#26102;&#36816;&#34892;&#12290;&#24403;&#36798;&#21040;&#38480;&#21046;&#26102;&#65292;&#26032;&#30340;&#36755;&#20837;&#23458;&#25143;&#31471;&#20250;&#34987;&#29992;&#20020;&#26102;&#22833;&#36133;&#65288;SEARCH_RETRY&#65289;&#29366;&#24577;&#30721;&#39539;&#22238;&#65292;&#21516;&#26102;&#32473;&#20986;&#19968;&#20010;&#22768;&#26126;&#26381;&#21153;&#22120;&#24050;&#21040;&#26368;&#22823;&#36830;&#25509;&#38480;&#21046;&#30340;&#28040;&#24687;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
max_children = 10
</pre></div>
<div class="sect2" title="11.4.10.&nbsp;pid_file&#65306;PID&#25991;&#20214;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-pid-file"></a>11.4.10.&nbsp;pid_file&#65306;PID&#25991;&#20214;</h3></div></div></div>
<p>
<code class="filename">searchd</code> PID&#25991;&#20214;&#21517;&#12290;&#24517;&#36873;&#39033;&#12290;
Mandatory.
</p><p>
PID&#25991;&#20214;&#20250;&#22312;&#21551;&#21160;&#26102;&#37325;&#24314;&#65288;&#24182;&#38145;&#23450;&#65289;&#12290;&#20027;&#23432;&#25252;&#36827;&#31243;&#36816;&#34892;&#26102;&#23427;&#21547;&#26377;&#35813;&#36827;&#31243;&#30340;ID&#65292;&#32780;&#24403;&#23432;&#25252;&#36827;&#31243;&#36864;&#20986;&#26102;&#35813;&#25991;&#20214;&#20250;&#34987;&#21024;&#38500;&#12290;&#36825;&#20010;&#36873;&#39033;&#26159;&#24517;&#39035;&#30340;&#65292;&#22240;&#20026;Sphinx&#22312;&#20869;&#37096;&#20351;&#29992;&#23427;&#20570;&#22914;&#19979;&#20107;&#65306;&#26816;&#26597;&#26159;&#21542;&#24050;&#26377;&#19968;&#20010;<code class="filename">searchd</code>&#31034;&#20363;&#65307;&#20572;&#27490;<code class="filename">searchd</code>&#65307;&#36890;&#30693;<code class="filename">searchd</code>&#24212;&#35813;&#36718;&#25442;&#32034;&#24341;&#20102;&#12290;&#20063;&#21487;&#20197;&#34987;&#21508;&#31181;&#19981;&#21516;&#30340;&#22806;&#37096;&#33258;&#21160;&#21270;&#33050;&#26412;&#25152;&#21033;&#29992;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
pid_file = /var/run/searchd.pid
</pre></div>
<div class="sect2" title="11.4.11.&nbsp;max_matches&#65306;&#26368;&#22823;&#36820;&#22238;&#21305;&#37197;&#25968;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-max-matches"></a>11.4.11.&nbsp;max_matches&#65306;&#26368;&#22823;&#36820;&#22238;&#21305;&#37197;&#25968;</h3></div></div></div>
<p>
&#23432;&#25252;&#36827;&#31243;&#22312;&#20869;&#23384;&#20013;&#20026;&#27599;&#20010;&#32034;&#24341;&#25152;&#20445;&#25345;&#24182;&#36820;&#22238;&#32473;&#23458;&#25143;&#31471;&#30340;&#21305;&#37197;&#25968;&#30446;&#30340;&#26368;&#22823;&#20540;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#20026;1000&#12290;
</p><p>
&#24341;&#20837;&#27492;&#36873;&#39033;&#26159;&#20026;&#20102;&#25511;&#21046;&#21644;&#38480;&#21046;&#20869;&#23384;&#20351;&#29992;&#65292;<code class="code">max_matches</code>&#35774;&#32622;&#23450;&#20041;&#20102;&#25628;&#32034;&#27599;&#20010;&#32034;&#24341;&#26102;&#26377;&#22810;&#23569;&#21305;&#37197;&#39033;&#20250;&#20445;&#23384;&#22312;&#20869;&#23384;&#20013;&#12290;&#27599;&#20010;&#25214;&#21040;&#30340;&#21305;&#37197;&#39033;&#37117;&#20250;&#34987;<span class="emphasis"><em>&#22788;&#29702;</em></span>&#65292;&#20294;&#21482;&#26377;&#23427;&#20204;&#20013;&#26368;&#20339;&#30340;N&#20010;&#20250;&#22312;&#20869;&#23384;&#20013;&#20445;&#25345;&#24182;&#26368;&#32456;&#36820;&#22238;&#32473;&#23458;&#25143;&#31471;&#12290;&#20551;&#35774;&#32034;&#24341;&#20013;&#21253;&#25324;2000000&#20010;&#24403;&#21069;&#26597;&#35810;&#30340;&#21305;&#37197;&#39033;&#65292;&#20320;&#20960;&#20046;&#24635;&#26159;&#19981;&#38656;&#35201;&#23427;&#20204;&#20013;&#30340;<span class="emphasis"><em>&#20840;&#37096;</em></span>&#12290;&#36890;&#24120;&#24744;&#38656;&#35201;&#25195;&#25551;&#23427;&#20204;&#24182;&#26681;&#25454;&#26576;&#31181;&#26465;&#20214;&#65288;&#21363;&#25353;&#30456;&#20851;&#24230;&#25490;&#24207;&#12289;&#25110;&#32773;&#20215;&#26684;&#12289;&#25110;&#32773;&#20854;&#20182;&#20160;&#20040;&#65289;&#36873;&#20986;&#26368;&#22909;&#30340;&#37027;&#20123;&#65292;&#27604;&#22914;500&#20010;&#65292;&#24182;&#20197;&#22312;&#39029;&#38754;&#19978;&#26174;&#31034;20&#21040;100&#39033;&#12290;&#21482;&#36319;&#36394;&#26368;&#22909;&#30340;500&#20010;&#21305;&#37197;&#35201;&#27604;&#20445;&#25345;&#20840;&#37096;&#30340;2000000&#20010;&#21305;&#37197;&#39033;&#22823;&#22823;&#22320;&#33410;&#32422;&#20869;&#23384;&#21644;CPU&#65292;&#20043;&#21518;&#21487;&#20197;&#23545;&#36825;&#20123;&#26368;&#20339;&#21305;&#37197;&#25490;&#24207;&#65292;&#28982;&#21518;&#20002;&#24323;&#38500;&#20102;&#35201;&#22312;&#39029;&#38754;&#19978;&#35201;&#26174;&#24335;&#30340;20&#39033;&#20043;&#22806;&#30340;&#32467;&#26524;&#12290;<code class="code">max_matches</code>&#25511;&#21046;&#8220;&#26368;&#20339;N&#20010;&#21305;&#37197;&#8221;&#20013;&#30340;N&#12290;
</p><p>
&#27492;&#21442;&#25968;&#26126;&#26174;&#24433;&#21709;&#27599;&#20010;&#26597;&#35810;&#28040;&#32791;&#30340;&#20869;&#23384;&#21644;CPU&#12290;1000&#21040;10000&#30340;&#20540;&#36890;&#24120;&#23601;&#21487;&#20197;&#28385;&#36275;&#38656;&#27714;&#65292;&#20294;&#26356;&#39640;&#30340;&#20540;&#35201;&#23567;&#24515;&#20351;&#29992;&#12290;&#31895;&#24515;&#22320;&#25226;<code class="code">max_matches</code>&#22686;&#21152;&#21040;1000000&#24847;&#21619;&#30528;<code class="filename">searchd</code>&#34987;&#36843;&#20026;<span class="emphasis"><em>&#27599;&#19968;&#20010;</em></span>&#26597;&#35810;&#20998;&#37197;1M&#26465;&#21305;&#37197;&#39033;&#30340;&#32531;&#20914;&#12290;&#36825;&#20250;&#26126;&#26174;&#22686;&#22823;&#26597;&#35810;&#30340;&#20869;&#23384;&#28040;&#32791;&#65292;&#26377;&#26102;&#20250;&#26126;&#26174;&#24433;&#21709;&#24615;&#33021;&#12290;
</p><p>
<span class="bold"><strong>&#29305;&#21035;&#27880;&#24847;&#65281;</strong></span>&#27492;&#38480;&#21046;&#36824;&#21487;&#22312;<span class="bold"><strong>&#21478;&#19968;&#20010;</strong></span>&#22320;&#26041;&#25351;&#23450;&#12290;<code class="code">max_matches</code>&#21487;&#20197;&#36890;&#36807;<a class="link" href="#api-func-setlimits" title="8.2.1.&nbsp;SetLimits &#65288;&#35774;&#32622;&#32467;&#26524;&#38598;&#20559;&#31227;&#37327;&#65289;">&#23545;&#24212;&#30340;API&#35843;&#29992;</a>&#23454;&#26102;&#38477;&#20302;&#65292;&#35813;&#35843;&#29992;&#30340;&#40664;&#35748;&#20540;<span class="bold"><strong>&#20063;</strong></span>&#26159;1000&#12290;&#22240;&#27492;&#35201;&#20351;&#24212;&#29992;&#31243;&#24207;&#33719;&#21462;&#36229;&#36807;1000&#20010;&#21305;&#37197;&#32467;&#26524;&#65292;&#24517;&#39035;&#20462;&#25913;&#37197;&#32622;&#25991;&#20214;&#65292;&#37325;&#21551;searchd&#65292;&#20877;&#29992;<a class="link" href="#api-func-setlimits" title="8.2.1.&nbsp;SetLimits &#65288;&#35774;&#32622;&#32467;&#26524;&#38598;&#20559;&#31227;&#37327;&#65289;">SetLimits()</a>&#35843;&#29992;&#35774;&#32622;&#21512;&#36866;&#30340;&#38480;&#21046;&#12290;&#36824;&#35201;&#27880;&#24847;&#65292;API&#35843;&#29992;&#35774;&#32622;&#30340;&#38480;&#21046;&#19981;&#33021;&#22823;&#20110;.conf&#25991;&#20214;&#20013;&#30340;&#35774;&#32622;&#65292;&#36825;&#26159;&#20026;&#20102;&#39044;&#38450;&#24694;&#24847;&#30340;&#25110;&#38169;&#35823;&#30340;&#35831;&#27714;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
max_matches = 10000
</pre></div>
<div class="sect2" title="11.4.12.&nbsp;seamless_rotate&#65306;&#26080;&#32541;&#36718;&#25442;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-seamless-rotate"></a>11.4.12.&nbsp;seamless_rotate&#65306;&#26080;&#32541;&#36718;&#25442;</h3></div></div></div>
<p>
&#38450;&#27490; <code class="filename">searchd</code> &#36718;&#25442;&#22312;&#38656;&#35201;&#39044;&#21462;&#22823;&#37327;&#25968;&#25454;&#30340;&#32034;&#24341;&#26102;&#20572;&#27490;&#21709;&#24212;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;1&#65288;&#21551;&#29992;&#26080;&#32541;&#65288;seamless&#65289;&#36718;&#25442;&#65289;&#12290;
</p><p>
&#32034;&#24341;&#21487;&#33021;&#21253;&#21547;&#26576;&#20123;&#38656;&#35201;&#39044;&#21462;&#21040;&#20869;&#23384;&#20013;&#30340;&#25968;&#25454;&#12290;&#30446;&#21069;<code class="filename">.spa</code>, <code class="filename">.spi</code> &#21644;
<code class="filename">.spm</code>&#25991;&#20214;&#20250;&#34987;&#23436;&#20840;&#39044;&#21462;&#21040;&#20869;&#23384;&#20013;&#65288;&#23427;&#20204;&#20998;&#21035;&#21253;&#21547;&#23646;&#24615;&#25968;&#25454;&#65292;MVA&#25968;&#25454;&#21644;&#20851;&#38190;&#23383;&#32034;&#24341;&#65289;&#12290;&#33509;&#26080;&#26080;&#32541;&#36718;&#25442;&#65292;&#36718;&#25442;&#32034;&#24341;&#26102;&#20250;&#23613;&#37327;&#20351;&#29992;&#36739;&#23567;&#30340;&#20869;&#23384;&#65292;&#24182;&#22914;&#19979;&#24037;&#20316;&#65306;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">&#26032;&#30340;&#26597;&#35810;&#26242;&#26102;&#34987;&#25298;&#32477;&#65288;&#29992;&#8220;retry&#8221;&#38169;&#35823;&#30721;&#65289;&#65307;</li>
<li class="listitem"><code class="filename">searchd</code> &#31561;&#24453;&#30446;&#21069;&#27491;&#22312;&#36816;&#34892;&#30340;&#26597;&#35810;&#32467;&#26463;&#65307;</li>
<li class="listitem">&#26087;&#30340;&#32034;&#24341;&#34987;&#37322;&#25918;&#65292;&#25991;&#20214;&#34987;&#37325;&#21629;&#21517;&#65307;</li>
<li class="listitem">&#26032;&#30340;&#32034;&#24341;&#25991;&#20214;&#34987;&#37325;&#21629;&#21517;&#65292;&#20998;&#37197;&#25152;&#38656;&#30340;&#20869;&#23384;&#65307;</li>
<li class="listitem">&#26032;&#30340;&#32034;&#24341;&#23646;&#24615;&#21644;&#23383;&#20856;&#25968;&#25454;&#39044;&#35843;&#36827;&#20869;&#23384;&#65307;</li>
<li class="listitem"><code class="filename">searchd</code> &#24674;&#22797;&#20026;&#26032;&#32034;&#24341;&#25552;&#20379;&#26597;&#35810;&#26381;&#21153;&#12290;</li>
</ol></div>
<p>
</p><p>
&#28982;&#32780;&#65292;&#22914;&#26524;&#26377;&#22823;&#37327;&#30340;&#23646;&#24615;&#25110;&#23383;&#20856;&#25968;&#25454;&#65292;&#37027;&#20040;&#39044;&#35843;&#25968;&#25454;&#30340;&#27493;&#39588;&#21487;&#33021;&#28040;&#32791;&#22823;&#37327;&#30340;&#26102;&#38388;&#8212;&#8212;&#39044;&#35843;1.5GB&#30340;&#25991;&#20214;&#21487;&#33021;&#38656;&#35201;&#20960;&#20998;&#38047;&#30340;&#26102;&#38388;&#12290; 
</p><p>
&#24403;&#21551;&#29992;&#20102;&#26080;&#32541;&#36718;&#25442;&#65292;&#36718;&#25442;&#25353;&#22914;&#19979;&#24037;&#20316;&#65306;
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">&#20026;&#26032;&#32034;&#24341;&#20998;&#37197;&#20869;&#23384;&#65307;</li>
<li class="listitem">&#26032;&#32034;&#24341;&#30340;&#23646;&#24615;&#21644;&#23383;&#20856;&#25968;&#25454;&#24322;&#27493;&#22320;&#39044;&#35843;&#36827;&#20869;&#23384;&#65307;</li>
<li class="listitem">&#22914;&#26524;&#25104;&#21151;&#65292;&#26087;&#30340;&#32034;&#24341;&#34987;&#37322;&#25918;&#65292;&#26032;&#26087;&#32034;&#24341;&#25991;&#20214;&#34987;&#37325;&#21629;&#21517;&#65307;</li>
<li class="listitem">&#22914;&#26524;&#22833;&#36133;&#65292;&#37322;&#25918;&#26032;&#32034;&#24341;&#65307;</li>
<li class="listitem">&#22312;&#20219;&#24847;&#26102;&#21051;&#65292;&#26597;&#35810;&#26381;&#21153;&#37117;&#27491;&#24120;&#36816;&#34892;&#8212;&#8212;&#25110;&#32773;&#20351;&#29992;&#26087;&#32034;&#24341;&#65292;&#25110;&#32773;&#20351;&#29992;&#26032;&#32034;&#24341;&#12290;</li>
</ol></div>
<p>
</p><p>
&#26080;&#32541;&#36718;&#25442;&#20197;&#36718;&#25442;&#36807;&#31243;&#20013;&#26356;&#22823;&#30340;<span class="bold"><strong>&#23792;&#20540;</strong></span>&#20869;&#23384;&#28040;&#32791;&#20026;&#20195;&#20215;&#65288;&#22240;&#20026;&#24403;&#39044;&#35843;&#26032;&#32034;&#24341;&#26102;<code class="filename">.spa/.spi/.spm</code>&#25968;&#25454;&#30340;&#26032;&#26087;&#25335;&#36125;&#38656;&#35201;&#21516;&#26102;&#20445;&#25345;&#22312;&#20869;&#23384;&#20013;&#65289;&#12290;&#24179;&#22343;&#20869;&#23384;&#32791;&#29992;&#19981;&#21464;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
seamless_rotate = 1
</pre></div>
<div class="sect2" title="11.4.13.&nbsp;preopen_indexes&#65306;&#32034;&#24341;&#39044;&#24320;&#21551;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-preopen-indexes"></a>11.4.13.&nbsp;preopen_indexes&#65306;&#32034;&#24341;&#39044;&#24320;&#21551;</h3></div></div></div>
<p>
&#26159;&#21542;&#22312;&#21551;&#21160;&#26159;&#24378;&#21046;&#37325;&#26032;&#25171;&#24320;&#25152;&#26377;&#32034;&#24341;&#25991;&#20214;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;1&#65288;&#20840;&#37096;&#25171;&#24320;&#65289;&#12290;
</p><p>
Starting with 2.0.1-beta, the default value for this
option is now 1 (foribly preopen all indexes). In prior
versions, it used to be 0 (use per-index settings).
</p><p>
&#35774;&#32622;&#20026; 1 &#26102;&#65292;&#35813;&#37197;&#32622;&#20250;&#35206;&#30422;&#24182;&#23545;&#25152;&#26377;&#25552;&#20379;&#26381;&#21153;&#30340;&#32034;&#24341;&#24378;&#21046;
&#25171;&#24320; <a class="link" href="#conf-preopen" title="11.2.35.&nbsp;preopen&#65306;&#32034;&#24341;&#25991;&#20214;&#39044;&#24320;&#21551;">preopen</a> &#36873;&#39033;
They will be preopened, no matter what is the per-index
<code class="code">preopen</code> setting. When set to 0, per-index
settings can take effect. (And they default to 0.)
</p><p>
Pre-opened indexes avoid races between search queries
and rotations that can cause queries to fail occasionally.
They also make <code class="filename">searchd</code> use more file
handles. In most scenarios it's therefore preferred and
recommended to preopen indexes.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
preopen_indexes = 1
</pre></div>
<div class="sect2" title="11.4.14.&nbsp;unlink_old&#65306;&#26087;&#32034;&#24341;&#28165;&#29702;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-unlink-old"></a>11.4.14.&nbsp;unlink_old&#65306;&#26087;&#32034;&#24341;&#28165;&#29702;</h3></div></div></div>
<p>
&#32034;&#24341;&#36718;&#25442;&#25104;&#21151;&#20043;&#21518;&#65292;&#26159;&#21542;&#21024;&#38500;&#20197;.old&#20026;&#25193;&#23637;&#21517;&#30340;&#32034;&#24341;&#25335;&#36125;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;1&#65288;&#21024;&#38500;&#36825;&#20123;&#32034;&#24341;&#25335;&#36125;&#65289;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
unlink_old = 0
</pre></div>
<div class="sect2" title="11.4.15.&nbsp;attr_flush_period&#65306;&#23646;&#24615;&#21047;&#26032;&#21608;&#26399;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-attr-flush-period"></a>11.4.15.&nbsp;attr_flush_period&#65306;&#23646;&#24615;&#21047;&#26032;&#21608;&#26399;</h3></div></div></div>
<p>
&#29992;<code class="code">UpdateAttributes()</code>&#23454;&#26102;&#26356;&#26032;&#25991;&#26723;&#23646;&#24615;&#26102;&#65292;&#25152;&#20135;&#29983;&#30340;&#21464;&#21270;&#39318;&#20808;&#20889;&#20837;&#21040;&#36825;&#20123;&#23646;&#24615;&#22312;&#20869;&#23384;&#20013;&#30340;&#19968;&#20221;&#25335;&#36125;&#20013;&#65288;&#24517;&#39035;&#23558;<code class="option">docinfo</code>&#35774;&#32622;&#25104;<code class="option">extern</code>&#65289;&#12290;&#20854;&#21518;&#65292;&#19968;&#26086;<code class="filename">searchd</code>&#27491;&#24120;&#20851;&#38381;&#65288;&#36890;&#36807;&#21457;&#36865;<code class="code">SIGTERM</code>&#20449;&#21495;&#65289;&#65292;&#36825;&#20123;&#21464;&#21270;&#25165;&#20889;&#20837;&#30913;&#30424;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#20013;&#24341;&#20837;&#12290;
</p><p>&#20174;&#29256;&#26412;0.9.9-rc1&#24320;&#22987;&#65292;&#21487;&#20197;&#20196;<code class="filename">searchd</code>&#27599;&#38548;&#19968;&#27573;&#26102;&#38388;&#23601;&#23558;&#21464;&#21270;&#20889;&#22238;&#30913;&#30424;&#65292;&#38450;&#27490;&#20002;&#22833;&#36825;&#20123;&#21464;&#21270;&#12290;&#36825;&#20010;&#38388;&#38548;&#26102;&#38388;&#36890;&#36807;<code class="option">attr_flush_period</code>&#36873;&#39033;&#35774;&#32622;&#65292;&#21333;&#20301;&#26159;&#31186;&#12290;
</p><p>&#40664;&#35748;&#20540;&#26159;0&#65292;&#21363;&#20851;&#38381;&#38548;&#19968;&#27573;&#26102;&#38388;&#23601;&#23558;&#21464;&#21270;&#20889;&#22238;&#30913;&#30424;&#30340;&#29305;&#24615;&#65292;&#20294;&#26159;&#27491;&#24120;&#20851;&#38381;&#26102;&#30340;&#20889;&#22238;&#19981;&#34987;&#20851;&#38381;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
attr_flush_period = 900 # persist updates to disk every 15 minutes
</pre></div>
<div class="sect2" title="11.4.16.&nbsp;ondisk_dict_default&#65306;&#32034;&#24341;&#23383;&#20856;&#23384;&#20648;&#26041;&#24335;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-ondisk-dict-default"></a>11.4.16.&nbsp;ondisk_dict_default&#65306;&#32034;&#24341;&#23383;&#20856;&#23384;&#20648;&#26041;&#24335;</h3></div></div></div>
<p>
&#23545; <a class="link" href="#conf-ondisk-dict" title="11.2.36.&nbsp;ondisk_dict&#65306;&#23383;&#20856;&#25991;&#20214;&#20445;&#25345;&#35774;&#32622;">ondisk_dict</a> &#25351;&#20196;&#30340;&#20840;&#23616;&#30340;&#40664;&#35748;&#20540;&#12290;
&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;0&#65288;&#23558;&#23383;&#20856;&#39044;&#20808;&#32531;&#20914;&#21040;&#20869;&#23384;&#65289;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#20013;&#24341;&#20837;&#12290;
</p><p>
&#36825;&#20010;&#36873;&#39033;&#29992;&#20110;&#20026;&#24403;&#21069;&#20351;&#29992;&#30340;&#36825;&#20221;<code class="filename">searchd</code>&#27491;&#22312;&#25552;&#20379;&#26381;&#21153;&#30340;&#25152;&#26377;&#32034;&#24341;&#25351;&#23450;<a class="link" href="#conf-ondisk-dict" title="11.2.36.&nbsp;ondisk_dict&#65306;&#23383;&#20856;&#25991;&#20214;&#20445;&#25345;&#35774;&#32622;">ondisk_dict</a>&#36873;&#39033;&#30340;&#40664;&#35748;&#20540;&#12290;&#22914;&#26524;&#26576;&#20010;&#32034;&#24341;&#30340;&#36825;&#20010;&#36873;&#39033;&#20570;&#20102;&#26174;&#24335;&#35774;&#23450;&#65292;&#37027;&#20040;&#36825;&#20010;&#35774;&#23450;&#35206;&#30422;&#19978;&#36848;&#23454;&#20363;&#32423;&#30340;&#40664;&#35748;&#35774;&#32622;&#65292;&#36825;&#31181;&#26426;&#21046;&#25552;&#20379;&#20102;&#32454;&#31890;&#24230;&#30340;&#25511;&#21046;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
ondisk_dict_default = 1 # keep all dictionaries on disk
</pre></div>
<div class="sect2" title="11.4.17.&nbsp;max_packet_size&#65306;&#26368;&#22823;&#21253;&#22823;&#23567;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-max-packet-size"></a>11.4.17.&nbsp;max_packet_size&#65306;&#26368;&#22823;&#21253;&#22823;&#23567;</h3></div></div></div>
<p>
&#32593;&#32476;&#36890;&#35759;&#26102;&#20801;&#35768;&#30340;&#26368;&#22823;&#30340;&#21253;&#30340;&#22823;&#23567;&#12290;&#36825;&#20010;&#38480;&#21046;&#26082;&#23545;&#26469;&#33258;&#23458;&#25143;&#31471;&#30340;&#26597;&#35810;&#21253;&#26377;&#25928;&#65292;&#20063;&#23545;&#20998;&#24067;&#24335;&#29615;&#22659;&#19979;&#36828;&#31243;&#20195;&#29702;&#36820;&#22238;&#30340;&#21709;&#24212;&#21253;&#26377;&#25928;&#12290;&#21482;&#29992;&#20110;&#20869;&#37096;&#26657;&#39564;&#65292;&#19981;&#30452;&#25509;&#24433;&#21709;&#20869;&#23384;&#21344;&#29992;&#21644;&#24615;&#33021;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;8M&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
max_packet_size = 32M
</pre></div>
<div class="sect2" title="11.4.18.&nbsp;mva_updates_pool&#65306;MVA&#26356;&#26032;&#20849;&#20139;&#20869;&#23384;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-mva-updates-pool"></a>11.4.18.&nbsp;mva_updates_pool&#65306;MVA&#26356;&#26032;&#20849;&#20139;&#20869;&#23384;</h3></div></div></div>
<p>
&#29992;&#20110;&#22810;&#20540;&#23646;&#24615;MVA&#26356;&#26032;&#30340;&#23384;&#20648;&#31354;&#38388;&#30340;&#20869;&#23384;&#20849;&#20139;&#27744;&#22823;&#23567;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#22823;&#23567;&#26159;1M&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><p>
&#36825;&#20010;&#35774;&#32622;&#25511;&#21046;&#29992;&#20110;&#23384;&#20648;&#22810;&#20540;&#23646;&#24615;MVA&#26356;&#26032;&#21518;&#30340;&#20540;&#20849;&#20139;&#23384;&#20648;&#27744;&#30340;&#22823;&#23567;&#12290;&#22914;&#26524;&#25351;&#23450;&#22823;&#23567;&#20026;0&#21017;&#24847;&#21619;&#30528;&#23436;&#20840;&#31105;&#29992;&#22810;&#20540;&#23646;&#24615;MVA&#30340;&#26356;&#26032;&#12290;&#19968;&#26086;&#36798;&#21040;&#20102;&#36825;&#20010;&#20869;&#23384;&#27744;&#22823;&#23567;&#30340;&#38480;&#21046;&#65292;&#23581;&#35797;&#26356;&#26032;&#22810;&#20540;&#23646;&#24615;MVA&#23558;&#24471;&#21040;&#38169;&#35823;&#12290;&#20294;&#26222;&#36890;&#30340;&#65288;&#26631;&#37327;&#30340;&#65289;&#23646;&#24615;&#20173;&#28982;&#21487;&#20197;&#26356;&#26032;&#12290;&#30001;&#20110;&#20869;&#37096;&#23454;&#29616;&#19978;&#30340;&#25216;&#26415;&#22256;&#38590;&#65292;&#19968;&#26086;&#22810;&#20540;&#23646;&#24615;MVA&#26377;&#25152;&#26356;&#26032;&#65292;&#21017;&#32034;&#24341;&#19978;&#21457;&#29983;&#30340;<span class="bold"><strong>&#20219;&#20309;</strong></span>&#26356;&#26032;&#25913;&#21464;&#37117;<span class="bold"><strong>&#19981;&#33021;</strong></span>&#22312;&#32034;&#24341;&#37325;&#24314;&#21069;&#34987;&#20889;&#20837;&#65288;store&#65292;flush&#65289;&#30913;&#30424;&#65292;&#23613;&#31649;&#36825;&#21487;&#33021;&#22312;&#26410;&#26469;&#23454;&#29616;&#12290;&#21516;&#26102;&#65292;&#22810;&#20540;&#23646;&#24615;MVA&#26159;&#35774;&#35745;&#29992;&#26469;&#22312;&#32034;&#24341;&#37325;&#24314;&#21069;&#36805;&#36895;&#21453;&#24212;&#25968;&#25454;&#24211;&#20013;&#30340;&#21464;&#21270;&#65292;&#32780;&#19981;&#26159;&#19968;&#31181;&#27704;&#20037;&#23384;&#20648;&#30340;&#26426;&#21046;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
mva_updates_pool = 16M
</pre></div>
<div class="sect2" title="11.4.19.&nbsp;crash_log_path&#65306;&#23849;&#28291;&#26085;&#24535;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-crash-log-path"></a>11.4.19.&nbsp;crash_log_path&#65306;&#23849;&#28291;&#26085;&#24535;</h3></div></div></div>
<p>
&#23849;&#28291;&#26085;&#24535;&#25991;&#20214;&#30340;&#36335;&#24452;&#65288;&#27491;&#24335;&#22320;&#35828;&#21483;&#20570;&#21069;&#32512;&#65289;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#20026;&#31354;&#65288;&#19981;&#21019;&#24314;&#23849;&#28291;&#26085;&#24535;&#25991;&#20214;&#65289;&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
&#20174;&#29256;&#26412;2.0.1-beta&#24320;&#22987;&#19981;&#20877;&#25512;&#33616;&#20351;&#29992;&#65292;&#23849;&#28291;&#35843;&#35797;&#20449;&#24687;&#23558;&#20197;&#25991;&#26412;&#26684;&#24335;&#20250;&#35760;&#24405;&#21040;searchd.log&#26085;&#24535;&#25991;&#20214;&#20013;&#65292;&#29420;&#31435;&#30340;&#20108;&#36827;&#21046;&#23849;&#28291;&#25991;&#20214;&#19981;&#20877;&#38656;&#35201;&#20102;&#12290;
</p></div>
<div class="sect2" title="11.4.20.&nbsp;max_filters&#65306;&#26368;&#22823;&#36807;&#28388;&#22120;&#25968;&#30446;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-max-filters"></a>11.4.20.&nbsp;max_filters&#65306;&#26368;&#22823;&#36807;&#28388;&#22120;&#25968;&#30446;</h3></div></div></div>
<p>
&#27599;&#27425;&#26597;&#35810;&#20801;&#35768;&#35774;&#32622;&#30340;&#36807;&#28388;&#22120;&#30340;&#26368;&#22823;&#20010;&#25968;&#12290;&#21482;&#29992;&#20110;&#20869;&#37096;&#26816;&#26597;&#65292;&#19981;&#30452;&#25509;&#24433;&#21709;&#20869;&#23384;&#20351;&#29992;&#25110;&#24615;&#33021;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;256&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
max_filters = 1024
</pre></div>
<div class="sect2" title="11.4.21.&nbsp;max_filter_values&#65306;&#21333;&#20010;&#36807;&#28388;&#22120;&#26368;&#22823;&#36807;&#28388;&#20540;&#25968;&#30446;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-max-filter-values"></a>11.4.21.&nbsp;max_filter_values&#65306;&#21333;&#20010;&#36807;&#28388;&#22120;&#26368;&#22823;&#36807;&#28388;&#20540;&#25968;&#30446;</h3></div></div></div>
<p>
&#21333;&#20010;&#36807;&#28388;&#22120;&#20801;&#35768;&#30340;&#20540;&#30340;&#26368;&#22823;&#20010;&#25968;&#12290;&#21482;&#29992;&#20110;&#20869;&#37096;&#26816;&#26597;&#65292;&#19981;&#30452;&#25509;&#24433;&#21709;&#20869;&#23384;&#20351;&#29992;&#25110;&#24615;&#33021;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;4096&#12290;&#20110;&#29256;&#26412;0.9.9-rc1&#24341;&#20837;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
max_filter_values = 16384
</pre></div>
<div class="sect2" title="11.4.22.&nbsp;listen_backlog&#65306;&#24102;&#22788;&#29702;&#30417;&#21548;&#38431;&#21015;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-listen-backlog"></a>11.4.22.&nbsp;listen_backlog&#65306;&#24102;&#22788;&#29702;&#30417;&#21548;&#38431;&#21015;</h3></div></div></div>
<p>
TCP&#30417;&#21548;&#24453;&#22788;&#29702;&#38431;&#21015;&#38271;&#24230;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;5&#12290;
</p><p>
&#22312;Windows&#31995;&#32479;&#19978;&#21019;&#24314;&#30340;Sphinx&#30446;&#21069;&#65288;&#29256;&#26412;0.9.9&#65289;&#21482;&#33021;&#19968;&#20010;&#25509;&#19968;&#20010;&#22320;&#22788;&#29702;&#35831;&#27714;&#12290;&#21516;&#26102;&#21457;&#29983;&#30340;&#35831;&#27714;&#20250;&#34987;&#25805;&#20316;&#31995;&#32479;&#32423;&#21035;&#30340;TCP&#21327;&#35758;&#26632;&#35013;&#20837;&#21040;&#19968;&#20010;&#38431;&#21015;&#20013;&#65292;&#26080;&#27861;&#22914;&#23545;&#30340;&#35831;&#27714;&#31435;&#21363;&#22833;&#36133;&#24182;&#25910;&#21040;&#8220;&#36830;&#25509;&#34987;&#25298;&#8221;&#38169;&#35823;&#20449;&#24687;&#12290;listen_backlog&#36873;&#39033;&#25511;&#21046;&#36825;&#20010;&#36830;&#25509;&#38431;&#21015;&#30340;&#38271;&#24230;&#12290;&#38750;Windows&#24179;&#21488;&#19978;&#21019;&#24314;&#30340;Sphinx&#20351;&#29992;&#40664;&#35748;&#20540;&#21363;&#21487;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
listen_backlog = 20
</pre></div>
<div class="sect2" title="11.4.23.&nbsp;read_buffer&#65306;&#35835;&#32531;&#20914;&#21306;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-read-buffer"></a>11.4.23.&nbsp;read_buffer&#65306;&#35835;&#32531;&#20914;&#21306;</h3></div></div></div>
<p>
&#27599;&#20010;&#20851;&#38190;&#23383;&#30340;&#35835;&#32531;&#20914;&#21306;&#30340;&#22823;&#23567;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;256K&#12290;
</p><p>
&#23545;&#20110;&#27599;&#20010;&#25628;&#32034;&#26597;&#35810;&#20013;&#30340;&#27599;&#20010;&#20851;&#38190;&#35789;&#65292;&#26377;&#20004;&#20010;&#30456;&#20851;&#30340;&#35835;&#32531;&#20914;&#21306;&#65288;&#19968;&#20010;&#38024;&#23545;&#25991;&#26723;&#21015;&#34920;&#65292;&#19968;&#20010;&#38024;&#23545;&#20851;&#38190;&#35789;&#20986;&#29616;&#20301;&#32622;&#21015;&#34920;&#65289;&#12290;&#26412;&#36873;&#39033;&#20801;&#35768;&#25511;&#21046;&#20182;&#20204;&#30340;&#22823;&#23567;&#65292;&#22686;&#21152;&#27599;&#27425;&#26597;&#35810;&#30340;&#20869;&#23384;&#21344;&#29992;&#65292;&#20294;&#21487;&#33021;&#20250;&#20943;&#23569;IO&#26102;&#38388;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
read_buffer = 1M
</pre></div>
<div class="sect2" title="11.4.24.&nbsp;read_unhinted&#65306;&#26080;&#21305;&#37197;&#26102;&#35835;&#21462;&#22823;&#23567;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-read-unhinted"></a>11.4.24.&nbsp;read_unhinted&#65306;&#26080;&#21305;&#37197;&#26102;&#35835;&#21462;&#22823;&#23567;</h3></div></div></div>
<p>
&#26080;&#21305;&#37197;&#26102;&#35835;&#25805;&#20316;&#30340;&#22823;&#23567;&#12290;&#21487;&#36873;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;32K&#12290;
</p><p>
&#24403;&#31995;&#32479;&#22788;&#29702;&#26597;&#35810;&#26102;&#65292;&#23545;&#20110;&#19968;&#20123;&#35835;&#21462;&#25805;&#20316;&#65292;&#31995;&#32479;&#39044;&#20808;&#23601;&#30693;&#36947;&#35201;&#35835;&#21462;&#30340;&#25968;&#25454;&#30340;&#30830;&#20999;&#38271;&#24230;&#65292;&#20294;&#26159;&#26377;&#19968;&#20123;&#21364;&#30456;&#21453;&#12290;&#20854;&#20013;&#23545;&#24120;&#35265;&#30340;&#26159;&#24050;&#21305;&#37197;&#20301;&#32622;&#21015;&#34920;&#65288;hitlist&#65289;&#30340;&#38271;&#24230;&#30446;&#21069;&#26159;&#26080;&#27861;&#39044;&#20808;&#21462;&#24471;&#30340;&#12290;&#36825;&#20010;&#36873;&#39033;&#25511;&#21046;&#22312;&#36825;&#20123;&#24773;&#20917;&#19979;&#35835;&#21462;&#22810;&#23569;&#25968;&#25454;&#12290;&#23427;&#20250;&#24433;&#21709;IO&#26102;&#38388;&#65292;&#23545;&#20110;&#27604;&#26412;&#36873;&#39033;&#35774;&#32622;&#20540;&#22823;&#30340;&#21015;&#34920;&#65292;IO&#26102;&#38388;&#20943;&#23569;&#65292;&#32780;&#23545;&#20110;&#37027;&#20123;&#36739;&#23567;&#30340;&#21015;&#34920;&#21017;&#26159;IO&#26102;&#38388;&#22686;&#21152;&#12290;&#20869;&#23384;&#21344;&#29992;<span class="bold"><strong>&#19981;</strong></span>&#21463;&#24433;&#21709;&#65292;&#22240;&#20026;&#35835;&#32531;&#20914;&#21306;&#24050;&#32463;&#26159;&#20998;&#37197;&#22909;&#20102;&#30340;&#12290;&#20063;&#22240;&#27492;&#36825;&#20010;&#36873;&#39033;&#30340;&#35774;&#32622;&#20540;&#19981;&#33021;&#36229;&#36807;&#36873;&#39033;read_buffer&#30340;&#35774;&#32622;&#20540;&#12290;
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
read_unhinted = 32K
</pre></div>
<div class="sect2" title="11.4.25.&nbsp;max_batch_queries&#65306;&#26368;&#22823;&#25209;&#37327;&#26597;&#35810;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-max-batch-queries"></a>11.4.25.&nbsp;max_batch_queries&#65306;&#26368;&#22823;&#25209;&#37327;&#26597;&#35810;</h3></div></div></div>
<p>
&#27599;&#27425;&#25209;&#37327;&#26597;&#35810;&#30340;&#26597;&#35810;&#25968;&#38480;&#21046;&#12290;
&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20026;32&#20010;&#12290;
</p><p>
Makes searchd perform a sanity check of the amount of the queries
submitted in a single batch when using <a class="link" href="#multi-queries" title="5.11.&nbsp;&#25209;&#37327;&#26597;&#35810;">multi-queries</a>.
Set it to 0 to skip the check.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
max_batch_queries = 256
</pre></div>
<div class="sect2" title="11.4.26.&nbsp;subtree_docs_cache&#65306;&#23376;&#26641;&#20248;&#21270;&#25991;&#26723;&#32531;&#23384;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-subtree-docs-cache"></a>11.4.26.&nbsp;subtree_docs_cache&#65306;&#23376;&#26641;&#20248;&#21270;&#25991;&#26723;&#32531;&#23384;</h3></div></div></div>
<p>
&#27599;&#20010;&#26597;&#35810;&#30340;&#20844;&#20849;&#23376;&#26641;&#25991;&#26723;&#32531;&#23384;&#22823;&#23567;&#12290;
&#21487;&#36873;&#20540;&#65292;&#40664;&#35748;&#20026;0&#65288;&#31105;&#27490;&#65289;&#12290;
</p><p>
Limits RAM usage of a common subtree optimizer (&#21442;&#35265; <a class="xref" href="#multi-queries" title="5.11.&nbsp;&#25209;&#37327;&#26597;&#35810;">&#31532;&nbsp;5.11&nbsp;&#33410; &#8220;&#25209;&#37327;&#26597;&#35810;&#8221;</a>).
At most this much RAM will be spent to cache document entries per each query.
Setting the limit to 0 disables the optimizer.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
subtree_docs_cache = 8M
</pre></div>
<div class="sect2" title="11.4.27.&nbsp;subtree_hits_cache&#65306;&#23376;&#26641;&#20248;&#21270;&#21629;&#20013;&#32531;&#23384;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-subtree-hits-cache"></a>11.4.27.&nbsp;subtree_hits_cache&#65306;&#23376;&#26641;&#20248;&#21270;&#21629;&#20013;&#32531;&#23384;</h3></div></div></div>
<p>
&#27599;&#20010;&#26597;&#35810;&#30340;&#20844;&#20849;&#23376;&#26641;&#21629;&#20013;&#32531;&#23384;&#22823;&#23567;&#12290;
&#21487;&#36873;&#20540;&#65292;&#40664;&#35748;&#20026;0&#65288;&#31105;&#27490;&#65289;&#12290;
</p><p>
Limits RAM usage of a common subtree optimizer (&#21442;&#35265; <a class="xref" href="#multi-queries" title="5.11.&nbsp;&#25209;&#37327;&#26597;&#35810;">&#31532;&nbsp;5.11&nbsp;&#33410; &#8220;&#25209;&#37327;&#26597;&#35810;&#8221;</a>).
At most this much RAM will be spent to cache keyword occurrences (hits) per each query.
Setting the limit to 0 disables the optimizer.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
subtree_hits_cache = 16M
</pre></div>
<div class="sect2" title="11.4.28.&nbsp;workers&#65306;MPM&#27169;&#24335;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-workers"></a>11.4.28.&nbsp;workers&#65306;MPM&#27169;&#24335;</h3></div></div></div>
<p>
&#22810;&#22788;&#29702;&#27169;&#24335;&#65288;MPM&#65289;&#12290;
&#21487;&#36873;&#39033;&#65307;&#21487;&#29992;&#20540;&#20026;none&#12289;fork&#12289;prefork&#65292;&#20197;&#21450;threads&#12290;
&#40664;&#35748;&#22312;Unix&#31867;&#31995;&#32479;&#20026;form&#65292;Windows&#31995;&#32479;&#20026;threads&#12290;
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Lets you choose how <code class="filename">searchd</code> processes multiple
concurrent requests. The possible values are:
</p><div class="variablelist"><dl><dt><span class="term">none</span></dt>
<dd>All requests will be handled serially, one-by-one.
		Prior to 1.x, this was the only mode available on Windows.
	</dd><dt><span class="term">fork</span></dt>
<dd>A new child process will be forked to handle every
		incoming request. Historically, this is the default mode.
	</dd><dt><span class="term">prefork</span></dt>
<dd>On startup, <code class="filename">searchd</code> will pre-fork
		a number of worker processes, and pass the incoming requests
		to one of those children.
	</dd><dt><span class="term">threads</span></dt>
<dd>A new thread will be created to handle every
		incoming request. This is the only mode compatible with
		RT indexing backend.
	</dd></dl></div>
<p>
</p><p>
Historically, <code class="filename">searchd</code> used fork-based model,
which generally performs OK but spends a noticeable amount of CPU
in fork() system call when there's a high amount of (tiny) requests
per second. Prefork mode was implemented to alleviate that; with
prefork, worker processes are basically only created on startup
and re-created on index rotation, somewhat reducing fork() call
pressure.
</p><p>
Threads mode was implemented along with RT backend and is required
to use RT indexes. (Regular disk-based indexes work in all the
available modes.)
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
workers = threads
</pre></div>
<div class="sect2" title="11.4.29.&nbsp;dist_threads&#65306;&#24182;&#21457;&#26597;&#35810;&#32447;&#31243;&#25968;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-dist-threads"></a>11.4.29.&nbsp;dist_threads&#65306;&#24182;&#21457;&#26597;&#35810;&#32447;&#31243;&#25968;</h3></div></div></div>
<p>
Max local worker threads to use for parallelizable requests (searching a distributed index; building a batch of snippets).
Optional, default is 0, which means to disable in-request parallelism.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Distributed index can include several local indexes. <code class="option">dist_threads</code>
lets you easily utilize multiple CPUs/cores for that (previously existing
alternative was to specify the indexes as remote agents, pointing searchd
to itself and paying some network overheads).
</p><p>
When set to a value N greater than 1, this directive will create up to
N threads for every query, and schedule the specific searches within these
threads. For example, if there are 7 local indexes to search and dist_threads
is set to 2, then 2 parallel threads would be created: one that sequentially
searches 4 indexes, and another one that searches the other 3 indexes.
</p><p>
In case of CPU bound workload, setting <code class="option">dist_threads</code>
to 1x the number of cores is advised (creating more threads than cores
will not improve query time). In case of mixed CPU/disk bound workload
it might sometimes make sense to use more (so that all cores could be
utilizes even when there are threads that wait for I/O completion).
</p><p>
Note that <code class="option">dist_threads</code> does <span class="bold"><strong>not</strong></span> require
threads MPM. You can perfectly use it with fork or prefork MPMs too.
</p><p>
Starting with version 2.0.1-beta, building a batch of snippets
with <code class="option">load_files</code> flag enabled can also be parallelized.
Up to <code class="option">dist_threads</code> threads are be created to process
those files. That speeds up snippet extraction when the total amount
of document data to process is significant (hundreds of megabytes).
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
index dist_test
{
	type = distributed
	local = chunk1
	local = chunk2
	local = chunk3
	local = chunk4
}

# ...

dist_threads = 4
</pre></div>
<div class="sect2" title="11.4.30.&nbsp;binlog_path&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#36335;&#24452;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-binlog-path"></a>11.4.30.&nbsp;binlog_path&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#36335;&#24452;</h3></div></div></div>
<p>
Binary log (aka transaction log) files path.
Optional, default is build-time configured data directory.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Binary logs are used for crash recovery of RT index data that
would otherwise only be stored in RAM.  When logging is enabled,
every transaction COMMIT-ted into RT index gets written into
a log file.  Logs are then automatically replayed on startup
after an unclean shutdown, recovering the logged changes.
</p><p>
<code class="option">binlog_path</code> directive specifies the binary log
files location.  It should contain just the path; <code class="option">searchd</code>
will create and unlink multiple binlog.* files in that path as necessary
(binlog data, metadata, and lock files, etc).
</p><p>
Empty value disables binary logging. That improves performance,
but puts RT index data at risk.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
binlog_path = # disable logging
binlog_path = /var/data # /var/data/binlog.001 etc will be created
</pre></div>
<div class="sect2" title="11.4.31.&nbsp;binlog_flush&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#21047;&#26032;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-binlog-flush"></a>11.4.31.&nbsp;binlog_flush&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#21047;&#26032;</h3></div></div></div>
<p>
Binary log transaction flush/sync mode.
Optional, default is 2 (flush every transaction, sync every second).
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
This directive controls how frequently will binary log be flushed
to OS and synced to disk. Three modes are supported:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">0, flush and sync every second. Best performance,
but up to 1 second worth of committed transactions can be lost
both on daemon crash, or OS/hardware crash.
</li>
<li class="listitem">1, flush and sync every transaction. Worst performance,
but every committed transaction data is guaranteed to be saved.
</li>
<li class="listitem">2, flush every transaction, sync every second.
Good performance, and every committed transaction is guaranteed
to be saved in case of daemon crash. However, in case of OS/hardware
crash up to 1 second worth of committed transactions can be lost.
</li>
</ul></div>
<p>
</p><p>
For those familiar with MySQL and InnoDB, this directive is entirely
similar to <code class="option">innodb_flush_log_at_trx_commit</code>. In most
cases, the default hybrid mode 2 provides a nice balance of speed
and safety, with full RT index data protection against daemon crashes,
and some protection against hardware ones.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
binlog_flush = 1 # ultimate safety, low speed
</pre></div>
<div class="sect2" title="11.4.32.&nbsp;binlog_max_log_size&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#22823;&#23567;&#38480;&#21046;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-binlog-max-log-size"></a>11.4.32.&nbsp;binlog_max_log_size&#65306;&#20108;&#36827;&#21046;&#26085;&#24535;&#22823;&#23567;&#38480;&#21046;</h3></div></div></div>
<p>
Maximum binary log file size.
Optional, default is 0 (do not reopen binlog file based on size).
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
A new binlog file will be forcibly opened once the current binlog file
reaches this limit. This achieves a finer granularity of logs and can yield
more efficient binlog disk usage under certain borderline workloads.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
binlog_max_log_size = 16M
</pre></div>
<div class="sect2" title="11.4.33.&nbsp;collation_server&#65306;&#26381;&#21153;&#31471;&#40664;&#35748;&#23383;&#31526;&#38598;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-collation-server"></a>11.4.33.&nbsp;collation_server&#65306;&#26381;&#21153;&#31471;&#40664;&#35748;&#23383;&#31526;&#38598;</h3></div></div></div>
<p>
Default server collation.
Optional, default is libc_ci.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Specifies the default collation used for incoming requests. 
The collation can be overridden on a per-query basis.
Refer to <a class="xref" href="#collations" title="5.12.&nbsp;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;">&#31532;&nbsp;5.12&nbsp;&#33410; &#8220;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;&#8221;</a> section for the list of available collations and other details.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
collation_server = utf8_ci
</pre></div>
<div class="sect2" title="11.4.34.&nbsp;collation_libc_locale&#65306;&#26381;&#21153;&#31471;libc&#23383;&#31526;&#38598;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-collation-libc-locale"></a>11.4.34.&nbsp;collation_libc_locale&#65306;&#26381;&#21153;&#31471;libc&#23383;&#31526;&#38598;</h3></div></div></div>
<p>
Server libc locale.
Optional, default is C.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Specifies the libc locale, affecting the libc-based collations.
Refer to <a class="xref" href="#collations" title="5.12.&nbsp;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;">&#31532;&nbsp;5.12&nbsp;&#33410; &#8220;&#23383;&#31526;&#20018;&#25490;&#24207;&#35268;&#21017;&#8221;</a> section for the details.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
collation_libc_locale = fr_FR
</pre></div>
<div class="sect2" title="11.4.35.&nbsp;plugin_dir&#65306;&#25554;&#20214;&#30446;&#24405;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-plugin-dir"></a>11.4.35.&nbsp;plugin_dir&#65306;&#25554;&#20214;&#30446;&#24405;</h3></div></div></div>
<p>
Trusted location for the dynamic libraries (UDFs).
Optional, default is empty (no location).
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Specifies the trusted directory from which the
<a class="link" href="#udf" title="5.13.&nbsp;&#29992;&#25143;&#33258;&#23450;&#20041;&#20989;&#25968; (UDF)">UDF libraries</a> can be loaded. Requires
<a class="link" href="#conf-workers" title="11.4.28.&nbsp;workers&#65306;MPM&#27169;&#24335;">workers = thread</a> to take effect.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
workers = threads
plugin_dir = /usr/local/sphinx/lib
</pre></div>
<div class="sect2" title="11.4.36.&nbsp;mysql_version_string&#65306;MySQL&#29256;&#26412;&#35774;&#32622;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-mysql-version-string"></a>11.4.36.&nbsp;mysql_version_string&#65306;MySQL&#29256;&#26412;&#35774;&#32622;</h3></div></div></div>
<p>
A server version string to return via MySQL protocol.
Optional, default is empty (return Sphinx version).
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Several picky MySQL client libraries depend on a particular version
number format used by MySQL, and moreover, sometimes choose a different
execution path based on the reported version number (rather than the
indicated capabilities flags). For instance, Python MySQLdb 1.2.2 throws
an exception when the version number is not in X.Y.ZZ format; MySQL .NET
connector 6.3.x fails internally on version numbers 1.x along with
a certain combination of flags, etc. To workaround that, you can use
<code class="option">mysql_version_string</code> directive and have <code class="filename">searchd</code>
report a different version to clients connecting over MySQL protocol.
(By default, it reports its own version.)
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
mysql_version_string = 5.0.37
</pre></div>
<div class="sect2" title="11.4.37.&nbsp;rt_flush_period&#65306;RT&#32034;&#24341;&#21047;&#26032;&#21608;&#26399;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-rt-flush-period"></a>11.4.37.&nbsp;rt_flush_period&#65306;RT&#32034;&#24341;&#21047;&#26032;&#21608;&#26399;</h3></div></div></div>
<p>
RT indexes RAM chunk flush check period, in seconds.
Optional, default is 0 (do not flush).
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
Actively updated RT indexes that however fully fit in RAM chunks
can result in ever-growing binlogs, impacting disk use and crash
recovery time. With this directive the search daemon performs
periodic flush checks, and eligible RAM chunks can get saved,
enabling consequential binlog cleanup. &#21442;&#35265; <a class="xref" href="#rt-binlog" title="4.4.&nbsp;&#20108;&#36827;&#21046;&#26085;&#24535;">&#31532;&nbsp;4.4&nbsp;&#33410; &#8220;&#20108;&#36827;&#21046;&#26085;&#24535;&#8221;</a>
for more details.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
rt_flush_period = 3600
</pre></div>
<div class="sect2" title="11.4.38.&nbsp;thread_stack&#65306;&#32447;&#31243;&#22534;&#26632;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-thread-stack"></a>11.4.38.&nbsp;thread_stack&#65306;&#32447;&#31243;&#22534;&#26632;</h3></div></div></div>
<p>
Per-thread stack size.
Optional, default is 64K.
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
In the <code class="code">workers = threads</code> mode, every request is processed
with a separate thread that needs its own stack space. By default, 64K per
thread are allocated for stack. However, extremely complex search requests
might eventually exhaust the default stack and require more. For instance,
a query that matches a few thousand keywords (either directly or through
term expansion) can eventually run out of stack. Previously, that resulted
in crashes. Starting with 2.0.1-beta, <code class="filename">searchd</code> attempts
to estimate the expected stack use, and blocks the potentially dangerous
queries. To process such queries, you can either the thread stack size
by using the <code class="code">thread_stack</code> directive (or switch to a different
<code class="code">workers</code> setting if that is possible).
</p><p>
A query with N levels of nesting is estimated to require approximately
30+0.12*N KB of stack, meaning that the default 64K is enough for queries
with upto 300 levels, 150K for upto 1000 levels, etc. If the stack size limit
is not met, <code class="filename">searchd</code> fails the query and reports
the required stack size in the error message.
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
thread_stack = 256K
</pre></div>
<div class="sect2" title="11.4.39.&nbsp;expansion_limit&#65306;&#20851;&#38190;&#23383;&#23637;&#24320;&#38480;&#21046;"><div class="titlepage"><div><div><h3 class="title"><a name="conf-expansion-limit"></a>11.4.39.&nbsp;expansion_limit&#65306;&#20851;&#38190;&#23383;&#23637;&#24320;&#38480;&#21046;</h3></div></div></div>
<p>
The maximum number of expanded keywords for a single wildcard.
Optional, default is 0 (no limit).
&#29256;&#26412;2.0.1-beta&#24341;&#20837;&#12290;
</p><p>
When doing substring searches against indexes built with
<code class="code">dict = keywords</code> enabled, a single wildcard may
potentially result in thousands and even millions of matched
keywords (think of matching 'a*' against the entire Oxford
dictionary). This directive lets you limit the impact
of such expansions. Setting <code class="code">expansion_limit = N</code>
restricts expansions to no more than N of the most frequent
matching keywords (per each wildcard in the query).
</p><h4>&#31034;&#20363;&#65306;</h4><pre class="programlisting">
expansion_limit = 16
</pre></div>
<div class="sect2" title="11.4.40.&nbsp;compat_sphinxql_magics"><div class="titlepage"><div><div><h3 class="title"><a name="conf-compat-sphinxql-magics"></a>11.4.40.&nbsp;compat_sphinxql_magics</h3></div></div></div>
<p>
Legacy SphinxQL quirks compatiblity mode.
Optional, default is 1 (keep compatibility).
Introduced in version 2.0.1-beta.
</p><p>
Starting with version 2.0.1-beta, we're bringing SphinxQL in closer
compliance with standard SQL. However, existing applications must not
get broken, and <code class="code">compat_sphinxql_magics</code> lets you upgrade
safely. It defauls to 1, which enables the compatibility mode.
However, <span class="bold"><strong>SphinxQL compatibility mode is now deprecated and
will be removed</strong></span> once we complete bringing SphinxQL in line
with standard SQL syntax. So it's advised to update the applications
utilising SphinxQL and then switch the daemon to the new, more SQL
compliant mode by setting <code class="code">compat_sphinxql_magics = 0</code>.
Please refer to <a class="xref" href="#sphinxql-upgrading-magics" title="7.21.&nbsp;SphinxQL &#21319;&#32423;&#22791;&#27880;, version 2.0.1-beta">&#31532;&nbsp;7.21&nbsp;&#33410; &#8220;SphinxQL &#21319;&#32423;&#22791;&#27880;, version 2.0.1-beta&#8221;</a>
for the details and update instruction.
</p><h4>Example:</h4><pre class="programlisting">
compat_sphinxql_magics = 0 # the future is now
</pre></div>
<div class="sect2" title="11.4.41.&nbsp;watchdog"><div class="titlepage"><div><div><h3 class="title"><a name="conf-watchdog"></a>11.4.41.&nbsp;watchdog</h3></div></div></div>
<p>
Threaded server watchdog.
Optional, default is 1 (watchdog enabled).
Introduced in version 2.0.1-beta.
</p><p>
A crashed query in <code class="code">threads</code> multi-processing mode
(<code class="code"><a class="link" href="#conf-workers" title="11.4.28.&nbsp;workers&#65306;MPM&#27169;&#24335;">workers</a> = threads</code>)
can take down the entire server. With watchdog feature enabled,
<code class="filename">searchd</code> additionally keeps a separate lightweight
process that monitors the main server process, and automatically
restarts the latter in case of abnormal termination. Watchdog
is enabled by default.
</p><h4>Example:</h4><pre class="programlisting">
watchdog = 0 # disable watchdog
</pre></div></div></div>
<div class="chapter" title="&#31532;&nbsp;12&nbsp;&#31456;&nbsp; Coreseek&#37197;&#32622;&#36873;&#39033;&#21442;&#32771;"><div class="titlepage"><div><div><h2 class="title"><a name="coreseek-conf-reference"></a>&#31532;&nbsp;12&nbsp;&#31456;&nbsp;
      <code class="filename">Coreseek</code>&#37197;&#32622;&#36873;&#39033;&#21442;&#32771;</h2></div></div></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="sect1"><a href="#coreseek-confgroup-chinese">12.1. &#20013;&#25991;&#20998;&#35789;&#26680;&#24515;&#37197;&#32622;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#coreseek-conf-chinese-charset_dictpath">12.1.1. charset_dictpath</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-chinese-charset_type">12.1.2. charset_type</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#coreseek-confgroup-mmseg">12.2. MMSEG&#20998;&#35789;&#37197;&#32622;&#36873;&#39033;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#coreseek-conf-mmseg-merge_number_and_ascii">12.2.1. merge_number_and_ascii</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-mmseg-number_and_ascii_joint">12.2.2. number_and_ascii_joint</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-mmseg-compress_space">12.2.3. compress_space</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-mmseg-seperate_number_ascii">12.2.4. seperate_number_ascii</a></span></dt>
</dl></dd><dt><span class="sect1"><a href="#coreseek-confgroup-pysource">12.3. Python&#25968;&#25454;&#28304;&#31243;&#24207;&#25509;&#21475;</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="#coreseek-conf-pysource-GetScheme">12.3.1. GetScheme() &#65288;&#35774;&#32622;&#26816;&#32034;&#23383;&#27573;&#30340;&#23646;&#24615;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-GetKillList">12.3.2. GetKillList() &#65288;&#35774;&#32622;&#19981;&#21442;&#19982;&#26816;&#32034;&#30340;&#25991;&#26723;&#32534;&#21495;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-GetFieldOrder">12.3.3. GetFieldOrder() &#65288;&#35774;&#32622;&#23383;&#27573;&#30340;&#39034;&#24207;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-Connected">12.3.4. Connected() &#65288;&#33719;&#21462;&#25968;&#25454;&#21069;&#30340;&#36830;&#25509;&#22788;&#29702;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-OnBeforeIndex">12.3.5. OnBeforeIndex() &#65288;&#25968;&#25454;&#33719;&#21462;&#21069;&#22788;&#29702;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-NextDocument">12.3.6. NextDocument() &#65288;&#25991;&#26723;&#33719;&#21462;&#22788;&#29702;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-OnAfterIndex">12.3.7. OnAfterIndex() &#65288;&#25968;&#25454;&#33719;&#21462;&#21518;&#22788;&#29702;&#65289;</a></span></dt>
<dt><span class="sect2"><a href="#coreseek-conf-pysource-OnIndexFinished">12.3.8. OnIndexFinished() &#65288;&#32034;&#24341;&#23436;&#25104;&#26102;&#22788;&#29702;&#65289;</a></span></dt>
</dl></dd></dl></div>
<div class="sect1" title="12.1.&nbsp;&#20013;&#25991;&#20998;&#35789;&#26680;&#24515;&#37197;&#32622;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="coreseek-confgroup-chinese"></a>12.1.&nbsp;&#20013;&#25991;&#20998;&#35789;&#26680;&#24515;&#37197;&#32622;</h2></div></div></div>
<p>
&#20851;&#20110;&#20013;&#25991;&#20998;&#35789;&#30340;&#35814;&#32454;&#37197;&#32622;&#23454;&#20363;&#21644;&#20998;&#35789;&#35789;&#20856;&#30340;&#33258;&#23450;&#20041;&#35774;&#32622;&#65292;&#21487;&#20197;&#35775;&#38382;<a class="ulink" href="http://www.coreseek.cn/products-install/coreseek_mmseg/" target="_top">Coreseek&#32593;&#31449;&#20013;&#25991;&#20998;&#35789;&#26680;&#24515;&#37197;&#32622;</a>&#26597;&#30475;&#12290;
</p><pre class="programlisting">
&#26680;&#24515;&#37197;&#32622;&#65306;
	<code class="option">charset_dictpath</code>		= /usr/local/mmseg3/etc/
	<code class="option">charset_type</code>		         = zh_cn.utf-8
	#<code class="option">charset_table</code>                 = .................... #&#38656;&#23558;&#21407;&#26377;&#30340;&#35813;&#37197;&#32622;&#27880;&#37322;&#25481;
	<code class="option">ngram_len</code>                        = 0
</pre><p>            
</p><div class="sect2" title="12.1.1.&nbsp;charset_dictpath"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-chinese-charset_dictpath"></a>12.1.1.&nbsp;charset_dictpath</h3></div></div></div>
<p>&#35774;&#32622;&#20013;&#25991;&#20998;&#35789;&#35789;&#20856;&#25152;&#22312;&#30340;&#30446;&#24405;&#65307;</p><h4>&#31034;&#20363;:</h4><pre class="programlisting">
#Linux
charset_dictpath		= /usr/local/mmseg3/etc/
#Windows
charset_dictpath		= C:\usr\local\coreseek\etc
</pre></div>
<div class="sect2" title="12.1.2.&nbsp;charset_type"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-chinese-charset_type"></a>12.1.2.&nbsp;charset_type</h3></div></div></div>
<p>&#35774;&#32622;&#25991;&#26723;&#30340;&#23383;&#31526;&#38598;&#65292;&#21487;&#36873;&#30340;&#20540;&#20026;&#8220;zh_cn.utf-8&#8221;&#12289;&#8220;zh_cn.gbk&#8221;&#21644;&#8220;zh_cn.big5&#8221;&#12290;&#8220;zh_cn.gbk&#8221;&#21644;&#8220;zh_cn.big5&#8221;&#38656;&#35201;iconv&#25903;&#25345;&#12290;</p><h4>&#31034;&#20363;:</h4><pre class="programlisting">
charset_type		=  zh_cn.utf-8
</pre></div></div>
<div class="sect1" title="12.2.&nbsp;MMSEG&#20998;&#35789;&#37197;&#32622;&#36873;&#39033;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="coreseek-confgroup-mmseg"></a>12.2.&nbsp;MMSEG&#20998;&#35789;&#37197;&#32622;&#36873;&#39033;</h2></div></div></div>
<p>
mmseg&#20998;&#35789;&#30456;&#20851;&#30340;&#37197;&#32622;&#36873;&#39033;&#65292;&#38656;&#35201;&#20445;&#23384;&#21040;&#25991;&#20214;<code class="filename">mmseg.ini</code>&#65292;&#24182;&#23558;&#35813;&#37197;&#32622;&#25991;&#20214;&#25918;&#32622;&#21040;<code class="option">charset_dictpath</code>&#25152;&#35774;&#32622;&#30340;&#30446;&#24405;&#20013;&#12290;
</p><pre class="programlisting">
&#22522;&#26412;&#37197;&#32622;&#65306;
[mmseg] 
<code class="option">merge_number_and_ascii</code>=0; 	;&#21512;&#24182;&#33521;&#25991;&#21644;&#25968;&#23383; abc123/x
<code class="option">number_and_ascii_joint</code>=-; 	;&#23450;&#20041;&#21487;&#20197;&#36830;&#25509;&#33521;&#25991;&#21644;&#25968;&#23383;&#30340;&#23383;&#31526;
<code class="option">compress_space</code>=1; 		;&#26242;&#19981;&#25903;&#25345;
<code class="option">seperate_number_ascii</code>=0;	;&#23601;&#26159;&#23558;&#23383;&#27597;&#21644;&#25968;&#23383;&#25171;&#25955;
&#20854;&#20013;&#65292;&#20998;&#21495;&#34920;&#31034;&#27880;&#37322;
</pre><p>            
</p><div class="sect2" title="12.2.1.&nbsp;merge_number_and_ascii"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-mmseg-merge_number_and_ascii"></a>12.2.1.&nbsp;merge_number_and_ascii</h3></div></div></div>
<p>&#26159;&#21542;&#21512;&#24182;&#33521;&#25991;&#21644;&#25968;&#23383;&#65292;&#35813;&#36873;&#39033;&#35774;&#32622;&#26159;&#21542;&#23558;&#36830;&#25509;&#22312;&#19968;&#36215;&#30340;&#33521;&#25991;&#23383;&#27597;&#21644;&#25968;&#23383;&#20316;&#20026;&#19968;&#20010;&#25972;&#20307;&#30475;&#24453;</p><h4>&#20363;&#22914;:</h4><pre class="programlisting">
merge_number_and_ascii=0; ;abc123&#23558;&#34987;&#20999;&#20998;&#20026;abc&#12289;123
merge_number_and_ascii=1; ;abc123&#23558;&#19981;&#34987;&#20999;&#20998;
</pre></div>
<div class="sect2" title="12.2.2.&nbsp;number_and_ascii_joint"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-mmseg-number_and_ascii_joint"></a>12.2.2.&nbsp;number_and_ascii_joint</h3></div></div></div>
<p>&#23450;&#20041;&#21487;&#20197;&#36830;&#25509;&#33521;&#25991;&#21644;&#25968;&#23383;&#30340;&#23383;&#31526;</p><h4>&#20363;&#22914;:</h4><pre class="programlisting">
number_and_ascii_joint=-_; ;abc_123&#12289;abc-123&#37117;&#23558;&#20316;&#20026;&#25972;&#20307;
</pre></div>
<div class="sect2" title="12.2.3.&nbsp;compress_space"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-mmseg-compress_space"></a>12.2.3.&nbsp;compress_space</h3></div></div></div>
<p>&#39044;&#35774;&#37197;&#32622;&#65292;&#26242;&#19981;&#25903;&#25345;</p></div>
<div class="sect2" title="12.2.4.&nbsp;seperate_number_ascii"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-mmseg-seperate_number_ascii"></a>12.2.4.&nbsp;seperate_number_ascii</h3></div></div></div>
<p>&#26159;&#21542;&#23558;&#23383;&#27597;&#21644;&#25968;&#23383;&#25171;&#25955;</p><h4>&#20363;&#22914;:</h4><pre class="programlisting">
seperate_number_ascii=0; ;abc&#20316;&#20026;&#25972;&#20307;
seperate_number_ascii=1; ;abc&#34987;&#20999;&#20998;&#20026;a&#12289;b&#12289;c
</pre></div></div>
<div class="sect1" title="12.3.&nbsp;Python&#25968;&#25454;&#28304;&#31243;&#24207;&#25509;&#21475;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="coreseek-confgroup-pysource"></a>12.3.&nbsp;Python&#25968;&#25454;&#28304;&#31243;&#24207;&#25509;&#21475;</h2></div></div></div>
<p>
Python&#25968;&#25454;&#28304;&#30340;&#21508;&#31181;&#23454;&#20363;&#31243;&#24207;&#65292;&#21487;&#20197;&#35775;&#38382;<a class="ulink" href="http://www.coreseek.cn/products-install/python/" target="_top">Coreseek&#32593;&#31449;Python&#25968;&#25454;&#28304;</a>&#33719;&#21462;&#12290;&#35813;&#37096;&#20998;&#30340;&#30456;&#20851;&#25991;&#26723;&#65292;&#36824;&#22312;&#32487;&#32493;&#23436;&#21892;&#20013;&#12290;
</p><pre class="programlisting">
#Python&#25968;&#25454;&#28304;&#22522;&#26412;&#28436;&#31034;&#31243;&#24207;
#/usr/local/coreseek/etc/pysource/csft_demo/__init__.py
# -*- coding:utf-8 -*-

class MainSource(object):
    def __init__(self, conf):
        self.conf =  conf
        self.data = [
            {'id':1, 'subject':u"&#26631;&#39064;1", 'date':1270131607},
            {'id':2, 'subject':u'&#26631;&#39064;2', 'date':1270135548},
        ]
        self.idx = 0
        
    def GetScheme(self):
        return [
            ('id' , {'docid':True, } ),
            ('subject', { 'type':'text'} ),
            ('date', {'type':'integer'} ),
        ]
       
    def GetKillList(self):
        return [3,1]
    
    def GetFieldOrder(self):
        return ('subject')
        
    def Connected(self):
        pass

    def OnBeforeIndex(self):
        print 'before index called'
        pass

    def NextDocument(self, err):
        if self.idx &lt; len(self.data):
            item = self.data[self.idx]
            self.id = item['id']
            self.subject = item['subject'].encode('utf-8')
            self.date = item['date']
            self.idx += 1
            return True
        else:
            return False
		pass

    def OnAfterIndex(self):
        print 'after index called'
		pass

    def OnIndexFinished(self):
        print 'after index finished'
        pass

if __name__ == "__main__":
    source = MainSource()
    source.Connected()

    source.OnBeforeIndex()
    while source.NextDocument():
        print "id=%d, title=%s" % (source.docid, source.title)

    source.OnAfterIndex()
    source.OnIndexFinished()
    pass
#eof
</pre><p>
</p><div class="sect2" title="12.3.1.&nbsp;GetScheme() &#65288;&#35774;&#32622;&#26816;&#32034;&#23383;&#27573;&#30340;&#23646;&#24615;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-pysource-GetScheme"></a>12.3.1.&nbsp;GetScheme() &#65288;&#35774;&#32622;&#26816;&#32034;&#23383;&#27573;&#30340;&#23646;&#24615;&#65289;</h3></div></div></div>
<p>&#36820;&#22238;&#25152;&#26377;&#38656;&#35201;&#34987;&#32034;&#24341;&#30340;&#23383;&#27573;&#30340;&#23646;&#24615;</p><h4>&#20363;&#22914;:</h4><pre class="programlisting">
    def GetScheme(self):
        return [
            ('id' , {'docid':True, } ),
            ('subject', { 'type':'text'} ),
            ('date', {'type':'integer'} ),
        ]		
		</pre><p>
&#22312;&#26816;&#32034;&#23383;&#27573;&#35774;&#32622;&#20013;&#65292;&#24517;&#39035;&#19988;&#20165;&#26377;&#19968;&#20010;&#23383;&#27573;&#38656;&#35201;&#35774;&#32622;&#20026;docid&#65292;&#23545;&#24212;&#20110;SQL&#25968;&#25454;&#28304;&#20013;&#30340;&#25991;&#26723;&#32534;&#21495;&#12290;&#20854;&#20182;&#23383;&#27573;&#30340;&#23646;&#24615;&#65292;&#21487;&#20197;&#20026;integer&#65292;&#23545;&#24212;&#20110;<code class="option">sql_attr_uint</code>&#65292;&#25110;&#32773;text&#65292;&#23545;&#24212;&#20110;&#20840;&#25991;&#26816;&#32034;&#23383;&#27573;&#12290;&#30446;&#21069;&#25903;&#25345;&#30340;&#31867;&#22411;&#22914;&#19979;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">docid&#65306;&#23545;&#24212;&#20110;SQL&#25968;&#25454;&#28304;&#20013;&#30340;&#25991;&#26723;&#32534;&#21495;id</li>
<li class="listitem">integer&#65306;&#25972;&#25968;&#23646;&#24615;&#65292;&#21442;&#35265;<a class="link" href="#conf-sql-attr-uint" title="11.1.17.&nbsp;sql_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;">sql_attr_uint</a></li>
<li class="listitem">bool&#65306;&#24067;&#23572;&#23646;&#24615;&#65292;&#21442;&#35265;<a class="link" href="#conf-sql-attr-bool" title="11.1.18.&nbsp;sql_attr_bool&#65306;&#24067;&#23572;&#23646;&#24615;">sql_attr_bool</a></li>
<li class="listitem">long&#65306;&#38271;&#25972;&#22411;&#23646;&#24615;&#65292;&#21442;&#35265;<a class="link" href="#conf-sql-attr-bigint" title="11.1.19.&nbsp;sql_attr_bigint&#65306;&#38271;&#25972;&#22411;&#23646;&#24615;">sql_attr_bigint</a></li>
<li class="listitem">timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#65288;&#25972;&#25968;&#65289;&#23646;&#24615;&#65292;&#21442;&#35265;<a class="link" href="#conf-sql-attr-timestamp" title="11.1.20.&nbsp;sql_attr_timestamp&#65306;UNIX&#26102;&#38388;&#25139;&#23646;&#24615;">sql_attr_timestamp</a></li>
<li class="listitem">str2ord&#65306;&#23383;&#31526;&#20018;&#24207;&#25968;&#25490;&#24207;&#23646;&#24615;&#65292;&#21442;&#35265;<a class="link" href="#conf-sql-attr-str2ordinal" title="11.1.21.&nbsp;sql_attr_str2ordinal&#65306;&#23383;&#31526;&#20018;&#24207;&#25968;&#25490;&#24207;&#23646;&#24615;">sql_attr_str2ordinal</a></li>
<li class="listitem">float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;&#65292;&#21442;&#35265;<a class="link" href="#conf-sql-attr-float" title="11.1.22.&nbsp;sql_attr_float&#65306;&#28014;&#28857;&#25968;&#23646;&#24615;">sql_attr_float</a></li>
<li class="listitem">list&#65306;&#22810;&#20540;&#23646;&#24615;(MVA)&#23646;&#24615;&#65292;&#21442;&#35265;<a class="link" href="#conf-sql-attr-multi" title="11.1.23.&nbsp;sql_attr_multi&#65306;&#22810;&#20540;&#23646;&#24615;(MVA)&#23646;&#24615;">sql_attr_multi</a>&#30340;field</li>
<li class="listitem">list-query&#65306;&#22810;&#20540;&#23646;&#24615;(MVA)&#23646;&#24615;&#65292;&#21442;&#35265;<a class="link" href="#conf-sql-attr-multi" title="11.1.23.&nbsp;sql_attr_multi&#65306;&#22810;&#20540;&#23646;&#24615;(MVA)&#23646;&#24615;">sql_attr_multi</a>&#30340;query</li>
<li class="listitem">string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;(&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)&#65292;&#21442;&#35265;<a class="link" href="#conf-sql-attr-string" title="11.1.24.&nbsp;sql_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;(&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)">sql_attr_string</a></li>
<li class="listitem">string_text&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)&#65292;&#21442;&#35265;<a class="link" href="#conf-sql-field-string" title="11.1.27.&nbsp;sql_field_string&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)">sql_field_string</a></li>
<li class="listitem">text&#65306;&#20840;&#25991;&#26816;&#32034;&#23383;&#27573;&#65292;&#21442;&#35265;<a class="link" href="#conf-sql-query" title="11.1.12.&nbsp;sql_query&#65306;&#33719;&#21462;&#24453;&#32034;&#24341;&#25968;&#25454;&#26597;&#35810;">&#20840;&#25991;&#26816;&#32034;&#23383;&#27573;</a></li>
</ul></div>
<p>
</p></div>
<div class="sect2" title="12.3.2.&nbsp;GetKillList() &#65288;&#35774;&#32622;&#19981;&#21442;&#19982;&#26816;&#32034;&#30340;&#25991;&#26723;&#32534;&#21495;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-pysource-GetKillList"></a>12.3.2.&nbsp;GetKillList() &#65288;&#35774;&#32622;&#19981;&#21442;&#19982;&#26816;&#32034;&#30340;&#25991;&#26723;&#32534;&#21495;&#65289;</h3></div></div></div>
<p>&#22788;&#20110;&#35813;&#21015;&#34920;&#20043;&#20013;&#30340;&#25991;&#26723;&#65292;&#23558;&#19981;&#34987;&#26816;&#32034;&#65292;&#23545;&#24212;&#20110;SQL&#25968;&#25454;&#28304;&#30340;<code class="option">sql_query_killlist</code></p><h4>&#20363;&#22914;:</h4><pre class="programlisting">
    def GetKillList(self):
        return [3,1]		
		</pre></div>
<div class="sect2" title="12.3.3.&nbsp;GetFieldOrder() &#65288;&#35774;&#32622;&#23383;&#27573;&#30340;&#39034;&#24207;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-pysource-GetFieldOrder"></a>12.3.3.&nbsp;GetFieldOrder() &#65288;&#35774;&#32622;&#23383;&#27573;&#30340;&#39034;&#24207;&#65289;</h3></div></div></div>
<p>&#20840;&#25991;&#23383;&#27573;&#34987;&#26816;&#32034;&#30340;&#39034;&#24207;</p><h4>&#20363;&#22914;:</h4><pre class="programlisting">
    def GetFieldOrder(self):
        return [('subject','content')]
		</pre></div>
<div class="sect2" title="12.3.4.&nbsp;Connected() &#65288;&#33719;&#21462;&#25968;&#25454;&#21069;&#30340;&#36830;&#25509;&#22788;&#29702;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-pysource-Connected"></a>12.3.4.&nbsp;Connected() &#65288;&#33719;&#21462;&#25968;&#25454;&#21069;&#30340;&#36830;&#25509;&#22788;&#29702;&#65289;</h3></div></div></div>
<p>&#19968;&#33324;&#29992;&#20110;&#36827;&#34892;&#25968;&#25454;&#24211;&#30340;&#36830;&#25509;&#31561;&#39044;&#22788;&#29702;</p><h4>&#20363;&#22914;:</h4><pre class="programlisting">
    def Connected(self):
        #&#22312;&#27492;&#36827;&#34892;&#25968;&#25454;&#24211;&#36830;&#25509;&#21644;&#22788;&#29702;
        pass		
		</pre></div>
<div class="sect2" title="12.3.5.&nbsp;OnBeforeIndex() &#65288;&#25968;&#25454;&#33719;&#21462;&#21069;&#22788;&#29702;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-pysource-OnBeforeIndex"></a>12.3.5.&nbsp;OnBeforeIndex() &#65288;&#25968;&#25454;&#33719;&#21462;&#21069;&#22788;&#29702;&#65289;</h3></div></div></div>
<p>&#31867;&#20284;<code class="option">sql_query_pre</code>&#37197;&#32622;&#36873;&#39033;&#30340;&#20316;&#29992;</p><h4>&#20363;&#22914;:</h4><pre class="programlisting">
    def OnBeforeIndex(self):
        print 'before index called'
        pass		
		</pre></div>
<div class="sect2" title="12.3.6.&nbsp;NextDocument() &#65288;&#25991;&#26723;&#33719;&#21462;&#22788;&#29702;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-pysource-NextDocument"></a>12.3.6.&nbsp;NextDocument() &#65288;&#25991;&#26723;&#33719;&#21462;&#22788;&#29702;&#65289;</h3></div></div></div>
<p>&#33719;&#21462;&#23454;&#38469;&#30340;&#38656;&#35201;&#21442;&#19982;&#26816;&#32034;&#30340;&#25968;&#25454;&#65292;&#25353;&#26465;&#33719;&#21462;&#65292;&#38656;&#35201;&#33719;&#21462;&#30340;&#23383;&#27573;&#65292;&#20316;&#20026;self&#33258;&#36523;&#30340;&#23646;&#24615;&#32473;&#20986;&#65292;&#30456;&#24403;&#20110;<code class="option">sql_query</code>&#30340;&#20316;&#29992;&#65292;&#27599;&#27425;&#35835;&#21462;&#19968;&#26465;&#25968;&#25454;</p><h4>&#20363;&#22914;:</h4><pre class="programlisting">
    def NextDocument(self, err):
        if self.idx &lt; len(self.data):
            item = self.data[self.idx]
            self.id = item['id']
            self.subject = item['subject'].encode('utf-8')
            self.date = item['date']
            self.idx += 1
            return True
        else:
            return False		
		pass
		</pre></div>
<div class="sect2" title="12.3.7.&nbsp;OnAfterIndex() &#65288;&#25968;&#25454;&#33719;&#21462;&#21518;&#22788;&#29702;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-pysource-OnAfterIndex"></a>12.3.7.&nbsp;OnAfterIndex() &#65288;&#25968;&#25454;&#33719;&#21462;&#21518;&#22788;&#29702;&#65289;</h3></div></div></div>
<p>&#31867;&#20284;<code class="option">sql_query_post</code>&#37197;&#32622;&#36873;&#39033;&#30340;&#20316;&#29992;</p><h4>&#20363;&#22914;:</h4><pre class="programlisting">
    def OnAfterIndex(self):
        print 'after index called'
		pass
		</pre></div>
<div class="sect2" title="12.3.8.&nbsp;OnIndexFinished() &#65288;&#32034;&#24341;&#23436;&#25104;&#26102;&#22788;&#29702;&#65289;"><div class="titlepage"><div><div><h3 class="title"><a name="coreseek-conf-pysource-OnIndexFinished"></a>12.3.8.&nbsp;OnIndexFinished() &#65288;&#32034;&#24341;&#23436;&#25104;&#26102;&#22788;&#29702;&#65289;</h3></div></div></div>
<p>&#31867;&#20284;<code class="option">sql_query_post_index</code>&#37197;&#32622;&#36873;&#39033;&#30340;&#20316;&#29992;</p><h4>&#20363;&#22914;:</h4><pre class="programlisting">
    def OnIndexFinished(self):
        print 'after index finished'
        pass			
		</pre></div></div></div>
<div class="appendix" title="&#38468;&#24405;&nbsp;A.&nbsp;Sphinx revision history"><div class="titlepage"><div><div><h2 class="title"><a name="changelog"></a>&#38468;&#24405;&nbsp;A.&nbsp;Sphinx revision history</h2></div></div></div>
<div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="sect1"><a href="#rel111">A.1. Version 2.0.1-beta, 22 apr 2011</a></span></dt>
<dt><span class="sect1"><a href="#rel110">A.2. Version 1.10-beta, 19 jul 2010</a></span></dt>
<dt><span class="sect1"><a href="#rel099">A.3. Version 0.9.9-release, 02 dec 2009</a></span></dt>
<dt><span class="sect1"><a href="#rel099rc2">A.4. Version 0.9.9-rc2, 08 apr 2009</a></span></dt>
<dt><span class="sect1"><a href="#rel099rc1">A.5. Version 0.9.9-rc1, 17 nov 2008</a></span></dt>
<dt><span class="sect1"><a href="#rel0981">A.6. Version 0.9.8.1, 30 oct 2008</a></span></dt>
<dt><span class="sect1"><a href="#rel098">A.7. Version 0.9.8, 14 jul 2008</a></span></dt>
<dt><span class="sect1"><a href="#rel097">A.8. Version 0.9.7, 02 apr 2007</a></span></dt>
<dt><span class="sect1"><a href="#rel097rc2">A.9. Version 0.9.7-rc2, 15 dec 2006</a></span></dt>
<dt><span class="sect1"><a href="#rel097rc">A.10. Version 0.9.7-rc1, 26 oct 2006</a></span></dt>
<dt><span class="sect1"><a href="#rel096">A.11. Version 0.9.6, 24 jul 2006</a></span></dt>
<dt><span class="sect1"><a href="#rel096rc1">A.12. Version 0.9.6-rc1, 26 jun 2006</a></span></dt>
</dl></div>
<div class="sect1" title="A.1.&nbsp;Version 2.0.1-beta, 22 apr 2011"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel111"></a>A.1.&nbsp;Version 2.0.1-beta, 22 apr 2011</h2></div></div></div>
<h3>New general features</h3><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>added remapping support to <a class="link" href="#conf-blend-chars" title="11.2.47.&nbsp;blend_chars&#65306;&#28151;&#21512;&#23383;&#31526;&#21015;&#34920;">blend_chars</a> directive</p></li>
<li class="listitem"><p>added multi-threaded snippet batches support (requires a batch sent via API, <a class="link" href="#conf-dist-threads" title="11.4.29.&nbsp;dist_threads&#65306;&#24182;&#21457;&#26597;&#35810;&#32447;&#31243;&#25968;">dist_threads</a>, and <code class="code">load_files</code>)</p></li>
<li class="listitem"><p>added collations (<a class="link" href="#conf-collation-server" title="11.4.33.&nbsp;collation_server&#65306;&#26381;&#21153;&#31471;&#40664;&#35748;&#23383;&#31526;&#38598;">collation_server</a>, <a class="link" href="#conf-collation-libc-locale" title="11.4.34.&nbsp;collation_libc_locale&#65306;&#26381;&#21153;&#31471;libc&#23383;&#31526;&#38598;">collation_libc_locale directives</a>)</p></li>
<li class="listitem"><p>added support for sorting and grouping on string attributes (<code class="code">ORDER BY</code>, <code class="code">GROUP BY</code>, <code class="code">WITHING GROUP ORDER BY</code>)</p></li>
<li class="listitem"><p>added UDF support (<a class="link" href="#conf-plugin-dir" title="11.4.35.&nbsp;plugin_dir&#65306;&#25554;&#20214;&#30446;&#24405;">plugin_dir</a> directive; <a class="link" href="#sphinxql-create-function" title="7.13.&nbsp;CREATE FUNCTION&#65288;&#28155;&#21152;&#33258;&#23450;&#20041;&#20989;&#25968;&#65289;&#35821;&#27861;">CREATE FUNCTION</a>, <a class="link" href="#sphinxql-drop-function" title="7.14.&nbsp;DROP FUNCTION&#65288;&#21024;&#38500;&#33258;&#23450;&#20041;&#20989;&#25968;&#65289;&#35821;&#27861;">DROP FUNCTION</a> statements)</p></li>
<li class="listitem"><p>added <a class="link" href="#conf-query-log-format" title="11.4.6.&nbsp;query_log_format&#65306;&#26597;&#35810;&#26085;&#24535;&#26684;&#24335;">query_log_format</a> directive, <a class="link" href="#sphinxql-set" title="7.7.&nbsp;SET&#65288;&#35774;&#32622;&#26381;&#21153;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;">SET GLOBAL query_log_format | log_level = ...</a> statements; and connection id tracking</p></li>
<li class="listitem"><p>added <a class="link" href="#conf-sql-column-buffers" title="11.1.26.&nbsp;sql_column_buffers&#65306;&#32467;&#26524;&#34892;&#32531;&#20914;&#22823;&#23567;">sql_column_buffers</a> directive, fixed out-of-buffer column handling in ODBC/MS SQL sources</p></li>
<li class="listitem"><p>added <a class="link" href="#conf-blend-mode" title="11.2.48.&nbsp;blend_mode&#65306;&#28151;&#21512;&#31867;&#22411;">blend_mode</a> directive that enables indexing multiple variants of a blended sequence</p></li>
<li class="listitem"><p>added UNIX socket support to C, Ruby APIs</p></li>
<li class="listitem"><p>added ranged query support to <a class="link" href="#conf-sql-joined-field" title="11.1.13.&nbsp;sql_joined_field&#65306;SQL&#36830;&#25509;&#23383;&#27573;&#35774;&#32622;">sql_joined_field</a></p></li>
<li class="listitem"><p>added <a class="link" href="#conf-rt-flush-period" title="11.4.37.&nbsp;rt_flush_period&#65306;RT&#32034;&#24341;&#21047;&#26032;&#21608;&#26399;">rt_flush_period</a> directive</p></li>
<li class="listitem"><p>added <a class="link" href="#conf-thread-stack" title="11.4.38.&nbsp;thread_stack&#65306;&#32447;&#31243;&#22534;&#26632;">thread_stack</a> directive</p></li>
<li class="listitem"><p>added SENTENCE, PARAGRAPH, ZONE operators (and <a class="link" href="#conf-index-sp" title="11.2.8.&nbsp;index_sp&#65306;&#32034;&#24341;&#21477;&#23376;&#21644;&#27573;&#33853;&#20449;&#24687;">index_sp</a>, <a class="link" href="#conf-index-zones" title="11.2.9.&nbsp;index_zones&#65306;&#32034;&#24341;&#26631;&#31614;&#21306;&#22495;&#20449;&#24687;">index_zones</a> directives)</p></li>
<li class="listitem"><p>added keywords dictionary support (and <a class="link" href="#conf-dict" title="11.2.7.&nbsp;dict&#65306;&#20851;&#38190;&#23383;&#35789;&#20856;&#31867;&#22411;">dict</a>, <a class="link" href="#conf-expansion-limit" title="11.4.39.&nbsp;expansion_limit&#65306;&#20851;&#38190;&#23383;&#23637;&#24320;&#38480;&#21046;">expansion_limit</a> directives)</p></li>
<li class="listitem"><p>added <code class="code">passage_boundary</code>, <code class="code">emit_zones</code> options to snippets</p></li>
<li class="listitem"><p>added <a class="link" href="#conf-watchdog" title="11.4.41.&nbsp;watchdog">a watchdog process</a> in threaded mode</p></li>
<li class="listitem"><p>added persistent MVA updates</p></li>
<li class="listitem"><p>added crash dumps to <code class="filename">searchd.log</code>, deprecated <code class="code">crash_log_path</code> directive</p></li>
<li class="listitem"><p>added id32 index support in id64 binaries (EXPERIMENTAL)</p></li>
<li class="listitem"><p>added SphinxSE support for DELETE and REPLACE on SphinxQL tables</p></li>
</ul></div>
<h3>New SphinxQL features</h3><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>added new, more SQL compliant SphinxQL syntax; and a <a class="link" href="#conf-compat-sphinxql-magics" title="11.4.40.&nbsp;compat_sphinxql_magics">compat_sphinxql_magics</a> directive</p></li>
<li class="listitem"><p>added <a class="link" href="#expr-func-crc32">CRC32()</a>, <a class="link" href="#expr-func-day">DAY()</a>, <a class="link" href="#expr-func-month">MONTH()</a>, <a class="link" href="#expr-func-year">YEAR()</a>, <a class="link" href="#expr-func-yearmonth">YEARMONTH()</a>, <a class="link" href="#expr-func-yearmonthday">YEARMONTHDAY()</a> functions</p></li>
<li class="listitem"><p>added <a class="link" href="#expr-ari-ops">DIV, MOD, and % operators</a></p></li>
<li class="listitem"><p>added <a class="link" href="#sphinxql-select" title="7.1.&nbsp;SELECT&#65288;&#25628;&#32034;&#26597;&#35810;&#65289;&#35821;&#27861;">reverse_scan=(0|1)</a> option to SELECT</p></li>
<li class="listitem"><p>added support for MySQL packets over 16M</p></li>
<li class="listitem"><p>added dummy SHOW VARIABLES, SHOW COLLATION, and SET character_set_results support (to support handshake with certain client libraries and frameworks)</p></li>
<li class="listitem"><p>added <a class="link" href="#conf-mysql-version-string" title="11.4.36.&nbsp;mysql_version_string&#65306;MySQL&#29256;&#26412;&#35774;&#32622;">mysql_version_string</a> directive (to workaround picky MySQL client libraries)</p></li>
<li class="listitem"><p>added support for global filter variables, <a class="link" href="#sphinxql-set" title="7.7.&nbsp;SET&#65288;&#35774;&#32622;&#26381;&#21153;&#31471;&#21464;&#37327;&#65289;&#35821;&#27861;">SET GLOBAL @uservar=(int_list)</a> </p></li>
<li class="listitem"><p>added <a class="link" href="#sphinxql-delete" title="7.6.&nbsp;DELETE&#65288;&#25968;&#25454;&#21024;&#38500;&#65289;&#35821;&#27861;">DELETE ... IN (id_list)</a> syntax support</p></li>
<li class="listitem"><p>added C-style comments syntax (for example, <code class="code">SELECT /*!40000 some comment*/ id FROM test</code>)</p></li>
<li class="listitem"><p>added <a class="link" href="#sphinxql-update" title="7.17.&nbsp;UPDATE&#65288;&#25968;&#25454;&#26356;&#26032;&#65289;&#35821;&#27861;">UPDATE ... WHERE id=X</a> syntax support</p></li>
<li class="listitem"><p>added <a class="link" href="#sphinxql-multi-queries" title="7.18.&nbsp;&#22810;&#32467;&#26524;&#38598;&#26597;&#35810;&#65288;&#25209;&#37327;&#26597;&#35810;&#65289;">SphinxQL multi-query support</a></p></li>
<li class="listitem"><p>added <a class="link" href="#sphinxql-describe" title="7.12.&nbsp;DESCRIBE&#65288;&#26174;&#31034;&#25351;&#23450;&#25628;&#32034;&#26381;&#21153;&#32034;&#24341;&#30340;&#23383;&#27573;&#20449;&#24687;&#65289;&#35821;&#27861;">DESCRIBE</a>, <a class="link" href="#sphinxql-show-tables" title="7.11.&nbsp;SHOW TABLES&#65288;&#26174;&#31034;&#24403;&#21069;&#25552;&#20379;&#25628;&#32034;&#26381;&#21153;&#30340;&#32034;&#24341;&#21015;&#34920;&#65289;&#35821;&#27861;">SHOW TABLES</a> statements</p></li>
</ul></div>
<h3>New command-line switches</h3><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>added <code class="code">--print-queries</code> switch to <code class="filename">indexer</code> that dumps SQL queries it runs</p></li>
<li class="listitem"><p>added <code class="code">--sighup-each </code> switch to <code class="filename">indexer</code> that rotates indexes one by one</p></li>
<li class="listitem"><p>added <code class="code">--strip-path</code> switch to <code class="filename">searchd</code> that skips file paths embedded in the index(-es)</p></li>
<li class="listitem"><p>added <code class="code">--dumpconfig</code> switch to <code class="filename">indextool</code> that dumps an index header in <code class="filename">sphinx.conf</code> format</p></li>
</ul></div>
<h3>Major changes and optimizations</h3><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>changed default preopen_indexes value to 1</p></li>
<li class="listitem"><p>optimized English stemmer (results in 1.3x faster snippets and indexing with morphology=stem_en)</p></li>
<li class="listitem"><p>optimized snippets, 1.6x general speedup</p></li>
<li class="listitem"><p>optimized const-list parsing in SphinxQL</p></li>
<li class="listitem"><p>optimized full-document highlighting CPU/RAM use</p></li>
<li class="listitem"><p>optimized binlog replay (improved performance on K-list update)</p></li>
</ul></div>
<h3>Bug fixes</h3><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=767" target="_top">#767</a>, joined fields vs ODBC sources</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=757" target="_top">#757</a>, wordforms shared by indexes with different settings</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=733" target="_top">#733</a>, loading of indexes in formats prior to v.14</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=763" target="_top">#763</a>, occasional snippets failures</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=648" target="_top">#648</a>, occasionally missed rotations on multiple SIGHUPs</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=750" target="_top">#750</a>, an RT segment merge leading to false positives and/or crashes in some cases</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=755" target="_top">#755</a>, zones in snippets output</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=754" target="_top">#754</a>, stopwords counting at snippet passage generation</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=723" target="_top">#723</a>, fork/prefork index rotation in children processes</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=696" target="_top">#696</a>, freeze on zero threshold in quorum operator</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=732" target="_top">#732</a>, query escaping in SphinxSE</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=739" target="_top">#739</a>, occasional crashes in MT mode on result set send</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=746" target="_top">#746</a>, crash with a named list in SphinxQL option</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=674" target="_top">#674</a>, AVG vs group order</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=734" target="_top">#734</a>, occasional crashes attempting to report NULL errors</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=829" target="_top">#829</a>, tail hits within field position modifier</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=712" target="_top">#712</a>, missing query_mode, force_all_words snippet option defaults in Java API</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=721" target="_top">#721</a>, added dupe removal on RT batch INSERT/REPLACE</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=720" target="_top">#720</a>, potential extraneous highlighting after a blended keyword</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=702" target="_top">#702</a>, exceptions vs star search</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=666" target="_top">#666</a>, ext2 query grouping vs exceptions</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=688" target="_top">#688</a>, WITHIN GROUP ORDER BY related crash</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=660" target="_top">#660</a>, multi-queue batches vs dist_threads</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=678" target="_top">#678</a>, crash on dict=keywords vs xmlpipe vs min_prefix_len</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=596" target="_top">#596</a>, ECHILD vs scripted configs</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=653" target="_top">#653</a>, dependency in expression, sorting, grouping</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=661" target="_top">#661</a>, concurrent distributed searches vs workers=threads</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=646" target="_top">#646</a>, crash on status query via UNIX socket</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=589" target="_top">#589</a>, libexpat.dll missing from some Win32 build types</p></li>
<li class="listitem"><p>fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=574" target="_top">#574</a>, quorum match order</p></li>
<li class="listitem"><p>fixed multiple documentation issues (#372, #483, #495, #601, #623, #632, #654)</p></li>
<li class="listitem"><p>fixed that ondisk_dict did not affect RT indexes</p></li>
<li class="listitem"><p>fixed that string attributes check in indextool --check was erroneously sensitive to string data order</p></li>
<li class="listitem"><p>fixed a rare crash when using BEFORE operator</p></li>
<li class="listitem"><p>fixed an issue with multiforms vs BuildKeywords()</p></li>
<li class="listitem"><p>fixed an edge case in OR operator (emitted wrong hits order sometimes)</p></li>
<li class="listitem"><p>fixed aliasing in docinfo accessors that lead to very rare crashes and/or missing results</p></li>
<li class="listitem"><p>fixed a syntax error on a short token at the end of a query</p></li>
<li class="listitem"><p>fixed id64 filtering and performance degradation with range filters</p></li>
<li class="listitem"><p>fixed missing rankers in libsphinxclient</p></li>
<li class="listitem"><p>fixed missing SPH04 ranker in SphinxSE</p></li>
<li class="listitem"><p>fixed column names in sql_attr_multi sample (works with example.sql now)</p></li>
<li class="listitem"><p>fixed an issue with distributed local+remote setup vs aggregate functions</p></li>
<li class="listitem"><p>fixed case sensitive columns names in RT indexes</p></li>
<li class="listitem"><p>fixed a crash vs strings from multiple indexes in result set</p></li>
<li class="listitem"><p>fixed blended keywords vs snippets</p></li>
<li class="listitem"><p>fixed secure_connection vs MySQL protocol vs MySQL.NET connector</p></li>
<li class="listitem"><p>fixed that Python API did not works with Python 2.3</p></li>
<li class="listitem"><p>fixed overshort_step vs snippets</p></li>
<li class="listitem"><p>fixed keyword staistics vs dist_threads searching</p></li>
<li class="listitem"><p>fixed multiforms vs query parsing (vs quorum)</p></li>
<li class="listitem"><p>fixed missed quorum words vs RT segments</p></li>
<li class="listitem"><p>fixed blended keywords occasionally skipping extra character when querying (eg "abc[]")</p></li>
<li class="listitem"><p>fixed Python API to handle int32 values</p></li>
<li class="listitem"><p>fixed prefix and infix indexing of joined fields</p></li>
<li class="listitem"><p>fixed MVA ranged query</p></li>
<li class="listitem"><p>fixed missing blended state reset on document boundary</p></li>
<li class="listitem"><p>fixed a crash on missing index while replaying binlog</p></li>
<li class="listitem"><p>fixed an error message on filter values overrun</p></li>
<li class="listitem"><p>fixed passage duplication in snippets in weight_order mode</p></li>
<li class="listitem"><p>fixed select clauses over 1K vs remote agents</p></li>
<li class="listitem"><p>fixed overshort accounting vs soft-whitespace tokens</p></li>
<li class="listitem"><p>fixed rotation vs workers=threads</p></li>
<li class="listitem"><p>fixed schema issues vs distributed indexes</p></li>
<li class="listitem"><p>fixed blended-escaped sequence parsing issue</p></li>
<li class="listitem"><p>fixed MySQL IN clause (values order etc)</p></li>
<li class="listitem"><p>fixed that post_index did not execute when 0 documents were succesfully indexed</p></li>
<li class="listitem"><p>fixed field position limit vs many hits</p></li>
<li class="listitem"><p>fixed that joined fields missed an end marker at field end</p></li>
<li class="listitem"><p>fixed that xxx_step settings were missing from .sph index header</p></li>
<li class="listitem"><p>fixed libsphinxclient missing request cleanup in sphinx_query() (eg after network errors)</p></li>
<li class="listitem"><p>fixed that index_weights were ignored when grouping</p></li>
<li class="listitem"><p>fixed multi wordforms vs blend_chars</p></li>
<li class="listitem"><p>fixed broken MVA output in SphinxQL</p></li>
<li class="listitem"><p>fixed a few RT leaks</p></li>
<li class="listitem"><p>fixed an issue with RT string storage going missing</p></li>
<li class="listitem"><p>fixed an issue with repeated queries vs dist_threads</p></li>
<li class="listitem"><p>fixed an issue with string attributes vs buffer overrun in SphinxQL</p></li>
<li class="listitem"><p>fixed unexpected character data warnings within ignored xmlpipe tags</p></li>
<li class="listitem"><p>fixed a crash in snippets with NEAR syntax query</p></li>
<li class="listitem"><p>fixed passage duplication in snippets</p></li>
<li class="listitem"><p>fixed libsphinxclient SIGPIPE handling</p></li>
<li class="listitem"><p>fixed libsphinxclient vs VS2003 compiler bug</p></li>
</ul></div></div>
<div class="sect1" title="A.2.&nbsp;Version 1.10-beta, 19 jul 2010"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel110"></a>A.2.&nbsp;Version 1.10-beta, 19 jul 2010</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added RT indexes support (<a class="xref" href="#rt-indexes" title="&#31532;&nbsp;4&nbsp;&#31456;&nbsp;RT&#23454;&#26102;&#32034;&#24341;">&#31532;&nbsp;4&nbsp;&#31456; <i>RT&#23454;&#26102;&#32034;&#24341;</i></a>)</li>
<li class="listitem">added prefork and threads support (<a class="link" href="#conf-workers" title="11.4.28.&nbsp;workers&#65306;MPM&#27169;&#24335;">workers</a> directives)</li>
<li class="listitem">added multi-threaded local searches in distributed indexes (<a class="link" href="#conf-dist-threads" title="11.4.29.&nbsp;dist_threads&#65306;&#24182;&#21457;&#26597;&#35810;&#32447;&#31243;&#25968;">dist_threads</a> directive)</li>
<li class="listitem">added common subquery cache (<a class="link" href="#conf-subtree-docs-cache" title="11.4.26.&nbsp;subtree_docs_cache&#65306;&#23376;&#26641;&#20248;&#21270;&#25991;&#26723;&#32531;&#23384;">subtree_docs_cache</a>,
	<a class="link" href="#conf-subtree-hits-cache" title="11.4.27.&nbsp;subtree_hits_cache&#65306;&#23376;&#26641;&#20248;&#21270;&#21629;&#20013;&#32531;&#23384;">subtree_hits_cache</a> directives)</li>
<li class="listitem">added string attributes support (<a class="link" href="#conf-sql-attr-string" title="11.1.24.&nbsp;sql_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;(&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)">sql_attr_string</a>,
	<a class="link" href="#conf-sql-field-string" title="11.1.27.&nbsp;sql_field_string&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#25991;&#26412;&#20449;&#24687;)">sql_field_string</a>,
	<a class="link" href="#conf-xmlpipe-attr-string" title="11.1.45.&nbsp;xmlpipe_attr_string&#65306;&#23383;&#31526;&#20018;&#23646;&#24615;">xml_attr_string</a>,
	<a class="link" href="#conf-xmlpipe-field-string" title="11.1.37.&nbsp;xmlpipe_field_string&#65306;&#23383;&#31526;&#20018;&#23383;&#27573;">xml_field_string</a> directives)</li>
<li class="listitem">added indexing-time word counter (<a class="link" href="#conf-sql-attr-str2wordcount" title="11.1.25.&nbsp;sql_attr_str2wordcount&#65306;&#25991;&#26723;&#35789;&#27719;&#25968;&#35760;&#24405;&#23646;&#24615;">sql_attr_str2wordcount</a>,
	<a class="link" href="#conf-sql-field-str2wordcount" title="11.1.28.&nbsp;sql_field_str2wordcount&#65306;&#25991;&#26723;&#35789;&#27719;&#25968;&#35760;&#24405;&#23383;&#27573;(&#21487;&#20840;&#25991;&#25628;&#32034;&#65292;&#21487;&#36820;&#22238;&#21407;&#22987;&#20449;&#24687;)">sql_field_str2wordcount</a> directives)</li>
<li class="listitem">added <a class="link" href="#sphinxql-call-snippets" title="7.9.&nbsp;CALL SNIPPETS&#65288;&#25688;&#35201;&#29983;&#25104;&#65289;&#35821;&#27861;">CALL SNIPPETS()</a>,
	<a class="link" href="#sphinxql-call-keywords" title="7.10.&nbsp;CALL KEYWORDS&#65288;&#20851;&#38190;&#35789;&#29983;&#25104;&#65289;&#35821;&#27861;">CALL KEYWORDS()</a> SphinxQL statements</li>
<li class="listitem">added <code class="option">field_weights</code>, <code class="option">index_weights</code> options to
	SphinxQL <a class="link" href="#sphinxql-select" title="7.1.&nbsp;SELECT&#65288;&#25628;&#32034;&#26597;&#35810;&#65289;&#35821;&#27861;">SELECT</a> statement</li>
<li class="listitem">added insert-only SphinxQL-talking tables to SphinxSE (connection='sphinxql://host[:port]/index')</li>
<li class="listitem">added <code class="option">select</code> option to SphinxSE queries</li>
<li class="listitem">added backtrace on crash to <code class="filename">searchd</code></li>
<li class="listitem">added SQL+FS indexing, aka loading files by names fetched from SQL
	(<a class="link" href="#conf-sql-file-field" title="11.1.29.&nbsp;sql_file_field&#65306;&#22806;&#37096;&#25991;&#20214;&#23383;&#27573;">sql_file_field</a> directive)</li>
<li class="listitem">added a watchdog in threads mode to <code class="filename">searchd</code></li>
<li class="listitem">added automatic row phantoms elimination to index merge</li>
<li class="listitem">added hitless indexing support (hitless_words directive)</li>
<li class="listitem">added --check, --strip-path, --htmlstrip, --dumphitlist ... --wordid switches to <a class="link" href="#ref-indextool" title="6.5.&nbsp;indextool&#65306;&#32034;&#24341;&#20449;&#24687;&#23548;&#20986;&#21629;&#20196;&#21442;&#32771;">indextool</a></li>
<li class="listitem">added --stopwait, --logdebug switches to <a class="link" href="#ref-searchd" title="6.2.&nbsp;searchd&#65306;&#25628;&#32034;&#26381;&#21153;&#31471;&#21629;&#20196;&#21442;&#32771;">searchd</a></li>
<li class="listitem">added --dump-rows, --verbose switches to <a class="link" href="#ref-indexer" title="6.1.&nbsp;indexer&#65306;&#32034;&#24341;&#21629;&#20196;&#21442;&#32771;">indexer</a></li>
<li class="listitem">added "blended" characters indexing support (<a class="link" href="#conf-blend-chars" title="11.2.47.&nbsp;blend_chars&#65306;&#28151;&#21512;&#23383;&#31526;&#21015;&#34920;">blend_chars</a> directive)</li>
<li class="listitem">added joined/payload field indexing (<a class="link" href="#conf-sql-joined-field" title="11.1.13.&nbsp;sql_joined_field&#65306;SQL&#36830;&#25509;&#23383;&#27573;&#35774;&#32622;">sql_joined_field</a> directive)</li>
<li class="listitem">added <a class="link" href="#api-func-flushattributes" title="8.7.6.&nbsp;FlushAttributes &#65288;&#24378;&#21046;&#26356;&#26032;&#23646;&#24615;&#21040;&#30913;&#30424;&#65289;">FlushAttributes() API call</a></li>
<li class="listitem">added query_mode, force_all_words, limit_passages, limit_words, start_passage_id, load_files, html_strip_mode,
	allow_empty options, and %PASSAGE_ID% macro in before_match, after_match options
	to <a class="link" href="#api-func-buildexcerpts" title="8.7.1.&nbsp;BuildExcerpts &#65288;&#20135;&#29983;&#25991;&#26412;&#25688;&#35201;&#21644;&#39640;&#20142;&#65289;">BuildExcerpts()</a> API call</li>
<li class="listitem">added @groupby/@count/@distinct columns support to SELECT (but not to expressions)</li>
<li class="listitem">added query-time keyword expansion support (<a class="link" href="#conf-expand-keywords" title="11.2.46.&nbsp;expand_keywords&#65306;&#35789;&#27719;&#23637;&#24320;">expand_keywords</a> directive,
	<a class="link" href="#api-func-setrankingmode" title="8.3.2.&nbsp;SetRankingMode &#65288;&#35774;&#32622;&#35780;&#20998;&#27169;&#24335;&#65289;">SPH_RANK_SPH04</a> ranker)</li>
<li class="listitem">added query batch size limit option (<a class="link" href="#conf-max-batch-queries" title="11.4.25.&nbsp;max_batch_queries&#65306;&#26368;&#22823;&#25209;&#37327;&#26597;&#35810;">max_batch_queries</a> directive; was hardcoded)</li>
<li class="listitem">added SINT() function to expressions</li>
<li class="listitem">improved SphinxQL syntax error reporting</li>
<li class="listitem">improved expression optimizer (better constant handling)</li>
<li class="listitem">improved dash handling within keywords (no longer treated as an operator)</li>
<li class="listitem">improved snippets (better passage selection/trimming, around option now a hard limit)</li>
<li class="listitem">optimized index format that yields ~20-30% smaller indexes</li>
<li class="listitem">optimized sorting code (indexing time 1-5% faster on average; 100x faster in worst case)</li>
<li class="listitem">optimized searchd startup time (moved .spa preindexing to indexer), added a progress bar</li>
<li class="listitem">optimized queries against indexes with many attributes (eliminated redundant copying)</li>
<li class="listitem">optimized 1-keyword queries (performace regression introduced in 0.9.9)</li>
<li class="listitem">optimized SphinxQL protocol overheads, and performance on bigger result sets</li>
<li class="listitem">optimized unbuffered attributes writes on index merge</li>
<li class="listitem">changed attribute handling, duplicate names are strictly forbidden now</li>
<li class="listitem">fixed that SphinxQL sessions could stall shutdown</li>
<li class="listitem">fixed consts with leading minus in SphinxQL</li>
<li class="listitem">fixed AND/OR precedence in expressions</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=334" target="_top">#334</a>, AVG() on integers was not computed in floats</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=371" target="_top">#371</a>, attribute flush vs 2+ GB files</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=373" target="_top">#373</a>, segfault on distributed queries vs certain libc versions</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=398" target="_top">#398</a>, stopwords not stopped in prefix/infix indexes</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=404" target="_top">#404</a>, erroneous MVA failures in indextool --check</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=408" target="_top">#408</a>, segfault on certain query batches (regular scan, plus a scan with MVA groupby)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=431" target="_top">#431</a>, occasional shutdown hangs in preforked workers</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=436" target="_top">#436</a>, trunk checkout builds vs Solaris sh</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=440" target="_top">#440</a>, escaping vs parentheses declared as valid in charset_table</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=442" target="_top">#442</a>, occasional non-aligned free in MVA indexing</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=447" target="_top">#447</a>, occasional crashes in MVA indexing</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=449" target="_top">#449</a>, pconn busyloop on aborted clients on certain arches</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=465" target="_top">#465</a>, build issue on Alpha</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=468" target="_top">#468</a>, build issue in libsphinxclient</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=472" target="_top">#472</a>, multiple stopword files failing to load</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=489" target="_top">#489</a>, buffer overflow in query logging</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=493" target="_top">#493</a>, Python API assertion after error returned from Query()</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=500" target="_top">#500</a>, malformed MySQL packet when sending MVAs</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=504" target="_top">#504</a>, SIGPIPE in libsphinxclient</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=506" target="_top">#506</a>, better MySQL protocol commands support in SphinxQL (PING etc)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=509" target="_top">#509</a>, indexing ranged results from stored procedures</li>
</ul></div></div>
<div class="sect1" title="A.3.&nbsp;Version 0.9.9-release, 02 dec 2009"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel099"></a>A.3.&nbsp;Version 0.9.9-release, 02 dec 2009</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added Open, Close, Status calls to libsphinxclient (C API)</li>
<li class="listitem">added automatic persistent connection reopening to PHP, Python APIs</li>
<li class="listitem">added 64-bit value/range filters, fullscan mode support to SphinxSE</li>
<li class="listitem">MAJOR CHANGE, our IANA assigned ports are 9312 and 9306 respectively (goodbye, trusty 3312)</li>
<li class="listitem">MAJOR CHANGE, erroneous filters now fail with an error (were silently ignored before)</li>
<li class="listitem">optimized unbuffered .spa writes on merge</li>
<li class="listitem">optimized 1-keyword queries ranking in extended2 mode</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=441" target="_top">#441</a> (IO race in case of highly conccurent load on a preopened)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=434" target="_top">#434</a> (distrubuted indexes were not searchable via MySQL protocol)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=317" target="_top">#317</a> (indexer MVA progress counter)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=398" target="_top">#398</a> (stopwords not removed from search query)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=328" target="_top">#328</a> (broken cutoff)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=250" target="_top">#250</a> (now quoting paths w/spaces when installing Windows service)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=348" target="_top">#348</a> (K-list was not updated on merge)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=357" target="_top">#357</a> (destination index were not K-list-filtered on merge)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=369" target="_top">#369</a> (precaching .spi files over 2 GBs)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=438" target="_top">#438</a> (missing boundary proximity matches)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=371" target="_top">#371</a> (.spa flush in case of files over 2 GBs)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=373" target="_top">#373</a> (crashes on distributed queries via mysql proto)</li>
<li class="listitem">fixed critical bugs in hit merging code</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=424" target="_top">#424</a> (ordinals could be misplaced during indexing in case of bitfields etc)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=426" target="_top">#426</a> (failing SE build on Solaris; thanks to Ben Beecher)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=423" target="_top">#423</a> (typo in SE caused crash on SHOW STATUS)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=363" target="_top">#363</a> (handling of read_timeout over 2147 seconds)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=376" target="_top">#376</a> (minor error message mismatch)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=413" target="_top">#413</a> (minus in SphinxQL)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=417" target="_top">#417</a> (floats w/o leading digit in SphinxQL)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=403" target="_top">#403</a> (typo in SetFieldWeights name in Java API)</li>
<li class="listitem">fixed index rotation vs persistent connections</li>
<li class="listitem">fixed backslash handling in SphinxQL parser</li>
<li class="listitem">fixed uint unpacking vs. PHP 5.2.9 (possibly other versions)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=325" target="_top">#325</a> (filter settings send from SphinxSE)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=352" target="_top">#352</a> (removed mysql wrapper around close() in SphinxSE)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=389" target="_top">#389</a> (display error messages through SphinxSE status variable)</li>
<li class="listitem">fixed linking with port-installed iconv on OS X</li>
<li class="listitem">fixed negative 64-bit unpacking in PHP API</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=349" target="_top">#349</a> (escaping backslash in query emulation mode)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=320" target="_top">#320</a> (disabled multi-query route when select items differ)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=353" target="_top">#353</a> (better quorum counts check)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=341" target="_top">#341</a> (merging of trailing hits; maybe other ranking issues too)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=368" target="_top">#368</a> (partially; @field "" caused crashes; now resets field limit)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=365" target="_top">#365</a> (field mask was leaking on field-limited terms)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=339" target="_top">#339</a> (updated debug query dumper)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=361" target="_top">#361</a> (added SetConnectTimeout() to Java API)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=338" target="_top">#338</a> (added missing fullscan to mode check in Java API)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=323" target="_top">#323</a> (added floats support to SphinxQL)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=340" target="_top">#340</a> (support listen=port:proto syntax too)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=332" target="_top">#332</a> (\r is legal SphinxQL space now)</li>
<li class="listitem">fixed xmlpipe2 K-lists</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=322" target="_top">#322</a> (safety gaps in mysql protocol row buffer)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=313" target="_top">#313</a> (return keyword stats for empty indexes too)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=344" target="_top">#344</a> (invalid checkpoints after merge)</li>
<li class="listitem">fixed <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=326" target="_top">#326</a> (missing CLOCK_xxx on FreeBSD)</li>
</ul></div></div>
<div class="sect1" title="A.4.&nbsp;Version 0.9.9-rc2, 08 apr 2009"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel099rc2"></a>A.4.&nbsp;Version 0.9.9-rc2, 08 apr 2009</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added IsConnectError(), Open(), Close() calls to Java API (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=240" target="_top">#240</a>)</li>
<li class="listitem">added <a class="link" href="#conf-read-buffer" title="11.4.23.&nbsp;read_buffer&#65306;&#35835;&#32531;&#20914;&#21306;">read_buffer</a>, <a class="link" href="#conf-read-unhinted" title="11.4.24.&nbsp;read_unhinted&#65306;&#26080;&#21305;&#37197;&#26102;&#35835;&#21462;&#22823;&#23567;">read_unhinted</a> directives</li>
<li class="listitem">added checks for build options returned by mysql_config (builds on Solaris now)</li>
<li class="listitem">added fixed-RAM index merge (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=169" target="_top">#169</a>)</li>
<li class="listitem">added logging chained queries count in case of (optimized) multi-queries</li>
<li class="listitem">added <a class="link" href="#sort-expr" title="5.6.&nbsp;SPH_SORT_EXPR &#27169;&#24335;">GEODIST()</a> function</li>
<li class="listitem">added <a class="link" href="#ref-searchd" title="6.2.&nbsp;searchd&#65306;&#25628;&#32034;&#26381;&#21153;&#31471;&#21629;&#20196;&#21442;&#32771;">--status switch to searchd</a></li>
<li class="listitem">added MySpell (OpenOffice) affix file support (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=281" target="_top">#281</a>)</li>
<li class="listitem">added <a class="link" href="#conf-odbc-dsn" title="11.1.10.&nbsp;odbc_dsn&#65306;ODBC&#36830;&#25509;&#23383;&#31526;&#20018;(DSN)">ODBC support</a> (both Windows and UnixODBC)</li>
<li class="listitem">added support for @id in IN() (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=292" target="_top">#292</a>)</li>
<li class="listitem">added support for <a class="link" href="#api-func-setselect" title="8.2.4.&nbsp;SetSelect (&#35774;&#32622;&#36820;&#22238;&#20449;&#24687;&#30340;&#20869;&#23481;)">aggregate functions</a> in GROUP BY (namely AVG, MAX, MIN, SUM)</li>
<li class="listitem">added <a class="link" href="#sphinxse-snippets" title="9.4.&nbsp;&#36890;&#36807; MySQL &#29983;&#25104;&#29255;&#27573; (&#25688;&#35201;)">MySQL UDF that builds snippets</a> using searchd</li>
<li class="listitem">added <a class="link" href="#conf-write-buffer" title="11.3.5.&nbsp;write_buffer&#65306;&#20889;&#32531;&#20914;&#22823;&#23567;">write_buffer</a> directive (defaults to 1M)</li>
<li class="listitem">added <a class="link" href="#conf-xmlpipe-fixup-utf8" title="11.1.46.&nbsp;xmlpipe_fixup_utf8&#65306;UTF-8&#20462;&#22797;&#35774;&#32622;">xmlpipe_fixup_utf8</a> directive</li>
<li class="listitem">added suggestions sample</li>
<li class="listitem">added microsecond precision int64 timer (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=282" target="_top">#282</a>)</li>
<li class="listitem">added <a class="link" href="#conf-listen-backlog" title="11.4.22.&nbsp;listen_backlog&#65306;&#24102;&#22788;&#29702;&#30417;&#21548;&#38431;&#21015;">listen_backlog directive</a></li>
<li class="listitem">added <a class="link" href="#conf-max-xmlpipe2-field" title="11.3.4.&nbsp;max_xmlpipe2_field&#65306;&#26368;&#22823;&#23383;&#27573;&#22823;&#23567;">max_xmlpipe2_field</a> directive</li>
<li class="listitem">added <a class="link" href="#sphinxql" title="5.10.&nbsp;MySQL &#21327;&#35758;&#25903;&#25345;&#19982; SphinxQL">initial SphinxQL support</a> to mysql41 handler, SELECT .../SHOW WARNINGS/STATUS/META are handled</li>
<li class="listitem">added support for different network protocols, and mysql41 protocol</li>
<li class="listitem">added <a class="link" href="#api-func-setrankingmode" title="8.3.2.&nbsp;SetRankingMode &#65288;&#35774;&#32622;&#35780;&#20998;&#27169;&#24335;&#65289;">fieldmask ranker</a>, updated SphinxSE list of rankers</li>
<li class="listitem">added <a class="link" href="#conf-mysql-ssl" title="11.1.9.&nbsp;mysql_ssl_cert, mysql_ssl_key, mysql_ssl_ca&#65306;MySQL&#30340;SSL&#36830;&#25509;">mysql_ssl_xxx</a> directives</li>
<li class="listitem">added <a class="link" href="#ref-searchd" title="6.2.&nbsp;searchd&#65306;&#25628;&#32034;&#26381;&#21153;&#31471;&#21629;&#20196;&#21442;&#32771;">--cpustats (requires clock_gettime()) and --status switches</a> to searchd</li>
<li class="listitem">added performance counters, <a class="link" href="#api-func-status" title="8.7.5.&nbsp;Status &#65288;&#26597;&#35810;&#26381;&#21153;&#29366;&#24577;&#65289;">Status()</a> API call</li>
<li class="listitem">added <a class="link" href="#conf-overshort-step" title="11.2.43.&nbsp;overshort_step&#65306;&#30701;&#35789;&#20301;&#32622;&#22686;&#37327;">overshort_step</a> and <a class="link" href="#conf-stopword-step" title="11.2.44.&nbsp;stopword_step&#65306;&#36890;&#29992;&#35789;&#20301;&#32622;&#22686;&#37327;">stopword_step</a> directives</li>
<li class="listitem">added <a class="link" href="#extended-syntax" title="5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;">strict order operator</a> (aka operator before, eg. "one &lt;&lt; two &lt;&lt; three")</li>
<li class="listitem">added <a class="link" href="#ref-indextool" title="6.5.&nbsp;indextool&#65306;&#32034;&#24341;&#20449;&#24687;&#23548;&#20986;&#21629;&#20196;&#21442;&#32771;">indextool</a> utility, moved --dumpheader there, added --debugdocids, --dumphitlist options</li>
<li class="listitem">added own RNG, reseeded on @random sort query (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=183" target="_top">#183</a>)</li>
<li class="listitem">added <a class="link" href="#extended-syntax" title="5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;">field-start and field-end modifiers support</a> (syntax is "^hello world$"; field-end requires reindex)</li>
<li class="listitem">added MVA attribute support to IN() function</li>
<li class="listitem">added <a class="link" href="#sort-expr" title="5.6.&nbsp;SPH_SORT_EXPR &#27169;&#24335;">AND, OR, and NOT support</a> to expressions</li>
<li class="listitem">improved logging of (optimized) multi-queries (now logging chained query count)</li>
<li class="listitem">improved handshake error handling, fixed protocol version byte order (omg)</li>
<li class="listitem">updated SphinxSE to protocol 1.22</li>
<li class="listitem">allowed phrase_boundary_step=-1 (trick to emulate keyword expansion)</li>
<li class="listitem">removed SPH_MAX_QUERY_WORDS limit</li>
<li class="listitem">fixed CLI search vs documents missing from DB (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=257" target="_top">#257</a>)</li>
<li class="listitem">fixed libsphinxclient results leak on subsequent sphinx_run_queries call (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=256" target="_top">#256</a>)</li>
<li class="listitem">fixed libsphinxclient handling of zero max_matches and cutoff (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=208" target="_top">#208</a>)</li>
<li class="listitem">fixed Java API over-64K string reads (eg. big snippets) in Java API (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=181" target="_top">#181</a>)</li>
<li class="listitem">fixed Java API 2nd Query() after network error in 1st Query() call (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=308" target="_top">#308</a>)</li>
<li class="listitem">fixed typo-class bugs in SetFilterFloatRange (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=259" target="_top">#259</a>), SetSortMode (bug #248)</li>
<li class="listitem">fixed missing @@relaxed support (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=276" target="_top">#276</a>), fixed missing error on @nosuchfield queries, documented @@relaxed</li>
<li class="listitem">fixed UNIX socket permissions to 0777 (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=288" target="_top">#288</a>)</li>
<li class="listitem">fixed xmlpipe2 crash on schemas with no fields, added better document structure checks</li>
<li class="listitem">fixed (and optimized) expr parser vs IN() with huge (10K+) args count</li>
<li class="listitem">fixed double EarlyCalc() in fullscan mode (minor performance impact)</li>
<li class="listitem">fixed phrase boundary handling in some cases (on buffer end, on trailing whitespace)</li>
<li class="listitem">fixes in snippets (aka excerpts) generation</li>
<li class="listitem">fixed inline attrs vs id64 index corruption</li>
<li class="listitem">fixed head searchd crash on config re-parse failure</li>
<li class="listitem">fixed handling of numeric keywords with leading zeroes such as "007" (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=251" target="_top">#251</a>)</li>
<li class="listitem">fixed junk in SphinxSE status variables (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=304" target="_top">#304</a>)</li>
<li class="listitem">fixed wordlist checkpoints serialization (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=236" target="_top">#236</a>)</li>
<li class="listitem">fixed unaligned docinfo id access (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=230" target="_top">#230</a>)</li>
<li class="listitem">fixed GetRawBytes() vs oversized blocks (headers with over 32K charset_table should now work, bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=300" target="_top">#300</a>)</li>
<li class="listitem">fixed buffer overflow caused by too long dest wordform, updated tests</li>
<li class="listitem">fixed IF() return type (was always int, is deduced now)</li>
<li class="listitem">fixed legacy queries vs. special chars vs. multiple indexes</li>
<li class="listitem">fixed write-write-read socket access pattern vs Nagle vs delays vs FreeBSD (oh wow)</li>
<li class="listitem">fixed exceptions vs query-parser issue</li>
<li class="listitem">fixed late calc vs @weight in expressions (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=285" target="_top">#285</a>)</li>
<li class="listitem">fixed early lookup/calc vs filters (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=284" target="_top">#284</a>)</li>
<li class="listitem">fixed emulated MATCH_ANY queries (empty proximity and phrase queries are allowed now)</li>
<li class="listitem">fixed MATCH_ANY ranker vs fields with no matches</li>
<li class="listitem">fixed index file size vs inplace_enable (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=245" target="_top">#245</a>)</li>
<li class="listitem">fixed that old logs were not closed on USR1 (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=221" target="_top">#221</a>)</li>
<li class="listitem">fixed handling of '!' alias to NOT operator (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=237" target="_top">#237</a>)</li>
<li class="listitem">fixed error handling vs query steps (step failure was not reported)</li>
<li class="listitem">fixed querying vs inline attributes</li>
<li class="listitem">fixed stupid bug in escaping code, fixed EscapeString() and made it static</li>
<li class="listitem">fixed parser vs @field -keyword, foo|@field bar, "" queries (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=310" target="_top">#310</a>)</li>
</ul></div></div>
<div class="sect1" title="A.5.&nbsp;Version 0.9.9-rc1, 17 nov 2008"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel099rc1"></a>A.5.&nbsp;Version 0.9.9-rc1, 17 nov 2008</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added <a class="link" href="#conf-min-stemming-len" title="11.2.10.&nbsp;min_stemming_len&#65306;&#35789;&#24178;&#21270;&#26368;&#23567;&#35789;&#38271;">min_stemming_len</a> directive</li>
<li class="listitem">added <a class="link" href="#api-func-isconnecterror" title="8.1.7.&nbsp;IsConnectError &#65288;&#26816;&#26597;&#38142;&#25509;&#38169;&#35823;&#65289;">IsConnectError()</a> API call (helps distingusih API vs remote errors)</li>
<li class="listitem">added duplicate log messages filter to searchd</li>
<li class="listitem">added --nodetach debugging switch to searchd</li>
<li class="listitem">added blackhole agents support for debugging/testing (<a class="link" href="#conf-agent-blackhole" title="11.2.32.&nbsp;agent_blackhole&#65306;&#36828;&#31243;&#40657;&#27934;&#20195;&#29702;">agent_blackhole</a> directive)</li>
<li class="listitem">added <a class="link" href="#conf-max-filters" title="11.4.20.&nbsp;max_filters&#65306;&#26368;&#22823;&#36807;&#28388;&#22120;&#25968;&#30446;">max_filters</a>, <a class="link" href="#conf-max-filter-values" title="11.4.21.&nbsp;max_filter_values&#65306;&#21333;&#20010;&#36807;&#28388;&#22120;&#26368;&#22823;&#36807;&#28388;&#20540;&#25968;&#30446;">max_filter_values</a> directives (were hardcoded before)</li>
<li class="listitem">added int64 expression evaluation path, automatic inference, and BIGINT() enforcer function</li>
<li class="listitem">added crash handler for debugging (<a class="link" href="#conf-crash-log-path" title="11.4.19.&nbsp;crash_log_path&#65306;&#23849;&#28291;&#26085;&#24535;">crash_log_path</a> directive)</li>
<li class="listitem">added MS SQL (aka SQL Server) source support (Windows only, <a class="link" href="#conf-mssql-winauth" title="11.1.47.&nbsp;mssql_winauth&#65306;Windows&#38598;&#25104;&#35748;&#35777;">mssql_winauth</a> and <a class="link" href="#conf-mssql-unicode" title="11.1.48.&nbsp;mssql_unicode&#65306;Unicode&#35774;&#32622;">mssql_unicode</a> directives)</li>
<li class="listitem">added indexer-side column unpacking feature (<a class="link" href="#conf-unpack-zlib" title="11.1.49.&nbsp;unpack_zlib&#65306;SQL&#25968;&#25454;&#28304;&#35299;&#21387;&#23383;&#27573;&#35774;&#32622;">unpack_zlib</a>, <a class="link" href="#conf-unpack-mysqlcompress" title="11.1.50.&nbsp;unpack_mysqlcompress&#65306;MySQL&#25968;&#25454;&#28304;&#35299;&#21387;&#23383;&#27573;&#35774;&#32622;">unpack_mysqlcompress</a> directives)</li>
<li class="listitem">added nested brackers and NOTs support to <a class="link" href="#extended-syntax" title="5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;">query language</a>, rewritten query parser</li>
<li class="listitem">added persistent connections support (<a class="link" href="#api-func-open" title="8.8.1.&nbsp;Open (&#25171;&#24320;&#36830;&#25509;)">Open()</a> and <a class="link" href="#api-func-close" title="8.8.2.&nbsp;Close &#65288;&#20851;&#38381;&#36830;&#25509;&#65289;">Close()</a> API calls)</li>
<li class="listitem">added <a class="link" href="#conf-index-exact-words" title="11.2.42.&nbsp;index_exact_words&#65306;&#35789;&#24178;&#21270;&#21518;&#21407;&#35789;&#32034;&#24341;">index_exact_words</a> feature, and exact form operator to query language ("hello =world")</li>
<li class="listitem">added status variables support to SphinxSE (SHOW STATUS LIKE 'sphinx_%')</li>
<li class="listitem">added <a class="link" href="#conf-max-packet-size" title="11.4.17.&nbsp;max_packet_size&#65306;&#26368;&#22823;&#21253;&#22823;&#23567;">max_packet_size</a> directive (was hardcoded at 8M before)</li>
<li class="listitem">added UNIX socket support, and multi-interface support (<a class="link" href="#conf-listen" title="11.4.1.&nbsp;listen&#65306;&#30417;&#21548;&#35774;&#32622;">listen</a> directive)</li>
<li class="listitem">added star-syntax support to <a class="link" href="#api-func-buildexcerpts" title="8.7.1.&nbsp;BuildExcerpts &#65288;&#20135;&#29983;&#25991;&#26412;&#25688;&#35201;&#21644;&#39640;&#20142;&#65289;">BuildExcerpts()</a> API call</li>
<li class="listitem">added inplace inversion of .spa and .spp (<a class="link" href="#conf-inplace-enable" title="11.2.37.&nbsp;inplace_enable&#65306;&#21407;&#22320;&#32034;&#24341;&#20498;&#36716;&#35774;&#32622;">inplace_enable</a> directive, 1.5-2x less disk space for indexing)</li>
<li class="listitem">added builtin Czech stemmer (morphology=stem_cz)</li>
<li class="listitem">added <a class="link" href="#sort-expr" title="5.6.&nbsp;SPH_SORT_EXPR &#27169;&#24335;">IDIV(), NOW(), INTERVAL(), IN() functions</a> to expressions</li>
<li class="listitem">added index-level early-reject based on filters</li>
<li class="listitem">added MVA updates feature (<a class="link" href="#conf-mva-updates-pool" title="11.4.18.&nbsp;mva_updates_pool&#65306;MVA&#26356;&#26032;&#20849;&#20139;&#20869;&#23384;">mva_updates_pool</a> directive)</li>
<li class="listitem">added select-list feature with computed expressions support (see <a class="link" href="#api-func-setselect" title="8.2.4.&nbsp;SetSelect (&#35774;&#32622;&#36820;&#22238;&#20449;&#24687;&#30340;&#20869;&#23481;)">SetSelect()</a> API call, test.php --select switch), protocol 1.22</li>
<li class="listitem">added integer expressions support (2x faster than float)</li>
<li class="listitem">added multiforms support (multiple source words in wordforms file)</li>
<li class="listitem">added <a class="link" href="#api-func-setrankingmode" title="8.3.2.&nbsp;SetRankingMode &#65288;&#35774;&#32622;&#35780;&#20998;&#27169;&#24335;&#65289;">legacy rankers</a> (MATCH_ALL/MATCH_ANY/etc), removed legacy matching code (everything runs on V2 engine now)</li>
<li class="listitem">added <a class="link" href="#extended-syntax" title="5.3.&nbsp;&#25193;&#23637;&#26597;&#35810;&#35821;&#27861;">field position limit</a> modifier to field operator (syntax: @title[50] hello world)</li>
<li class="listitem">added killlist support (<a class="link" href="#conf-sql-query-killlist" title="11.1.16.&nbsp;sql_query_killlist&#65306;Kill-list&#26597;&#35810;">sql_query_killlist</a> directive, --merge-killlists switch)</li>
<li class="listitem">added on-disk SPI support (<a class="link" href="#conf-ondisk-dict" title="11.2.36.&nbsp;ondisk_dict&#65306;&#23383;&#20856;&#25991;&#20214;&#20445;&#25345;&#35774;&#32622;">ondisk_dict</a> directive)</li>
<li class="listitem">added indexer IO stats</li>
<li class="listitem">added periodic .spa flush (<a class="link" href="#conf-attr-flush-period" title="11.4.15.&nbsp;attr_flush_period&#65306;&#23646;&#24615;&#21047;&#26032;&#21608;&#26399;">attr_flush_period</a> directive)</li>
<li class="listitem">added config reload on SIGHUP</li>
<li class="listitem">added per-query attribute overrides feature (see <a class="link" href="#api-func-setoverride" title="8.2.3.&nbsp;SetOverride &#65288;&#35774;&#32622;&#20020;&#26102;&#23646;&#24615;&#20540;&#35206;&#30422;&#65289;">SetOverride()</a> API call); protocol 1.21</li>
<li class="listitem">added signed 64bit attrs support (<a class="link" href="#conf-sql-attr-bigint" title="11.1.19.&nbsp;sql_attr_bigint&#65306;&#38271;&#25972;&#22411;&#23646;&#24615;">sql_attr_bigint</a> directive)</li>
<li class="listitem">improved HTML stripper to also skip PIs (&lt;? ... ?&gt;, such as &lt;?php ... ?&gt;)</li>
<li class="listitem">improved excerpts speed (upto 50x faster on big documents)</li>
<li class="listitem">fixed a short window of searchd inaccessibility on startup (started listen()ing too early before)</li>
<li class="listitem">fixed .spa loading on systems where read() is 2GB capped</li>
<li class="listitem">fixed infixes vs morphology issues</li>
<li class="listitem">fixed backslash escaping, added backslash to EscapeString()</li>
<li class="listitem">fixed handling of over-2GB dictionary files (.spi)</li>
</ul></div></div>
<div class="sect1" title="A.6.&nbsp;Version 0.9.8.1, 30 oct 2008"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel0981"></a>A.6.&nbsp;Version 0.9.8.1, 30 oct 2008</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added configure script to libsphinxclient</li>
<li class="listitem">changed proximity/quorum operator syntax to require whitespace after length</li>
<li class="listitem">fixed potential head process crash on SIGPIPE during "maxed out" message</li>
<li class="listitem">fixed handling of incomplete remote replies (caused over-degraded distributed results, in rare cases)</li>
<li class="listitem">fixed sending of big remote requests (caused distributed requests to fail, in rare cases)</li>
<li class="listitem">fixed FD_SET() overflow (caused searchd to crash on startup, in rare cases)</li>
<li class="listitem">fixed MVA vs distributed indexes (caused loss of 1st MVA value in result set)</li>
<li class="listitem">fixed tokenizing of exceptions terminated by specials (eg. "GPS AT&amp;T" in extended mode)</li>
<li class="listitem">fixed buffer overrun in stemmer on overlong tokens occasionally emitted by proximity/quorum operator parser (caused crashes on certain proximity/quorum queries)</li>
<li class="listitem">fixed wordcount ranker (could be dropping hits)</li>
<li class="listitem">fixed --merge feature (numerous different fixes, caused broken indexes)</li>
<li class="listitem">fixed --merge-dst-range performance</li>
<li class="listitem">fixed prefix/infix generation for stopwords</li>
<li class="listitem">fixed ignore_chars vs specials</li>
<li class="listitem">fixed misplaced F_SETLKW check (caused certain build types, eg. RPM build on FC8, to fail)</li>
<li class="listitem">fixed dictionary-defined charsets support in spelldump, added \x-style wordchars support</li>
<li class="listitem">fixed Java API to properly send long strings (over 64K; eg. long document bodies for excerpts)</li>
<li class="listitem">fixed Python API to accept offset/limit of 'long' type</li>
<li class="listitem">fixed default ID range (that filtered out all 64-bit values) in Java and Python APIs</li>
</ul></div></div>
<div class="sect1" title="A.7.&nbsp;Version 0.9.8, 14 jul 2008"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel098"></a>A.7.&nbsp;Version 0.9.8, 14 jul 2008</h2></div></div></div>
<h3>Indexing</h3><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added support for 64-bit document and keyword IDs, --enable-id64 switch to configure</li>
<li class="listitem">added support for floating point attributes</li>
<li class="listitem">added support for bitfields in attributes, <a class="link" href="#conf-sql-attr-bool" title="11.1.18.&nbsp;sql_attr_bool&#65306;&#24067;&#23572;&#23646;&#24615;">sql_attr_bool</a> directive and bit-widths part in <a class="link" href="#conf-sql-attr-uint" title="11.1.17.&nbsp;sql_attr_uint&#65306;&#25972;&#25968;&#23646;&#24615;">sql_attr_uint</a> directive</li>
<li class="listitem">added support for multi-valued attributes (MVA)</li>
<li class="listitem">added metaphone preprocessor</li>
<li class="listitem">added libstemmer library support, provides stemmers for a number of additional languages</li>
<li class="listitem">added xmlpipe2 source type, that supports arbitrary fields and attributes</li>
<li class="listitem">added word form dictionaries, <a class="link" href="#conf-wordforms" title="11.2.12.&nbsp;wordforms&#65306;&#35789;&#24418;&#23383;&#20856;">wordforms</a> directive (and spelldump utility)</li>
<li class="listitem">added tokenizing exceptions, <a class="link" href="#conf-exceptions" title="11.2.13.&nbsp;exceptions&#65306;&#35789;&#27719;&#29305;&#20363;&#22788;&#29702;">exceptions</a> directive</li>
<li class="listitem">added an option to fully remove element contents to HTML stripper, <a class="link" href="#conf-html-remove-elements" title="11.2.29.&nbsp;html_remove_elements&#65306;HTML&#20803;&#32032;&#28165;&#29702;">html_remove_elements</a> directive</li>
<li class="listitem">added HTML entities decoder (with full XHTML1 set support) to HTML stripper</li>
<li class="listitem">added per-index HTML stripping settings, <a class="link" href="#conf-html-strip" title="11.2.27.&nbsp;html_strip&#65306;HTMl&#26631;&#35760;&#28165;&#29702;">html_strip</a>, <a class="link" href="#conf-html-index-attrs" title="11.2.28.&nbsp;html_index_attrs&#65306;HTML&#26631;&#31614;&#23646;&#24615;&#32034;&#24341;&#35774;&#32622;">html_index_attrs</a>, and <a class="link" href="#conf-html-remove-elements" title="11.2.29.&nbsp;html_remove_elements&#65306;HTML&#20803;&#32032;&#28165;&#29702;">html_remove_elements</a> directives</li>
<li class="listitem">added IO load throttling, <a class="link" href="#conf-max-iops" title="11.3.2.&nbsp;max_iops&#65306;&#27599;&#31186;IO&#25805;&#20316;&#38480;&#21046;">max_iops</a> and <a class="link" href="#conf-max-iosize" title="11.3.3.&nbsp;max_iosize&#65306;&#26368;&#22823;IO&#25805;&#20316;&#38480;&#21046;">max_iosize</a> directives</li>
<li class="listitem">added SQL load throttling, <a class="link" href="#conf-sql-ranged-throttle" title="11.1.32.&nbsp;sql_ranged_throttle&#65306;&#20998;&#21306;&#26597;&#35810;&#38388;&#38548;&#26102;&#38388;">sql_ranged_throttle</a> directive</li>
<li class="listitem">added an option to index prefixes/infixes for given fields only, <a class="link" href="#conf-prefix-fields" title="11.2.20.&nbsp;prefix_fields&#65306;&#21069;&#32512;&#32034;&#24341;&#23383;&#27573;&#21015;&#34920;">prefix_fields</a> and <a class="link" href="#conf-infix-fields" title="11.2.21.&nbsp;infix_fields&#65306;&#20013;&#32512;&#32034;&#24341;&#23383;&#27573;&#21015;&#34920;">infix_fields</a> directives</li>
<li class="listitem">added an option to ignore certain characters (instead of just treating them as whitespace), <a class="link" href="#conf-ignore-chars" title="11.2.17.&nbsp;ignore_chars&#65306;&#24573;&#30053;&#23383;&#31526;&#34920;">ignore_chars</a> directive</li>
<li class="listitem">added an option to increment word position on phrase boundary characters, <a class="link" href="#conf-phrase-boundary" title="11.2.25.&nbsp;phrase_boundary&#65306;&#35789;&#32452;&#36793;&#30028;&#31526;&#21015;&#34920;">phrase_boundary</a> and <a class="link" href="#conf-phrase-boundary-step" title="11.2.26.&nbsp;phrase_boundary_step&#65306;&#35789;&#32452;&#36793;&#30028;&#20301;&#32622;&#22686;&#37327;">phrase_boundary_step</a> directives</li>
<li class="listitem">added --merge-dst-range switch (and filters) to index merging feature (--merge switch)</li>
<li class="listitem">added <a class="link" href="#conf-mysql-connect-flags" title="11.1.8.&nbsp;mysql_connect_flags&#65306;MySQL&#36830;&#25509;&#21442;&#25968;">mysql_connect_flags</a> directive (eg. to reduce indexing time MySQL network traffic and/or time)</li>
<li class="listitem">improved ordinals sorting; now runs in fixed RAM</li>
<li class="listitem">improved handling of documents with zero/NULL ids, now skipping them instead of aborting</li>
</ul></div>
<h3>Search daemon</h3><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added an option to unlink old index on succesful rotation, <a class="link" href="#conf-unlink-old" title="11.4.14.&nbsp;unlink_old&#65306;&#26087;&#32034;&#24341;&#28165;&#29702;">unlink_old</a> directive</li>
<li class="listitem">added an option to keep index files open at all times (fixes subtle races on rotation), <a class="link" href="#conf-preopen" title="11.2.35.&nbsp;preopen&#65306;&#32034;&#24341;&#25991;&#20214;&#39044;&#24320;&#21551;">preopen</a> and <a class="link" href="#conf-preopen-indexes" title="11.4.13.&nbsp;preopen_indexes&#65306;&#32034;&#24341;&#39044;&#24320;&#21551;">preopen_indexes</a> directives</li>
<li class="listitem">added an option to profile searchd disk I/O, --iostats command-line option</li>
<li class="listitem">added an option to rotate index seamlessly (fully avoids query stalls), <a class="link" href="#conf-seamless-rotate" title="11.4.12.&nbsp;seamless_rotate&#65306;&#26080;&#32541;&#36718;&#25442;">seamless_rotate</a> directive</li>
<li class="listitem">added HTML stripping support to excerpts (uses per-index settings)</li>
<li class="listitem">added 'exact_phrase', 'single_passage', 'use_boundaries', 'weight_order 'options to <a class="link" href="#api-func-buildexcerpts" title="8.7.1.&nbsp;BuildExcerpts &#65288;&#20135;&#29983;&#25991;&#26412;&#25688;&#35201;&#21644;&#39640;&#20142;&#65289;">BuildExcerpts()</a> API call</li>
<li class="listitem">added distributed attribute updates propagation</li>
<li class="listitem">added distributed retries on master node side</li>
<li class="listitem">added log reopen on SIGUSR1</li>
<li class="listitem">added --stop switch (sends SIGTERM to running instance)</li>
<li class="listitem">added Windows service mode, and --servicename switch</li>
<li class="listitem">added Windows --rotate support</li>
<li class="listitem">improved log timestamping, now with millisecond precision</li>
</ul></div>
<h3>Querying</h3><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added extended engine V2 (faster, cleaner, better; SPH_MATCH_EXTENDED2 mode)</li>
<li class="listitem">added ranking modes support (V2 engine only; <a class="link" href="#api-func-setrankingmode" title="8.3.2.&nbsp;SetRankingMode &#65288;&#35774;&#32622;&#35780;&#20998;&#27169;&#24335;&#65289;">SetRankingMode()</a> API call)</li>
<li class="listitem">added quorum searching support to query language (V2 engine only; example: "any three of all these words"/3)</li>
<li class="listitem">added query escaping support to query language, and <a class="link" href="#api-func-escapestring" title="8.7.4.&nbsp;EscapeString &#65288;&#36716;&#20041;&#29305;&#27530;&#23383;&#31526;&#65289;">EscapeString()</a> API call</li>
<li class="listitem">added multi-field syntax support to query language (example: "@(field1,field2) something"), and @@relaxed field checks option</li>
<li class="listitem">added optional star-syntax ('word*') support in keywords, <a class="link" href="#conf-enable-star" title="11.2.22.&nbsp;enable_star&#65306;&#26143;&#21495;&#35821;&#27861;">enable_star</a> directive (for prefix/infix indexes only)</li>
<li class="listitem">added full-scan support (query must be fully empty; can perform block-reject optimization)</li>
<li class="listitem">added COUNT(DISTINCT(attr)) calculation support, <a class="link" href="#api-func-setgroupdistinct" title="8.5.2.&nbsp;SetGroupDistinct &#65288;&#35774;&#32622;&#20998;&#32452;&#35745;&#31639;&#19981;&#21516;&#20540;&#30340;&#23646;&#24615;&#65289;">SetGroupDistinct()</a> API call</li>
<li class="listitem">added group-by on MVA support, <a class="link" href="#api-func-setarrayresult" title="8.1.6.&nbsp;SetArrayResult &#65288;&#35774;&#32622;&#32467;&#26524;&#36820;&#22238;&#26684;&#24335;&#65289;">SetArrayResult()</a> PHP API call</li>
<li class="listitem">added per-index weights feature, <a class="link" href="#api-func-setindexweights" title="8.3.6.&nbsp;SetIndexWeights &#65288;&#35774;&#32622;&#32034;&#24341;&#26435;&#37325;&#65289;">SetIndexWeights()</a> API call</li>
<li class="listitem">added geodistance support, <a class="link" href="#api-func-setgeoanchor" title="8.4.5.&nbsp;SetGeoAnchor &#65288;&#35774;&#32622;&#22320;&#34920;&#36317;&#31163;&#38170;&#28857;&#65289;">SetGeoAnchor()</a> API call</li>
<li class="listitem">added result set sorting by arbitrary expressions in run time (eg. "@weight+log(price)*2.5"), SPH_SORT_EXPR mode</li>
<li class="listitem">added result set sorting by @custom compile-time sorting function (see src/sphinxcustomsort.inl)</li>
<li class="listitem">added result set sorting by @random value</li>
<li class="listitem">added result set merging for indexes with different schemas</li>
<li class="listitem">added query comments support (3rd arg to <a class="link" href="#api-func-query" title="8.6.1.&nbsp;Query &#65288;&#26597;&#35810;&#65289;">Query()</a>/<a class="link" href="#api-func-addquery" title="8.6.2.&nbsp;AddQuery &#65288;&#22686;&#21152;&#25209;&#37327;&#26597;&#35810;&#65289;">AddQuery()</a> API calls, copied verbatim to query log)</li>
<li class="listitem">added keyword extraction support, <a class="link" href="#api-func-buildkeywords" title="8.7.3.&nbsp;BuildKeywords &#65288;&#33719;&#21462;&#20998;&#35789;&#32467;&#26524;&#65289;">BuildKeywords()</a> API call</li>
<li class="listitem">added binding field weights by name, <a class="link" href="#api-func-setfieldweights" title="8.3.5.&nbsp;SetFieldWeights &#65288;&#35774;&#32622;&#23383;&#27573;&#26435;&#37325;&#65289;">SetFieldWeights()</a> API call</li>
<li class="listitem">added optional limit on query time, <a class="link" href="#api-func-setmaxquerytime" title="8.2.2.&nbsp;SetMaxQueryTime &#65288;&#35774;&#32622;&#26368;&#22823;&#25628;&#32034;&#26102;&#38388;&#65289;">SetMaxQueryTime()</a> API call</li>
<li class="listitem">added optional limit on found matches count (4rd arg to <a class="link" href="#api-func-setlimits" title="8.2.1.&nbsp;SetLimits &#65288;&#35774;&#32622;&#32467;&#26524;&#38598;&#20559;&#31227;&#37327;&#65289;">SetLimits()</a> API call, so-called 'cutoff')</li>
</ul></div>
<h3>APIs and SphinxSE</h3><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added pure C API (libsphinxclient)</li>
<li class="listitem">added Ruby API (thanks to Dmytro Shteflyuk)</li>
<li class="listitem">added Java API</li>
<li class="listitem">added SphinxSE support for MVAs (use varchar), floats (use float), 64bit docids (use bigint)</li>
<li class="listitem">added SphinxSE options "floatrange", "geoanchor", "fieldweights", "indexweights", "maxquerytime", "comment", "host" and "port"; and support for "expr:CLAUSE"</li>
<li class="listitem">improved SphinxSE max query size (using MySQL condition pushdown), upto 256K now</li>
</ul></div>
<h3>General</h3><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added scripting (shebang syntax) support to config files (example: #!/usr/bin/php in the first line)</li>
<li class="listitem">added unified config handling and validation to all programs</li>
<li class="listitem">added unified documentation </li>
<li class="listitem">added .spec file for RPM builds</li>
<li class="listitem">added automated testing suite</li>
<li class="listitem">improved index locking, now fcntl()-based instead of buggy file-existence-based</li>
<li class="listitem">fixed unaligned RAM accesses, now works on SPARC and ARM</li>
</ul></div>
<h3><a name="rel098-fixes-since-rc2"></a>Changes and fixes since 0.9.8-rc2</h3><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added pure C API (libsphinxclient)</li>
<li class="listitem">added Ruby API</li>
<li class="listitem">added SetConnectTimeout() PHP API call</li>
<li class="listitem">added allowed type check to UpdateAttributes() handler (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=174" target="_top">#174</a>)</li>
<li class="listitem">added defensive MVA checks on index preload (protection against broken indexes, bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=168" target="_top">#168</a>)</li>
<li class="listitem">added sphinx-min.conf sample file</li>
<li class="listitem">added --without-iconv switch to configure</li>
<li class="listitem">removed redundant -lz dependency in searchd</li>
<li class="listitem">removed erroneous "xmlpipe2 deprecated" warning</li>
<li class="listitem">fixed EINTR handling in piped read (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=166" target="_top">#166</a>)</li>
<li class="listitem">fixup query time before logging and sending to client (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=153" target="_top">#153</a>)</li>
<li class="listitem">fixed attribute updates vs full-scan early-reject index (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=149" target="_top">#149</a>)</li>
<li class="listitem">fixed gcc warnings (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=160" target="_top">#160</a>)</li>
<li class="listitem">fixed mysql connection attempt vs pgsql source type (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=165" target="_top">#165</a>)</li>
<li class="listitem">fixed 32-bit wraparound when preloading over 2 GB files</li>
<li class="listitem">fixed "out of memory" message vs over 2 GB allocs (bug <a class="ulink" href="http://sphinxsearch.com/bugs/view.php?id=116" target="_top">#116</a>)</li>
<li class="listitem">fixed unaligned RAM access detection on ARM (where unaligned reads do not crash but produce wrong results)</li>
<li class="listitem">fixed missing full scan results in some cases</li>
<li class="listitem">fixed several bugs in --merge, --merge-dst-range</li>
<li class="listitem">fixed @geodist vs MultiQuery and filters, @expr vs MultiQuery</li>
<li class="listitem">fixed GetTokenEnd() vs 1-grams (was causing crash in excerpts)</li>
<li class="listitem">fixed sql_query_range to handle empty strings in addition to NULL strings (Postgres specific)</li>
<li class="listitem">fixed morphology=none vs infixes</li>
<li class="listitem">fixed case sensitive attributes names in UpdateAttributes()</li>
<li class="listitem">fixed ext2 ranking vs. stopwords (now using atompos from query parser)</li>
<li class="listitem">fixed EscapeString() call</li>
<li class="listitem">fixed escaped specials (now handled as whitespace if not in charset)</li>
<li class="listitem">fixed schema minimizer (now handles type/size mismatches)</li>
<li class="listitem">fixed word stats in extended2; stemmed form is now returned</li>
<li class="listitem">fixed spelldump case folding vs dictionary-defined character sets</li>
<li class="listitem">fixed Postgres BOOLEAN handling </li>
<li class="listitem">fixed enforced "inline" docinfo on empty indexes (normally ok, but index merge was really confused)</li>
<li class="listitem">fixed rare count(distinct) out-of-bounds issue (it occasionaly caused too high @distinct values)</li>
<li class="listitem">fixed hangups on documents with id=DOCID_MAX in some cases</li>
<li class="listitem">fixed rare crash in tokenizer (prefixed synonym vs. input stream eof)</li>
<li class="listitem">fixed query parser vs "aaa (bbb ccc)|ddd" queries</li>
<li class="listitem">fixed BuildExcerpts() request in Java API</li>
<li class="listitem">fixed Postgres specific memory leak</li>
<li class="listitem">fixed handling of overshort keywords (less than min_word_len)</li>
<li class="listitem">fixed HTML stripper (now emits space after indexed attributes)</li>
<li class="listitem">fixed 32-field case in query parser</li>
<li class="listitem">fixed rare count(distinct) vs. querying multiple local indexes vs. reusable sorter issue</li>
<li class="listitem">fixed sorting of negative floats in SPH_SORT_EXTENDED mode</li>
</ul></div></div>
<div class="sect1" title="A.8.&nbsp;Version 0.9.7, 02 apr 2007"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel097"></a>A.8.&nbsp;Version 0.9.7, 02 apr 2007</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added support for <code class="option">sql_str2ordinal_column</code></li>
<li class="listitem">added support for upto 5 sort-by attrs (in extended sorting mode)</li>
<li class="listitem">added support for separate groups sorting clause (in group-by mode)</li>
<li class="listitem">added support for on-the-fly attribute updates (PRE-ALPHA; will change heavily; use for preliminary testing ONLY)</li>
<li class="listitem">added support for zero/NULL attributes</li>
<li class="listitem">added support for 0.9.7 features to SphinxSE</li>
<li class="listitem">added support for n-grams (alpha, 1-grams only for now)</li>
<li class="listitem">added support for warnings reported to client</li>
<li class="listitem">added support for exclude-filters</li>
<li class="listitem">added support for prefix and infix indexing (see <code class="option">max_prefix_len</code>, <code class="option">max_infix_len</code>)</li>
<li class="listitem">added <code class="option">@*</code> syntax to reset current field to query language</li>
<li class="listitem">added removal of duplicate entries in query index order</li>
<li class="listitem">added PHP API workarounds for PHP signed/unsigned braindamage</li>
<li class="listitem">added locks to avoid two concurrent indexers working on same index</li>
<li class="listitem">added check for existing attributes vs. <code class="option">docinfo=none</code> case</li>
<li class="listitem">improved groupby code a lot (better precision, and upto 25x times faster in extreme cases)</li>
<li class="listitem">improved error handling and reporting</li>
<li class="listitem">improved handling of broken indexes (reports error instead of hanging/crashing)</li>
<li class="listitem">improved <code class="option">mmap()</code> limits for attributes and wordlists (now able to map over 4 GB on x64 and over 2 GB on x32 where possible)</li>
<li class="listitem">improved <code class="option">malloc()</code> pressure in head daemon (search time should not degrade with time any more)</li>
<li class="listitem">improved <code class="filename">test.php</code> command line options</li>
<li class="listitem">improved error reporting (distributed query, broken index etc issues now reported to client)</li>
<li class="listitem">changed default network packet size to be 8M, added extra checks</li>
<li class="listitem">fixed division by zero in BM25 on 1-document collections (in extended matching mode)</li>
<li class="listitem">fixed <code class="filename">.spl</code> files getting unlinked</li>
<li class="listitem">fixed crash in schema compatibility test</li>
<li class="listitem">fixed UTF-8 Russian stemmer</li>
<li class="listitem">fixed requested matches count when querying distributed agents</li>
<li class="listitem">fixed signed vs. unsigned issues everywhere (ranged queries, CLI search output, and obtaining docid)</li>
<li class="listitem">fixed potential crashes vs. negative query offsets</li>
<li class="listitem">fixed 0-match docs vs. extended mode vs. stats</li>
<li class="listitem">fixed group/timestamp filters being ignored if querying from older clients</li>
<li class="listitem">fixed docs to mention <code class="option">pgsql</code> source type</li>
<li class="listitem">fixed issues with explicit '&amp;' in extended matching mode</li>
<li class="listitem">fixed wrong assertion in SBCS encoder</li>
<li class="listitem">fixed crashes with no-attribute indexes after rotate</li>
</ul></div></div>
<div class="sect1" title="A.9.&nbsp;Version 0.9.7-rc2, 15 dec 2006"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel097rc2"></a>A.9.&nbsp;Version 0.9.7-rc2, 15 dec 2006</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added support for extended matching mode (query language)</li>
<li class="listitem">added support for extended sorting mode (sorting clauses)</li>
<li class="listitem">added support for SBCS excerpts</li>
<li class="listitem">added <code class="option">mmap()ing</code> for attributes and wordlist (improves search time, speeds up <code class="option">fork()</code> greatly)</li>
<li class="listitem">fixed attribute name handling to be case insensitive</li>
<li class="listitem">fixed default compiler options to simplify post-mortem debugging (added <code class="option">-g</code>, removed <code class="option">-fomit-frame-pointer</code>)</li>
<li class="listitem">fixed rare memory leak</li>
<li class="listitem">fixed "hello hello" queries in "match phrase" mode</li>
<li class="listitem">fixed issue with excerpts, texts and overlong queries</li>
<li class="listitem">fixed logging multiple index name (no longer tokenized)</li>
<li class="listitem">fixed trailing stopword not flushed from tokenizer</li>
<li class="listitem">fixed boolean evaluation</li>
<li class="listitem">fixed pidfile being wrongly <code class="option">unlink()ed</code> on <code class="option">bind()</code> failure</li>
<li class="listitem">fixed <code class="option">--with-mysql-includes/libs</code> (they conflicted with well-known paths)</li>
<li class="listitem">fixes for 64-bit platforms</li>
</ul></div></div>
<div class="sect1" title="A.10.&nbsp;Version 0.9.7-rc1, 26 oct 2006"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel097rc"></a>A.10.&nbsp;Version 0.9.7-rc1, 26 oct 2006</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added alpha index merging code</li>
<li class="listitem">added an option to decrease <code class="option">max_matches</code> per-query</li>
<li class="listitem">added an option to specify IP address for searchd to listen on</li>
<li class="listitem">added support for unlimited amount of configured sources and indexes</li>
<li class="listitem">added support for group-by queries</li>
<li class="listitem">added support for /2 range modifier in charset_table</li>
<li class="listitem">added support for arbitrary amount of document attributes</li>
<li class="listitem">added logging filter count and index name</li>
<li class="listitem">added <code class="option">--with-debug</code> option to configure to compile in debug mode</li>
<li class="listitem">added <code class="option">-DNDEBUG</code> when compiling in default mode</li>
<li class="listitem">improved search time (added doclist size hints, in-memory wordlist cache, and used VLB coding everywhere)</li>
<li class="listitem">improved (refactored) SQL driver code (adding new drivers should be very easy now)</li>
<li class="listitem">improved exceprts generation</li>
<li class="listitem">fixed issue with empty sources and ranged queries</li>
<li class="listitem">fixed querying purely remote distributed indexes</li>
<li class="listitem">fixed suffix length check in English stemmer in some cases</li>
<li class="listitem">fixed UTF-8 decoder for codes over U+20000 (for CJK)</li>
<li class="listitem">fixed UTF-8 encoder for 3-byte sequences (for CJK)</li>
<li class="listitem">fixed overshort (less than <code class="option">min_word_len</code>) words prepended to next field</li>
<li class="listitem">fixed source connection order (indexer does not connect to all sources at once now)</li>
<li class="listitem">fixed line numbering in config parser</li>
<li class="listitem">fixed some issues with index rotation</li>
</ul></div></div>
<div class="sect1" title="A.11.&nbsp;Version 0.9.6, 24 jul 2006"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel096"></a>A.11.&nbsp;Version 0.9.6, 24 jul 2006</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added support for empty indexes</li>
<li class="listitem">added support for multiple sql_query_pre/post/post_index</li>
<li class="listitem">fixed timestamp ranges filter in "match any" mode</li>
<li class="listitem">fixed configure issues with --without-mysql and --with-pgsql options</li>
<li class="listitem">fixed building on Solaris 9</li>
</ul></div></div>
<div class="sect1" title="A.12.&nbsp;Version 0.9.6-rc1, 26 jun 2006"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel096rc1"></a>A.12.&nbsp;Version 0.9.6-rc1, 26 jun 2006</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">added boolean queries support (experimental, beta version)</li>
<li class="listitem">added simple file-based query cache (experimental, beta version)</li>
<li class="listitem">added storage engine for MySQL 5.0 and 5.1 (experimental, beta version)</li>
<li class="listitem">added GNU style <code class="filename">configure</code> script</li>
<li class="listitem">added new searchd protocol (all binary, and should be backwards compatible)</li>
<li class="listitem">added distributed searching support to searchd</li>
<li class="listitem">added PostgreSQL driver</li>
<li class="listitem">added excerpts generation</li>
<li class="listitem">added <code class="option">min_word_len</code> option to index</li>
<li class="listitem">added <code class="option">max_matches</code> option to searchd, removed hardcoded MAX_MATCHES limit</li>
<li class="listitem">added initial documentation, and a working <code class="filename">example.sql</code></li>
<li class="listitem">added support for multiple sources per index</li>
<li class="listitem">added soundex support</li>
<li class="listitem">added group ID ranges support</li>
<li class="listitem">added <code class="option">--stdin</code> command-line option to search utility</li>
<li class="listitem">added <code class="option">--noprogress</code> option to indexer</li>
<li class="listitem">added <code class="option">--index</code> option to search</li>
<li class="listitem">fixed UTF-8 decoder (3-byte codepoints did not work)</li>
<li class="listitem">fixed PHP API to handle big result sets faster</li>
<li class="listitem">fixed config parser to handle empty values properly</li>
<li class="listitem">fixed redundant <code class="code">time(NULL)</code> calls in time-segments mode</li>
</ul></div></div></div></div>
</body></html>